module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/worker-loader/dist/workers/InlineWorker.js":
/*!*****************************************************************!*\
  !*** ./node_modules/worker-loader/dist/workers/InlineWorker.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd29ya2VyLWxvYWRlci9kaXN0L3dvcmtlcnMvSW5saW5lV29ya2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1qb3lSUEMvLi9ub2RlX21vZHVsZXMvd29ya2VyLWxvYWRlci9kaXN0L3dvcmtlcnMvSW5saW5lV29ya2VyLmpzPzc3ODUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMzQzOTEzL2hvdy10by1jcmVhdGUtYS13ZWItd29ya2VyLWZyb20tYS1zdHJpbmdcblxudmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29udGVudCwgdXJsKSB7XG4gIHRyeSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBibG9iO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBCbG9iQnVpbGRlciA9IERlcHJlY2F0ZWQsIGJ1dCB3aWRlbHkgaW1wbGVtZW50ZWRcbiAgICAgICAgdmFyIEJsb2JCdWlsZGVyID0gd2luZG93LkJsb2JCdWlsZGVyIHx8IHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlciB8fCB3aW5kb3cuTW96QmxvYkJ1aWxkZXIgfHwgd2luZG93Lk1TQmxvYkJ1aWxkZXI7XG5cbiAgICAgICAgYmxvYiA9IG5ldyBCbG9iQnVpbGRlcigpO1xuXG4gICAgICAgIGJsb2IuYXBwZW5kKGNvbnRlbnQpO1xuXG4gICAgICAgIGJsb2IgPSBibG9iLmdldEJsb2IoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gVGhlIHByb3Bvc2VkIEFQSVxuICAgICAgICBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG5ldyBXb3JrZXIoJ2RhdGE6YXBwbGljYXRpb24vamF2YXNjcmlwdCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnQpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0lubGluZSB3b3JrZXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgV29ya2VyKHVybCk7XG4gIH1cbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/worker-loader/dist/workers/InlineWorker.js\n");

/***/ }),

/***/ "./package.json":
/*!**********************!*\
  !*** ./package.json ***!
  \**********************/
/*! exports provided: name, version, description, module, scripts, repository, keywords, author, license, bugs, homepage, dependencies, devDependencies, eslintConfig, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"name\\\":\\\"imjoy-rpc\\\",\\\"version\\\":\\\"0.2.0\\\",\\\"description\\\":\\\"Remote procedure calls for ImJoy.\\\",\\\"module\\\":\\\"index.js\\\",\\\"scripts\\\":{\\\"build\\\":\\\"rm -rf dist && npm run build-umd && npm run build-module\\\",\\\"build-umd\\\":\\\"webpack --config webpack.config.js --mode development --filename imjoy-rpc.js && webpack --config webpack.config.js --mode production --devtool source-map --filename imjoy-rpc.min.js\\\",\\\"build-module\\\":\\\"webpack --config webpack.config.js --mode development --libraryTarget commonjs2 --filename imjoy-rpc.module.js\\\",\\\"watch\\\":\\\"webpack --watch --progress --config webpack.config.js --mode production --devtool source-map --filename imjoy-rpc.min.js\\\",\\\"serve\\\":\\\"webpack-dev-server --filename imjoy-rpc.js\\\",\\\"stats\\\":\\\"webpack --profile --json > stats.json\\\",\\\"stats-prod\\\":\\\"webpack --profile --json --mode production > stats-prod.json\\\",\\\"analyze\\\":\\\"webpack-bundle-analyzer -p 9999 stats.json\\\",\\\"analyze-prod\\\":\\\"webpack-bundle-analyzer -p 9999 stats-prod.json\\\",\\\"clean\\\":\\\"rimraf dist/*\\\",\\\"deploy\\\":\\\"npm run build && node deploy-site.js\\\",\\\"format\\\":\\\"prettier --write \\\\\\\"{src,tests}/**/**\\\\\\\"\\\",\\\"check-format\\\":\\\"prettier --check \\\\\\\"{src,tests}/**/**\\\\\\\"\\\",\\\"test\\\":\\\"karma start --single-run --browsers ChromeHeadless,FirefoxHeadless karma.conf.js\\\",\\\"test-watch\\\":\\\"karma start --auto-watch --browsers ChromeHeadless,FirefoxHeadless karma.conf.js\\\"},\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"git+https://github.com/imjoy-team/imjoy-rpc.git\\\"},\\\"keywords\\\":[\\\"imjoy\\\",\\\"rpc\\\"],\\\"author\\\":\\\"imjoy-team <imjoy.team@gmail.com>\\\",\\\"license\\\":\\\"MIT\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/imjoy-team/imjoy-rpc/issues\\\"},\\\"homepage\\\":\\\"https://github.com/imjoy-team/imjoy-rpc\\\",\\\"dependencies\\\":{},\\\"devDependencies\\\":{\\\"@babel/core\\\":\\\"^7.0.0-beta.39\\\",\\\"@babel/plugin-syntax-dynamic-import\\\":\\\"^7.0.0-beta.39\\\",\\\"@babel/polyfill\\\":\\\"^7.0.0-beta.39\\\",\\\"@babel/preset-env\\\":\\\"^7.0.0-beta.39\\\",\\\"@types/requirejs\\\":\\\"^2.1.28\\\",\\\"babel-core\\\":\\\"^6.26.0\\\",\\\"babel-eslint\\\":\\\"^10.1.0\\\",\\\"babel-loader\\\":\\\"8.0.0-beta.2\\\",\\\"babel-runtime\\\":\\\"^6.26.0\\\",\\\"chai\\\":\\\"^4.2.0\\\",\\\"clean-webpack-plugin\\\":\\\"^0.1.19\\\",\\\"copy-webpack-plugin\\\":\\\"^5.0.5\\\",\\\"eslint\\\":\\\"^6.8.0\\\",\\\"eslint-config-prettier\\\":\\\"^4.2.0\\\",\\\"eslint-loader\\\":\\\"^4.0.2\\\",\\\"file-loader\\\":\\\"^0.11.2\\\",\\\"fs-extra\\\":\\\"^0.30.0\\\",\\\"gh-pages\\\":\\\"^2.0.1\\\",\\\"html-loader\\\":\\\"^0.5.5\\\",\\\"html-webpack-plugin\\\":\\\"^3.2.0\\\",\\\"json-loader\\\":\\\"^0.5.4\\\",\\\"karma\\\":\\\"^4.4.1\\\",\\\"karma-chrome-launcher\\\":\\\"^3.1.0\\\",\\\"karma-firefox-launcher\\\":\\\"^1.3.0\\\",\\\"karma-mocha\\\":\\\"^1.3.0\\\",\\\"karma-webpack\\\":\\\"^4.0.2\\\",\\\"lerna\\\":\\\"^3.8.0\\\",\\\"lodash.debounce\\\":\\\"^4.0.8\\\",\\\"mocha\\\":\\\"^7.1.2\\\",\\\"postcss\\\":\\\"^6.0.2\\\",\\\"prettier\\\":\\\"^1.6.1\\\",\\\"rimraf\\\":\\\"^2.6.2\\\",\\\"schema-utils\\\":\\\"^0.4.3\\\",\\\"socket.io-client\\\":\\\"^2.3.0\\\",\\\"style-loader\\\":\\\"^0.18.1\\\",\\\"url-loader\\\":\\\"^0.5.9\\\",\\\"webpack\\\":\\\"^4.0.0\\\",\\\"webpack-bundle-analyzer\\\":\\\"^3.3.2\\\",\\\"webpack-cli\\\":\\\"^3.1.2\\\",\\\"webpack-dev-server\\\":\\\"^3.1.1\\\",\\\"webpack-merge\\\":\\\"^4.1.1\\\",\\\"worker-loader\\\":\\\"^2.0.0\\\",\\\"write-file-webpack-plugin\\\":\\\"^4.5.1\\\"},\\\"eslintConfig\\\":{\\\"globals\\\":{\\\"document\\\":true,\\\"window\\\":true}}}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlLmpzb24uanMiLCJzb3VyY2VzIjpbXSwibWFwcGluZ3MiOiIiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./package.json\n");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! exports provided: RPC, API_VERSION, VERSION, setupBaseFrame, setupRPC */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupBaseFrame\", function() { return setupBaseFrame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupRPC\", function() { return setupRPC; });\n/* harmony import */ var _plugin_webworker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugin.webworker.js */ \"./src/plugin.webworker.js\");\n/* harmony import */ var _plugin_webworker_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_plugin_webworker_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _pluginIframe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pluginIframe.js */ \"./src/pluginIframe.js\");\n/* harmony import */ var _pluginWebPython_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pluginWebPython.js */ \"./src/pluginWebPython.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rpc.js */ \"./src/rpc.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"RPC\", function() { return _rpc_js__WEBPACK_IMPORTED_MODULE_4__[\"RPC\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"API_VERSION\", function() { return _rpc_js__WEBPACK_IMPORTED_MODULE_4__[\"API_VERSION\"]; });\n\n/* harmony import */ var _package_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../package.json */ \"./package.json\");\nvar _package_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../package.json */ \"./package.json\", 1);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VERSION\", function() { return _package_json__WEBPACK_IMPORTED_MODULE_5__[\"version\"]; });\n\n/**\n * Contains the code executed in the sandboxed frame under web-browser\n *\n * Tries to create a Web-Worker inside the frame and set up the\n * communication between the worker and the parent window. Some\n * browsers restrict creating a worker inside a sandboxed iframe - if\n * this happens, the plugin initialized right inside the frame (in the\n * same thread)\n */\n\n\n\n\n\n\n\nfunction inIframe() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}\n\nfunction getParamValue(paramName) {\n  const url = window.location.search.substring(1); //get rid of \"?\" in querystring\n\n  const qArray = url.split(\"&\"); //get key-value pairs\n\n  for (let i = 0; i < qArray.length; i++) {\n    const pArr = qArray[i].split(\"=\"); //split key and value\n\n    if (pArr[0] === paramName) return pArr[1]; //return value\n  }\n}\n/**\n * Initializes the plugin inside a web worker. May throw an exception\n * in case this was not permitted by the browser.\n */\n\n\nfunction setupWebWorker(config) {\n  if (!config.allow_execution) throw new Error(\"web-worker plugin can only work with allow_execution=true\");\n  const worker = new _plugin_webworker_js__WEBPACK_IMPORTED_MODULE_0___default.a(); // mixed content warning in Chrome silently skips worker\n  // initialization without exception, handling this with timeout\n\n  const fallbackTimeout = setTimeout(function () {\n    worker.terminate();\n    console.warn(`Plugin failed to start as a web-worker, running in an iframe instead.`);\n    Object(_pluginIframe_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(config);\n  }, 2000); // forwarding messages between the worker and parent window\n\n  worker.addEventListener(\"message\", function (e) {\n    let transferables = undefined;\n    const m = e.data;\n\n    if (m.type === \"worker-ready\") {\n      // send config to the worker\n      worker.postMessage({\n        type: \"connectRPC\",\n        config: config\n      });\n      clearTimeout(fallbackTimeout);\n      return;\n    } else if (m.type === \"initialized\") {\n      // complete the missing fields\n      m.config = Object.assign({}, config, m.config);\n    } else if (m.type === \"imjoy_remote_api_ready\") {\n      // if it's a webworker, there will be no api object returned\n      window.dispatchEvent(new CustomEvent(\"imjoy_remote_api_ready\", {\n        detail: null\n      }));\n    } else if (m.type === \"cacheRequirements\" && typeof cache_requirements === \"function\") {\n      cache_requirements(m.requirements);\n    } else if (m.type === \"disconnect\") {\n      worker.terminate();\n    } else {\n      if (m.__transferables__) {\n        transferables = m.__transferables__;\n        delete m.__transferables__;\n      }\n    }\n\n    parent.postMessage(m, config.target_origin || \"*\", transferables);\n  });\n  window.addEventListener(\"message\", function (e) {\n    let transferables = undefined;\n    const m = e.data;\n\n    if (m.__transferables__) {\n      transferables = m.__transferables__;\n      delete m.__transferables__;\n    }\n\n    worker.postMessage(m, transferables);\n  });\n}\n\nasync function setupBaseFrame(config) {\n  config = config || {};\n  config.name = config.name || \"Generic RPC App\";\n  config.type = config.type || getParamValue(\"_plugin_type\") || \"window\";\n  config.allow_execution = config.allow_execution || true;\n  config.enable_service_worker = config.enable_service_worker || true;\n\n  if (config.enable_service_worker) {\n    Object(_utils_js__WEBPACK_IMPORTED_MODULE_3__[\"setupServiceWorker\"])(config.target_origin, config.cache_requirements);\n  }\n\n  if (config.cache_requirements) {\n    delete config.cache_requirements;\n  }\n\n  config.forwarding_functions = config.forwarding_functions;\n\n  if (config.forwarding_functions === undefined) {\n    config.forwarding_functions = [\"close\", \"on\", \"off\", \"emit\"];\n\n    if ([\"rpc-window\", \"window\", \"web-python-window\"].includes(config.type)) {\n      config.forwarding_functions = config.forwarding_functions.concat([\"resize\", \"show\", \"hide\", \"refresh\"]);\n    }\n  } // expose the api object to window globally.\n  // note: the returned value will be null for webworker\n\n\n  window.api = await imjoyRPC.setupRPC(config);\n  return window.api;\n}\nfunction setupRPC(config) {\n  config = config || {};\n  if (!config.name) throw new Error(\"Please specify a name for your app.\");\n  config.version = config.version || \"0.1.0\";\n  config.description = config.description || `[TODO: add description for ${config.name} ]`;\n  config.type = config.type || \"rpc-window\";\n  config.id = config.id || Object(_utils_js__WEBPACK_IMPORTED_MODULE_3__[\"randId\"])();\n  config.allow_execution = config.allow_execution || false; // remove functions\n\n  config = Object.keys(config).reduce((p, c) => {\n    if (typeof config[c] !== \"function\") p[c] = config[c];\n    return p;\n  }, {});\n  return new Promise((resolve, reject) => {\n    if (inIframe()) {\n      if (config.type === \"web-worker\") {\n        try {\n          setupWebWorker(config);\n        } catch (e) {\n          // fallback to iframe\n          Object(_pluginIframe_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(config);\n        }\n      } else if (config.type === \"web-python\" || config.type === \"web-python-window\") {\n        Object(_pluginWebPython_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(config);\n      } else if ([\"rpc-window\", \"rpc-worker\", \"iframe\", \"window\"].includes(config.type)) {\n        Object(_pluginIframe_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(config);\n      } else {\n        console.error(\"Unsupported plugin type: \" + config.type);\n        reject(\"Unsupported plugin type: \" + config.type);\n      }\n\n      try {\n        this.handleEvent = e => {\n          // imjoy plugin api\n          resolve(e.detail);\n          window.removeEventListener(\"imjoy_remote_api_ready\", this);\n        };\n\n        window.addEventListener(\"imjoy_remote_api_ready\", this);\n      } catch (e) {\n        reject(e);\n      }\n    } else {\n      reject(new Error(\"imjoy-rpc should only run inside an iframe.\"));\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2ltam95UlBDL3NyYy9tYWluLmpzPzJlZTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb250YWlucyB0aGUgY29kZSBleGVjdXRlZCBpbiB0aGUgc2FuZGJveGVkIGZyYW1lIHVuZGVyIHdlYi1icm93c2VyXG4gKlxuICogVHJpZXMgdG8gY3JlYXRlIGEgV2ViLVdvcmtlciBpbnNpZGUgdGhlIGZyYW1lIGFuZCBzZXQgdXAgdGhlXG4gKiBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIHdvcmtlciBhbmQgdGhlIHBhcmVudCB3aW5kb3cuIFNvbWVcbiAqIGJyb3dzZXJzIHJlc3RyaWN0IGNyZWF0aW5nIGEgd29ya2VyIGluc2lkZSBhIHNhbmRib3hlZCBpZnJhbWUgLSBpZlxuICogdGhpcyBoYXBwZW5zLCB0aGUgcGx1Z2luIGluaXRpYWxpemVkIHJpZ2h0IGluc2lkZSB0aGUgZnJhbWUgKGluIHRoZVxuICogc2FtZSB0aHJlYWQpXG4gKi9cbmltcG9ydCBQbHVnaW5Xb3JrZXIgZnJvbSBcIi4vcGx1Z2luLndlYndvcmtlci5qc1wiO1xuaW1wb3J0IHNldHVwSWZyYW1lIGZyb20gXCIuL3BsdWdpbklmcmFtZS5qc1wiO1xuaW1wb3J0IHNldHVwV2ViUHl0aG9uIGZyb20gXCIuL3BsdWdpbldlYlB5dGhvbi5qc1wiO1xuaW1wb3J0IHsgc2V0dXBTZXJ2aWNlV29ya2VyLCByYW5kSWQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5leHBvcnQgeyBSUEMsIEFQSV9WRVJTSU9OIH0gZnJvbSBcIi4vcnBjLmpzXCI7XG5leHBvcnQgeyB2ZXJzaW9uIGFzIFZFUlNJT04gfSBmcm9tIFwiLi4vcGFja2FnZS5qc29uXCI7XG5cbmZ1bmN0aW9uIGluSWZyYW1lKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtVmFsdWUocGFyYW1OYW1lKSB7XG4gIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpOyAvL2dldCByaWQgb2YgXCI/XCIgaW4gcXVlcnlzdHJpbmdcbiAgY29uc3QgcUFycmF5ID0gdXJsLnNwbGl0KFwiJlwiKTsgLy9nZXQga2V5LXZhbHVlIHBhaXJzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcEFyciA9IHFBcnJheVtpXS5zcGxpdChcIj1cIik7IC8vc3BsaXQga2V5IGFuZCB2YWx1ZVxuICAgIGlmIChwQXJyWzBdID09PSBwYXJhbU5hbWUpIHJldHVybiBwQXJyWzFdOyAvL3JldHVybiB2YWx1ZVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIHBsdWdpbiBpbnNpZGUgYSB3ZWIgd29ya2VyLiBNYXkgdGhyb3cgYW4gZXhjZXB0aW9uXG4gKiBpbiBjYXNlIHRoaXMgd2FzIG5vdCBwZXJtaXR0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gKi9cbmZ1bmN0aW9uIHNldHVwV2ViV29ya2VyKGNvbmZpZykge1xuICBpZiAoIWNvbmZpZy5hbGxvd19leGVjdXRpb24pXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJ3ZWItd29ya2VyIHBsdWdpbiBjYW4gb25seSB3b3JrIHdpdGggYWxsb3dfZXhlY3V0aW9uPXRydWVcIlxuICAgICk7XG4gIGNvbnN0IHdvcmtlciA9IG5ldyBQbHVnaW5Xb3JrZXIoKTtcbiAgLy8gbWl4ZWQgY29udGVudCB3YXJuaW5nIGluIENocm9tZSBzaWxlbnRseSBza2lwcyB3b3JrZXJcbiAgLy8gaW5pdGlhbGl6YXRpb24gd2l0aG91dCBleGNlcHRpb24sIGhhbmRsaW5nIHRoaXMgd2l0aCB0aW1lb3V0XG4gIGNvbnN0IGZhbGxiYWNrVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBQbHVnaW4gZmFpbGVkIHRvIHN0YXJ0IGFzIGEgd2ViLXdvcmtlciwgcnVubmluZyBpbiBhbiBpZnJhbWUgaW5zdGVhZC5gXG4gICAgKTtcbiAgICBzZXR1cElmcmFtZShjb25maWcpO1xuICB9LCAyMDAwKTtcblxuICAvLyBmb3J3YXJkaW5nIG1lc3NhZ2VzIGJldHdlZW4gdGhlIHdvcmtlciBhbmQgcGFyZW50IHdpbmRvd1xuICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24oZSkge1xuICAgIGxldCB0cmFuc2ZlcmFibGVzID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IG0gPSBlLmRhdGE7XG4gICAgaWYgKG0udHlwZSA9PT0gXCJ3b3JrZXItcmVhZHlcIikge1xuICAgICAgLy8gc2VuZCBjb25maWcgdG8gdGhlIHdvcmtlclxuICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsgdHlwZTogXCJjb25uZWN0UlBDXCIsIGNvbmZpZzogY29uZmlnIH0pO1xuICAgICAgY2xlYXJUaW1lb3V0KGZhbGxiYWNrVGltZW91dCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChtLnR5cGUgPT09IFwiaW5pdGlhbGl6ZWRcIikge1xuICAgICAgLy8gY29tcGxldGUgdGhlIG1pc3NpbmcgZmllbGRzXG4gICAgICBtLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZywgbS5jb25maWcpO1xuICAgIH0gZWxzZSBpZiAobS50eXBlID09PSBcImltam95X3JlbW90ZV9hcGlfcmVhZHlcIikge1xuICAgICAgLy8gaWYgaXQncyBhIHdlYndvcmtlciwgdGhlcmUgd2lsbCBiZSBubyBhcGkgb2JqZWN0IHJldHVybmVkXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiaW1qb3lfcmVtb3RlX2FwaV9yZWFkeVwiLCB7IGRldGFpbDogbnVsbCB9KVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgbS50eXBlID09PSBcImNhY2hlUmVxdWlyZW1lbnRzXCIgJiZcbiAgICAgIHR5cGVvZiBjYWNoZV9yZXF1aXJlbWVudHMgPT09IFwiZnVuY3Rpb25cIlxuICAgICkge1xuICAgICAgY2FjaGVfcmVxdWlyZW1lbnRzKG0ucmVxdWlyZW1lbnRzKTtcbiAgICB9IGVsc2UgaWYgKG0udHlwZSA9PT0gXCJkaXNjb25uZWN0XCIpIHtcbiAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG0uX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgICAgdHJhbnNmZXJhYmxlcyA9IG0uX190cmFuc2ZlcmFibGVzX187XG4gICAgICAgIGRlbGV0ZSBtLl9fdHJhbnNmZXJhYmxlc19fO1xuICAgICAgfVxuICAgIH1cbiAgICBwYXJlbnQucG9zdE1lc3NhZ2UobSwgY29uZmlnLnRhcmdldF9vcmlnaW4gfHwgXCIqXCIsIHRyYW5zZmVyYWJsZXMpO1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24oZSkge1xuICAgIGxldCB0cmFuc2ZlcmFibGVzID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IG0gPSBlLmRhdGE7XG4gICAgaWYgKG0uX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgIHRyYW5zZmVyYWJsZXMgPSBtLl9fdHJhbnNmZXJhYmxlc19fO1xuICAgICAgZGVsZXRlIG0uX190cmFuc2ZlcmFibGVzX187XG4gICAgfVxuICAgIHdvcmtlci5wb3N0TWVzc2FnZShtLCB0cmFuc2ZlcmFibGVzKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXR1cEJhc2VGcmFtZShjb25maWcpIHtcbiAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICBjb25maWcubmFtZSA9IGNvbmZpZy5uYW1lIHx8IFwiR2VuZXJpYyBSUEMgQXBwXCI7XG4gIGNvbmZpZy50eXBlID0gY29uZmlnLnR5cGUgfHwgZ2V0UGFyYW1WYWx1ZShcIl9wbHVnaW5fdHlwZVwiKSB8fCBcIndpbmRvd1wiO1xuICBjb25maWcuYWxsb3dfZXhlY3V0aW9uID0gY29uZmlnLmFsbG93X2V4ZWN1dGlvbiB8fCB0cnVlO1xuICBjb25maWcuZW5hYmxlX3NlcnZpY2Vfd29ya2VyID0gY29uZmlnLmVuYWJsZV9zZXJ2aWNlX3dvcmtlciB8fCB0cnVlO1xuICBpZiAoY29uZmlnLmVuYWJsZV9zZXJ2aWNlX3dvcmtlcikge1xuICAgIHNldHVwU2VydmljZVdvcmtlcihjb25maWcudGFyZ2V0X29yaWdpbiwgY29uZmlnLmNhY2hlX3JlcXVpcmVtZW50cyk7XG4gIH1cbiAgaWYgKGNvbmZpZy5jYWNoZV9yZXF1aXJlbWVudHMpIHtcbiAgICBkZWxldGUgY29uZmlnLmNhY2hlX3JlcXVpcmVtZW50cztcbiAgfVxuICBjb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMgPSBjb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnM7XG4gIGlmIChjb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbmZpZy5mb3J3YXJkaW5nX2Z1bmN0aW9ucyA9IFtcImNsb3NlXCIsIFwib25cIiwgXCJvZmZcIiwgXCJlbWl0XCJdO1xuICAgIGlmIChbXCJycGMtd2luZG93XCIsIFwid2luZG93XCIsIFwid2ViLXB5dGhvbi13aW5kb3dcIl0uaW5jbHVkZXMoY29uZmlnLnR5cGUpKSB7XG4gICAgICBjb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMgPSBjb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMuY29uY2F0KFtcbiAgICAgICAgXCJyZXNpemVcIixcbiAgICAgICAgXCJzaG93XCIsXG4gICAgICAgIFwiaGlkZVwiLFxuICAgICAgICBcInJlZnJlc2hcIlxuICAgICAgXSk7XG4gICAgfVxuICB9XG4gIC8vIGV4cG9zZSB0aGUgYXBpIG9iamVjdCB0byB3aW5kb3cgZ2xvYmFsbHkuXG4gIC8vIG5vdGU6IHRoZSByZXR1cm5lZCB2YWx1ZSB3aWxsIGJlIG51bGwgZm9yIHdlYndvcmtlclxuICB3aW5kb3cuYXBpID0gYXdhaXQgaW1qb3lSUEMuc2V0dXBSUEMoY29uZmlnKTtcbiAgcmV0dXJuIHdpbmRvdy5hcGk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFJQQyhjb25maWcpIHtcbiAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICBpZiAoIWNvbmZpZy5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2Ugc3BlY2lmeSBhIG5hbWUgZm9yIHlvdXIgYXBwLlwiKTtcbiAgY29uZmlnLnZlcnNpb24gPSBjb25maWcudmVyc2lvbiB8fCBcIjAuMS4wXCI7XG4gIGNvbmZpZy5kZXNjcmlwdGlvbiA9XG4gICAgY29uZmlnLmRlc2NyaXB0aW9uIHx8IGBbVE9ETzogYWRkIGRlc2NyaXB0aW9uIGZvciAke2NvbmZpZy5uYW1lfSBdYDtcbiAgY29uZmlnLnR5cGUgPSBjb25maWcudHlwZSB8fCBcInJwYy13aW5kb3dcIjtcbiAgY29uZmlnLmlkID0gY29uZmlnLmlkIHx8IHJhbmRJZCgpO1xuICBjb25maWcuYWxsb3dfZXhlY3V0aW9uID0gY29uZmlnLmFsbG93X2V4ZWN1dGlvbiB8fCBmYWxzZTtcbiAgLy8gcmVtb3ZlIGZ1bmN0aW9uc1xuICBjb25maWcgPSBPYmplY3Qua2V5cyhjb25maWcpLnJlZHVjZSgocCwgYykgPT4ge1xuICAgIGlmICh0eXBlb2YgY29uZmlnW2NdICE9PSBcImZ1bmN0aW9uXCIpIHBbY10gPSBjb25maWdbY107XG4gICAgcmV0dXJuIHA7XG4gIH0sIHt9KTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBpZiAoaW5JZnJhbWUoKSkge1xuICAgICAgaWYgKGNvbmZpZy50eXBlID09PSBcIndlYi13b3JrZXJcIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldHVwV2ViV29ya2VyKGNvbmZpZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBmYWxsYmFjayB0byBpZnJhbWVcbiAgICAgICAgICBzZXR1cElmcmFtZShjb25maWcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBjb25maWcudHlwZSA9PT0gXCJ3ZWItcHl0aG9uXCIgfHxcbiAgICAgICAgY29uZmlnLnR5cGUgPT09IFwid2ViLXB5dGhvbi13aW5kb3dcIlxuICAgICAgKSB7XG4gICAgICAgIHNldHVwV2ViUHl0aG9uKGNvbmZpZyk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBbXCJycGMtd2luZG93XCIsIFwicnBjLXdvcmtlclwiLCBcImlmcmFtZVwiLCBcIndpbmRvd1wiXS5pbmNsdWRlcyhjb25maWcudHlwZSlcbiAgICAgICkge1xuICAgICAgICBzZXR1cElmcmFtZShjb25maWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuc3VwcG9ydGVkIHBsdWdpbiB0eXBlOiBcIiArIGNvbmZpZy50eXBlKTtcbiAgICAgICAgcmVqZWN0KFwiVW5zdXBwb3J0ZWQgcGx1Z2luIHR5cGU6IFwiICsgY29uZmlnLnR5cGUpO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudCA9IGUgPT4ge1xuICAgICAgICAgIC8vIGltam95IHBsdWdpbiBhcGlcbiAgICAgICAgICByZXNvbHZlKGUuZGV0YWlsKTtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImltam95X3JlbW90ZV9hcGlfcmVhZHlcIiwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaW1qb3lfcmVtb3RlX2FwaV9yZWFkeVwiLCB0aGlzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKFwiaW1qb3ktcnBjIHNob3VsZCBvbmx5IHJ1biBpbnNpZGUgYW4gaWZyYW1lLlwiKSk7XG4gICAgfVxuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.js\n");

/***/ }),

/***/ "./src/plugin.webworker.js":
/*!*********************************!*\
  !*** ./src/plugin.webworker.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = function() {\n  return __webpack_require__(/*! !./node_modules/worker-loader/dist/workers/InlineWorker.js */ \"./node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = \\\"./src/plugin.webworker.js\\\");\\n/******/ })\\n/************************************************************************/\\n/******/ ({\\n\\n/***/ \\\"./src/plugin.webworker.js\\\":\\n/*!*********************************!*\\\\\\n  !*** ./src/plugin.webworker.js ***!\\n  \\\\*********************************/\\n/*! no exports provided */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\neval(\\\"__webpack_require__.r(__webpack_exports__);\\\\n/* harmony import */ var _pluginCore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pluginCore.js */ \\\\\\\"./src/pluginCore.js\\\\\\\");\\\\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rpc.js */ \\\\\\\"./src/rpc.js\\\\\\\");\\\\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \\\\\\\"./src/utils.js\\\\\\\");\\\\n/**\\\\n * Contains the routines loaded by the plugin Worker under web-browser.\\\\n *\\\\n * Initializes the web environment version of the platform-dependent\\\\n * connection object for the plugin site\\\\n */\\\\n\\\\n\\\\n\\\\n\\\\n(function() {\\\\n  // make sure this runs inside a webworker\\\\n  if (\\\\n    typeof WorkerGlobalScope === \\\\\\\"undefined\\\\\\\" ||\\\\n    !self ||\\\\n    !(self instanceof WorkerGlobalScope)\\\\n  ) {\\\\n    throw new Error(\\\\\\\"This script can only loaded in a webworker\\\\\\\");\\\\n  }\\\\n  /**\\\\n   * Connection object provided to the RPC constructor,\\\\n   * plugin site implementation for the web-based environment.\\\\n   * Global will be then cleared to prevent exposure into the\\\\n   * Worker, so we put this local connection object into a closure\\\\n   */\\\\n  class Connection extends _utils_js__WEBPACK_IMPORTED_MODULE_2__[\\\\\\\"EventManager\\\\\\\"] {\\\\n    constructor(config) {\\\\n      super(config && config.debug);\\\\n      this.config = config || {};\\\\n    }\\\\n    connect() {\\\\n      self.addEventListener(\\\\\\\"message\\\\\\\", e => {\\\\n        this._fire(e.data.type, e.data);\\\\n      });\\\\n      this.emit({\\\\n        type: \\\\\\\"initialized\\\\\\\",\\\\n        config: this.config\\\\n      });\\\\n    }\\\\n    disconnect() {\\\\n      this._fire(\\\\\\\"beforeDisconnect\\\\\\\");\\\\n      self.close();\\\\n      this._fire(\\\\\\\"disconnected\\\\\\\");\\\\n    }\\\\n    emit(data) {\\\\n      let transferables = undefined;\\\\n      if (data.__transferables__) {\\\\n        transferables = data.__transferables__;\\\\n        delete data.__transferables__;\\\\n      }\\\\n      self.postMessage(data, transferables);\\\\n    }\\\\n    async execute(code) {\\\\n      if (code.type === \\\\\\\"requirements\\\\\\\") {\\\\n        try {\\\\n          if (\\\\n            code.requirements &&\\\\n            (Array.isArray(code.requirements) ||\\\\n              typeof code.requirements === \\\\\\\"string\\\\\\\")\\\\n          ) {\\\\n            try {\\\\n              if (!Array.isArray(code.requirements)) {\\\\n                code.requirements = [code.requirements];\\\\n              }\\\\n              for (var i = 0; i < code.requirements.length; i++) {\\\\n                if (\\\\n                  code.requirements[i].toLowerCase().endsWith(\\\\\\\".css\\\\\\\") ||\\\\n                  code.requirements[i].startsWith(\\\\\\\"css:\\\\\\\")\\\\n                ) {\\\\n                  throw \\\\\\\"unable to import css in a webworker\\\\\\\";\\\\n                } else if (\\\\n                  code.requirements[i].toLowerCase().endsWith(\\\\\\\".js\\\\\\\") ||\\\\n                  code.requirements[i].startsWith(\\\\\\\"js:\\\\\\\")\\\\n                ) {\\\\n                  if (code.requirements[i].startsWith(\\\\\\\"js:\\\\\\\")) {\\\\n                    code.requirements[i] = code.requirements[i].slice(3);\\\\n                  }\\\\n                  importScripts(code.requirements[i]);\\\\n                } else if (code.requirements[i].startsWith(\\\\\\\"http\\\\\\\")) {\\\\n                  importScripts(code.requirements[i]);\\\\n                } else if (code.requirements[i].startsWith(\\\\\\\"cache:\\\\\\\")) {\\\\n                  //ignore cache\\\\n                } else {\\\\n                  console.log(\\\\n                    \\\\\\\"Unprocessed requirements url: \\\\\\\" + code.requirements[i]\\\\n                  );\\\\n                }\\\\n              }\\\\n            } catch (e) {\\\\n              throw \\\\\\\"failed to import required scripts: \\\\\\\" +\\\\n                code.requirements.toString();\\\\n            }\\\\n          }\\\\n        } catch (e) {\\\\n          throw e;\\\\n        }\\\\n      } else if (code.type === \\\\\\\"script\\\\\\\") {\\\\n        try {\\\\n          if (\\\\n            code.requirements &&\\\\n            (Array.isArray(code.requirements) ||\\\\n              typeof code.requirements === \\\\\\\"string\\\\\\\")\\\\n          ) {\\\\n            try {\\\\n              if (Array.isArray(code.requirements)) {\\\\n                for (let i = 0; i < code.requirements.length; i++) {\\\\n                  importScripts(code.requirements[i]);\\\\n                }\\\\n              } else {\\\\n                importScripts(code.requirements);\\\\n              }\\\\n            } catch (e) {\\\\n              throw \\\\\\\"failed to import required scripts: \\\\\\\" +\\\\n                code.requirements.toString();\\\\n            }\\\\n          }\\\\n          eval(code.content);\\\\n        } catch (e) {\\\\n          console.error(e.message, e.stack);\\\\n          throw e;\\\\n        }\\\\n      } else {\\\\n        throw \\\\\\\"unsupported code type.\\\\\\\";\\\\n      }\\\\n      if (code.type === \\\\\\\"requirements\\\\\\\") {\\\\n        self.postMessage({\\\\n          type: \\\\\\\"cacheRequirements\\\\\\\",\\\\n          requirements: code.requirements\\\\n        });\\\\n      }\\\\n    }\\\\n  }\\\\n  const config = {\\\\n    type: \\\\\\\"web-worker\\\\\\\",\\\\n    dedicated_thread: true,\\\\n    allow_execution: true,\\\\n    lang: \\\\\\\"javascript\\\\\\\",\\\\n    api_version: _rpc_js__WEBPACK_IMPORTED_MODULE_1__[\\\\\\\"API_VERSION\\\\\\\"]\\\\n  };\\\\n  const conn = new Connection(config);\\\\n  conn.on(\\\\\\\"connectRPC\\\\\\\", data => {\\\\n    Object(_pluginCore_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"connectRPC\\\\\\\"])(conn, Object.assign(data.config, config));\\\\n  });\\\\n  conn.connect();\\\\n  self.postMessage({\\\\n    type: \\\\\\\"worker-ready\\\\\\\"\\\\n  });\\\\n})();\\\\n//# sourceURL=[module]\\\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luLndlYndvcmtlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2ltam95UlBDLy4vc3JjL3BsdWdpbi53ZWJ3b3JrZXIuanM/OGM1NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnRhaW5zIHRoZSByb3V0aW5lcyBsb2FkZWQgYnkgdGhlIHBsdWdpbiBXb3JrZXIgdW5kZXIgd2ViLWJyb3dzZXIuXG4gKlxuICogSW5pdGlhbGl6ZXMgdGhlIHdlYiBlbnZpcm9ubWVudCB2ZXJzaW9uIG9mIHRoZSBwbGF0Zm9ybS1kZXBlbmRlbnRcbiAqIGNvbm5lY3Rpb24gb2JqZWN0IGZvciB0aGUgcGx1Z2luIHNpdGVcbiAqL1xuaW1wb3J0IHsgY29ubmVjdFJQQyB9IGZyb20gXCIuL3BsdWdpbkNvcmUuanNcIjtcbmltcG9ydCB7IEFQSV9WRVJTSU9OIH0gZnJvbSBcIi4vcnBjLmpzXCI7XG5pbXBvcnQgeyBFdmVudE1hbmFnZXIgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG4oZnVuY3Rpb24oKSB7XG4gIC8vIG1ha2Ugc3VyZSB0aGlzIHJ1bnMgaW5zaWRlIGEgd2Vid29ya2VyXG4gIGlmIChcbiAgICB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgPT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAhc2VsZiB8fFxuICAgICEoc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNjcmlwdCBjYW4gb25seSBsb2FkZWQgaW4gYSB3ZWJ3b3JrZXJcIik7XG4gIH1cbiAgLyoqXG4gICAqIENvbm5lY3Rpb24gb2JqZWN0IHByb3ZpZGVkIHRvIHRoZSBSUEMgY29uc3RydWN0b3IsXG4gICAqIHBsdWdpbiBzaXRlIGltcGxlbWVudGF0aW9uIGZvciB0aGUgd2ViLWJhc2VkIGVudmlyb25tZW50LlxuICAgKiBHbG9iYWwgd2lsbCBiZSB0aGVuIGNsZWFyZWQgdG8gcHJldmVudCBleHBvc3VyZSBpbnRvIHRoZVxuICAgKiBXb3JrZXIsIHNvIHdlIHB1dCB0aGlzIGxvY2FsIGNvbm5lY3Rpb24gb2JqZWN0IGludG8gYSBjbG9zdXJlXG4gICAqL1xuICBjbGFzcyBDb25uZWN0aW9uIGV4dGVuZHMgRXZlbnRNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgIHN1cGVyKGNvbmZpZyAmJiBjb25maWcuZGVidWcpO1xuICAgICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGUgPT4ge1xuICAgICAgICB0aGlzLl9maXJlKGUuZGF0YS50eXBlLCBlLmRhdGEpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmVtaXQoe1xuICAgICAgICB0eXBlOiBcImluaXRpYWxpemVkXCIsXG4gICAgICAgIGNvbmZpZzogdGhpcy5jb25maWdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgdGhpcy5fZmlyZShcImJlZm9yZURpc2Nvbm5lY3RcIik7XG4gICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICB0aGlzLl9maXJlKFwiZGlzY29ubmVjdGVkXCIpO1xuICAgIH1cbiAgICBlbWl0KGRhdGEpIHtcbiAgICAgIGxldCB0cmFuc2ZlcmFibGVzID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKGRhdGEuX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgICAgdHJhbnNmZXJhYmxlcyA9IGRhdGEuX190cmFuc2ZlcmFibGVzX187XG4gICAgICAgIGRlbGV0ZSBkYXRhLl9fdHJhbnNmZXJhYmxlc19fO1xuICAgICAgfVxuICAgICAgc2VsZi5wb3N0TWVzc2FnZShkYXRhLCB0cmFuc2ZlcmFibGVzKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShjb2RlKSB7XG4gICAgICBpZiAoY29kZS50eXBlID09PSBcInJlcXVpcmVtZW50c1wiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMgJiZcbiAgICAgICAgICAgIChBcnJheS5pc0FycmF5KGNvZGUucmVxdWlyZW1lbnRzKSB8fFxuICAgICAgICAgICAgICB0eXBlb2YgY29kZS5yZXF1aXJlbWVudHMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29kZS5yZXF1aXJlbWVudHMpKSB7XG4gICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMgPSBbY29kZS5yZXF1aXJlbWVudHNdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZS5yZXF1aXJlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKFwiLmNzc1wiKSB8fFxuICAgICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImNzczpcIilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IFwidW5hYmxlIHRvIGltcG9ydCBjc3MgaW4gYSB3ZWJ3b3JrZXJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0udG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcIi5qc1wiKSB8fFxuICAgICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImpzOlwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJqczpcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0gPSBjb2RlLnJlcXVpcmVtZW50c1tpXS5zbGljZSgzKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGltcG9ydFNjcmlwdHMoY29kZS5yZXF1aXJlbWVudHNbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICAgICAgICAgICAgICAgIGltcG9ydFNjcmlwdHMoY29kZS5yZXF1aXJlbWVudHNbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImNhY2hlOlwiKSkge1xuICAgICAgICAgICAgICAgICAgLy9pZ25vcmUgY2FjaGVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIFwiVW5wcm9jZXNzZWQgcmVxdWlyZW1lbnRzIHVybDogXCIgKyBjb2RlLnJlcXVpcmVtZW50c1tpXVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgXCJmYWlsZWQgdG8gaW1wb3J0IHJlcXVpcmVkIHNjcmlwdHM6IFwiICtcbiAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50cy50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29kZS50eXBlID09PSBcInNjcmlwdFwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMgJiZcbiAgICAgICAgICAgIChBcnJheS5pc0FycmF5KGNvZGUucmVxdWlyZW1lbnRzKSB8fFxuICAgICAgICAgICAgICB0eXBlb2YgY29kZS5yZXF1aXJlbWVudHMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvZGUucmVxdWlyZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW1wb3J0U2NyaXB0cyhjb2RlLnJlcXVpcmVtZW50cyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgXCJmYWlsZWQgdG8gaW1wb3J0IHJlcXVpcmVkIHNjcmlwdHM6IFwiICtcbiAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50cy50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBldmFsKGNvZGUuY29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSwgZS5zdGFjayk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJ1bnN1cHBvcnRlZCBjb2RlIHR5cGUuXCI7XG4gICAgICB9XG4gICAgICBpZiAoY29kZS50eXBlID09PSBcInJlcXVpcmVtZW50c1wiKSB7XG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHR5cGU6IFwiY2FjaGVSZXF1aXJlbWVudHNcIixcbiAgICAgICAgICByZXF1aXJlbWVudHM6IGNvZGUucmVxdWlyZW1lbnRzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBjb25maWcgPSB7XG4gICAgdHlwZTogXCJ3ZWItd29ya2VyXCIsXG4gICAgZGVkaWNhdGVkX3RocmVhZDogdHJ1ZSxcbiAgICBhbGxvd19leGVjdXRpb246IHRydWUsXG4gICAgbGFuZzogXCJqYXZhc2NyaXB0XCIsXG4gICAgYXBpX3ZlcnNpb246IEFQSV9WRVJTSU9OXG4gIH07XG4gIGNvbnN0IGNvbm4gPSBuZXcgQ29ubmVjdGlvbihjb25maWcpO1xuICBjb25uLm9uKFwiY29ubmVjdFJQQ1wiLCBkYXRhID0+IHtcbiAgICBjb25uZWN0UlBDKGNvbm4sIE9iamVjdC5hc3NpZ24oZGF0YS5jb25maWcsIGNvbmZpZykpO1xuICB9KTtcbiAgY29ubi5jb25uZWN0KCk7XG4gIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgIHR5cGU6IFwid29ya2VyLXJlYWR5XCJcbiAgfSk7XG59KSgpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\\\\n//# sourceURL=webpack-internal:///./src/plugin.webworker.js\\\\n\\\");\\n\\n/***/ }),\\n\\n/***/ \\\"./src/pluginCore.js\\\":\\n/*!***************************!*\\\\\\n  !*** ./src/pluginCore.js ***!\\n  \\\\***************************/\\n/*! exports provided: connectRPC */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\neval(\\\"__webpack_require__.r(__webpack_exports__);\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"connectRPC\\\\\\\", function() { return connectRPC; });\\\\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rpc.js */ \\\\\\\"./src/rpc.js\\\\\\\");\\\\n/* harmony import */ var _pluginIframe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pluginIframe.js */ \\\\\\\"./src/pluginIframe.js\\\\\\\");\\\\n/**\\\\n * Core plugin script loaded into the plugin process/thread.\\\\n *\\\\n * Initializes the plugin-site API global methods.\\\\n */\\\\n\\\\n\\\\nfunction connectRPC(connection, config) {\\\\n  config = config || {};\\\\n  const rpc = new _rpc_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"RPC\\\\\\\"](connection, config);\\\\n  rpc.on(\\\\\\\"getInterface\\\\\\\", function () {\\\\n    launchConnected();\\\\n  });\\\\n  rpc.on(\\\\\\\"remoteReady\\\\\\\", function () {\\\\n    const api = rpc.getRemote() || {};\\\\n\\\\n    if (api.export) {\\\\n      throw new Error(\\\\\\\"`export` is a reserved function name\\\\\\\");\\\\n    }\\\\n\\\\n    if (api.onload) {\\\\n      throw new Error(\\\\\\\"`onload` is a reserved function name\\\\\\\");\\\\n    }\\\\n\\\\n    if (api.dispose) {\\\\n      throw new Error(\\\\\\\"`dispose` is a reserved function name\\\\\\\");\\\\n    }\\\\n\\\\n    api.export = function (_interface) {\\\\n      rpc.setInterface(_interface);\\\\n    };\\\\n\\\\n    api.onLoad = function (handler) {\\\\n      handler = checkHandler(handler);\\\\n\\\\n      if (connected) {\\\\n        handler();\\\\n      } else {\\\\n        connectedHandlers.push(handler);\\\\n      }\\\\n    };\\\\n\\\\n    api.dispose = function (_interface) {\\\\n      rpc.disconnect();\\\\n    };\\\\n\\\\n    if (typeof WorkerGlobalScope !== \\\\\\\"undefined\\\\\\\" && self instanceof WorkerGlobalScope) {\\\\n      self.api = api;\\\\n      self.postMessage({\\\\n        type: \\\\\\\"imjoy_remote_api_ready\\\\\\\"\\\\n      });\\\\n    } else if (typeof window) {\\\\n      window.dispatchEvent(new CustomEvent(\\\\\\\"imjoy_remote_api_ready\\\\\\\", {\\\\n        detail: api\\\\n      }));\\\\n    }\\\\n  });\\\\n  let connected = false;\\\\n  const connectedHandlers = [];\\\\n\\\\n  const launchConnected = function () {\\\\n    if (!connected) {\\\\n      connected = true;\\\\n      let handler;\\\\n\\\\n      while (handler = connectedHandlers.pop()) {\\\\n        handler();\\\\n      }\\\\n    }\\\\n  };\\\\n\\\\n  const checkHandler = function (handler) {\\\\n    const type = typeof handler;\\\\n\\\\n    if (type !== \\\\\\\"function\\\\\\\") {\\\\n      const msg = \\\\\\\"A function may only be subsribed to the event, \\\\\\\" + type + \\\\\\\" was provided instead\\\\\\\";\\\\n      throw new Error(msg);\\\\n    }\\\\n\\\\n    return handler;\\\\n  };\\\\n\\\\n  return rpc;\\\\n}//# sourceURL=[module]\\\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luQ29yZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2ltam95UlBDL3NyYy9wbHVnaW5Db3JlLmpzP2E0NzYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3JlIHBsdWdpbiBzY3JpcHQgbG9hZGVkIGludG8gdGhlIHBsdWdpbiBwcm9jZXNzL3RocmVhZC5cbiAqXG4gKiBJbml0aWFsaXplcyB0aGUgcGx1Z2luLXNpdGUgQVBJIGdsb2JhbCBtZXRob2RzLlxuICovXG5pbXBvcnQgeyBSUEMgfSBmcm9tIFwiLi9ycGMuanNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb24gfSBmcm9tIFwiLi9wbHVnaW5JZnJhbWUuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3RSUEMoY29ubmVjdGlvbiwgY29uZmlnKSB7XG4gIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblxuICBjb25zdCBycGMgPSBuZXcgUlBDKGNvbm5lY3Rpb24sIGNvbmZpZyk7XG4gIHJwYy5vbihcImdldEludGVyZmFjZVwiLCBmdW5jdGlvbigpIHtcbiAgICBsYXVuY2hDb25uZWN0ZWQoKTtcbiAgfSk7XG5cbiAgcnBjLm9uKFwicmVtb3RlUmVhZHlcIiwgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgYXBpID0gcnBjLmdldFJlbW90ZSgpIHx8IHt9O1xuICAgIGlmIChhcGkuZXhwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgZXhwb3J0YCBpcyBhIHJlc2VydmVkIGZ1bmN0aW9uIG5hbWVcIik7XG4gICAgfVxuICAgIGlmIChhcGkub25sb2FkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgb25sb2FkYCBpcyBhIHJlc2VydmVkIGZ1bmN0aW9uIG5hbWVcIik7XG4gICAgfVxuICAgIGlmIChhcGkuZGlzcG9zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYGRpc3Bvc2VgIGlzIGEgcmVzZXJ2ZWQgZnVuY3Rpb24gbmFtZVwiKTtcbiAgICB9XG4gICAgYXBpLmV4cG9ydCA9IGZ1bmN0aW9uKF9pbnRlcmZhY2UpIHtcbiAgICAgIHJwYy5zZXRJbnRlcmZhY2UoX2ludGVyZmFjZSk7XG4gICAgfTtcbiAgICBhcGkub25Mb2FkID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgaGFuZGxlciA9IGNoZWNrSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgIGlmIChjb25uZWN0ZWQpIHtcbiAgICAgICAgaGFuZGxlcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29ubmVjdGVkSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGFwaS5kaXNwb3NlID0gZnVuY3Rpb24oX2ludGVyZmFjZSkge1xuICAgICAgcnBjLmRpc2Nvbm5lY3QoKTtcbiAgICB9O1xuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGVcbiAgICApIHtcbiAgICAgIHNlbGYuYXBpID0gYXBpO1xuICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGU6IFwiaW1qb3lfcmVtb3RlX2FwaV9yZWFkeVwiXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cpIHtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJpbWpveV9yZW1vdGVfYXBpX3JlYWR5XCIsIHsgZGV0YWlsOiBhcGkgfSlcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBsZXQgY29ubmVjdGVkID0gZmFsc2U7XG4gIGNvbnN0IGNvbm5lY3RlZEhhbmRsZXJzID0gW107XG5cbiAgY29uc3QgbGF1bmNoQ29ubmVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFjb25uZWN0ZWQpIHtcbiAgICAgIGNvbm5lY3RlZCA9IHRydWU7XG5cbiAgICAgIGxldCBoYW5kbGVyO1xuICAgICAgd2hpbGUgKChoYW5kbGVyID0gY29ubmVjdGVkSGFuZGxlcnMucG9wKCkpKSB7XG4gICAgICAgIGhhbmRsZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hlY2tIYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25zdCBtc2cgPVxuICAgICAgICBcIkEgZnVuY3Rpb24gbWF5IG9ubHkgYmUgc3Vic3JpYmVkIHRvIHRoZSBldmVudCwgXCIgK1xuICAgICAgICB0eXBlICtcbiAgICAgICAgXCIgd2FzIHByb3ZpZGVkIGluc3RlYWRcIjtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZGxlcjtcbiAgfTtcblxuICByZXR1cm4gcnBjO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\\\\n//# sourceURL=webpack-internal:///./src/pluginCore.js\\\\n\\\");\\n\\n/***/ }),\\n\\n/***/ \\\"./src/pluginIframe.js\\\":\\n/*!*****************************!*\\\\\\n  !*** ./src/pluginIframe.js ***!\\n  \\\\*****************************/\\n/*! exports provided: Connection, default */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\neval(\\\"__webpack_require__.r(__webpack_exports__);\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"Connection\\\\\\\", function() { return Connection; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"default\\\\\\\", function() { return setupIframe; });\\\\n/* harmony import */ var _pluginCore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pluginCore.js */ \\\\\\\"./src/pluginCore.js\\\\\\\");\\\\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rpc.js */ \\\\\\\"./src/rpc.js\\\\\\\");\\\\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \\\\\\\"./src/utils.js\\\\\\\");\\\\n/**\\\\n * Contains the routines loaded by the plugin iframe under web-browser\\\\n * in case when worker failed to initialize\\\\n *\\\\n * Initializes the web environment version of the platform-dependent\\\\n * connection object for the plugin site\\\\n */\\\\n\\\\n\\\\n // Create a new, plain <span> element\\\\n\\\\nfunction _htmlToElement(html) {\\\\n  var template = document.createElement(\\\\\\\"template\\\\\\\");\\\\n  html = html.trim(); // Never return a text node of whitespace as the result\\\\n\\\\n  template.innerHTML = html;\\\\n  return template.content.firstChild;\\\\n}\\\\n\\\\nvar _importScript = function (url) {\\\\n  //url is URL of external file, implementationCode is the code\\\\n  //to be called from the file, location is the location to\\\\n  //insert the <script> element\\\\n  return new Promise((resolve, reject) => {\\\\n    var scriptTag = document.createElement(\\\\\\\"script\\\\\\\");\\\\n    scriptTag.src = url;\\\\n    scriptTag.type = \\\\\\\"text/javascript\\\\\\\";\\\\n    scriptTag.onload = resolve;\\\\n\\\\n    scriptTag.onreadystatechange = function () {\\\\n      if (this.readyState === \\\\\\\"loaded\\\\\\\" || this.readyState === \\\\\\\"complete\\\\\\\") {\\\\n        resolve();\\\\n      }\\\\n    };\\\\n\\\\n    scriptTag.onerror = reject;\\\\n    document.head.appendChild(scriptTag);\\\\n  });\\\\n}; // support importScripts outside web worker\\\\n\\\\n\\\\nasync function importScripts() {\\\\n  var args = Array.prototype.slice.call(arguments),\\\\n      len = args.length,\\\\n      i = 0;\\\\n\\\\n  for (; i < len; i++) {\\\\n    await _importScript(args[i]);\\\\n  }\\\\n}\\\\n\\\\nclass Connection extends _utils_js__WEBPACK_IMPORTED_MODULE_2__[\\\\\\\"EventManager\\\\\\\"] {\\\\n  constructor(config) {\\\\n    super(config && config.debug);\\\\n    this.config = config || {};\\\\n  }\\\\n\\\\n  connect() {\\\\n    this.config.target_origin = this.config.target_origin || \\\\\\\"*\\\\\\\"; // this will call handleEvent function\\\\n\\\\n    window.addEventListener(\\\\\\\"message\\\\\\\", this);\\\\n    this.emit({\\\\n      type: \\\\\\\"initialized\\\\\\\",\\\\n      config: this.config\\\\n    });\\\\n\\\\n    this._fire(\\\\\\\"connected\\\\\\\");\\\\n  }\\\\n\\\\n  handleEvent(e) {\\\\n    if (e.type === \\\\\\\"message\\\\\\\" && this.config.target_origin === \\\\\\\"*\\\\\\\" || e.origin === this.config.target_origin) {\\\\n      this._fire(e.data.type, e.data);\\\\n    }\\\\n  }\\\\n\\\\n  disconnect() {\\\\n    this._fire(\\\\\\\"beforeDisconnect\\\\\\\");\\\\n\\\\n    window.removeEventListener(\\\\\\\"message\\\\\\\", this);\\\\n\\\\n    this._fire(\\\\\\\"disconnected\\\\\\\");\\\\n  }\\\\n\\\\n  emit(data) {\\\\n    let transferables;\\\\n\\\\n    if (data.__transferables__) {\\\\n      transferables = data.__transferables__;\\\\n      delete data.__transferables__;\\\\n    }\\\\n\\\\n    parent.postMessage(data, this.config.target_origin, transferables);\\\\n  }\\\\n\\\\n  async execute(code) {\\\\n    try {\\\\n      if (code.type === \\\\\\\"requirements\\\\\\\") {\\\\n        if (code.requirements && (Array.isArray(code.requirements) || typeof code.requirements === \\\\\\\"string\\\\\\\")) {\\\\n          try {\\\\n            var link_node;\\\\n            code.requirements = typeof code.requirements === \\\\\\\"string\\\\\\\" ? [code.requirements] : code.requirements;\\\\n\\\\n            if (Array.isArray(code.requirements)) {\\\\n              for (var i = 0; i < code.requirements.length; i++) {\\\\n                if (code.requirements[i].toLowerCase().endsWith(\\\\\\\".css\\\\\\\") || code.requirements[i].startsWith(\\\\\\\"css:\\\\\\\")) {\\\\n                  if (code.requirements[i].startsWith(\\\\\\\"css:\\\\\\\")) {\\\\n                    code.requirements[i] = code.requirements[i].slice(4);\\\\n                  }\\\\n\\\\n                  link_node = document.createElement(\\\\\\\"link\\\\\\\");\\\\n                  link_node.rel = \\\\\\\"stylesheet\\\\\\\";\\\\n                  link_node.href = code.requirements[i];\\\\n                  document.head.appendChild(link_node);\\\\n                } else if (code.requirements[i].toLowerCase().endsWith(\\\\\\\".js\\\\\\\") || code.requirements[i].startsWith(\\\\\\\"js:\\\\\\\")) {\\\\n                  if (code.requirements[i].startsWith(\\\\\\\"js:\\\\\\\")) {\\\\n                    code.requirements[i] = code.requirements[i].slice(3);\\\\n                  }\\\\n\\\\n                  await importScripts(code.requirements[i]);\\\\n                } else if (code.requirements[i].startsWith(\\\\\\\"http\\\\\\\")) {\\\\n                  await importScripts(code.requirements[i]);\\\\n                } else if (code.requirements[i].startsWith(\\\\\\\"cache:\\\\\\\")) {//ignore cache\\\\n                } else {\\\\n                  console.log(\\\\\\\"Unprocessed requirements url: \\\\\\\" + code.requirements[i]);\\\\n                }\\\\n              }\\\\n            } else {\\\\n              throw \\\\\\\"unsupported requirements definition\\\\\\\";\\\\n            }\\\\n          } catch (e) {\\\\n            throw \\\\\\\"failed to import required scripts: \\\\\\\" + code.requirements.toString();\\\\n          }\\\\n        }\\\\n      } else if (code.type === \\\\\\\"script\\\\\\\") {\\\\n        if (code.src) {\\\\n          var script_node = document.createElement(\\\\\\\"script\\\\\\\");\\\\n          script_node.setAttribute(\\\\\\\"type\\\\\\\", code.attrs.type);\\\\n          script_node.setAttribute(\\\\\\\"src\\\\\\\", code.src);\\\\n          document.head.appendChild(script_node);\\\\n        } else {\\\\n          if (code.content && (!code.attrs.type || code.attrs.type === \\\\\\\"text/javascript\\\\\\\")) {\\\\n            // document.addEventListener(\\\\\\\"DOMContentLoaded\\\\\\\", function(){\\\\n            eval(code.content); // });\\\\n          } else {\\\\n            var node = document.createElement(\\\\\\\"script\\\\\\\");\\\\n            node.setAttribute(\\\\\\\"type\\\\\\\", code.attrs.type);\\\\n            node.appendChild(document.createTextNode(code.content));\\\\n            document.body.appendChild(node);\\\\n          }\\\\n        }\\\\n      } else if (code.type === \\\\\\\"style\\\\\\\") {\\\\n        const style_node = document.createElement(\\\\\\\"style\\\\\\\");\\\\n\\\\n        if (code.src) {\\\\n          style_node.src = code.src;\\\\n        }\\\\n\\\\n        style_node.innerHTML = code.content;\\\\n        document.head.appendChild(style_node);\\\\n      } else if (code.type === \\\\\\\"link\\\\\\\") {\\\\n        const link_node_ = document.createElement(\\\\\\\"link\\\\\\\");\\\\n\\\\n        if (code.rel) {\\\\n          link_node_.rel = code.rel;\\\\n        }\\\\n\\\\n        if (code.href) {\\\\n          link_node_.href = code.href;\\\\n        }\\\\n\\\\n        if (code.attrs && code.attrs.type) {\\\\n          link_node_.type = code.attrs.type;\\\\n        }\\\\n\\\\n        document.head.appendChild(link_node_);\\\\n      } else if (code.type === \\\\\\\"html\\\\\\\") {\\\\n        document.body.appendChild(_htmlToElement(code.content));\\\\n      } else {\\\\n        throw \\\\\\\"unsupported code type.\\\\\\\";\\\\n      }\\\\n\\\\n      parent.postMessage({\\\\n        type: \\\\\\\"executed\\\\\\\"\\\\n      }, this.config.target_origin);\\\\n    } catch (e) {\\\\n      console.error(\\\\\\\"failed to execute scripts: \\\\\\\", code, e);\\\\n      parent.postMessage({\\\\n        type: \\\\\\\"executed\\\\\\\",\\\\n        error: e.stack || String(e)\\\\n      }, this.config.target_origin);\\\\n    }\\\\n  }\\\\n\\\\n}\\\\nfunction setupIframe(config) {\\\\n  config = config || {};\\\\n  config.dedicated_thread = false;\\\\n  config.lang = \\\\\\\"javascript\\\\\\\";\\\\n  config.api_version = _rpc_js__WEBPACK_IMPORTED_MODULE_1__[\\\\\\\"API_VERSION\\\\\\\"];\\\\n  const conn = new Connection(config);\\\\n  Object(_pluginCore_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"connectRPC\\\\\\\"])(conn, config);\\\\n  conn.connect();\\\\n}//# sourceURL=[module]\\\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luSWZyYW1lLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1qb3lSUEMvc3JjL3BsdWdpbklmcmFtZS5qcz9lNmFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGFpbnMgdGhlIHJvdXRpbmVzIGxvYWRlZCBieSB0aGUgcGx1Z2luIGlmcmFtZSB1bmRlciB3ZWItYnJvd3NlclxuICogaW4gY2FzZSB3aGVuIHdvcmtlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZVxuICpcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWIgZW52aXJvbm1lbnQgdmVyc2lvbiBvZiB0aGUgcGxhdGZvcm0tZGVwZW5kZW50XG4gKiBjb25uZWN0aW9uIG9iamVjdCBmb3IgdGhlIHBsdWdpbiBzaXRlXG4gKi9cbmltcG9ydCB7IGNvbm5lY3RSUEMgfSBmcm9tIFwiLi9wbHVnaW5Db3JlLmpzXCI7XG5pbXBvcnQgeyBBUElfVkVSU0lPTiB9IGZyb20gXCIuL3JwYy5qc1wiO1xuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbi8vIENyZWF0ZSBhIG5ldywgcGxhaW4gPHNwYW4+IGVsZW1lbnRcbmZ1bmN0aW9uIF9odG1sVG9FbGVtZW50KGh0bWwpIHtcbiAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICBodG1sID0gaHRtbC50cmltKCk7IC8vIE5ldmVyIHJldHVybiBhIHRleHQgbm9kZSBvZiB3aGl0ZXNwYWNlIGFzIHRoZSByZXN1bHRcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZDtcbn1cblxudmFyIF9pbXBvcnRTY3JpcHQgPSBmdW5jdGlvbih1cmwpIHtcbiAgLy91cmwgaXMgVVJMIG9mIGV4dGVybmFsIGZpbGUsIGltcGxlbWVudGF0aW9uQ29kZSBpcyB0aGUgY29kZVxuICAvL3RvIGJlIGNhbGxlZCBmcm9tIHRoZSBmaWxlLCBsb2NhdGlvbiBpcyB0aGUgbG9jYXRpb24gdG9cbiAgLy9pbnNlcnQgdGhlIDxzY3JpcHQ+IGVsZW1lbnRcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgc2NyaXB0VGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICBzY3JpcHRUYWcuc3JjID0gdXJsO1xuICAgIHNjcmlwdFRhZy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICBzY3JpcHRUYWcub25sb2FkID0gcmVzb2x2ZTtcbiAgICBzY3JpcHRUYWcub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcImxvYWRlZFwiIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNjcmlwdFRhZy5vbmVycm9yID0gcmVqZWN0O1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcbiAgfSk7XG59O1xuXG4vLyBzdXBwb3J0IGltcG9ydFNjcmlwdHMgb3V0c2lkZSB3ZWIgd29ya2VyXG5hc3luYyBmdW5jdGlvbiBpbXBvcnRTY3JpcHRzKCkge1xuICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksXG4gICAgbGVuID0gYXJncy5sZW5ndGgsXG4gICAgaSA9IDA7XG4gIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhd2FpdCBfaW1wb3J0U2NyaXB0KGFyZ3NbaV0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uIGV4dGVuZHMgRXZlbnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnICYmIGNvbmZpZy5kZWJ1Zyk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XG4gIH1cbiAgY29ubmVjdCgpIHtcbiAgICB0aGlzLmNvbmZpZy50YXJnZXRfb3JpZ2luID0gdGhpcy5jb25maWcudGFyZ2V0X29yaWdpbiB8fCBcIipcIjtcbiAgICAvLyB0aGlzIHdpbGwgY2FsbCBoYW5kbGVFdmVudCBmdW5jdGlvblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzKTtcbiAgICB0aGlzLmVtaXQoe1xuICAgICAgdHlwZTogXCJpbml0aWFsaXplZFwiLFxuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZ1xuICAgIH0pO1xuICAgIHRoaXMuX2ZpcmUoXCJjb25uZWN0ZWRcIik7XG4gIH1cbiAgaGFuZGxlRXZlbnQoZSkge1xuICAgIGlmIChcbiAgICAgIChlLnR5cGUgPT09IFwibWVzc2FnZVwiICYmIHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4gPT09IFwiKlwiKSB8fFxuICAgICAgZS5vcmlnaW4gPT09IHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW5cbiAgICApIHtcbiAgICAgIHRoaXMuX2ZpcmUoZS5kYXRhLnR5cGUsIGUuZGF0YSk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5fZmlyZShcImJlZm9yZURpc2Nvbm5lY3RcIik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMpO1xuICAgIHRoaXMuX2ZpcmUoXCJkaXNjb25uZWN0ZWRcIik7XG4gIH1cbiAgZW1pdChkYXRhKSB7XG4gICAgbGV0IHRyYW5zZmVyYWJsZXM7XG4gICAgaWYgKGRhdGEuX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgIHRyYW5zZmVyYWJsZXMgPSBkYXRhLl9fdHJhbnNmZXJhYmxlc19fO1xuICAgICAgZGVsZXRlIGRhdGEuX190cmFuc2ZlcmFibGVzX187XG4gICAgfVxuICAgIHBhcmVudC5wb3N0TWVzc2FnZShkYXRhLCB0aGlzLmNvbmZpZy50YXJnZXRfb3JpZ2luLCB0cmFuc2ZlcmFibGVzKTtcbiAgfVxuICBhc3luYyBleGVjdXRlKGNvZGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvZGUudHlwZSA9PT0gXCJyZXF1aXJlbWVudHNcIikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMgJiZcbiAgICAgICAgICAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykgfHxcbiAgICAgICAgICAgIHR5cGVvZiBjb2RlLnJlcXVpcmVtZW50cyA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBsaW5rX25vZGU7XG4gICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50cyA9XG4gICAgICAgICAgICAgIHR5cGVvZiBjb2RlLnJlcXVpcmVtZW50cyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gW2NvZGUucmVxdWlyZW1lbnRzXVxuICAgICAgICAgICAgICAgIDogY29kZS5yZXF1aXJlbWVudHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2RlLnJlcXVpcmVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXCIuY3NzXCIpIHx8XG4gICAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwiY3NzOlwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJjc3M6XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldID0gY29kZS5yZXF1aXJlbWVudHNbaV0uc2xpY2UoNCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBsaW5rX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgICAgICAgICAgIGxpbmtfbm9kZS5yZWwgPSBcInN0eWxlc2hlZXRcIjtcbiAgICAgICAgICAgICAgICAgIGxpbmtfbm9kZS5ocmVmID0gY29kZS5yZXF1aXJlbWVudHNbaV07XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmtfbm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXCIuanNcIikgfHxcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJqczpcIilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGlmIChjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwianM6XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldID0gY29kZS5yZXF1aXJlbWVudHNbaV0uc2xpY2UoMyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJjYWNoZTpcIikpIHtcbiAgICAgICAgICAgICAgICAgIC8vaWdub3JlIGNhY2hlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBcIlVucHJvY2Vzc2VkIHJlcXVpcmVtZW50cyB1cmw6IFwiICsgY29kZS5yZXF1aXJlbWVudHNbaV1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBcInVuc3VwcG9ydGVkIHJlcXVpcmVtZW50cyBkZWZpbml0aW9uXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgXCJmYWlsZWQgdG8gaW1wb3J0IHJlcXVpcmVkIHNjcmlwdHM6IFwiICtcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMudG9TdHJpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29kZS50eXBlID09PSBcInNjcmlwdFwiKSB7XG4gICAgICAgIGlmIChjb2RlLnNyYykge1xuICAgICAgICAgIHZhciBzY3JpcHRfbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgc2NyaXB0X25vZGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBjb2RlLmF0dHJzLnR5cGUpO1xuICAgICAgICAgIHNjcmlwdF9ub2RlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjb2RlLnNyYyk7XG4gICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRfbm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29kZS5jb250ZW50ICYmXG4gICAgICAgICAgICAoIWNvZGUuYXR0cnMudHlwZSB8fCBjb2RlLmF0dHJzLnR5cGUgPT09IFwidGV4dC9qYXZhc2NyaXB0XCIpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZXZhbChjb2RlLmNvbnRlbnQpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBjb2RlLmF0dHJzLnR5cGUpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb2RlLmNvbnRlbnQpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIGlmIChjb2RlLnNyYykge1xuICAgICAgICAgIHN0eWxlX25vZGUuc3JjID0gY29kZS5zcmM7XG4gICAgICAgIH1cbiAgICAgICAgc3R5bGVfbm9kZS5pbm5lckhUTUwgPSBjb2RlLmNvbnRlbnQ7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVfbm9kZSk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJsaW5rXCIpIHtcbiAgICAgICAgY29uc3QgbGlua19ub2RlXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICBpZiAoY29kZS5yZWwpIHtcbiAgICAgICAgICBsaW5rX25vZGVfLnJlbCA9IGNvZGUucmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlLmhyZWYpIHtcbiAgICAgICAgICBsaW5rX25vZGVfLmhyZWYgPSBjb2RlLmhyZWY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGUuYXR0cnMgJiYgY29kZS5hdHRycy50eXBlKSB7XG4gICAgICAgICAgbGlua19ub2RlXy50eXBlID0gY29kZS5hdHRycy50eXBlO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua19ub2RlXyk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChfaHRtbFRvRWxlbWVudChjb2RlLmNvbnRlbnQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IFwidW5zdXBwb3J0ZWQgY29kZSB0eXBlLlwiO1xuICAgICAgfVxuICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJleGVjdXRlZFwiIH0sIHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gZXhlY3V0ZSBzY3JpcHRzOiBcIiwgY29kZSwgZSk7XG4gICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoXG4gICAgICAgIHsgdHlwZTogXCJleGVjdXRlZFwiLCBlcnJvcjogZS5zdGFjayB8fCBTdHJpbmcoZSkgfSxcbiAgICAgICAgdGhpcy5jb25maWcudGFyZ2V0X29yaWdpblxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0dXBJZnJhbWUoY29uZmlnKSB7XG4gIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgY29uZmlnLmRlZGljYXRlZF90aHJlYWQgPSBmYWxzZTtcbiAgY29uZmlnLmxhbmcgPSBcImphdmFzY3JpcHRcIjtcbiAgY29uZmlnLmFwaV92ZXJzaW9uID0gQVBJX1ZFUlNJT047XG4gIGNvbnN0IGNvbm4gPSBuZXcgQ29ubmVjdGlvbihjb25maWcpO1xuICBjb25uZWN0UlBDKGNvbm4sIGNvbmZpZyk7XG4gIGNvbm4uY29ubmVjdCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQS9JQTtBQWlKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\\\\n//# sourceURL=webpack-internal:///./src/pluginIframe.js\\\\n\\\");\\n\\n/***/ }),\\n\\n/***/ \\\"./src/rpc.js\\\":\\n/*!********************!*\\\\\\n  !*** ./src/rpc.js ***!\\n  \\\\********************/\\n/*! exports provided: API_VERSION, RPC */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\neval(\\\"__webpack_require__.r(__webpack_exports__);\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"API_VERSION\\\\\\\", function() { return API_VERSION; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"RPC\\\\\\\", function() { return RPC; });\\\\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \\\\\\\"./src/utils.js\\\\\\\");\\\\n/**\\\\n * Contains the RPC object used both by the application\\\\n * site, and by each plugin\\\\n */\\\\n\\\\nconst API_VERSION = \\\\\\\"0.2.1\\\\\\\";\\\\nconst ArrayBufferView = Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array())).constructor;\\\\n\\\\nfunction _appendBuffer(buffer1, buffer2) {\\\\n  const tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\\\\n  tmp.set(new Uint8Array(buffer1), 0);\\\\n  tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\\\\n  return tmp.buffer;\\\\n}\\\\n\\\\nfunction getKeyByValue(object, value) {\\\\n  return Object.keys(object).find(key => object[key] === value);\\\\n}\\\\n/**\\\\n * RPC object represents a single site in the\\\\n * communication protocol between the application and the plugin\\\\n *\\\\n * @param {Object} connection a special object allowing to send\\\\n * and receive messages from the opposite site (basically it\\\\n * should only provide send() and onMessage() methods)\\\\n */\\\\n\\\\n\\\\nclass RPC extends _utils_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"EventManager\\\\\\\"] {\\\\n  constructor(connection, config) {\\\\n    super(config && config.debug);\\\\n    this._connection = connection;\\\\n    this.config = config || {};\\\\n    this._interface_store = {};\\\\n    this._local_api = null; // make sure there is an execute function\\\\n\\\\n    const name = this.config.name;\\\\n\\\\n    this._connection.execute = this._connection.execute || function () {\\\\n      throw new Error(`connection.execute not implemented (in \\\\\\\"${name}\\\\\\\")`);\\\\n    };\\\\n\\\\n    this._store = new ReferenceStore();\\\\n    this._method_refs = new ReferenceStore();\\\\n\\\\n    this._method_refs.onReady(() => {\\\\n      this._fire(\\\\\\\"remoteIdle\\\\\\\");\\\\n    });\\\\n\\\\n    this._method_refs.onBusy(() => {\\\\n      this._fire(\\\\\\\"remoteBusy\\\\\\\");\\\\n    });\\\\n\\\\n    this._setupMessageHanlders();\\\\n  }\\\\n\\\\n  init() {\\\\n    this._connection.emit({\\\\n      type: \\\\\\\"initialized\\\\\\\",\\\\n      config: this.config\\\\n    });\\\\n  }\\\\n  /**\\\\n   * Set a handler to be called when received a responce from the\\\\n   * remote site reporting that the previously provided interface\\\\n   * has been successfully set as remote for that site\\\\n   *\\\\n   * @param {Function} handler\\\\n   */\\\\n\\\\n\\\\n  getRemoteCallStack() {\\\\n    return this._method_refs.getStack();\\\\n  }\\\\n  /**\\\\n   * @returns {Object} set of remote interface methods\\\\n   */\\\\n\\\\n\\\\n  getRemote() {\\\\n    return this._interface_store[\\\\\\\"_rremote\\\\\\\"];\\\\n  }\\\\n  /**\\\\n   * Sets the interface of this site making it available to the\\\\n   * remote site by sending a message with a set of methods names\\\\n   *\\\\n   * @param {Object} _interface to set\\\\n   */\\\\n\\\\n\\\\n  setInterface(_interface) {\\\\n    if (this.config.forwarding_functions) {\\\\n      for (let func_name of this.config.forwarding_functions) {\\\\n        const _remote = this._interface_store[\\\\\\\"_rremote\\\\\\\"];\\\\n\\\\n        if (_remote[func_name]) {\\\\n          if (_interface.constructor === Object) {\\\\n            if (!_interface[func_name]) {\\\\n              _interface[func_name] = (...args) => {\\\\n                _remote[func_name](...args);\\\\n              };\\\\n            }\\\\n          } else if (_interface.constructor.constructor === Function) {\\\\n            if (!_interface.constructor.prototype[func_name]) {\\\\n              _interface.constructor.prototype[func_name] = (...args) => {\\\\n                _remote[func_name](...args);\\\\n              };\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    }\\\\n\\\\n    this._local_api = _interface;\\\\n\\\\n    this._fire(\\\\\\\"interfaceAvailable\\\\\\\");\\\\n  }\\\\n  /**\\\\n   * Sends the actual interface to the remote site upon it was\\\\n   * updated or by a special request of the remote site\\\\n   */\\\\n\\\\n\\\\n  sendInterface() {\\\\n    if (!this._local_api) {\\\\n      throw new Error(\\\\\\\"interface is not set.\\\\\\\");\\\\n    }\\\\n\\\\n    this._local_api._rid = \\\\\\\"_rlocal\\\\\\\";\\\\n\\\\n    const api = this._encode(this._local_api, true);\\\\n\\\\n    this._connection.emit({\\\\n      type: \\\\\\\"setInterface\\\\\\\",\\\\n      api: api\\\\n    });\\\\n  }\\\\n\\\\n  setAuthenticator(authenticator) {\\\\n    this.authenticator = authenticator;\\\\n  }\\\\n\\\\n  setAuthorizer(authorizer) {\\\\n    this.authorizer = authorizer;\\\\n  }\\\\n  /**\\\\n   * Handles a message from the remote site\\\\n   */\\\\n  // var callback_reg = new RegExp(\\\\\\\"onupdate|run$\\\\\\\")\\\\n\\\\n\\\\n  _setupMessageHanlders() {\\\\n    this._connection.on(\\\\\\\"init\\\\\\\", this.init);\\\\n\\\\n    this._connection.on(\\\\\\\"authenticate\\\\\\\", credential => {\\\\n      Promise.resolve(this.authenticator(credential)).then(result => {\\\\n        if (result === true) {\\\\n          this._connection.emit({\\\\n            type: \\\\\\\"authenticated\\\\\\\",\\\\n            token: token\\\\n          });\\\\n        } else {\\\\n          this._connection.emit({\\\\n            type: \\\\\\\"authenticated\\\\\\\",\\\\n            error: result\\\\n          });\\\\n        }\\\\n      }).catch(e => {\\\\n        this._connection.emit({\\\\n          type: \\\\\\\"authenticated\\\\\\\",\\\\n          error: e\\\\n        });\\\\n      });\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"execute\\\\\\\", data => {\\\\n      Promise.resolve(this._connection.execute(data.code)).then(() => {\\\\n        this._connection.emit({\\\\n          type: \\\\\\\"executed\\\\\\\"\\\\n        });\\\\n      }).catch(e => {\\\\n        console.error(e);\\\\n\\\\n        this._connection.emit({\\\\n          type: \\\\\\\"executed\\\\\\\",\\\\n          error: e\\\\n        });\\\\n      });\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"method\\\\\\\", data => {\\\\n      let resolve, reject, method, args, result;\\\\n      let _interface = this._interface_store[data.pid];\\\\n\\\\n      const _method_context = _interface.__this__ || _interface;\\\\n\\\\n      if (!_interface) {\\\\n        if (data.promise) {\\\\n          [resolve, reject] = this._unwrap(data.promise, false);\\\\n          reject(`plugin api function is not avaialbe in \\\\\\\"${data.pid}\\\\\\\", the plugin maybe terminated.`);\\\\n        } else {\\\\n          console.error(`plugin api function is not avaialbe in ${data.pid}, the plugin maybe terminated.`);\\\\n        }\\\\n\\\\n        return;\\\\n      }\\\\n\\\\n      method = _interface[data.name];\\\\n      args = this._unwrap(data.args, true);\\\\n\\\\n      if (data.promise) {\\\\n        [resolve, reject] = this._unwrap(data.promise, false);\\\\n\\\\n        try {\\\\n          result = method.apply(_method_context, args);\\\\n\\\\n          if (result instanceof Promise || method.constructor && method.constructor.name === \\\\\\\"AsyncFunction\\\\\\\") {\\\\n            result.then(resolve).catch(reject);\\\\n          } else {\\\\n            resolve(result);\\\\n          }\\\\n        } catch (e) {\\\\n          console.error(this.config.name, e, method);\\\\n          reject(e);\\\\n        }\\\\n      } else {\\\\n        try {\\\\n          method.apply(_method_context, args);\\\\n        } catch (e) {\\\\n          console.error(this.config.name, e, method, args);\\\\n        }\\\\n      }\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"callback\\\\\\\", data => {\\\\n      let resolve, reject, method, args, result;\\\\n\\\\n      if (data.promise) {\\\\n        [resolve, reject] = this._unwrap(data.promise, false);\\\\n\\\\n        try {\\\\n          method = this._store.fetch(data._rindex);\\\\n          args = this._unwrap(data.args, true);\\\\n\\\\n          if (!method) {\\\\n            throw new Error(\\\\\\\"Callback function can only called once, if you want to call a function for multiple times, please make it as a plugin api function. See https://imjoy.io/docs for more details.\\\\\\\");\\\\n          }\\\\n\\\\n          result = method.apply(null, args);\\\\n\\\\n          if (result instanceof Promise || method.constructor && method.constructor.name === \\\\\\\"AsyncFunction\\\\\\\") {\\\\n            result.then(resolve).catch(reject);\\\\n          } else {\\\\n            resolve(result);\\\\n          }\\\\n        } catch (e) {\\\\n          console.error(this.config.name, e, method);\\\\n          reject(e);\\\\n        }\\\\n      } else {\\\\n        try {\\\\n          method = this._store.fetch(data._rindex);\\\\n          args = this._unwrap(data.args, true);\\\\n\\\\n          if (!method) {\\\\n            throw new Error(\\\\\\\"Please notice that callback function can only called once, if you want to call a function for multiple times, please make it as a plugin api function. See https://imjoy.io/docs for more details.\\\\\\\");\\\\n          }\\\\n\\\\n          method.apply(null, args);\\\\n        } catch (e) {\\\\n          console.error(this.config.name, e, method, args);\\\\n        }\\\\n      }\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"setInterface\\\\\\\", data => {\\\\n      this._setRemoteInterface(data.api);\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"getInterface\\\\\\\", () => {\\\\n      this._fire(\\\\\\\"getInterface\\\\\\\");\\\\n\\\\n      if (this._local_api) this.sendInterface();else this.once(\\\\\\\"interfaceAvailable\\\\\\\", this.sendInterface);\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"interfaceSetAsRemote\\\\\\\", () => {\\\\n      this._fire(\\\\\\\"interfaceSetAsRemote\\\\\\\");\\\\n    });\\\\n\\\\n    this._connection.on(\\\\\\\"disconnect\\\\\\\", () => {\\\\n      this._fire(\\\\\\\"beforeDisconnect\\\\\\\");\\\\n\\\\n      this._connection.disconnect();\\\\n\\\\n      this._fire(\\\\\\\"disconnected\\\\\\\");\\\\n    });\\\\n  }\\\\n\\\\n  async authenticate(credential) {\\\\n    this.once(\\\\\\\"authenticated\\\\\\\", result => {\\\\n      if (!result.error) {\\\\n        resolve(result);\\\\n      } else {\\\\n        reject(result.error);\\\\n      }\\\\n    });\\\\n\\\\n    this._connection.emit({\\\\n      type: \\\\\\\"authenticate\\\\\\\",\\\\n      credential: credential\\\\n    });\\\\n  }\\\\n  /**\\\\n   * Sends a requests to the remote site asking it to provide its\\\\n   * current interface\\\\n   */\\\\n\\\\n\\\\n  requestRemote() {\\\\n    this._connection.emit({\\\\n      type: \\\\\\\"getInterface\\\\\\\"\\\\n    });\\\\n  }\\\\n\\\\n  _ndarray(typedArray, shape, dtype) {\\\\n    var _dtype = _utils_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"typedArrayToDtype\\\\\\\"][typedArray.constructor.name];\\\\n\\\\n    if (dtype && dtype !== _dtype) {\\\\n      throw \\\\\\\"dtype doesn't match the type of the array: \\\\\\\" + _dtype + \\\\\\\" != \\\\\\\" + dtype;\\\\n    }\\\\n\\\\n    shape = shape || [typedArray.length];\\\\n    return {\\\\n      _rtype: \\\\\\\"ndarray\\\\\\\",\\\\n      _rvalue: typedArray,\\\\n      _rshape: shape,\\\\n      _rdtype: _dtype\\\\n    };\\\\n  }\\\\n  /**\\\\n   * Sets the new remote interface provided by the other site\\\\n   *\\\\n   * @param {Array} names list of function names\\\\n   */\\\\n\\\\n\\\\n  _setRemoteInterface(api) {\\\\n    this._interface_store[\\\\\\\"_rremote\\\\\\\"] = this._decode(api);\\\\n\\\\n    this._fire(\\\\\\\"remoteReady\\\\\\\");\\\\n\\\\n    this._reportRemoteSet();\\\\n  }\\\\n  /**\\\\n   * Generates the wrapped function corresponding to a single remote\\\\n   * method. When the generated function is called, it will send the\\\\n   * corresponding message to the remote site asking it to execute\\\\n   * the particular method of its interface\\\\n   *\\\\n   * @param {String} name of the remote method\\\\n   *\\\\n   * @returns {Function} wrapped remote method\\\\n   */\\\\n\\\\n\\\\n  _genRemoteMethod(name, interface_id) {\\\\n    var me = this;\\\\n\\\\n    var remoteMethod = function () {\\\\n      return new Promise((resolve, reject) => {\\\\n        let id = null;\\\\n\\\\n        try {\\\\n          id = me._method_refs.put(interface_id ? interface_id + \\\\\\\"/\\\\\\\" + name : name);\\\\n\\\\n          var wrapped_resolve = function () {\\\\n            if (id !== null) me._method_refs.fetch(id);\\\\n            return resolve.apply(this, arguments);\\\\n          };\\\\n\\\\n          var wrapped_reject = function () {\\\\n            if (id !== null) me._method_refs.fetch(id);\\\\n            return reject.apply(this, arguments);\\\\n          };\\\\n\\\\n          wrapped_resolve.__jailed_pairs__ = wrapped_reject;\\\\n          wrapped_reject.__jailed_pairs__ = wrapped_resolve;\\\\n          var args = Array.prototype.slice.call(arguments);\\\\n\\\\n          if (name === \\\\\\\"register\\\\\\\" || name === \\\\\\\"export\\\\\\\" || name === \\\\\\\"on\\\\\\\") {\\\\n            args = me._wrap(args, true);\\\\n          } else {\\\\n            args = me._wrap(args);\\\\n          }\\\\n\\\\n          var transferables = args.args.__transferables__;\\\\n          if (transferables) delete args.args.__transferables__;\\\\n\\\\n          me._connection.emit({\\\\n            type: \\\\\\\"method\\\\\\\",\\\\n            name: name,\\\\n            pid: interface_id,\\\\n            args: args,\\\\n            promise: me._wrap([wrapped_resolve, wrapped_reject])\\\\n          }, transferables);\\\\n        } catch (e) {\\\\n          if (id) me._method_refs.fetch(id);\\\\n          reject(`Failed to exectue remote method (interface: ${interface_id || me.id}, method: ${name}), error: ${e}`);\\\\n        }\\\\n      });\\\\n    };\\\\n\\\\n    remoteMethod.__remote_method = true;\\\\n    return remoteMethod;\\\\n  }\\\\n  /**\\\\n   * Sends a responce reporting that interface just provided by the\\\\n   * remote site was successfully set by this site as remote\\\\n   */\\\\n\\\\n\\\\n  _reportRemoteSet() {\\\\n    this._connection.emit({\\\\n      type: \\\\\\\"interfaceSetAsRemote\\\\\\\"\\\\n    });\\\\n  }\\\\n  /**\\\\n   * Prepares the provided set of remote method arguments for\\\\n   * sending to the remote site, replaces all the callbacks with\\\\n   * identifiers\\\\n   *\\\\n   * @param {Array} args to wrap\\\\n   *\\\\n   * @returns {Array} wrapped arguments\\\\n   */\\\\n\\\\n\\\\n  _encodeInterface(aObject) {\\\\n    let v, k, keys;\\\\n    const encoded_interface = {};\\\\n    aObject[\\\\\\\"_rid\\\\\\\"] = aObject[\\\\\\\"_rid\\\\\\\"] || Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"randId\\\\\\\"])(); // an object/array\\\\n\\\\n    if (aObject.constructor === Object || Array.isArray(aObject)) {\\\\n      keys = Object.keys(aObject);\\\\n    } // a class\\\\n    else if (aObject.constructor === Function) {\\\\n        throw new Error(\\\\\\\"Please instantiate the class before exportting it.\\\\\\\");\\\\n      } // instance of a class\\\\n      else if (aObject.constructor.constructor === Function) {\\\\n          keys = Object.getOwnPropertyNames(Object.getPrototypeOf(aObject)).concat(Object.keys(aObject));\\\\n        } else {\\\\n          throw Error(\\\\\\\"Unsupported interface type\\\\\\\");\\\\n        }\\\\n\\\\n    const bObject = Array.isArray(aObject) ? [] : {};\\\\n\\\\n    for (k of keys) {\\\\n      if ([\\\\\\\"hasOwnProperty\\\\\\\", \\\\\\\"constructor\\\\\\\"].includes(k)) continue;\\\\n\\\\n      if (k.startsWith(\\\\\\\"_\\\\\\\")) {\\\\n        continue;\\\\n      }\\\\n\\\\n      v = aObject[k];\\\\n\\\\n      if (typeof v === \\\\\\\"function\\\\\\\") {\\\\n        bObject[k] = {\\\\n          _rtype: \\\\\\\"interface\\\\\\\",\\\\n          _rid: aObject[\\\\\\\"_rid\\\\\\\"],\\\\n          _rvalue: k\\\\n        };\\\\n        encoded_interface[k] = v;\\\\n      } else if (Object(v) !== v) {\\\\n        bObject[k] = {\\\\n          _rtype: \\\\\\\"argument\\\\\\\",\\\\n          _rvalue: v\\\\n        };\\\\n        encoded_interface[k] = v;\\\\n      } else if (typeof v === \\\\\\\"object\\\\\\\") {\\\\n        bObject[k] = this._encodeInterface(v);\\\\n      }\\\\n    }\\\\n\\\\n    this._interface_store[aObject[\\\\\\\"_rid\\\\\\\"]] = encoded_interface; // remove interface when closed\\\\n\\\\n    if (aObject.on && typeof aObject.on === \\\\\\\"function\\\\\\\") {\\\\n      aObject.on(\\\\\\\"close\\\\\\\", () => {\\\\n        delete this._interface_store[aObject[\\\\\\\"_rid\\\\\\\"]];\\\\n      });\\\\n    }\\\\n\\\\n    return bObject;\\\\n  }\\\\n\\\\n  _encode(aObject, as_interface) {\\\\n    const transferables = [];\\\\n\\\\n    if (!aObject) {\\\\n      return aObject;\\\\n    }\\\\n\\\\n    const _transfer = aObject._transfer;\\\\n    let bObject, v, k;\\\\n    const isarray = Array.isArray(aObject); //skip if already encoded\\\\n\\\\n    if (typeof aObject === \\\\\\\"object\\\\\\\" && aObject._rtype && aObject._rvalue) {\\\\n      return aObject;\\\\n    } //encode interfaces\\\\n\\\\n\\\\n    if (typeof aObject === \\\\\\\"object\\\\\\\" && !Array.isArray(aObject) && (aObject._rintf || as_interface)) {\\\\n      return this._encodeInterface(aObject);\\\\n    }\\\\n\\\\n    if (as_interface) {\\\\n      aObject[\\\\\\\"_rid\\\\\\\"] = aObject[\\\\\\\"_rid\\\\\\\"] || Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"randId\\\\\\\"])();\\\\n      this._interface_store[aObject[\\\\\\\"_rid\\\\\\\"]] = this._interface_store[aObject[\\\\\\\"_rid\\\\\\\"]] || (isarray ? [] : {});\\\\n    }\\\\n\\\\n    bObject = isarray ? [] : {};\\\\n\\\\n    for (k in aObject) {\\\\n      if ([\\\\\\\"hasOwnProperty\\\\\\\", \\\\\\\"constructor\\\\\\\"].includes(k)) continue;\\\\n\\\\n      if (isarray || aObject.hasOwnProperty(k)) {\\\\n        v = aObject[k];\\\\n\\\\n        if (v && typeof this._local_api._rpc_encode === \\\\\\\"function\\\\\\\") {\\\\n          const encoded_obj = this._local_api._rpc_encode(v);\\\\n\\\\n          if (encoded_obj && encoded_obj._ctype) {\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"custom\\\\\\\",\\\\n              _rvalue: encoded_obj,\\\\n              _rid: aObject[\\\\\\\"_rid\\\\\\\"]\\\\n            };\\\\n            continue;\\\\n          } // if the returned object does not contain _rtype, assuming the object has been transformed\\\\n          else if (encoded_obj !== undefined) {\\\\n              v = encoded_obj;\\\\n            }\\\\n        }\\\\n\\\\n        if (typeof v === \\\\\\\"function\\\\\\\") {\\\\n          if (as_interface) {\\\\n            const encoded_interface = this._interface_store[aObject[\\\\\\\"_rid\\\\\\\"]];\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"interface\\\\\\\",\\\\n              _rid: aObject[\\\\\\\"_rid\\\\\\\"],\\\\n              _rvalue: k\\\\n            };\\\\n            encoded_interface[k] = v;\\\\n            continue;\\\\n          }\\\\n\\\\n          let interfaceFuncName = null;\\\\n\\\\n          for (var name in this._local_api) {\\\\n            if (this._local_api.hasOwnProperty(name)) {\\\\n              if (name.startsWith(\\\\\\\"_\\\\\\\")) continue;\\\\n\\\\n              if (this._local_api[name] === v) {\\\\n                interfaceFuncName = name;\\\\n                break;\\\\n              }\\\\n            }\\\\n          } // search for prototypes\\\\n\\\\n\\\\n          var functions = Object.getOwnPropertyNames(Object.getPrototypeOf(this._local_api));\\\\n\\\\n          for (var i = 0; i < functions.length; i++) {\\\\n            var name_ = functions[i];\\\\n            if (name_.startsWith(\\\\\\\"_\\\\\\\")) continue;\\\\n\\\\n            if (this._local_api[name_] === v) {\\\\n              interfaceFuncName = name_;\\\\n              break;\\\\n            }\\\\n          }\\\\n\\\\n          if (!interfaceFuncName) {\\\\n            var id = this._store.put(v);\\\\n\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"callback\\\\\\\",\\\\n              _rvalue: v.constructor && v.constructor.name || id,\\\\n              _rindex: id\\\\n            };\\\\n          } else {\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"interface\\\\\\\",\\\\n              _rvalue: interfaceFuncName,\\\\n              _rid: \\\\\\\"_rlocal\\\\\\\"\\\\n            };\\\\n          }\\\\n        } else if (\\\\n        /*global tf*/\\\\n        typeof tf !== \\\\\\\"undefined\\\\\\\" && tf.Tensor && v instanceof tf.Tensor) {\\\\n          const v_buffer = v.dataSync();\\\\n\\\\n          if (v._transfer || _transfer) {\\\\n            transferables.push(v_buffer.buffer);\\\\n            delete v._transfer;\\\\n          }\\\\n\\\\n          bObject[k] = {\\\\n            _rtype: \\\\\\\"ndarray\\\\\\\",\\\\n            _rvalue: v_buffer,\\\\n            _rshape: v.shape,\\\\n            _rdtype: v.dtype\\\\n          };\\\\n        } else if (\\\\n        /*global nj*/\\\\n        typeof nj !== \\\\\\\"undefined\\\\\\\" && nj.NdArray && v instanceof nj.NdArray) {\\\\n          var dtype = _utils_js__WEBPACK_IMPORTED_MODULE_0__[\\\\\\\"typedArrayToDtype\\\\\\\"][v.selection.data.constructor.name];\\\\n\\\\n          if (v._transfer || _transfer) {\\\\n            transferables.push(v.selection.data.buffer);\\\\n            delete v._transfer;\\\\n          }\\\\n\\\\n          bObject[k] = {\\\\n            _rtype: \\\\\\\"ndarray\\\\\\\",\\\\n            _rvalue: v.selection.data,\\\\n            _rshape: v.shape,\\\\n            _rdtype: dtype\\\\n          };\\\\n        } else if (v instanceof Error) {\\\\n          console.error(v);\\\\n          bObject[k] = {\\\\n            _rtype: \\\\\\\"error\\\\\\\",\\\\n            _rvalue: v.toString()\\\\n          };\\\\n        } else if (typeof File !== \\\\\\\"undefined\\\\\\\" && v instanceof File) {\\\\n          bObject[k] = {\\\\n            _rtype: \\\\\\\"file\\\\\\\",\\\\n            _rvalue: v,\\\\n            _rrelative_path: v.relativePath || v.webkitRelativePath\\\\n          };\\\\n        } // send objects supported by structure clone algorithm\\\\n        // https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\\\\n        else if (v !== Object(v) || v instanceof Boolean || v instanceof String || v instanceof Date || v instanceof RegExp || v instanceof Blob || v instanceof ImageData || typeof FileList !== \\\\\\\"undefined\\\\\\\" && v instanceof FileList) {\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"argument\\\\\\\",\\\\n              _rvalue: v\\\\n            };\\\\n          } else if (v instanceof ArrayBuffer) {\\\\n            if (v._transfer || _transfer) {\\\\n              transferables.push(v);\\\\n              delete v._transfer;\\\\n            }\\\\n\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"argument\\\\\\\",\\\\n              _rvalue: v\\\\n            };\\\\n          } else if (v instanceof ArrayBufferView) {\\\\n            if (v._transfer || _transfer) {\\\\n              transferables.push(v.buffer);\\\\n              delete v._transfer;\\\\n            }\\\\n\\\\n            bObject[k] = {\\\\n              _rtype: \\\\\\\"argument\\\\\\\",\\\\n              _rvalue: v\\\\n            };\\\\n          } // TODO: support also Map and Set\\\\n          // TODO: avoid object such as DynamicPlugin instance.\\\\n          else if (v._rintf) {\\\\n              bObject[k] = this._encode(v, true);\\\\n            } else if (typeof v === \\\\\\\"object\\\\\\\") {\\\\n              bObject[k] = this._encode(v, as_interface); // move transferables to the top level object\\\\n\\\\n              if (bObject[k].__transferables__) {\\\\n                for (var t = 0; t < bObject[k].__transferables__.length; t++) {\\\\n                  transferables.push(bObject[k].__transferables__[t]);\\\\n                }\\\\n\\\\n                delete bObject[k].__transferables__;\\\\n              }\\\\n            } else {\\\\n              throw \\\\\\\"imjoy-rpc: Unsupported data type \\\\\\\" + k + \\\\\\\",\\\\\\\" + v;\\\\n            }\\\\n      }\\\\n    }\\\\n\\\\n    if (transferables.length > 0) {\\\\n      bObject.__transferables__ = transferables;\\\\n    }\\\\n\\\\n    return bObject;\\\\n  }\\\\n\\\\n  _decode(aObject, callbackId, withPromise) {\\\\n    if (!aObject) {\\\\n      return aObject;\\\\n    }\\\\n\\\\n    var bObject, v, k;\\\\n\\\\n    if (aObject.hasOwnProperty(\\\\\\\"_rtype\\\\\\\") && aObject.hasOwnProperty(\\\\\\\"_rvalue\\\\\\\")) {\\\\n      if (aObject._rtype === \\\\\\\"custom\\\\\\\") {\\\\n        if (aObject._rvalue && typeof this._local_api._rpc_decode === \\\\\\\"function\\\\\\\") {\\\\n          bObject = this._local_api._rpc_decode(aObject._rvalue);\\\\n\\\\n          if (bObject === undefined) {\\\\n            bObject = aObject;\\\\n          }\\\\n        } else {\\\\n          bObject = aObject;\\\\n        }\\\\n      } else if (aObject._rtype === \\\\\\\"callback\\\\\\\") {\\\\n        bObject = this._genRemoteCallback(callbackId, aObject._rindex, withPromise);\\\\n      } else if (aObject._rtype === \\\\\\\"interface\\\\\\\") {\\\\n        const intfid = aObject._rid === \\\\\\\"_rlocal\\\\\\\" ? \\\\\\\"_rrmote\\\\\\\" : aObject._rid;\\\\n        bObject = this._interface_store[intfid] && this._interface_store[intfid][aObject._rvalue] || this._genRemoteMethod(aObject._rvalue, aObject._rid);\\\\n      } else if (aObject._rtype === \\\\\\\"ndarray\\\\\\\") {\\\\n        /*global nj tf*/\\\\n        //create build array/tensor if used in the plugin\\\\n        if (typeof nj !== \\\\\\\"undefined\\\\\\\" && nj.array) {\\\\n          if (Array.isArray(aObject._rvalue)) {\\\\n            aObject._rvalue = aObject._rvalue.reduce(_appendBuffer);\\\\n          }\\\\n\\\\n          bObject = nj.array(aObject._rvalue, aObject._rdtype).reshape(aObject._rshape);\\\\n        } else if (typeof tf !== \\\\\\\"undefined\\\\\\\" && tf.Tensor) {\\\\n          if (Array.isArray(aObject._rvalue)) {\\\\n            aObject._rvalue = aObject._rvalue.reduce(_appendBuffer);\\\\n          }\\\\n\\\\n          bObject = tf.tensor(aObject._rvalue, aObject._rshape, aObject._rdtype);\\\\n        } else {\\\\n          //keep it as regular if transfered to the main app\\\\n          bObject = aObject;\\\\n        }\\\\n      } else if (aObject._rtype === \\\\\\\"error\\\\\\\") {\\\\n        bObject = new Error(aObject._rvalue);\\\\n      } else if (aObject._rtype === \\\\\\\"file\\\\\\\") {\\\\n        bObject = aObject._rvalue; //patch relativePath\\\\n\\\\n        bObject.relativePath = aObject._rrelative_path;\\\\n      } else if (aObject._rtype === \\\\\\\"argument\\\\\\\") {\\\\n        bObject = aObject._rvalue;\\\\n      }\\\\n\\\\n      return bObject;\\\\n    } else {\\\\n      var isarray = Array.isArray(aObject);\\\\n      bObject = isarray ? [] : {};\\\\n\\\\n      for (k in aObject) {\\\\n        if (isarray || aObject.hasOwnProperty(k)) {\\\\n          v = aObject[k];\\\\n\\\\n          if (typeof v === \\\\\\\"object\\\\\\\" || Array.isArray(v)) {\\\\n            bObject[k] = this._decode(v, callbackId, withPromise);\\\\n          }\\\\n        }\\\\n      }\\\\n\\\\n      return bObject;\\\\n    }\\\\n  }\\\\n\\\\n  _wrap(args, as_interface) {\\\\n    var wrapped = this._encode(args, as_interface);\\\\n\\\\n    var result = {\\\\n      args: wrapped\\\\n    };\\\\n    return result;\\\\n  }\\\\n  /**\\\\n   * Unwraps the set of arguments delivered from the remote site,\\\\n   * replaces all callback identifiers with a function which will\\\\n   * initiate sending that callback identifier back to other site\\\\n   *\\\\n   * @param {Object} args to unwrap\\\\n   *\\\\n   * @param {Boolean} withPromise is true means this the callback should contain a promise\\\\n   *\\\\n   * @returns {Array} unwrapped args\\\\n   */\\\\n\\\\n\\\\n  _unwrap(args, withPromise) {\\\\n    // var called = false;\\\\n    // wraps each callback so that the only one could be called\\\\n    // var once(cb) {\\\\n    //     return function() {\\\\n    //         if (!called) {\\\\n    //             called = true;\\\\n    //             return cb.apply(this, arguments);\\\\n    //         } else {\\\\n    //             var msg =\\\\n    //               'A callback from this set has already been executed';\\\\n    //             throw new Error(msg);\\\\n    //         }\\\\n    //     };\\\\n    // }\\\\n    var result = this._decode(args.args, args.callbackId, withPromise);\\\\n\\\\n    return result;\\\\n  }\\\\n  /**\\\\n   * Generates the wrapped function corresponding to a single remote\\\\n   * callback. When the generated function is called, it will send\\\\n   * the corresponding message to the remote site asking it to\\\\n   * execute the particular callback previously saved during a call\\\\n   * by the remote site a method from the interface of this site\\\\n   *\\\\n   * @param {Number} id of the remote callback to execute\\\\n   * @param {Number} argNum argument index of the callback\\\\n   * @param {Boolean} withPromise is true means this the callback should contain a promise\\\\n   *\\\\n   * @returns {Function} wrapped remote callback\\\\n   */\\\\n\\\\n\\\\n  _genRemoteCallback(id, argNum, withPromise) {\\\\n    var me = this;\\\\n    var remoteCallback;\\\\n\\\\n    if (withPromise) {\\\\n      remoteCallback = function () {\\\\n        return new Promise((resolve, reject) => {\\\\n          var args = me._wrap(Array.prototype.slice.call(arguments));\\\\n\\\\n          var transferables = args.args.__transferables__;\\\\n          if (transferables) delete args.args.__transferables__;\\\\n          resolve.__jailed_pairs__ = reject;\\\\n          reject.__jailed_pairs__ = resolve;\\\\n\\\\n          try {\\\\n            me._connection.emit({\\\\n              type: \\\\\\\"callback\\\\\\\",\\\\n              id: id,\\\\n              _rindex: argNum,\\\\n              args: args,\\\\n              // pid :  me.id,\\\\n              promise: me._wrap([resolve, reject])\\\\n            }, transferables);\\\\n          } catch (e) {\\\\n            reject(`Failed to exectue remote callback (id: ${id}, argNum: ${argNum}).`);\\\\n          }\\\\n        });\\\\n      };\\\\n\\\\n      return remoteCallback;\\\\n    } else {\\\\n      remoteCallback = function () {\\\\n        var args = me._wrap(Array.prototype.slice.call(arguments));\\\\n\\\\n        var transferables = args.args.__transferables__;\\\\n        if (transferables) delete args.args.__transferables__;\\\\n        return me._connection.emit({\\\\n          type: \\\\\\\"callback\\\\\\\",\\\\n          id: id,\\\\n          _rindex: argNum,\\\\n          args: args // pid :  me.id\\\\n\\\\n        }, transferables);\\\\n      };\\\\n\\\\n      return remoteCallback;\\\\n    }\\\\n  }\\\\n  /**\\\\n   * Sends the notification message and breaks the connection\\\\n   */\\\\n\\\\n\\\\n  disconnect() {\\\\n    this._connection.emit({\\\\n      type: \\\\\\\"disconnect\\\\\\\"\\\\n    });\\\\n\\\\n    setTimeout(() => {\\\\n      this._connection.disconnect();\\\\n    }, 2000);\\\\n  }\\\\n\\\\n}\\\\n/**\\\\n * ReferenceStore is a special object which stores other objects\\\\n * and provides the references (number) instead. This reference\\\\n * may then be sent over a json-based communication channel (IPC\\\\n * to another Node.js process or a message to the Worker). Other\\\\n * site may then provide the reference in the responce message\\\\n * implying the given object should be activated.\\\\n *\\\\n * Primary usage for the ReferenceStore is a storage for the\\\\n * callbacks, which therefore makes it possible to initiate a\\\\n * callback execution by the opposite site (which normally cannot\\\\n * directly execute functions over the communication channel).\\\\n *\\\\n * Each stored object can only be fetched once and is not\\\\n * available for the second time. Each stored object must be\\\\n * fetched, since otherwise it will remain stored forever and\\\\n * consume memory.\\\\n *\\\\n * Stored object indeces are simply the numbers, which are however\\\\n * released along with the objects, and are later reused again (in\\\\n * order to postpone the overflow, which should not likely happen,\\\\n * but anyway).\\\\n */\\\\n\\\\nclass ReferenceStore {\\\\n  constructor() {\\\\n    this._store = {}; // stored object\\\\n\\\\n    this._indices = [0]; // smallest available indices\\\\n\\\\n    this._readyHandler = function () {};\\\\n\\\\n    this._busyHandler = function () {};\\\\n\\\\n    this._readyHandler();\\\\n  }\\\\n  /**\\\\n   * call handler when the store is empty\\\\n   *\\\\n   * @param {FUNCTION} id of a handler\\\\n   */\\\\n\\\\n\\\\n  onReady(readyHandler) {\\\\n    this._readyHandler = readyHandler || function () {};\\\\n  }\\\\n  /**\\\\n   * call handler when the store is not empty\\\\n   *\\\\n   * @param {FUNCTION} id of a handler\\\\n   */\\\\n\\\\n\\\\n  onBusy(busyHandler) {\\\\n    this._busyHandler = busyHandler || function () {};\\\\n  }\\\\n  /**\\\\n   * get the length of the store\\\\n   *\\\\n   */\\\\n\\\\n\\\\n  getStack() {\\\\n    return Object.keys(this._store).length;\\\\n  }\\\\n  /**\\\\n   * @function _genId() generates the new reference id\\\\n   *\\\\n   * @returns {Number} smallest available id and reserves it\\\\n   */\\\\n\\\\n\\\\n  _genId() {\\\\n    var id;\\\\n\\\\n    if (this._indices.length === 1) {\\\\n      id = this._indices[0]++;\\\\n    } else {\\\\n      id = this._indices.shift();\\\\n    }\\\\n\\\\n    return id;\\\\n  }\\\\n  /**\\\\n   * Releases the given reference id so that it will be available by\\\\n   * another object stored\\\\n   *\\\\n   * @param {Number} id to release\\\\n   */\\\\n\\\\n\\\\n  _releaseId(id) {\\\\n    for (var i = 0; i < this._indices.length; i++) {\\\\n      if (id < this._indices[i]) {\\\\n        this._indices.splice(i, 0, id);\\\\n\\\\n        break;\\\\n      }\\\\n    } // cleaning-up the sequence tail\\\\n\\\\n\\\\n    for (i = this._indices.length - 1; i >= 0; i--) {\\\\n      if (this._indices[i] - 1 === this._indices[i - 1]) {\\\\n        this._indices.pop();\\\\n      } else {\\\\n        break;\\\\n      }\\\\n    }\\\\n  }\\\\n  /**\\\\n   * Stores the given object and returns the refernce id instead\\\\n   *\\\\n   * @param {Object} obj to store\\\\n   *\\\\n   * @returns {Number} reference id of the stored object\\\\n   */\\\\n\\\\n\\\\n  put(obj) {\\\\n    if (this._busyHandler && Object.keys(this._store).length === 0) {\\\\n      this._busyHandler();\\\\n    }\\\\n\\\\n    var id = this._genId();\\\\n\\\\n    this._store[id] = obj;\\\\n    return id;\\\\n  }\\\\n  /**\\\\n   * Retrieves previously stored object and releases its reference\\\\n   *\\\\n   * @param {Number} id of an object to retrieve\\\\n   */\\\\n\\\\n\\\\n  fetch(id) {\\\\n    var obj = this._store[id];\\\\n\\\\n    if (obj && !obj.__remote_method) {\\\\n      delete this._store[id];\\\\n\\\\n      this._releaseId(id);\\\\n\\\\n      if (this._readyHandler && Object.keys(this._store).length === 0) {\\\\n        this._readyHandler();\\\\n      }\\\\n    }\\\\n\\\\n    if (obj && obj.__jailed_pairs__) {\\\\n      const _id = getKeyByValue(this._store, obj.__jailed_pairs__);\\\\n\\\\n      this.fetch(_id);\\\\n    }\\\\n\\\\n    return obj;\\\\n  }\\\\n\\\\n}//# sourceURL=[module]\\\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcnBjLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1qb3lSUEMvc3JjL3JwYy5qcz8yM2MyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGFpbnMgdGhlIFJQQyBvYmplY3QgdXNlZCBib3RoIGJ5IHRoZSBhcHBsaWNhdGlvblxuICogc2l0ZSwgYW5kIGJ5IGVhY2ggcGx1Z2luXG4gKi9cbmltcG9ydCB7IHJhbmRJZCwgdHlwZWRBcnJheVRvRHR5cGUsIEV2ZW50TWFuYWdlciB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTiA9IFwiMC4yLjFcIjtcblxuY29uc3QgQXJyYXlCdWZmZXJWaWV3ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKFxuICBPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3IFVpbnQ4QXJyYXkoKSlcbikuY29uc3RydWN0b3I7XG5cbmZ1bmN0aW9uIF9hcHBlbmRCdWZmZXIoYnVmZmVyMSwgYnVmZmVyMikge1xuICBjb25zdCB0bXAgPSBuZXcgVWludDhBcnJheShidWZmZXIxLmJ5dGVMZW5ndGggKyBidWZmZXIyLmJ5dGVMZW5ndGgpO1xuICB0bXAuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlcjEpLCAwKTtcbiAgdG1wLnNldChuZXcgVWludDhBcnJheShidWZmZXIyKSwgYnVmZmVyMS5ieXRlTGVuZ3RoKTtcbiAgcmV0dXJuIHRtcC5idWZmZXI7XG59XG5cbmZ1bmN0aW9uIGdldEtleUJ5VmFsdWUob2JqZWN0LCB2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5maW5kKGtleSA9PiBvYmplY3Rba2V5XSA9PT0gdmFsdWUpO1xufVxuLyoqXG4gKiBSUEMgb2JqZWN0IHJlcHJlc2VudHMgYSBzaW5nbGUgc2l0ZSBpbiB0aGVcbiAqIGNvbW11bmljYXRpb24gcHJvdG9jb2wgYmV0d2VlbiB0aGUgYXBwbGljYXRpb24gYW5kIHRoZSBwbHVnaW5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29ubmVjdGlvbiBhIHNwZWNpYWwgb2JqZWN0IGFsbG93aW5nIHRvIHNlbmRcbiAqIGFuZCByZWNlaXZlIG1lc3NhZ2VzIGZyb20gdGhlIG9wcG9zaXRlIHNpdGUgKGJhc2ljYWxseSBpdFxuICogc2hvdWxkIG9ubHkgcHJvdmlkZSBzZW5kKCkgYW5kIG9uTWVzc2FnZSgpIG1ldGhvZHMpXG4gKi9cbmV4cG9ydCBjbGFzcyBSUEMgZXh0ZW5kcyBFdmVudE1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBjb25maWcpIHtcbiAgICBzdXBlcihjb25maWcgJiYgY29uZmlnLmRlYnVnKTtcbiAgICB0aGlzLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmUgPSB7fTtcbiAgICB0aGlzLl9sb2NhbF9hcGkgPSBudWxsO1xuICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSBpcyBhbiBleGVjdXRlIGZ1bmN0aW9uXG4gICAgY29uc3QgbmFtZSA9IHRoaXMuY29uZmlnLm5hbWU7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5leGVjdXRlID1cbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZXhlY3V0ZSB8fFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY29ubmVjdGlvbi5leGVjdXRlIG5vdCBpbXBsZW1lbnRlZCAoaW4gXCIke25hbWV9XCIpYCk7XG4gICAgICB9O1xuICAgIHRoaXMuX3N0b3JlID0gbmV3IFJlZmVyZW5jZVN0b3JlKCk7XG4gICAgdGhpcy5fbWV0aG9kX3JlZnMgPSBuZXcgUmVmZXJlbmNlU3RvcmUoKTtcbiAgICB0aGlzLl9tZXRob2RfcmVmcy5vblJlYWR5KCgpID0+IHtcbiAgICAgIHRoaXMuX2ZpcmUoXCJyZW1vdGVJZGxlXCIpO1xuICAgIH0pO1xuICAgIHRoaXMuX21ldGhvZF9yZWZzLm9uQnVzeSgoKSA9PiB7XG4gICAgICB0aGlzLl9maXJlKFwicmVtb3RlQnVzeVwiKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXR1cE1lc3NhZ2VIYW5sZGVycygpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xuICAgICAgdHlwZTogXCJpbml0aWFsaXplZFwiLFxuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZ1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aGVuIHJlY2VpdmVkIGEgcmVzcG9uY2UgZnJvbSB0aGVcbiAgICogcmVtb3RlIHNpdGUgcmVwb3J0aW5nIHRoYXQgdGhlIHByZXZpb3VzbHkgcHJvdmlkZWQgaW50ZXJmYWNlXG4gICAqIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBzZXQgYXMgcmVtb3RlIGZvciB0aGF0IHNpdGVcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgKi9cblxuICBnZXRSZW1vdGVDYWxsU3RhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuX21ldGhvZF9yZWZzLmdldFN0YWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge09iamVjdH0gc2V0IG9mIHJlbW90ZSBpbnRlcmZhY2UgbWV0aG9kc1xuICAgKi9cbiAgZ2V0UmVtb3RlKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbXCJfcnJlbW90ZVwiXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnRlcmZhY2Ugb2YgdGhpcyBzaXRlIG1ha2luZyBpdCBhdmFpbGFibGUgdG8gdGhlXG4gICAqIHJlbW90ZSBzaXRlIGJ5IHNlbmRpbmcgYSBtZXNzYWdlIHdpdGggYSBzZXQgb2YgbWV0aG9kcyBuYW1lc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gX2ludGVyZmFjZSB0byBzZXRcbiAgICovXG4gIHNldEludGVyZmFjZShfaW50ZXJmYWNlKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmZvcndhcmRpbmdfZnVuY3Rpb25zKSB7XG4gICAgICBmb3IgKGxldCBmdW5jX25hbWUgb2YgdGhpcy5jb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMpIHtcbiAgICAgICAgY29uc3QgX3JlbW90ZSA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVtcIl9ycmVtb3RlXCJdO1xuICAgICAgICBpZiAoX3JlbW90ZVtmdW5jX25hbWVdKSB7XG4gICAgICAgICAgaWYgKF9pbnRlcmZhY2UuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgaWYgKCFfaW50ZXJmYWNlW2Z1bmNfbmFtZV0pIHtcbiAgICAgICAgICAgICAgX2ludGVyZmFjZVtmdW5jX25hbWVdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBfcmVtb3RlW2Z1bmNfbmFtZV0oLi4uYXJncyk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChfaW50ZXJmYWNlLmNvbnN0cnVjdG9yLmNvbnN0cnVjdG9yID09PSBGdW5jdGlvbikge1xuICAgICAgICAgICAgaWYgKCFfaW50ZXJmYWNlLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jX25hbWVdKSB7XG4gICAgICAgICAgICAgIF9pbnRlcmZhY2UuY29uc3RydWN0b3IucHJvdG90eXBlW2Z1bmNfbmFtZV0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIF9yZW1vdGVbZnVuY19uYW1lXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbG9jYWxfYXBpID0gX2ludGVyZmFjZTtcbiAgICB0aGlzLl9maXJlKFwiaW50ZXJmYWNlQXZhaWxhYmxlXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIHRoZSBhY3R1YWwgaW50ZXJmYWNlIHRvIHRoZSByZW1vdGUgc2l0ZSB1cG9uIGl0IHdhc1xuICAgKiB1cGRhdGVkIG9yIGJ5IGEgc3BlY2lhbCByZXF1ZXN0IG9mIHRoZSByZW1vdGUgc2l0ZVxuICAgKi9cbiAgc2VuZEludGVyZmFjZSgpIHtcbiAgICBpZiAoIXRoaXMuX2xvY2FsX2FwaSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW50ZXJmYWNlIGlzIG5vdCBzZXQuXCIpO1xuICAgIH1cbiAgICB0aGlzLl9sb2NhbF9hcGkuX3JpZCA9IFwiX3Jsb2NhbFwiO1xuICAgIGNvbnN0IGFwaSA9IHRoaXMuX2VuY29kZSh0aGlzLl9sb2NhbF9hcGksIHRydWUpO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7IHR5cGU6IFwic2V0SW50ZXJmYWNlXCIsIGFwaTogYXBpIH0pO1xuICB9XG5cbiAgc2V0QXV0aGVudGljYXRvcihhdXRoZW50aWNhdG9yKSB7XG4gICAgdGhpcy5hdXRoZW50aWNhdG9yID0gYXV0aGVudGljYXRvcjtcbiAgfVxuXG4gIHNldEF1dGhvcml6ZXIoYXV0aG9yaXplcikge1xuICAgIHRoaXMuYXV0aG9yaXplciA9IGF1dGhvcml6ZXI7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhIG1lc3NhZ2UgZnJvbSB0aGUgcmVtb3RlIHNpdGVcbiAgICovXG4gIC8vIHZhciBjYWxsYmFja19yZWcgPSBuZXcgUmVnRXhwKFwib251cGRhdGV8cnVuJFwiKVxuICBfc2V0dXBNZXNzYWdlSGFubGRlcnMoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcImluaXRcIiwgdGhpcy5pbml0KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiYXV0aGVudGljYXRlXCIsIGNyZWRlbnRpYWwgPT4ge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuYXV0aGVudGljYXRvcihjcmVkZW50aWFsKSlcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xuICAgICAgICAgICAgICB0eXBlOiBcImF1dGhlbnRpY2F0ZWRcIixcbiAgICAgICAgICAgICAgdG9rZW46IHRva2VuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHtcbiAgICAgICAgICAgICAgdHlwZTogXCJhdXRoZW50aWNhdGVkXCIsXG4gICAgICAgICAgICAgIGVycm9yOiByZXN1bHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7XG4gICAgICAgICAgICB0eXBlOiBcImF1dGhlbnRpY2F0ZWRcIixcbiAgICAgICAgICAgIGVycm9yOiBlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXCJleGVjdXRlXCIsIGRhdGEgPT4ge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2Nvbm5lY3Rpb24uZXhlY3V0ZShkYXRhLmNvZGUpKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJleGVjdXRlZFwiIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xuICAgICAgICAgICAgdHlwZTogXCJleGVjdXRlZFwiLFxuICAgICAgICAgICAgZXJyb3I6IGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwibWV0aG9kXCIsIGRhdGEgPT4ge1xuICAgICAgbGV0IHJlc29sdmUsIHJlamVjdCwgbWV0aG9kLCBhcmdzLCByZXN1bHQ7XG4gICAgICBsZXQgX2ludGVyZmFjZSA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVtkYXRhLnBpZF07XG4gICAgICBjb25zdCBfbWV0aG9kX2NvbnRleHQgPSBfaW50ZXJmYWNlLl9fdGhpc19fIHx8IF9pbnRlcmZhY2U7XG4gICAgICBpZiAoIV9pbnRlcmZhY2UpIHtcbiAgICAgICAgaWYgKGRhdGEucHJvbWlzZSkge1xuICAgICAgICAgIFtyZXNvbHZlLCByZWplY3RdID0gdGhpcy5fdW53cmFwKGRhdGEucHJvbWlzZSwgZmFsc2UpO1xuICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgIGBwbHVnaW4gYXBpIGZ1bmN0aW9uIGlzIG5vdCBhdmFpYWxiZSBpbiBcIiR7ZGF0YS5waWR9XCIsIHRoZSBwbHVnaW4gbWF5YmUgdGVybWluYXRlZC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgYHBsdWdpbiBhcGkgZnVuY3Rpb24gaXMgbm90IGF2YWlhbGJlIGluICR7ZGF0YS5waWR9LCB0aGUgcGx1Z2luIG1heWJlIHRlcm1pbmF0ZWQuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtZXRob2QgPSBfaW50ZXJmYWNlW2RhdGEubmFtZV07XG4gICAgICBhcmdzID0gdGhpcy5fdW53cmFwKGRhdGEuYXJncywgdHJ1ZSk7XG4gICAgICBpZiAoZGF0YS5wcm9taXNlKSB7XG4gICAgICAgIFtyZXNvbHZlLCByZWplY3RdID0gdGhpcy5fdW53cmFwKGRhdGEucHJvbWlzZSwgZmFsc2UpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3VsdCA9IG1ldGhvZC5hcHBseShfbWV0aG9kX2NvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHxcbiAgICAgICAgICAgIChtZXRob2QuY29uc3RydWN0b3IgJiYgbWV0aG9kLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiQXN5bmNGdW5jdGlvblwiKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVzdWx0LnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5jb25maWcubmFtZSwgZSwgbWV0aG9kKTtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWV0aG9kLmFwcGx5KF9tZXRob2RfY29udGV4dCwgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uZmlnLm5hbWUsIGUsIG1ldGhvZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXCJjYWxsYmFja1wiLCBkYXRhID0+IHtcbiAgICAgIGxldCByZXNvbHZlLCByZWplY3QsIG1ldGhvZCwgYXJncywgcmVzdWx0O1xuICAgICAgaWYgKGRhdGEucHJvbWlzZSkge1xuICAgICAgICBbcmVzb2x2ZSwgcmVqZWN0XSA9IHRoaXMuX3Vud3JhcChkYXRhLnByb21pc2UsIGZhbHNlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtZXRob2QgPSB0aGlzLl9zdG9yZS5mZXRjaChkYXRhLl9yaW5kZXgpO1xuICAgICAgICAgIGFyZ3MgPSB0aGlzLl91bndyYXAoZGF0YS5hcmdzLCB0cnVlKTtcbiAgICAgICAgICBpZiAoIW1ldGhvZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIkNhbGxiYWNrIGZ1bmN0aW9uIGNhbiBvbmx5IGNhbGxlZCBvbmNlLCBpZiB5b3Ugd2FudCB0byBjYWxsIGEgZnVuY3Rpb24gZm9yIG11bHRpcGxlIHRpbWVzLCBwbGVhc2UgbWFrZSBpdCBhcyBhIHBsdWdpbiBhcGkgZnVuY3Rpb24uIFNlZSBodHRwczovL2ltam95LmlvL2RvY3MgZm9yIG1vcmUgZGV0YWlscy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0ID0gbWV0aG9kLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHxcbiAgICAgICAgICAgIChtZXRob2QuY29uc3RydWN0b3IgJiYgbWV0aG9kLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiQXN5bmNGdW5jdGlvblwiKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVzdWx0LnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5jb25maWcubmFtZSwgZSwgbWV0aG9kKTtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWV0aG9kID0gdGhpcy5fc3RvcmUuZmV0Y2goZGF0YS5fcmluZGV4KTtcbiAgICAgICAgICBhcmdzID0gdGhpcy5fdW53cmFwKGRhdGEuYXJncywgdHJ1ZSk7XG4gICAgICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJQbGVhc2Ugbm90aWNlIHRoYXQgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIG9ubHkgY2FsbGVkIG9uY2UsIGlmIHlvdSB3YW50IHRvIGNhbGwgYSBmdW5jdGlvbiBmb3IgbXVsdGlwbGUgdGltZXMsIHBsZWFzZSBtYWtlIGl0IGFzIGEgcGx1Z2luIGFwaSBmdW5jdGlvbi4gU2VlIGh0dHBzOi8vaW1qb3kuaW8vZG9jcyBmb3IgbW9yZSBkZXRhaWxzLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXRob2QuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uZmlnLm5hbWUsIGUsIG1ldGhvZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwic2V0SW50ZXJmYWNlXCIsIGRhdGEgPT4ge1xuICAgICAgdGhpcy5fc2V0UmVtb3RlSW50ZXJmYWNlKGRhdGEuYXBpKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiZ2V0SW50ZXJmYWNlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2ZpcmUoXCJnZXRJbnRlcmZhY2VcIik7XG4gICAgICBpZiAodGhpcy5fbG9jYWxfYXBpKSB0aGlzLnNlbmRJbnRlcmZhY2UoKTtcbiAgICAgIGVsc2UgdGhpcy5vbmNlKFwiaW50ZXJmYWNlQXZhaWxhYmxlXCIsIHRoaXMuc2VuZEludGVyZmFjZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcImludGVyZmFjZVNldEFzUmVtb3RlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2ZpcmUoXCJpbnRlcmZhY2VTZXRBc1JlbW90ZVwiKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiZGlzY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9maXJlKFwiYmVmb3JlRGlzY29ubmVjdFwiKTtcbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5fZmlyZShcImRpc2Nvbm5lY3RlZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGF1dGhlbnRpY2F0ZShjcmVkZW50aWFsKSB7XG4gICAgdGhpcy5vbmNlKFwiYXV0aGVudGljYXRlZFwiLCByZXN1bHQgPT4ge1xuICAgICAgaWYgKCFyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHJlc3VsdC5lcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJhdXRoZW50aWNhdGVcIiwgY3JlZGVudGlhbDogY3JlZGVudGlhbCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHJlcXVlc3RzIHRvIHRoZSByZW1vdGUgc2l0ZSBhc2tpbmcgaXQgdG8gcHJvdmlkZSBpdHNcbiAgICogY3VycmVudCBpbnRlcmZhY2VcbiAgICovXG4gIHJlcXVlc3RSZW1vdGUoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJnZXRJbnRlcmZhY2VcIiB9KTtcbiAgfVxuXG4gIF9uZGFycmF5KHR5cGVkQXJyYXksIHNoYXBlLCBkdHlwZSkge1xuICAgIHZhciBfZHR5cGUgPSB0eXBlZEFycmF5VG9EdHlwZVt0eXBlZEFycmF5LmNvbnN0cnVjdG9yLm5hbWVdO1xuICAgIGlmIChkdHlwZSAmJiBkdHlwZSAhPT0gX2R0eXBlKSB7XG4gICAgICB0aHJvdyBcImR0eXBlIGRvZXNuJ3QgbWF0Y2ggdGhlIHR5cGUgb2YgdGhlIGFycmF5OiBcIiArXG4gICAgICAgIF9kdHlwZSArXG4gICAgICAgIFwiICE9IFwiICtcbiAgICAgICAgZHR5cGU7XG4gICAgfVxuICAgIHNoYXBlID0gc2hhcGUgfHwgW3R5cGVkQXJyYXkubGVuZ3RoXTtcbiAgICByZXR1cm4ge1xuICAgICAgX3J0eXBlOiBcIm5kYXJyYXlcIixcbiAgICAgIF9ydmFsdWU6IHR5cGVkQXJyYXksXG4gICAgICBfcnNoYXBlOiBzaGFwZSxcbiAgICAgIF9yZHR5cGU6IF9kdHlwZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbmV3IHJlbW90ZSBpbnRlcmZhY2UgcHJvdmlkZWQgYnkgdGhlIG90aGVyIHNpdGVcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMgbGlzdCBvZiBmdW5jdGlvbiBuYW1lc1xuICAgKi9cbiAgX3NldFJlbW90ZUludGVyZmFjZShhcGkpIHtcbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbXCJfcnJlbW90ZVwiXSA9IHRoaXMuX2RlY29kZShhcGkpO1xuICAgIHRoaXMuX2ZpcmUoXCJyZW1vdGVSZWFkeVwiKTtcbiAgICB0aGlzLl9yZXBvcnRSZW1vdGVTZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHdyYXBwZWQgZnVuY3Rpb24gY29ycmVzcG9uZGluZyB0byBhIHNpbmdsZSByZW1vdGVcbiAgICogbWV0aG9kLiBXaGVuIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb24gaXMgY2FsbGVkLCBpdCB3aWxsIHNlbmQgdGhlXG4gICAqIGNvcnJlc3BvbmRpbmcgbWVzc2FnZSB0byB0aGUgcmVtb3RlIHNpdGUgYXNraW5nIGl0IHRvIGV4ZWN1dGVcbiAgICogdGhlIHBhcnRpY3VsYXIgbWV0aG9kIG9mIGl0cyBpbnRlcmZhY2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgdGhlIHJlbW90ZSBtZXRob2RcbiAgICpcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSB3cmFwcGVkIHJlbW90ZSBtZXRob2RcbiAgICovXG4gIF9nZW5SZW1vdGVNZXRob2QobmFtZSwgaW50ZXJmYWNlX2lkKSB7XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgcmVtb3RlTWV0aG9kID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgaWQgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlkID0gbWUuX21ldGhvZF9yZWZzLnB1dChcbiAgICAgICAgICAgIGludGVyZmFjZV9pZCA/IGludGVyZmFjZV9pZCArIFwiL1wiICsgbmFtZSA6IG5hbWVcbiAgICAgICAgICApO1xuICAgICAgICAgIHZhciB3cmFwcGVkX3Jlc29sdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gbnVsbCkgbWUuX21ldGhvZF9yZWZzLmZldGNoKGlkKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgd3JhcHBlZF9yZWplY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gbnVsbCkgbWUuX21ldGhvZF9yZWZzLmZldGNoKGlkKTtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgd3JhcHBlZF9yZXNvbHZlLl9famFpbGVkX3BhaXJzX18gPSB3cmFwcGVkX3JlamVjdDtcbiAgICAgICAgICB3cmFwcGVkX3JlamVjdC5fX2phaWxlZF9wYWlyc19fID0gd3JhcHBlZF9yZXNvbHZlO1xuXG4gICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICAgIGlmIChuYW1lID09PSBcInJlZ2lzdGVyXCIgfHwgbmFtZSA9PT0gXCJleHBvcnRcIiB8fCBuYW1lID09PSBcIm9uXCIpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBtZS5fd3JhcChhcmdzLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJncyA9IG1lLl93cmFwKGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICBpZiAodHJhbnNmZXJhYmxlcykgZGVsZXRlIGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICBtZS5fY29ubmVjdGlvbi5lbWl0KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcIm1ldGhvZFwiLFxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICBwaWQ6IGludGVyZmFjZV9pZCxcbiAgICAgICAgICAgICAgYXJnczogYXJncyxcbiAgICAgICAgICAgICAgcHJvbWlzZTogbWUuX3dyYXAoW3dyYXBwZWRfcmVzb2x2ZSwgd3JhcHBlZF9yZWplY3RdKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zZmVyYWJsZXNcbiAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKGlkKSBtZS5fbWV0aG9kX3JlZnMuZmV0Y2goaWQpO1xuICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gZXhlY3R1ZSByZW1vdGUgbWV0aG9kIChpbnRlcmZhY2U6ICR7aW50ZXJmYWNlX2lkIHx8XG4gICAgICAgICAgICAgIG1lLmlkfSwgbWV0aG9kOiAke25hbWV9KSwgZXJyb3I6ICR7ZX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgICByZW1vdGVNZXRob2QuX19yZW1vdGVfbWV0aG9kID0gdHJ1ZTtcbiAgICByZXR1cm4gcmVtb3RlTWV0aG9kO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgcmVzcG9uY2UgcmVwb3J0aW5nIHRoYXQgaW50ZXJmYWNlIGp1c3QgcHJvdmlkZWQgYnkgdGhlXG4gICAqIHJlbW90ZSBzaXRlIHdhcyBzdWNjZXNzZnVsbHkgc2V0IGJ5IHRoaXMgc2l0ZSBhcyByZW1vdGVcbiAgICovXG4gIF9yZXBvcnRSZW1vdGVTZXQoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJpbnRlcmZhY2VTZXRBc1JlbW90ZVwiIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmVzIHRoZSBwcm92aWRlZCBzZXQgb2YgcmVtb3RlIG1ldGhvZCBhcmd1bWVudHMgZm9yXG4gICAqIHNlbmRpbmcgdG8gdGhlIHJlbW90ZSBzaXRlLCByZXBsYWNlcyBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoXG4gICAqIGlkZW50aWZpZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgdG8gd3JhcFxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHdyYXBwZWQgYXJndW1lbnRzXG4gICAqL1xuXG4gIF9lbmNvZGVJbnRlcmZhY2UoYU9iamVjdCkge1xuICAgIGxldCB2LCBrLCBrZXlzO1xuICAgIGNvbnN0IGVuY29kZWRfaW50ZXJmYWNlID0ge307XG4gICAgYU9iamVjdFtcIl9yaWRcIl0gPSBhT2JqZWN0W1wiX3JpZFwiXSB8fCByYW5kSWQoKTtcbiAgICAvLyBhbiBvYmplY3QvYXJyYXlcbiAgICBpZiAoYU9iamVjdC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0IHx8IEFycmF5LmlzQXJyYXkoYU9iamVjdCkpIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhhT2JqZWN0KTtcbiAgICB9XG4gICAgLy8gYSBjbGFzc1xuICAgIGVsc2UgaWYgKGFPYmplY3QuY29uc3RydWN0b3IgPT09IEZ1bmN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgaW5zdGFudGlhdGUgdGhlIGNsYXNzIGJlZm9yZSBleHBvcnR0aW5nIGl0LlwiKTtcbiAgICB9XG4gICAgLy8gaW5zdGFuY2Ugb2YgYSBjbGFzc1xuICAgIGVsc2UgaWYgKGFPYmplY3QuY29uc3RydWN0b3IuY29uc3RydWN0b3IgPT09IEZ1bmN0aW9uKSB7XG4gICAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFPYmplY3QpKS5jb25jYXQoXG4gICAgICAgIE9iamVjdC5rZXlzKGFPYmplY3QpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIGludGVyZmFjZSB0eXBlXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJPYmplY3QgPSBBcnJheS5pc0FycmF5KGFPYmplY3QpID8gW10gOiB7fTtcblxuICAgIGZvciAoayBvZiBrZXlzKSB7XG4gICAgICBpZiAoW1wiaGFzT3duUHJvcGVydHlcIiwgXCJjb25zdHJ1Y3RvclwiXS5pbmNsdWRlcyhrKSkgY29udGludWU7XG5cbiAgICAgIGlmIChrLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdiA9IGFPYmplY3Rba107XG5cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGJPYmplY3Rba10gPSB7XG4gICAgICAgICAgX3J0eXBlOiBcImludGVyZmFjZVwiLFxuICAgICAgICAgIF9yaWQ6IGFPYmplY3RbXCJfcmlkXCJdLFxuICAgICAgICAgIF9ydmFsdWU6IGtcbiAgICAgICAgfTtcbiAgICAgICAgZW5jb2RlZF9pbnRlcmZhY2Vba10gPSB2O1xuICAgICAgfSBlbHNlIGlmIChPYmplY3QodikgIT09IHYpIHtcbiAgICAgICAgYk9iamVjdFtrXSA9IHsgX3J0eXBlOiBcImFyZ3VtZW50XCIsIF9ydmFsdWU6IHYgfTtcbiAgICAgICAgZW5jb2RlZF9pbnRlcmZhY2Vba10gPSB2O1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBiT2JqZWN0W2tdID0gdGhpcy5fZW5jb2RlSW50ZXJmYWNlKHYpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbYU9iamVjdFtcIl9yaWRcIl1dID0gZW5jb2RlZF9pbnRlcmZhY2U7XG5cbiAgICAvLyByZW1vdmUgaW50ZXJmYWNlIHdoZW4gY2xvc2VkXG4gICAgaWYgKGFPYmplY3Qub24gJiYgdHlwZW9mIGFPYmplY3Qub24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgYU9iamVjdC5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2ludGVyZmFjZV9zdG9yZVthT2JqZWN0W1wiX3JpZFwiXV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGJPYmplY3Q7XG4gIH1cblxuICBfZW5jb2RlKGFPYmplY3QsIGFzX2ludGVyZmFjZSkge1xuICAgIGNvbnN0IHRyYW5zZmVyYWJsZXMgPSBbXTtcbiAgICBpZiAoIWFPYmplY3QpIHtcbiAgICAgIHJldHVybiBhT2JqZWN0O1xuICAgIH1cbiAgICBjb25zdCBfdHJhbnNmZXIgPSBhT2JqZWN0Ll90cmFuc2ZlcjtcbiAgICBsZXQgYk9iamVjdCwgdiwgaztcbiAgICBjb25zdCBpc2FycmF5ID0gQXJyYXkuaXNBcnJheShhT2JqZWN0KTtcbiAgICAvL3NraXAgaWYgYWxyZWFkeSBlbmNvZGVkXG4gICAgaWYgKHR5cGVvZiBhT2JqZWN0ID09PSBcIm9iamVjdFwiICYmIGFPYmplY3QuX3J0eXBlICYmIGFPYmplY3QuX3J2YWx1ZSkge1xuICAgICAgcmV0dXJuIGFPYmplY3Q7XG4gICAgfVxuXG4gICAgLy9lbmNvZGUgaW50ZXJmYWNlc1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBhT2JqZWN0ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAhQXJyYXkuaXNBcnJheShhT2JqZWN0KSAmJlxuICAgICAgKGFPYmplY3QuX3JpbnRmIHx8IGFzX2ludGVyZmFjZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVJbnRlcmZhY2UoYU9iamVjdCk7XG4gICAgfVxuXG4gICAgaWYgKGFzX2ludGVyZmFjZSkge1xuICAgICAgYU9iamVjdFtcIl9yaWRcIl0gPSBhT2JqZWN0W1wiX3JpZFwiXSB8fCByYW5kSWQoKTtcbiAgICAgIHRoaXMuX2ludGVyZmFjZV9zdG9yZVthT2JqZWN0W1wiX3JpZFwiXV0gPVxuICAgICAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbYU9iamVjdFtcIl9yaWRcIl1dIHx8IChpc2FycmF5ID8gW10gOiB7fSk7XG4gICAgfVxuXG4gICAgYk9iamVjdCA9IGlzYXJyYXkgPyBbXSA6IHt9O1xuICAgIGZvciAoayBpbiBhT2JqZWN0KSB7XG4gICAgICBpZiAoW1wiaGFzT3duUHJvcGVydHlcIiwgXCJjb25zdHJ1Y3RvclwiXS5pbmNsdWRlcyhrKSkgY29udGludWU7XG4gICAgICBpZiAoaXNhcnJheSB8fCBhT2JqZWN0Lmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgIHYgPSBhT2JqZWN0W2tdO1xuICAgICAgICBpZiAodiAmJiB0eXBlb2YgdGhpcy5fbG9jYWxfYXBpLl9ycGNfZW5jb2RlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBlbmNvZGVkX29iaiA9IHRoaXMuX2xvY2FsX2FwaS5fcnBjX2VuY29kZSh2KTtcbiAgICAgICAgICBpZiAoZW5jb2RlZF9vYmogJiYgZW5jb2RlZF9vYmouX2N0eXBlKSB7XG4gICAgICAgICAgICBiT2JqZWN0W2tdID0ge1xuICAgICAgICAgICAgICBfcnR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICAgIF9ydmFsdWU6IGVuY29kZWRfb2JqLFxuICAgICAgICAgICAgICBfcmlkOiBhT2JqZWN0W1wiX3JpZFwiXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBpZiB0aGUgcmV0dXJuZWQgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gX3J0eXBlLCBhc3N1bWluZyB0aGUgb2JqZWN0IGhhcyBiZWVuIHRyYW5zZm9ybWVkXG4gICAgICAgICAgZWxzZSBpZiAoZW5jb2RlZF9vYmogIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdiA9IGVuY29kZWRfb2JqO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGlmIChhc19pbnRlcmZhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRfaW50ZXJmYWNlID0gdGhpcy5faW50ZXJmYWNlX3N0b3JlW2FPYmplY3RbXCJfcmlkXCJdXTtcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB7XG4gICAgICAgICAgICAgIF9ydHlwZTogXCJpbnRlcmZhY2VcIixcbiAgICAgICAgICAgICAgX3JpZDogYU9iamVjdFtcIl9yaWRcIl0sXG4gICAgICAgICAgICAgIF9ydmFsdWU6IGtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbmNvZGVkX2ludGVyZmFjZVtrXSA9IHY7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGludGVyZmFjZUZ1bmNOYW1lID0gbnVsbDtcbiAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2xvY2FsX2FwaSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKFwiX1wiKSkgY29udGludWU7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9sb2NhbF9hcGlbbmFtZV0gPT09IHYpIHtcbiAgICAgICAgICAgICAgICBpbnRlcmZhY2VGdW5jTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2VhcmNoIGZvciBwcm90b3R5cGVzXG4gICAgICAgICAgdmFyIGZ1bmN0aW9ucyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFxuICAgICAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMuX2xvY2FsX2FwaSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbmFtZV8gPSBmdW5jdGlvbnNbaV07XG4gICAgICAgICAgICBpZiAobmFtZV8uc3RhcnRzV2l0aChcIl9cIikpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaVtuYW1lX10gPT09IHYpIHtcbiAgICAgICAgICAgICAgaW50ZXJmYWNlRnVuY05hbWUgPSBuYW1lXztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaW50ZXJmYWNlRnVuY05hbWUpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuX3N0b3JlLnB1dCh2KTtcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB7XG4gICAgICAgICAgICAgIF9ydHlwZTogXCJjYWxsYmFja1wiLFxuICAgICAgICAgICAgICBfcnZhbHVlOiAodi5jb25zdHJ1Y3RvciAmJiB2LmNvbnN0cnVjdG9yLm5hbWUpIHx8IGlkLFxuICAgICAgICAgICAgICBfcmluZGV4OiBpZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYk9iamVjdFtrXSA9IHtcbiAgICAgICAgICAgICAgX3J0eXBlOiBcImludGVyZmFjZVwiLFxuICAgICAgICAgICAgICBfcnZhbHVlOiBpbnRlcmZhY2VGdW5jTmFtZSxcbiAgICAgICAgICAgICAgX3JpZDogXCJfcmxvY2FsXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIC8qZ2xvYmFsIHRmKi9cbiAgICAgICAgICB0eXBlb2YgdGYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICB0Zi5UZW5zb3IgJiZcbiAgICAgICAgICB2IGluc3RhbmNlb2YgdGYuVGVuc29yXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHZfYnVmZmVyID0gdi5kYXRhU3luYygpO1xuICAgICAgICAgIGlmICh2Ll90cmFuc2ZlciB8fCBfdHJhbnNmZXIpIHtcbiAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaCh2X2J1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0ge1xuICAgICAgICAgICAgX3J0eXBlOiBcIm5kYXJyYXlcIixcbiAgICAgICAgICAgIF9ydmFsdWU6IHZfYnVmZmVyLFxuICAgICAgICAgICAgX3JzaGFwZTogdi5zaGFwZSxcbiAgICAgICAgICAgIF9yZHR5cGU6IHYuZHR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIC8qZ2xvYmFsIG5qKi9cbiAgICAgICAgICB0eXBlb2YgbmogIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICBuai5OZEFycmF5ICYmXG4gICAgICAgICAgdiBpbnN0YW5jZW9mIG5qLk5kQXJyYXlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdmFyIGR0eXBlID0gdHlwZWRBcnJheVRvRHR5cGVbdi5zZWxlY3Rpb24uZGF0YS5jb25zdHJ1Y3Rvci5uYW1lXTtcbiAgICAgICAgICBpZiAodi5fdHJhbnNmZXIgfHwgX3RyYW5zZmVyKSB7XG4gICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2godi5zZWxlY3Rpb24uZGF0YS5idWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0ge1xuICAgICAgICAgICAgX3J0eXBlOiBcIm5kYXJyYXlcIixcbiAgICAgICAgICAgIF9ydmFsdWU6IHYuc2VsZWN0aW9uLmRhdGEsXG4gICAgICAgICAgICBfcnNoYXBlOiB2LnNoYXBlLFxuICAgICAgICAgICAgX3JkdHlwZTogZHR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3Iodik7XG4gICAgICAgICAgYk9iamVjdFtrXSA9IHsgX3J0eXBlOiBcImVycm9yXCIsIF9ydmFsdWU6IHYudG9TdHJpbmcoKSB9O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmIHYgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgYk9iamVjdFtrXSA9IHtcbiAgICAgICAgICAgIF9ydHlwZTogXCJmaWxlXCIsXG4gICAgICAgICAgICBfcnZhbHVlOiB2LFxuICAgICAgICAgICAgX3JyZWxhdGl2ZV9wYXRoOiB2LnJlbGF0aXZlUGF0aCB8fCB2LndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VuZCBvYmplY3RzIHN1cHBvcnRlZCBieSBzdHJ1Y3R1cmUgY2xvbmUgYWxnb3JpdGhtXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJfV29ya2Vyc19BUEkvU3RydWN0dXJlZF9jbG9uZV9hbGdvcml0aG1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgdiAhPT0gT2JqZWN0KHYpIHx8XG4gICAgICAgICAgdiBpbnN0YW5jZW9mIEJvb2xlYW4gfHxcbiAgICAgICAgICB2IGluc3RhbmNlb2YgU3RyaW5nIHx8XG4gICAgICAgICAgdiBpbnN0YW5jZW9mIERhdGUgfHxcbiAgICAgICAgICB2IGluc3RhbmNlb2YgUmVnRXhwIHx8XG4gICAgICAgICAgdiBpbnN0YW5jZW9mIEJsb2IgfHxcbiAgICAgICAgICB2IGluc3RhbmNlb2YgSW1hZ2VEYXRhIHx8XG4gICAgICAgICAgKHR5cGVvZiBGaWxlTGlzdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB2IGluc3RhbmNlb2YgRmlsZUxpc3QpXG4gICAgICAgICkge1xuICAgICAgICAgIGJPYmplY3Rba10gPSB7IF9ydHlwZTogXCJhcmd1bWVudFwiLCBfcnZhbHVlOiB2IH07XG4gICAgICAgIH0gZWxzZSBpZiAodiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgaWYgKHYuX3RyYW5zZmVyIHx8IF90cmFuc2Zlcikge1xuICAgICAgICAgICAgdHJhbnNmZXJhYmxlcy5wdXNoKHYpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0geyBfcnR5cGU6IFwiYXJndW1lbnRcIiwgX3J2YWx1ZTogdiB9O1xuICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclZpZXcpIHtcbiAgICAgICAgICBpZiAodi5fdHJhbnNmZXIgfHwgX3RyYW5zZmVyKSB7XG4gICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2godi5idWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0geyBfcnR5cGU6IFwiYXJndW1lbnRcIiwgX3J2YWx1ZTogdiB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IHN1cHBvcnQgYWxzbyBNYXAgYW5kIFNldFxuICAgICAgICAvLyBUT0RPOiBhdm9pZCBvYmplY3Qgc3VjaCBhcyBEeW5hbWljUGx1Z2luIGluc3RhbmNlLlxuICAgICAgICBlbHNlIGlmICh2Ll9yaW50Zikge1xuICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9lbmNvZGUodiwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBiT2JqZWN0W2tdID0gdGhpcy5fZW5jb2RlKHYsIGFzX2ludGVyZmFjZSk7XG4gICAgICAgICAgLy8gbW92ZSB0cmFuc2ZlcmFibGVzIHRvIHRoZSB0b3AgbGV2ZWwgb2JqZWN0XG4gICAgICAgICAgaWYgKGJPYmplY3Rba10uX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfXy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2goYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfX1t0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgXCJpbWpveS1ycGM6IFVuc3VwcG9ydGVkIGRhdGEgdHlwZSBcIiArIGsgKyBcIixcIiArIHY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRyYW5zZmVyYWJsZXMubGVuZ3RoID4gMCkge1xuICAgICAgYk9iamVjdC5fX3RyYW5zZmVyYWJsZXNfXyA9IHRyYW5zZmVyYWJsZXM7XG4gICAgfVxuICAgIHJldHVybiBiT2JqZWN0O1xuICB9XG5cbiAgX2RlY29kZShhT2JqZWN0LCBjYWxsYmFja0lkLCB3aXRoUHJvbWlzZSkge1xuICAgIGlmICghYU9iamVjdCkge1xuICAgICAgcmV0dXJuIGFPYmplY3Q7XG4gICAgfVxuICAgIHZhciBiT2JqZWN0LCB2LCBrO1xuICAgIGlmIChhT2JqZWN0Lmhhc093blByb3BlcnR5KFwiX3J0eXBlXCIpICYmIGFPYmplY3QuaGFzT3duUHJvcGVydHkoXCJfcnZhbHVlXCIpKSB7XG4gICAgICBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFwiY3VzdG9tXCIpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGFPYmplY3QuX3J2YWx1ZSAmJlxuICAgICAgICAgIHR5cGVvZiB0aGlzLl9sb2NhbF9hcGkuX3JwY19kZWNvZGUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICApIHtcbiAgICAgICAgICBiT2JqZWN0ID0gdGhpcy5fbG9jYWxfYXBpLl9ycGNfZGVjb2RlKGFPYmplY3QuX3J2YWx1ZSk7XG4gICAgICAgICAgaWYgKGJPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYk9iamVjdCA9IGFPYmplY3Q7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJPYmplY3QgPSBhT2JqZWN0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcImNhbGxiYWNrXCIpIHtcbiAgICAgICAgYk9iamVjdCA9IHRoaXMuX2dlblJlbW90ZUNhbGxiYWNrKFxuICAgICAgICAgIGNhbGxiYWNrSWQsXG4gICAgICAgICAgYU9iamVjdC5fcmluZGV4LFxuICAgICAgICAgIHdpdGhQcm9taXNlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcImludGVyZmFjZVwiKSB7XG4gICAgICAgIGNvbnN0IGludGZpZCA9IGFPYmplY3QuX3JpZCA9PT0gXCJfcmxvY2FsXCIgPyBcIl9ycm1vdGVcIiA6IGFPYmplY3QuX3JpZDtcbiAgICAgICAgYk9iamVjdCA9XG4gICAgICAgICAgKHRoaXMuX2ludGVyZmFjZV9zdG9yZVtpbnRmaWRdICYmXG4gICAgICAgICAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbaW50ZmlkXVthT2JqZWN0Ll9ydmFsdWVdKSB8fFxuICAgICAgICAgIHRoaXMuX2dlblJlbW90ZU1ldGhvZChhT2JqZWN0Ll9ydmFsdWUsIGFPYmplY3QuX3JpZCk7XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcIm5kYXJyYXlcIikge1xuICAgICAgICAvKmdsb2JhbCBuaiB0ZiovXG4gICAgICAgIC8vY3JlYXRlIGJ1aWxkIGFycmF5L3RlbnNvciBpZiB1c2VkIGluIHRoZSBwbHVnaW5cbiAgICAgICAgaWYgKHR5cGVvZiBuaiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuai5hcnJheSkge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFPYmplY3QuX3J2YWx1ZSkpIHtcbiAgICAgICAgICAgIGFPYmplY3QuX3J2YWx1ZSA9IGFPYmplY3QuX3J2YWx1ZS5yZWR1Y2UoX2FwcGVuZEJ1ZmZlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJPYmplY3QgPSBualxuICAgICAgICAgICAgLmFycmF5KGFPYmplY3QuX3J2YWx1ZSwgYU9iamVjdC5fcmR0eXBlKVxuICAgICAgICAgICAgLnJlc2hhcGUoYU9iamVjdC5fcnNoYXBlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGYgIT09IFwidW5kZWZpbmVkXCIgJiYgdGYuVGVuc29yKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYU9iamVjdC5fcnZhbHVlKSkge1xuICAgICAgICAgICAgYU9iamVjdC5fcnZhbHVlID0gYU9iamVjdC5fcnZhbHVlLnJlZHVjZShfYXBwZW5kQnVmZmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYk9iamVjdCA9IHRmLnRlbnNvcihcbiAgICAgICAgICAgIGFPYmplY3QuX3J2YWx1ZSxcbiAgICAgICAgICAgIGFPYmplY3QuX3JzaGFwZSxcbiAgICAgICAgICAgIGFPYmplY3QuX3JkdHlwZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9rZWVwIGl0IGFzIHJlZ3VsYXIgaWYgdHJhbnNmZXJlZCB0byB0aGUgbWFpbiBhcHBcbiAgICAgICAgICBiT2JqZWN0ID0gYU9iamVjdDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhT2JqZWN0Ll9ydHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIGJPYmplY3QgPSBuZXcgRXJyb3IoYU9iamVjdC5fcnZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIGJPYmplY3QgPSBhT2JqZWN0Ll9ydmFsdWU7XG4gICAgICAgIC8vcGF0Y2ggcmVsYXRpdmVQYXRoXG4gICAgICAgIGJPYmplY3QucmVsYXRpdmVQYXRoID0gYU9iamVjdC5fcnJlbGF0aXZlX3BhdGg7XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcImFyZ3VtZW50XCIpIHtcbiAgICAgICAgYk9iamVjdCA9IGFPYmplY3QuX3J2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiT2JqZWN0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXNhcnJheSA9IEFycmF5LmlzQXJyYXkoYU9iamVjdCk7XG4gICAgICBiT2JqZWN0ID0gaXNhcnJheSA/IFtdIDoge307XG4gICAgICBmb3IgKGsgaW4gYU9iamVjdCkge1xuICAgICAgICBpZiAoaXNhcnJheSB8fCBhT2JqZWN0Lmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgdiA9IGFPYmplY3Rba107XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9kZWNvZGUodiwgY2FsbGJhY2tJZCwgd2l0aFByb21pc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJPYmplY3Q7XG4gICAgfVxuICB9XG5cbiAgX3dyYXAoYXJncywgYXNfaW50ZXJmYWNlKSB7XG4gICAgdmFyIHdyYXBwZWQgPSB0aGlzLl9lbmNvZGUoYXJncywgYXNfaW50ZXJmYWNlKTtcbiAgICB2YXIgcmVzdWx0ID0geyBhcmdzOiB3cmFwcGVkIH07XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbndyYXBzIHRoZSBzZXQgb2YgYXJndW1lbnRzIGRlbGl2ZXJlZCBmcm9tIHRoZSByZW1vdGUgc2l0ZSxcbiAgICogcmVwbGFjZXMgYWxsIGNhbGxiYWNrIGlkZW50aWZpZXJzIHdpdGggYSBmdW5jdGlvbiB3aGljaCB3aWxsXG4gICAqIGluaXRpYXRlIHNlbmRpbmcgdGhhdCBjYWxsYmFjayBpZGVudGlmaWVyIGJhY2sgdG8gb3RoZXIgc2l0ZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYXJncyB0byB1bndyYXBcbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSB3aXRoUHJvbWlzZSBpcyB0cnVlIG1lYW5zIHRoaXMgdGhlIGNhbGxiYWNrIHNob3VsZCBjb250YWluIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHVud3JhcHBlZCBhcmdzXG4gICAqL1xuICBfdW53cmFwKGFyZ3MsIHdpdGhQcm9taXNlKSB7XG4gICAgLy8gdmFyIGNhbGxlZCA9IGZhbHNlO1xuXG4gICAgLy8gd3JhcHMgZWFjaCBjYWxsYmFjayBzbyB0aGF0IHRoZSBvbmx5IG9uZSBjb3VsZCBiZSBjYWxsZWRcbiAgICAvLyB2YXIgb25jZShjYikge1xuICAgIC8vICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgIC8vICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIGNiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgIHZhciBtc2cgPVxuICAgIC8vICAgICAgICAgICAgICAgJ0EgY2FsbGJhY2sgZnJvbSB0aGlzIHNldCBoYXMgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkJztcbiAgICAvLyAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfTtcbiAgICAvLyB9XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuX2RlY29kZShhcmdzLmFyZ3MsIGFyZ3MuY2FsbGJhY2tJZCwgd2l0aFByb21pc2UpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSB3cmFwcGVkIGZ1bmN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gYSBzaW5nbGUgcmVtb3RlXG4gICAqIGNhbGxiYWNrLiBXaGVuIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb24gaXMgY2FsbGVkLCBpdCB3aWxsIHNlbmRcbiAgICogdGhlIGNvcnJlc3BvbmRpbmcgbWVzc2FnZSB0byB0aGUgcmVtb3RlIHNpdGUgYXNraW5nIGl0IHRvXG4gICAqIGV4ZWN1dGUgdGhlIHBhcnRpY3VsYXIgY2FsbGJhY2sgcHJldmlvdXNseSBzYXZlZCBkdXJpbmcgYSBjYWxsXG4gICAqIGJ5IHRoZSByZW1vdGUgc2l0ZSBhIG1ldGhvZCBmcm9tIHRoZSBpbnRlcmZhY2Ugb2YgdGhpcyBzaXRlXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBvZiB0aGUgcmVtb3RlIGNhbGxiYWNrIHRvIGV4ZWN1dGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFyZ051bSBhcmd1bWVudCBpbmRleCBvZiB0aGUgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtCb29sZWFufSB3aXRoUHJvbWlzZSBpcyB0cnVlIG1lYW5zIHRoaXMgdGhlIGNhbGxiYWNrIHNob3VsZCBjb250YWluIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IHdyYXBwZWQgcmVtb3RlIGNhbGxiYWNrXG4gICAqL1xuICBfZ2VuUmVtb3RlQ2FsbGJhY2soaWQsIGFyZ051bSwgd2l0aFByb21pc2UpIHtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciByZW1vdGVDYWxsYmFjaztcbiAgICBpZiAod2l0aFByb21pc2UpIHtcbiAgICAgIHJlbW90ZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBtZS5fd3JhcChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICBpZiAodHJhbnNmZXJhYmxlcykgZGVsZXRlIGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICByZXNvbHZlLl9famFpbGVkX3BhaXJzX18gPSByZWplY3Q7XG4gICAgICAgICAgcmVqZWN0Ll9famFpbGVkX3BhaXJzX18gPSByZXNvbHZlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtZS5fY29ubmVjdGlvbi5lbWl0KFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJjYWxsYmFja1wiLFxuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICBfcmluZGV4OiBhcmdOdW0sXG4gICAgICAgICAgICAgICAgYXJnczogYXJncyxcbiAgICAgICAgICAgICAgICAvLyBwaWQgOiAgbWUuaWQsXG4gICAgICAgICAgICAgICAgcHJvbWlzZTogbWUuX3dyYXAoW3Jlc29sdmUsIHJlamVjdF0pXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICBgRmFpbGVkIHRvIGV4ZWN0dWUgcmVtb3RlIGNhbGxiYWNrIChpZDogJHtpZH0sIGFyZ051bTogJHthcmdOdW19KS5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHJlbW90ZUNhbGxiYWNrO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdGVDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IG1lLl93cmFwKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgaWYgKHRyYW5zZmVyYWJsZXMpIGRlbGV0ZSBhcmdzLmFyZ3MuX190cmFuc2ZlcmFibGVzX187XG4gICAgICAgIHJldHVybiBtZS5fY29ubmVjdGlvbi5lbWl0KFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwiY2FsbGJhY2tcIixcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIF9yaW5kZXg6IGFyZ051bSxcbiAgICAgICAgICAgIGFyZ3M6IGFyZ3NcbiAgICAgICAgICAgIC8vIHBpZCA6ICBtZS5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmZXJhYmxlc1xuICAgICAgICApO1xuICAgICAgfTtcbiAgICAgIHJldHVybiByZW1vdGVDYWxsYmFjaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlIGFuZCBicmVha3MgdGhlIGNvbm5lY3Rpb25cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJkaXNjb25uZWN0XCIgfSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9jb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlZmVyZW5jZVN0b3JlIGlzIGEgc3BlY2lhbCBvYmplY3Qgd2hpY2ggc3RvcmVzIG90aGVyIG9iamVjdHNcbiAqIGFuZCBwcm92aWRlcyB0aGUgcmVmZXJlbmNlcyAobnVtYmVyKSBpbnN0ZWFkLiBUaGlzIHJlZmVyZW5jZVxuICogbWF5IHRoZW4gYmUgc2VudCBvdmVyIGEganNvbi1iYXNlZCBjb21tdW5pY2F0aW9uIGNoYW5uZWwgKElQQ1xuICogdG8gYW5vdGhlciBOb2RlLmpzIHByb2Nlc3Mgb3IgYSBtZXNzYWdlIHRvIHRoZSBXb3JrZXIpLiBPdGhlclxuICogc2l0ZSBtYXkgdGhlbiBwcm92aWRlIHRoZSByZWZlcmVuY2UgaW4gdGhlIHJlc3BvbmNlIG1lc3NhZ2VcbiAqIGltcGx5aW5nIHRoZSBnaXZlbiBvYmplY3Qgc2hvdWxkIGJlIGFjdGl2YXRlZC5cbiAqXG4gKiBQcmltYXJ5IHVzYWdlIGZvciB0aGUgUmVmZXJlbmNlU3RvcmUgaXMgYSBzdG9yYWdlIGZvciB0aGVcbiAqIGNhbGxiYWNrcywgd2hpY2ggdGhlcmVmb3JlIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGluaXRpYXRlIGFcbiAqIGNhbGxiYWNrIGV4ZWN1dGlvbiBieSB0aGUgb3Bwb3NpdGUgc2l0ZSAod2hpY2ggbm9ybWFsbHkgY2Fubm90XG4gKiBkaXJlY3RseSBleGVjdXRlIGZ1bmN0aW9ucyBvdmVyIHRoZSBjb21tdW5pY2F0aW9uIGNoYW5uZWwpLlxuICpcbiAqIEVhY2ggc3RvcmVkIG9iamVjdCBjYW4gb25seSBiZSBmZXRjaGVkIG9uY2UgYW5kIGlzIG5vdFxuICogYXZhaWxhYmxlIGZvciB0aGUgc2Vjb25kIHRpbWUuIEVhY2ggc3RvcmVkIG9iamVjdCBtdXN0IGJlXG4gKiBmZXRjaGVkLCBzaW5jZSBvdGhlcndpc2UgaXQgd2lsbCByZW1haW4gc3RvcmVkIGZvcmV2ZXIgYW5kXG4gKiBjb25zdW1lIG1lbW9yeS5cbiAqXG4gKiBTdG9yZWQgb2JqZWN0IGluZGVjZXMgYXJlIHNpbXBseSB0aGUgbnVtYmVycywgd2hpY2ggYXJlIGhvd2V2ZXJcbiAqIHJlbGVhc2VkIGFsb25nIHdpdGggdGhlIG9iamVjdHMsIGFuZCBhcmUgbGF0ZXIgcmV1c2VkIGFnYWluIChpblxuICogb3JkZXIgdG8gcG9zdHBvbmUgdGhlIG92ZXJmbG93LCB3aGljaCBzaG91bGQgbm90IGxpa2VseSBoYXBwZW4sXG4gKiBidXQgYW55d2F5KS5cbiAqL1xuY2xhc3MgUmVmZXJlbmNlU3RvcmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdG9yZSA9IHt9OyAvLyBzdG9yZWQgb2JqZWN0XG4gICAgdGhpcy5faW5kaWNlcyA9IFswXTsgLy8gc21hbGxlc3QgYXZhaWxhYmxlIGluZGljZXNcbiAgICB0aGlzLl9yZWFkeUhhbmRsZXIgPSBmdW5jdGlvbigpIHt9O1xuICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gZnVuY3Rpb24oKSB7fTtcbiAgICB0aGlzLl9yZWFkeUhhbmRsZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBjYWxsIGhhbmRsZXIgd2hlbiB0aGUgc3RvcmUgaXMgZW1wdHlcbiAgICpcbiAgICogQHBhcmFtIHtGVU5DVElPTn0gaWQgb2YgYSBoYW5kbGVyXG4gICAqL1xuICBvblJlYWR5KHJlYWR5SGFuZGxlcikge1xuICAgIHRoaXMuX3JlYWR5SGFuZGxlciA9IHJlYWR5SGFuZGxlciB8fCBmdW5jdGlvbigpIHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIGNhbGwgaGFuZGxlciB3aGVuIHRoZSBzdG9yZSBpcyBub3QgZW1wdHlcbiAgICpcbiAgICogQHBhcmFtIHtGVU5DVElPTn0gaWQgb2YgYSBoYW5kbGVyXG4gICAqL1xuICBvbkJ1c3koYnVzeUhhbmRsZXIpIHtcbiAgICB0aGlzLl9idXN5SGFuZGxlciA9IGJ1c3lIYW5kbGVyIHx8IGZ1bmN0aW9uKCkge307XG4gIH1cblxuICAvKipcbiAgICogZ2V0IHRoZSBsZW5ndGggb2YgdGhlIHN0b3JlXG4gICAqXG4gICAqL1xuICBnZXRTdGFjaygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fc3RvcmUpLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gX2dlbklkKCkgZ2VuZXJhdGVzIHRoZSBuZXcgcmVmZXJlbmNlIGlkXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHNtYWxsZXN0IGF2YWlsYWJsZSBpZCBhbmQgcmVzZXJ2ZXMgaXRcbiAgICovXG4gIF9nZW5JZCgpIHtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKHRoaXMuX2luZGljZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZCA9IHRoaXMuX2luZGljZXNbMF0rKztcbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLl9pbmRpY2VzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIHRoZSBnaXZlbiByZWZlcmVuY2UgaWQgc28gdGhhdCBpdCB3aWxsIGJlIGF2YWlsYWJsZSBieVxuICAgKiBhbm90aGVyIG9iamVjdCBzdG9yZWRcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGlkIHRvIHJlbGVhc2VcbiAgICovXG4gIF9yZWxlYXNlSWQoaWQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2luZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZCA8IHRoaXMuX2luZGljZXNbaV0pIHtcbiAgICAgICAgdGhpcy5faW5kaWNlcy5zcGxpY2UoaSwgMCwgaWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhbmluZy11cCB0aGUgc2VxdWVuY2UgdGFpbFxuICAgIGZvciAoaSA9IHRoaXMuX2luZGljZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmICh0aGlzLl9pbmRpY2VzW2ldIC0gMSA9PT0gdGhpcy5faW5kaWNlc1tpIC0gMV0pIHtcbiAgICAgICAgdGhpcy5faW5kaWNlcy5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZXMgdGhlIGdpdmVuIG9iamVjdCBhbmQgcmV0dXJucyB0aGUgcmVmZXJuY2UgaWQgaW5zdGVhZFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIHRvIHN0b3JlXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHJlZmVyZW5jZSBpZCBvZiB0aGUgc3RvcmVkIG9iamVjdFxuICAgKi9cbiAgcHV0KG9iaikge1xuICAgIGlmICh0aGlzLl9idXN5SGFuZGxlciAmJiBPYmplY3Qua2V5cyh0aGlzLl9zdG9yZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9idXN5SGFuZGxlcigpO1xuICAgIH1cbiAgICB2YXIgaWQgPSB0aGlzLl9nZW5JZCgpO1xuICAgIHRoaXMuX3N0b3JlW2lkXSA9IG9iajtcbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHByZXZpb3VzbHkgc3RvcmVkIG9iamVjdCBhbmQgcmVsZWFzZXMgaXRzIHJlZmVyZW5jZVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaWQgb2YgYW4gb2JqZWN0IHRvIHJldHJpZXZlXG4gICAqL1xuICBmZXRjaChpZCkge1xuICAgIHZhciBvYmogPSB0aGlzLl9zdG9yZVtpZF07XG4gICAgaWYgKG9iaiAmJiAhb2JqLl9fcmVtb3RlX21ldGhvZCkge1xuICAgICAgZGVsZXRlIHRoaXMuX3N0b3JlW2lkXTtcbiAgICAgIHRoaXMuX3JlbGVhc2VJZChpZCk7XG4gICAgICBpZiAodGhpcy5fcmVhZHlIYW5kbGVyICYmIE9iamVjdC5rZXlzKHRoaXMuX3N0b3JlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcmVhZHlIYW5kbGVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvYmogJiYgb2JqLl9famFpbGVkX3BhaXJzX18pIHtcbiAgICAgIGNvbnN0IF9pZCA9IGdldEtleUJ5VmFsdWUodGhpcy5fc3RvcmUsIG9iai5fX2phaWxlZF9wYWlyc19fKTtcbiAgICAgIHRoaXMuZmV0Y2goX2lkKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7O0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBUEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQVJBO0FBbUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBVUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZ5QkE7QUF5eUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBL0dBIiwic291cmNlUm9vdCI6IiJ9\\\\n//# sourceURL=webpack-internal:///./src/rpc.js\\\\n\\\");\\n\\n/***/ }),\\n\\n/***/ \\\"./src/utils.js\\\":\\n/*!**********************!*\\\\\\n  !*** ./src/utils.js ***!\\n  \\\\**********************/\\n/*! exports provided: randId, dtypeToTypedArray, typedArrayToDtype, cacheRequirements, setupServiceWorker, urlJoin, EventManager */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\neval(\\\"__webpack_require__.r(__webpack_exports__);\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"randId\\\\\\\", function() { return randId; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"dtypeToTypedArray\\\\\\\", function() { return dtypeToTypedArray; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"typedArrayToDtype\\\\\\\", function() { return typedArrayToDtype; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"cacheRequirements\\\\\\\", function() { return cacheRequirements; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"setupServiceWorker\\\\\\\", function() { return setupServiceWorker; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"urlJoin\\\\\\\", function() { return urlJoin; });\\\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\\\\\\"EventManager\\\\\\\", function() { return EventManager; });\\\\nfunction randId() {\\\\n  return Math.random().toString(36).substr(2, 10) + new Date().getTime();\\\\n}\\\\nconst dtypeToTypedArray = {\\\\n  int8: \\\\\\\"Int8Array\\\\\\\",\\\\n  int16: \\\\\\\"Int16Array\\\\\\\",\\\\n  int32: \\\\\\\"Int32Array\\\\\\\",\\\\n  uint8: \\\\\\\"Uint8Array\\\\\\\",\\\\n  uint16: \\\\\\\"Uint16Array\\\\\\\",\\\\n  uint32: \\\\\\\"Uint32Array\\\\\\\",\\\\n  float32: \\\\\\\"Float32Array\\\\\\\",\\\\n  float64: \\\\\\\"Float64Array\\\\\\\",\\\\n  array: \\\\\\\"Array\\\\\\\"\\\\n};\\\\nconst typedArrayToDtype = {\\\\n  Int8Array: \\\\\\\"int8\\\\\\\",\\\\n  Int16Array: \\\\\\\"int16\\\\\\\",\\\\n  Int32Array: \\\\\\\"int32\\\\\\\",\\\\n  Uint8Array: \\\\\\\"uint8\\\\\\\",\\\\n  Uint16Array: \\\\\\\"uint16\\\\\\\",\\\\n  Uint32Array: \\\\\\\"uint32\\\\\\\",\\\\n  Float32Array: \\\\\\\"float32\\\\\\\",\\\\n  Float64Array: \\\\\\\"float64\\\\\\\",\\\\n  Array: \\\\\\\"array\\\\\\\"\\\\n};\\\\n\\\\nfunction cacheUrlInServiceWorker(url) {\\\\n  return new Promise(function (resolve, reject) {\\\\n    const message = {\\\\n      command: \\\\\\\"add\\\\\\\",\\\\n      url: url\\\\n    };\\\\n\\\\n    if (!navigator.serviceWorker || !navigator.serviceWorker.register) {\\\\n      reject(\\\\\\\"Service worker is not supported.\\\\\\\");\\\\n      return;\\\\n    }\\\\n\\\\n    const messageChannel = new MessageChannel();\\\\n\\\\n    messageChannel.port1.onmessage = function (event) {\\\\n      if (event.data && event.data.error) {\\\\n        reject(event.data.error);\\\\n      } else {\\\\n        resolve(event.data && event.data.result);\\\\n      }\\\\n    };\\\\n\\\\n    if (navigator.serviceWorker && navigator.serviceWorker.controller) {\\\\n      navigator.serviceWorker.controller.postMessage(message, [messageChannel.port2]);\\\\n    } else {\\\\n      reject(\\\\\\\"Service worker controller is not available\\\\\\\");\\\\n    }\\\\n  });\\\\n}\\\\n\\\\nasync function cacheRequirements(requirements) {\\\\n  if (!Array.isArray(requirements)) {\\\\n    requirementsm.code.requirements = [requirements];\\\\n  }\\\\n\\\\n  if (requirements && requirements.length > 0) {\\\\n    for (let req of requirements) {\\\\n      //remove prefix\\\\n      if (req.startsWith(\\\\\\\"js:\\\\\\\")) req = req.slice(3);\\\\n      if (req.startsWith(\\\\\\\"css:\\\\\\\")) req = req.slice(4);\\\\n      if (req.startsWith(\\\\\\\"cache:\\\\\\\")) req = req.slice(6);\\\\n      if (!req.startsWith(\\\\\\\"http\\\\\\\")) continue;\\\\n      await cacheUrlInServiceWorker(req).catch(e => {\\\\n        console.error(e);\\\\n      });\\\\n    }\\\\n  }\\\\n}\\\\nfunction setupServiceWorker(targetOrigin, cacheCallback) {\\\\n  // register service worker for offline access\\\\n  if (\\\\\\\"serviceWorker\\\\\\\" in navigator) {\\\\n    window.addEventListener(\\\\\\\"load\\\\\\\", function () {\\\\n      navigator.serviceWorker.register(\\\\\\\"/plugin-service-worker.js\\\\\\\").then(function (registration) {\\\\n        // Registration was successful\\\\n        console.log(\\\\\\\"ServiceWorker registration successful with scope: \\\\\\\", registration.scope);\\\\n      }, function (err) {\\\\n        // registration failed :(\\\\n        console.log(\\\\\\\"ServiceWorker registration failed: \\\\\\\", err);\\\\n      });\\\\n      targetOrigin = targetOrigin || \\\\\\\"*\\\\\\\";\\\\n      cacheCallback = cacheCallback || cacheRequirements;\\\\n\\\\n      if (cacheCallback && typeof cacheCallback !== \\\\\\\"function\\\\\\\") {\\\\n        throw new Error(\\\\\\\"config.cache_requirements must be a function\\\\\\\");\\\\n      }\\\\n\\\\n      window.addEventListener(\\\\\\\"message\\\\\\\", function (e) {\\\\n        if (targetOrigin === \\\\\\\"*\\\\\\\" || e.origin === targetOrigin) {\\\\n          const m = e.data;\\\\n\\\\n          if (m.type === \\\\\\\"cacheRequirements\\\\\\\") {\\\\n            cacheCallback(m.requirements);\\\\n          }\\\\n        }\\\\n      });\\\\n    });\\\\n  }\\\\n} //#Source https://bit.ly/2neWfJ2\\\\n\\\\nfunction urlJoin(...args) {\\\\n  return args.join(\\\\\\\"/\\\\\\\").replace(/[\\\\\\\\/]+/g, \\\\\\\"/\\\\\\\").replace(/^(.+):\\\\\\\\//, \\\\\\\"$1://\\\\\\\").replace(/^file:/, \\\\\\\"file:/\\\\\\\").replace(/\\\\\\\\/(\\\\\\\\?|&|#[^!])/g, \\\\\\\"$1\\\\\\\").replace(/\\\\\\\\?/g, \\\\\\\"&\\\\\\\").replace(\\\\\\\"&\\\\\\\", \\\\\\\"?\\\\\\\");\\\\n}\\\\nclass EventManager {\\\\n  constructor(debug) {\\\\n    this._event_handlers = {};\\\\n    this._once_handlers = {};\\\\n    this._debug = debug;\\\\n  }\\\\n\\\\n  on(event, handler) {\\\\n    if (!this._event_handlers[event]) {\\\\n      this._event_handlers[event] = [];\\\\n    }\\\\n\\\\n    this._event_handlers[event].push(handler);\\\\n  }\\\\n\\\\n  once(event, handler) {\\\\n    handler.___event_run_once = true;\\\\n    this.on(event, handler);\\\\n  }\\\\n\\\\n  off(event, handler) {\\\\n    if (!event && !handler) {\\\\n      // remove all events handlers\\\\n      this._event_handlers = {};\\\\n    } else if (event && !handler) {\\\\n      // remove all hanlders for the event\\\\n      if (this._event_handlers[event]) this._event_handlers[event] = [];\\\\n    } else {\\\\n      // remove a specific handler\\\\n      if (this._event_handlers[event]) {\\\\n        const idx = this._event_handlers[event].indexOf(handler);\\\\n\\\\n        if (idx >= 0) {\\\\n          this._event_handlers[event].splice(idx, 1);\\\\n        }\\\\n      }\\\\n    }\\\\n  }\\\\n\\\\n  _fire(event, data) {\\\\n    if (this._event_handlers[event]) {\\\\n      var i = this._event_handlers[event].length;\\\\n\\\\n      while (i--) {\\\\n        const handler = this._event_handlers[event][i];\\\\n\\\\n        try {\\\\n          handler(data);\\\\n        } catch (e) {\\\\n          console.error(e);\\\\n        } finally {\\\\n          if (handler.___event_run_once) {\\\\n            this._event_handlers[event].splice(i, 1);\\\\n          }\\\\n        }\\\\n      }\\\\n    } else {\\\\n      if (this._debug) {\\\\n        console.warn(\\\\\\\"unhandled event\\\\\\\", event, data);\\\\n      }\\\\n    }\\\\n  }\\\\n\\\\n}//# sourceURL=[module]\\\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWpveVJQQy9zcmMvdXRpbHMuanM/YTMwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcmFuZElkKCkge1xuICByZXR1cm4gKFxuICAgIE1hdGgucmFuZG9tKClcbiAgICAgIC50b1N0cmluZygzNilcbiAgICAgIC5zdWJzdHIoMiwgMTApICsgbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IGR0eXBlVG9UeXBlZEFycmF5ID0ge1xuICBpbnQ4OiBcIkludDhBcnJheVwiLFxuICBpbnQxNjogXCJJbnQxNkFycmF5XCIsXG4gIGludDMyOiBcIkludDMyQXJyYXlcIixcbiAgdWludDg6IFwiVWludDhBcnJheVwiLFxuICB1aW50MTY6IFwiVWludDE2QXJyYXlcIixcbiAgdWludDMyOiBcIlVpbnQzMkFycmF5XCIsXG4gIGZsb2F0MzI6IFwiRmxvYXQzMkFycmF5XCIsXG4gIGZsb2F0NjQ6IFwiRmxvYXQ2NEFycmF5XCIsXG4gIGFycmF5OiBcIkFycmF5XCJcbn07XG5leHBvcnQgY29uc3QgdHlwZWRBcnJheVRvRHR5cGUgPSB7XG4gIEludDhBcnJheTogXCJpbnQ4XCIsXG4gIEludDE2QXJyYXk6IFwiaW50MTZcIixcbiAgSW50MzJBcnJheTogXCJpbnQzMlwiLFxuICBVaW50OEFycmF5OiBcInVpbnQ4XCIsXG4gIFVpbnQxNkFycmF5OiBcInVpbnQxNlwiLFxuICBVaW50MzJBcnJheTogXCJ1aW50MzJcIixcbiAgRmxvYXQzMkFycmF5OiBcImZsb2F0MzJcIixcbiAgRmxvYXQ2NEFycmF5OiBcImZsb2F0NjRcIixcbiAgQXJyYXk6IFwiYXJyYXlcIlxufTtcblxuZnVuY3Rpb24gY2FjaGVVcmxJblNlcnZpY2VXb3JrZXIodXJsKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgY29tbWFuZDogXCJhZGRcIixcbiAgICAgIHVybDogdXJsXG4gICAgfTtcbiAgICBpZiAoIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyIHx8ICFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcikge1xuICAgICAgcmVqZWN0KFwiU2VydmljZSB3b3JrZXIgaXMgbm90IHN1cHBvcnRlZC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2VDaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgbWVzc2FnZUNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGV2ZW50LmRhdGEuZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShldmVudC5kYXRhICYmIGV2ZW50LmRhdGEucmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyICYmIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIucG9zdE1lc3NhZ2UobWVzc2FnZSwgW1xuICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MlxuICAgICAgXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlamVjdChcIlNlcnZpY2Ugd29ya2VyIGNvbnRyb2xsZXIgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FjaGVSZXF1aXJlbWVudHMocmVxdWlyZW1lbnRzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShyZXF1aXJlbWVudHMpKSB7XG4gICAgcmVxdWlyZW1lbnRzbS5jb2RlLnJlcXVpcmVtZW50cyA9IFtyZXF1aXJlbWVudHNdO1xuICB9XG4gIGlmIChyZXF1aXJlbWVudHMgJiYgcmVxdWlyZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGxldCByZXEgb2YgcmVxdWlyZW1lbnRzKSB7XG4gICAgICAvL3JlbW92ZSBwcmVmaXhcbiAgICAgIGlmIChyZXEuc3RhcnRzV2l0aChcImpzOlwiKSkgcmVxID0gcmVxLnNsaWNlKDMpO1xuICAgICAgaWYgKHJlcS5zdGFydHNXaXRoKFwiY3NzOlwiKSkgcmVxID0gcmVxLnNsaWNlKDQpO1xuICAgICAgaWYgKHJlcS5zdGFydHNXaXRoKFwiY2FjaGU6XCIpKSByZXEgPSByZXEuc2xpY2UoNik7XG4gICAgICBpZiAoIXJlcS5zdGFydHNXaXRoKFwiaHR0cFwiKSkgY29udGludWU7XG5cbiAgICAgIGF3YWl0IGNhY2hlVXJsSW5TZXJ2aWNlV29ya2VyKHJlcSkuY2F0Y2goZSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2VydmljZVdvcmtlcih0YXJnZXRPcmlnaW4sIGNhY2hlQ2FsbGJhY2spIHtcbiAgLy8gcmVnaXN0ZXIgc2VydmljZSB3b3JrZXIgZm9yIG9mZmxpbmUgYWNjZXNzXG4gIGlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihcIi9wbHVnaW4tc2VydmljZS13b3JrZXIuanNcIikudGhlbihcbiAgICAgICAgZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBcIlNlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogXCIsXG4gICAgICAgICAgICByZWdpc3RyYXRpb24uc2NvcGVcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXG4gICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdGFyZ2V0T3JpZ2luID0gdGFyZ2V0T3JpZ2luIHx8IFwiKlwiO1xuICAgICAgY2FjaGVDYWxsYmFjayA9IGNhY2hlQ2FsbGJhY2sgfHwgY2FjaGVSZXF1aXJlbWVudHM7XG4gICAgICBpZiAoY2FjaGVDYWxsYmFjayAmJiB0eXBlb2YgY2FjaGVDYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNvbmZpZy5jYWNoZV9yZXF1aXJlbWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgfVxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRhcmdldE9yaWdpbiA9PT0gXCIqXCIgfHwgZS5vcmlnaW4gPT09IHRhcmdldE9yaWdpbikge1xuICAgICAgICAgIGNvbnN0IG0gPSBlLmRhdGE7XG4gICAgICAgICAgaWYgKG0udHlwZSA9PT0gXCJjYWNoZVJlcXVpcmVtZW50c1wiKSB7XG4gICAgICAgICAgICBjYWNoZUNhbGxiYWNrKG0ucmVxdWlyZW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbi8vI1NvdXJjZSBodHRwczovL2JpdC5seS8ybmVXZkoyXG5leHBvcnQgZnVuY3Rpb24gdXJsSm9pbiguLi5hcmdzKSB7XG4gIHJldHVybiBhcmdzXG4gICAgLmpvaW4oXCIvXCIpXG4gICAgLnJlcGxhY2UoL1tcXC9dKy9nLCBcIi9cIilcbiAgICAucmVwbGFjZSgvXiguKyk6XFwvLywgXCIkMTovL1wiKVxuICAgIC5yZXBsYWNlKC9eZmlsZTovLCBcImZpbGU6L1wiKVxuICAgIC5yZXBsYWNlKC9cXC8oXFw/fCZ8I1teIV0pL2csIFwiJDFcIilcbiAgICAucmVwbGFjZSgvXFw/L2csIFwiJlwiKVxuICAgIC5yZXBsYWNlKFwiJlwiLCBcIj9cIik7XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcihkZWJ1Zykge1xuICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzID0ge307XG4gICAgdGhpcy5fb25jZV9oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuX2RlYnVnID0gZGVidWc7XG4gIH1cbiAgb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XSkge1xuICAgICAgdGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdID0gW107XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuICB9XG4gIG9uY2UoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBoYW5kbGVyLl9fX2V2ZW50X3J1bl9vbmNlID0gdHJ1ZTtcbiAgICB0aGlzLm9uKGV2ZW50LCBoYW5kbGVyKTtcbiAgfVxuICBvZmYoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBpZiAoIWV2ZW50ICYmICFoYW5kbGVyKSB7XG4gICAgICAvLyByZW1vdmUgYWxsIGV2ZW50cyBoYW5kbGVyc1xuICAgICAgdGhpcy5fZXZlbnRfaGFuZGxlcnMgPSB7fTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ICYmICFoYW5kbGVyKSB7XG4gICAgICAvLyByZW1vdmUgYWxsIGhhbmxkZXJzIGZvciB0aGUgZXZlbnRcbiAgICAgIGlmICh0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0pIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XSA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZW1vdmUgYSBzcGVjaWZpYyBoYW5kbGVyXG4gICAgICBpZiAodGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2ZpcmUoZXZlbnQsIGRhdGEpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF1baV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaGFuZGxlcihkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKGhhbmRsZXIuX19fZXZlbnRfcnVuX29uY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLl9kZWJ1Zykge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJ1bmhhbmRsZWQgZXZlbnRcIiwgZXZlbnQsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdERBIiwic291cmNlUm9vdCI6IiJ9\\\\n//# sourceURL=webpack-internal:///./src/utils.js\\\\n\\\");\\n\\n/***/ })\\n\\n/******/ });\", null);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luLndlYndvcmtlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2ltam95UlBDLy4vc3JjL3BsdWdpbi53ZWJ3b3JrZXIuanM/ZTdlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcmVxdWlyZShcIiEhL1VzZXJzL3dlaS5vdXlhbmcvd29ya3NwYWNlL2ltam95LXJwYy9qYXZhc2NyaXB0L25vZGVfbW9kdWxlcy93b3JrZXItbG9hZGVyL2Rpc3Qvd29ya2Vycy9JbmxpbmVXb3JrZXIuanNcIikoXCIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXFxuLyoqKioqKi8gXFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxcbi8qKioqKiovIFxcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XFxuLyoqKioqKi9cXG4vKioqKioqLyBcXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxcbi8qKioqKiovIFxcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcXG4vKioqKioqL1xcbi8qKioqKiovIFxcdFxcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxcbi8qKioqKiovIFxcdFxcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XFxuLyoqKioqKi8gXFx0XFx0XFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XFxuLyoqKioqKi8gXFx0XFx0fVxcbi8qKioqKiovIFxcdFxcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXFxuLyoqKioqKi8gXFx0XFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xcbi8qKioqKiovIFxcdFxcdFxcdGk6IG1vZHVsZUlkLFxcbi8qKioqKiovIFxcdFxcdFxcdGw6IGZhbHNlLFxcbi8qKioqKiovIFxcdFxcdFxcdGV4cG9ydHM6IHt9XFxuLyoqKioqKi8gXFx0XFx0fTtcXG4vKioqKioqL1xcbi8qKioqKiovIFxcdFxcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxcbi8qKioqKiovIFxcdFxcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0XFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxcbi8qKioqKiovIFxcdFxcdG1vZHVsZS5sID0gdHJ1ZTtcXG4vKioqKioqL1xcbi8qKioqKiovIFxcdFxcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXFxuLyoqKioqKi8gXFx0XFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xcbi8qKioqKiovIFxcdH1cXG4vKioqKioqL1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcXG4vKioqKioqLyBcXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcXG4vKioqKioqLyBcXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXFxuLyoqKioqKi8gXFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XFxuLyoqKioqKi8gXFx0XFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xcbi8qKioqKiovIFxcdFxcdFxcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xcbi8qKioqKiovIFxcdFxcdH1cXG4vKioqKioqLyBcXHR9O1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xcbi8qKioqKiovIFxcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcXG4vKioqKioqLyBcXHRcXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcXG4vKioqKioqLyBcXHRcXHRcXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcXG4vKioqKioqLyBcXHRcXHR9XFxuLyoqKioqKi8gXFx0XFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcXG4vKioqKioqLyBcXHR9O1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XFxuLyoqKioqKi8gXFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XFxuLyoqKioqKi8gXFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXFxuLyoqKioqKi8gXFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XFxuLyoqKioqKi8gXFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxcbi8qKioqKiovIFxcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XFxuLyoqKioqKi8gXFx0XFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XFxuLyoqKioqKi8gXFx0XFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcXG4vKioqKioqLyBcXHRcXHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xcbi8qKioqKiovIFxcdFxcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XFxuLyoqKioqKi8gXFx0XFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcXG4vKioqKioqLyBcXHRcXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XFxuLyoqKioqKi8gXFx0XFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xcbi8qKioqKiovIFxcdFxcdHJldHVybiBucztcXG4vKioqKioqLyBcXHR9O1xcbi8qKioqKiovXFxuLyoqKioqKi8gXFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcXG4vKioqKioqLyBcXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcXG4vKioqKioqLyBcXHRcXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cXG4vKioqKioqLyBcXHRcXHRcXHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxcbi8qKioqKiovIFxcdFxcdFxcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XFxuLyoqKioqKi8gXFx0XFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xcbi8qKioqKiovIFxcdFxcdHJldHVybiBnZXR0ZXI7XFxuLyoqKioqKi8gXFx0fTtcXG4vKioqKioqL1xcbi8qKioqKiovIFxcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxcbi8qKioqKiovIFxcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcXG4vKioqKioqL1xcbi8qKioqKiovIFxcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXFxuLyoqKioqKi8gXFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXFxcIlxcXCI7XFxuLyoqKioqKi9cXG4vKioqKioqL1xcbi8qKioqKiovIFxcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xcbi8qKioqKiovIFxcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFxcXCIuL3NyYy9wbHVnaW4ud2Vid29ya2VyLmpzXFxcIik7XFxuLyoqKioqKi8gfSlcXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xcbi8qKioqKiovICh7XFxuXFxuLyoqKi8gXFxcIi4vc3JjL3BsdWdpbi53ZWJ3b3JrZXIuanNcXFwiOlxcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcXFxcbiAgISoqKiAuL3NyYy9wbHVnaW4ud2Vid29ya2VyLmpzICoqKiFcXG4gIFxcXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXFxuLyohIG5vIGV4cG9ydHMgcHJvdmlkZWQgKi9cXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XFxuXFxuXFxcInVzZSBzdHJpY3RcXFwiO1xcbmV2YWwoXFxcIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGx1Z2luQ29yZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wbHVnaW5Db3JlLmpzICovIFxcXFxcXFwiLi9zcmMvcGx1Z2luQ29yZS5qc1xcXFxcXFwiKTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcnBjX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JwYy5qcyAqLyBcXFxcXFxcIi4vc3JjL3JwYy5qc1xcXFxcXFwiKTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMuanMgKi8gXFxcXFxcXCIuL3NyYy91dGlscy5qc1xcXFxcXFwiKTtcXFxcbi8qKlxcXFxuICogQ29udGFpbnMgdGhlIHJvdXRpbmVzIGxvYWRlZCBieSB0aGUgcGx1Z2luIFdvcmtlciB1bmRlciB3ZWItYnJvd3Nlci5cXFxcbiAqXFxcXG4gKiBJbml0aWFsaXplcyB0aGUgd2ViIGVudmlyb25tZW50IHZlcnNpb24gb2YgdGhlIHBsYXRmb3JtLWRlcGVuZGVudFxcXFxuICogY29ubmVjdGlvbiBvYmplY3QgZm9yIHRoZSBwbHVnaW4gc2l0ZVxcXFxuICovXFxcXG5cXFxcblxcXFxuXFxcXG5cXFxcbihmdW5jdGlvbigpIHtcXFxcbiAgLy8gbWFrZSBzdXJlIHRoaXMgcnVucyBpbnNpZGUgYSB3ZWJ3b3JrZXJcXFxcbiAgaWYgKFxcXFxuICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSA9PT0gXFxcXFxcXCJ1bmRlZmluZWRcXFxcXFxcIiB8fFxcXFxuICAgICFzZWxmIHx8XFxcXG4gICAgIShzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpXFxcXG4gICkge1xcXFxuICAgIHRocm93IG5ldyBFcnJvcihcXFxcXFxcIlRoaXMgc2NyaXB0IGNhbiBvbmx5IGxvYWRlZCBpbiBhIHdlYndvcmtlclxcXFxcXFwiKTtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogQ29ubmVjdGlvbiBvYmplY3QgcHJvdmlkZWQgdG8gdGhlIFJQQyBjb25zdHJ1Y3RvcixcXFxcbiAgICogcGx1Z2luIHNpdGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSB3ZWItYmFzZWQgZW52aXJvbm1lbnQuXFxcXG4gICAqIEdsb2JhbCB3aWxsIGJlIHRoZW4gY2xlYXJlZCB0byBwcmV2ZW50IGV4cG9zdXJlIGludG8gdGhlXFxcXG4gICAqIFdvcmtlciwgc28gd2UgcHV0IHRoaXMgbG9jYWwgY29ubmVjdGlvbiBvYmplY3QgaW50byBhIGNsb3N1cmVcXFxcbiAgICovXFxcXG4gIGNsYXNzIENvbm5lY3Rpb24gZXh0ZW5kcyBfdXRpbHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcXFxcXFxcIkV2ZW50TWFuYWdlclxcXFxcXFwiXSB7XFxcXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XFxcXG4gICAgICBzdXBlcihjb25maWcgJiYgY29uZmlnLmRlYnVnKTtcXFxcbiAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnIHx8IHt9O1xcXFxuICAgIH1cXFxcbiAgICBjb25uZWN0KCkge1xcXFxuICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKFxcXFxcXFwibWVzc2FnZVxcXFxcXFwiLCBlID0+IHtcXFxcbiAgICAgICAgdGhpcy5fZmlyZShlLmRhdGEudHlwZSwgZS5kYXRhKTtcXFxcbiAgICAgIH0pO1xcXFxuICAgICAgdGhpcy5lbWl0KHtcXFxcbiAgICAgICAgdHlwZTogXFxcXFxcXCJpbml0aWFsaXplZFxcXFxcXFwiLFxcXFxuICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnXFxcXG4gICAgICB9KTtcXFxcbiAgICB9XFxcXG4gICAgZGlzY29ubmVjdCgpIHtcXFxcbiAgICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJiZWZvcmVEaXNjb25uZWN0XFxcXFxcXCIpO1xcXFxuICAgICAgc2VsZi5jbG9zZSgpO1xcXFxuICAgICAgdGhpcy5fZmlyZShcXFxcXFxcImRpc2Nvbm5lY3RlZFxcXFxcXFwiKTtcXFxcbiAgICB9XFxcXG4gICAgZW1pdChkYXRhKSB7XFxcXG4gICAgICBsZXQgdHJhbnNmZXJhYmxlcyA9IHVuZGVmaW5lZDtcXFxcbiAgICAgIGlmIChkYXRhLl9fdHJhbnNmZXJhYmxlc19fKSB7XFxcXG4gICAgICAgIHRyYW5zZmVyYWJsZXMgPSBkYXRhLl9fdHJhbnNmZXJhYmxlc19fO1xcXFxuICAgICAgICBkZWxldGUgZGF0YS5fX3RyYW5zZmVyYWJsZXNfXztcXFxcbiAgICAgIH1cXFxcbiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoZGF0YSwgdHJhbnNmZXJhYmxlcyk7XFxcXG4gICAgfVxcXFxuICAgIGFzeW5jIGV4ZWN1dGUoY29kZSkge1xcXFxuICAgICAgaWYgKGNvZGUudHlwZSA9PT0gXFxcXFxcXCJyZXF1aXJlbWVudHNcXFxcXFxcIikge1xcXFxuICAgICAgICB0cnkge1xcXFxuICAgICAgICAgIGlmIChcXFxcbiAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzICYmXFxcXG4gICAgICAgICAgICAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykgfHxcXFxcbiAgICAgICAgICAgICAgdHlwZW9mIGNvZGUucmVxdWlyZW1lbnRzID09PSBcXFxcXFxcInN0cmluZ1xcXFxcXFwiKVxcXFxuICAgICAgICAgICkge1xcXFxuICAgICAgICAgICAgdHJ5IHtcXFxcbiAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNvZGUucmVxdWlyZW1lbnRzKSkge1xcXFxuICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzID0gW2NvZGUucmVxdWlyZW1lbnRzXTtcXFxcbiAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvZGUucmVxdWlyZW1lbnRzLmxlbmd0aDsgaSsrKSB7XFxcXG4gICAgICAgICAgICAgICAgaWYgKFxcXFxuICAgICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0udG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcXFxcXFxcIi5jc3NcXFxcXFxcIikgfHxcXFxcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJjc3M6XFxcXFxcXCIpXFxcXG4gICAgICAgICAgICAgICAgKSB7XFxcXG4gICAgICAgICAgICAgICAgICB0aHJvdyBcXFxcXFxcInVuYWJsZSB0byBpbXBvcnQgY3NzIGluIGEgd2Vid29ya2VyXFxcXFxcXCI7XFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcXFxcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXFxcXFxcXCIuanNcXFxcXFxcIikgfHxcXFxcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJqczpcXFxcXFxcIilcXFxcbiAgICAgICAgICAgICAgICApIHtcXFxcbiAgICAgICAgICAgICAgICAgIGlmIChjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFxcXFxcXFwianM6XFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldID0gY29kZS5yZXF1aXJlbWVudHNbaV0uc2xpY2UoMyk7XFxcXG4gICAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAgICAgICBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJodHRwXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAgICBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJjYWNoZTpcXFxcXFxcIikpIHtcXFxcbiAgICAgICAgICAgICAgICAgIC8vaWdub3JlIGNhY2hlXFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxcXFxuICAgICAgICAgICAgICAgICAgICBcXFxcXFxcIlVucHJvY2Vzc2VkIHJlcXVpcmVtZW50cyB1cmw6IFxcXFxcXFwiICsgY29kZS5yZXF1aXJlbWVudHNbaV1cXFxcbiAgICAgICAgICAgICAgICAgICk7XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgICAgIHRocm93IFxcXFxcXFwiZmFpbGVkIHRvIGltcG9ydCByZXF1aXJlZCBzY3JpcHRzOiBcXFxcXFxcIiArXFxcXG4gICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMudG9TdHJpbmcoKTtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICB0aHJvdyBlO1xcXFxuICAgICAgICB9XFxcXG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXFxcXFxcXCJzY3JpcHRcXFxcXFxcIikge1xcXFxuICAgICAgICB0cnkge1xcXFxuICAgICAgICAgIGlmIChcXFxcbiAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzICYmXFxcXG4gICAgICAgICAgICAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykgfHxcXFxcbiAgICAgICAgICAgICAgdHlwZW9mIGNvZGUucmVxdWlyZW1lbnRzID09PSBcXFxcXFxcInN0cmluZ1xcXFxcXFwiKVxcXFxuICAgICAgICAgICkge1xcXFxuICAgICAgICAgICAgdHJ5IHtcXFxcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29kZS5yZXF1aXJlbWVudHMpKSB7XFxcXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlLnJlcXVpcmVtZW50cy5sZW5ndGg7IGkrKykge1xcXFxuICAgICAgICAgICAgICAgICAgaW1wb3J0U2NyaXB0cyhjb2RlLnJlcXVpcmVtZW50c1tpXSk7XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgICAgIGltcG9ydFNjcmlwdHMoY29kZS5yZXF1aXJlbWVudHMpO1xcXFxuICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgICAgIHRocm93IFxcXFxcXFwiZmFpbGVkIHRvIGltcG9ydCByZXF1aXJlZCBzY3JpcHRzOiBcXFxcXFxcIiArXFxcXG4gICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMudG9TdHJpbmcoKTtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgICAgZXZhbChjb2RlLmNvbnRlbnQpO1xcXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlLm1lc3NhZ2UsIGUuc3RhY2spO1xcXFxuICAgICAgICAgIHRocm93IGU7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgIHRocm93IFxcXFxcXFwidW5zdXBwb3J0ZWQgY29kZSB0eXBlLlxcXFxcXFwiO1xcXFxuICAgICAgfVxcXFxuICAgICAgaWYgKGNvZGUudHlwZSA9PT0gXFxcXFxcXCJyZXF1aXJlbWVudHNcXFxcXFxcIikge1xcXFxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcXFxcbiAgICAgICAgICB0eXBlOiBcXFxcXFxcImNhY2hlUmVxdWlyZW1lbnRzXFxcXFxcXCIsXFxcXG4gICAgICAgICAgcmVxdWlyZW1lbnRzOiBjb2RlLnJlcXVpcmVtZW50c1xcXFxuICAgICAgICB9KTtcXFxcbiAgICAgIH1cXFxcbiAgICB9XFxcXG4gIH1cXFxcbiAgY29uc3QgY29uZmlnID0ge1xcXFxuICAgIHR5cGU6IFxcXFxcXFwid2ViLXdvcmtlclxcXFxcXFwiLFxcXFxuICAgIGRlZGljYXRlZF90aHJlYWQ6IHRydWUsXFxcXG4gICAgYWxsb3dfZXhlY3V0aW9uOiB0cnVlLFxcXFxuICAgIGxhbmc6IFxcXFxcXFwiamF2YXNjcmlwdFxcXFxcXFwiLFxcXFxuICAgIGFwaV92ZXJzaW9uOiBfcnBjX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXFxcXFxcXCJBUElfVkVSU0lPTlxcXFxcXFwiXVxcXFxuICB9O1xcXFxuICBjb25zdCBjb25uID0gbmV3IENvbm5lY3Rpb24oY29uZmlnKTtcXFxcbiAgY29ubi5vbihcXFxcXFxcImNvbm5lY3RSUENcXFxcXFxcIiwgZGF0YSA9PiB7XFxcXG4gICAgT2JqZWN0KF9wbHVnaW5Db3JlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXFxcXFxcXCJjb25uZWN0UlBDXFxcXFxcXCJdKShjb25uLCBPYmplY3QuYXNzaWduKGRhdGEuY29uZmlnLCBjb25maWcpKTtcXFxcbiAgfSk7XFxcXG4gIGNvbm4uY29ubmVjdCgpO1xcXFxuICBzZWxmLnBvc3RNZXNzYWdlKHtcXFxcbiAgICB0eXBlOiBcXFxcXFxcIndvcmtlci1yZWFkeVxcXFxcXFwiXFxcXG4gIH0pO1xcXFxufSkoKTtcXFxcbi8vIyBzb3VyY2VVUkw9W21vZHVsZV1cXFxcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTGk5emNtTXZjR3gxWjJsdUxuZGxZbmR2Y210bGNpNXFjeTVxY3lJc0luTnZkWEpqWlhNaU9sc2lkMlZpY0dGamF6b3ZMMmx0YW05NVVsQkRMeTR2YzNKakwzQnNkV2RwYmk1M1pXSjNiM0pyWlhJdWFuTS9PR00xTkNKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SXZLaXBjYmlBcUlFTnZiblJoYVc1eklIUm9aU0J5YjNWMGFXNWxjeUJzYjJGa1pXUWdZbmtnZEdobElIQnNkV2RwYmlCWGIzSnJaWElnZFc1a1pYSWdkMlZpTFdKeWIzZHpaWEl1WEc0Z0tseHVJQ29nU1c1cGRHbGhiR2w2WlhNZ2RHaGxJSGRsWWlCbGJuWnBjbTl1YldWdWRDQjJaWEp6YVc5dUlHOW1JSFJvWlNCd2JHRjBabTl5YlMxa1pYQmxibVJsYm5SY2JpQXFJR052Ym01bFkzUnBiMjRnYjJKcVpXTjBJR1p2Y2lCMGFHVWdjR3gxWjJsdUlITnBkR1ZjYmlBcUwxeHVhVzF3YjNKMElIc2dZMjl1Ym1WamRGSlFReUI5SUdaeWIyMGdYQ0l1TDNCc2RXZHBia052Y21VdWFuTmNJanRjYm1sdGNHOXlkQ0I3SUVGUVNWOVdSVkpUU1U5T0lIMGdabkp2YlNCY0lpNHZjbkJqTG1welhDSTdYRzVwYlhCdmNuUWdleUJGZG1WdWRFMWhibUZuWlhJZ2ZTQm1jbTl0SUZ3aUxpOTFkR2xzY3k1cWMxd2lPMXh1WEc0b1puVnVZM1JwYjI0b0tTQjdYRzRnSUM4dklHMWhhMlVnYzNWeVpTQjBhR2x6SUhKMWJuTWdhVzV6YVdSbElHRWdkMlZpZDI5eWEyVnlYRzRnSUdsbUlDaGNiaUFnSUNCMGVYQmxiMllnVjI5eWEyVnlSMnh2WW1Gc1UyTnZjR1VnUFQwOUlGd2lkVzVrWldacGJtVmtYQ0lnZkh4Y2JpQWdJQ0FoYzJWc1ppQjhmRnh1SUNBZ0lDRW9jMlZzWmlCcGJuTjBZVzVqWlc5bUlGZHZjbXRsY2tkc2IySmhiRk5qYjNCbEtWeHVJQ0FwSUh0Y2JpQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9YQ0pVYUdseklITmpjbWx3ZENCallXNGdiMjVzZVNCc2IyRmtaV1FnYVc0Z1lTQjNaV0ozYjNKclpYSmNJaWs3WEc0Z0lIMWNiaUFnTHlvcVhHNGdJQ0FxSUVOdmJtNWxZM1JwYjI0Z2IySnFaV04wSUhCeWIzWnBaR1ZrSUhSdklIUm9aU0JTVUVNZ1kyOXVjM1J5ZFdOMGIzSXNYRzRnSUNBcUlIQnNkV2RwYmlCemFYUmxJR2x0Y0d4bGJXVnVkR0YwYVc5dUlHWnZjaUIwYUdVZ2QyVmlMV0poYzJWa0lHVnVkbWx5YjI1dFpXNTBMbHh1SUNBZ0tpQkhiRzlpWVd3Z2QybHNiQ0JpWlNCMGFHVnVJR05zWldGeVpXUWdkRzhnY0hKbGRtVnVkQ0JsZUhCdmMzVnlaU0JwYm5SdklIUm9aVnh1SUNBZ0tpQlhiM0pyWlhJc0lITnZJSGRsSUhCMWRDQjBhR2x6SUd4dlkyRnNJR052Ym01bFkzUnBiMjRnYjJKcVpXTjBJR2x1ZEc4Z1lTQmpiRzl6ZFhKbFhHNGdJQ0FxTDF4dUlDQmpiR0Z6Y3lCRGIyNXVaV04wYVc5dUlHVjRkR1Z1WkhNZ1JYWmxiblJOWVc1aFoyVnlJSHRjYmlBZ0lDQmpiMjV6ZEhKMVkzUnZjaWhqYjI1bWFXY3BJSHRjYmlBZ0lDQWdJSE4xY0dWeUtHTnZibVpwWnlBbUppQmpiMjVtYVdjdVpHVmlkV2NwTzF4dUlDQWdJQ0FnZEdocGN5NWpiMjVtYVdjZ1BTQmpiMjVtYVdjZ2ZId2dlMzA3WEc0Z0lDQWdmVnh1SUNBZ0lHTnZibTVsWTNRb0tTQjdYRzRnSUNBZ0lDQnpaV3htTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElvWENKdFpYTnpZV2RsWENJc0lHVWdQVDRnZTF4dUlDQWdJQ0FnSUNCMGFHbHpMbDltYVhKbEtHVXVaR0YwWVM1MGVYQmxMQ0JsTG1SaGRHRXBPMXh1SUNBZ0lDQWdmU2s3WEc0Z0lDQWdJQ0IwYUdsekxtVnRhWFFvZTF4dUlDQWdJQ0FnSUNCMGVYQmxPaUJjSW1sdWFYUnBZV3hwZW1Wa1hDSXNYRzRnSUNBZ0lDQWdJR052Ym1acFp6b2dkR2hwY3k1amIyNW1hV2RjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDFjYmlBZ0lDQmthWE5qYjI1dVpXTjBLQ2tnZTF4dUlDQWdJQ0FnZEdocGN5NWZabWx5WlNoY0ltSmxabTl5WlVScGMyTnZibTVsWTNSY0lpazdYRzRnSUNBZ0lDQnpaV3htTG1Oc2IzTmxLQ2s3WEc0Z0lDQWdJQ0IwYUdsekxsOW1hWEpsS0Z3aVpHbHpZMjl1Ym1WamRHVmtYQ0lwTzF4dUlDQWdJSDFjYmlBZ0lDQmxiV2wwS0dSaGRHRXBJSHRjYmlBZ0lDQWdJR3hsZENCMGNtRnVjMlpsY21GaWJHVnpJRDBnZFc1a1pXWnBibVZrTzF4dUlDQWdJQ0FnYVdZZ0tHUmhkR0V1WDE5MGNtRnVjMlpsY21GaWJHVnpYMThwSUh0Y2JpQWdJQ0FnSUNBZ2RISmhibk5tWlhKaFlteGxjeUE5SUdSaGRHRXVYMTkwY21GdWMyWmxjbUZpYkdWelgxODdYRzRnSUNBZ0lDQWdJR1JsYkdWMFpTQmtZWFJoTGw5ZmRISmhibk5tWlhKaFlteGxjMTlmTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJQ0FnYzJWc1ppNXdiM04wVFdWemMyRm5aU2hrWVhSaExDQjBjbUZ1YzJabGNtRmliR1Z6S1R0Y2JpQWdJQ0I5WEc0Z0lDQWdZWE41Ym1NZ1pYaGxZM1YwWlNoamIyUmxLU0I3WEc0Z0lDQWdJQ0JwWmlBb1kyOWtaUzUwZVhCbElEMDlQU0JjSW5KbGNYVnBjbVZ0Wlc1MGMxd2lLU0I3WEc0Z0lDQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJQ0FnYVdZZ0tGeHVJQ0FnSUNBZ0lDQWdJQ0FnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE1nSmlaY2JpQWdJQ0FnSUNBZ0lDQWdJQ2hCY25KaGVTNXBjMEZ5Y21GNUtHTnZaR1V1Y21WeGRXbHlaVzFsYm5SektTQjhmRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQjBlWEJsYjJZZ1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhNZ1BUMDlJRndpYzNSeWFXNW5YQ0lwWEc0Z0lDQWdJQ0FnSUNBZ0tTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCMGNua2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQnBaaUFvSVVGeWNtRjVMbWx6UVhKeVlYa29ZMjlrWlM1eVpYRjFhWEpsYldWdWRITXBLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE1nUFNCYlkyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhOZE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUdadmNpQW9kbUZ5SUdrZ1BTQXdPeUJwSUR3Z1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhNdWJHVnVaM1JvT3lCcEt5c3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmpiMlJsTG5KbGNYVnBjbVZ0Wlc1MGMxdHBYUzUwYjB4dmQyVnlRMkZ6WlNncExtVnVaSE5YYVhSb0tGd2lMbU56YzF3aUtTQjhmRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE5iYVYwdWMzUmhjblJ6VjJsMGFDaGNJbU56Y3pwY0lpbGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhSb2NtOTNJRndpZFc1aFlteGxJSFJ2SUdsdGNHOXlkQ0JqYzNNZ2FXNGdZU0IzWldKM2IzSnJaWEpjSWp0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdZMjlrWlM1eVpYRjFhWEpsYldWdWRITmJhVjB1ZEc5TWIzZGxja05oYzJVb0tTNWxibVJ6VjJsMGFDaGNJaTVxYzF3aUtTQjhmRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE5iYVYwdWMzUmhjblJ6VjJsMGFDaGNJbXB6T2x3aUtWeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tHTnZaR1V1Y21WeGRXbHlaVzFsYm5SelcybGRMbk4wWVhKMGMxZHBkR2dvWENKcWN6cGNJaWtwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdZMjlrWlM1eVpYRjFhWEpsYldWdWRITmJhVjBnUFNCamIyUmxMbkpsY1hWcGNtVnRaVzUwYzF0cFhTNXpiR2xqWlNnektUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdsdGNHOXlkRk5qY21sd2RITW9ZMjlrWlM1eVpYRjFhWEpsYldWdWRITmJhVjBwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUgwZ1pXeHpaU0JwWmlBb1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhOYmFWMHVjM1JoY25SelYybDBhQ2hjSW1oMGRIQmNJaWtwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHbHRjRzl5ZEZOamNtbHdkSE1vWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE5iYVYwcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppQW9ZMjlrWlM1eVpYRjFhWEpsYldWdWRITmJhVjB1YzNSaGNuUnpWMmwwYUNoY0ltTmhZMmhsT2x3aUtTa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnTHk5cFoyNXZjbVVnWTJGamFHVmNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lGd2lWVzV3Y205alpYTnpaV1FnY21WeGRXbHlaVzFsYm5SeklIVnliRG9nWENJZ0t5QmpiMlJsTG5KbGNYVnBjbVZ0Wlc1MGMxdHBYVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQWdJSDBnWTJGMFkyZ2dLR1VwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnZEdoeWIzY2dYQ0ptWVdsc1pXUWdkRzhnYVcxd2IzSjBJSEpsY1hWcGNtVmtJSE5qY21sd2RITTZJRndpSUN0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCamIyUmxMbkpsY1hWcGNtVnRaVzUwY3k1MGIxTjBjbWx1WnlncE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdmU0JqWVhSamFDQW9aU2tnZTF4dUlDQWdJQ0FnSUNBZ0lIUm9jbTkzSUdVN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMGdaV3h6WlNCcFppQW9ZMjlrWlM1MGVYQmxJRDA5UFNCY0luTmpjbWx3ZEZ3aUtTQjdYRzRnSUNBZ0lDQWdJSFJ5ZVNCN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0Z4dUlDQWdJQ0FnSUNBZ0lDQWdZMjlrWlM1eVpYRjFhWEpsYldWdWRITWdKaVpjYmlBZ0lDQWdJQ0FnSUNBZ0lDaEJjbkpoZVM1cGMwRnljbUY1S0dOdlpHVXVjbVZ4ZFdseVpXMWxiblJ6S1NCOGZGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCMGVYQmxiMllnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE1nUFQwOUlGd2ljM1J5YVc1blhDSXBYRzRnSUNBZ0lDQWdJQ0FnS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0IwY25rZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCcFppQW9RWEp5WVhrdWFYTkJjbkpoZVNoamIyUmxMbkpsY1hWcGNtVnRaVzUwY3lrcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQm1iM0lnS0d4bGRDQnBJRDBnTURzZ2FTQThJR052WkdVdWNtVnhkV2x5WlcxbGJuUnpMbXhsYm1kMGFEc2dhU3NyS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQnBiWEJ2Y25SVFkzSnBjSFJ6S0dOdlpHVXVjbVZ4ZFdseVpXMWxiblJ6VzJsZEtUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2FXMXdiM0owVTJOeWFYQjBjeWhqYjJSbExuSmxjWFZwY21WdFpXNTBjeWs3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnSUNBZ0lIMGdZMkYwWTJnZ0tHVXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdkR2h5YjNjZ1hDSm1ZV2xzWldRZ2RHOGdhVzF3YjNKMElISmxjWFZwY21Wa0lITmpjbWx3ZEhNNklGd2lJQ3RjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JqYjJSbExuSmxjWFZwY21WdFpXNTBjeTUwYjFOMGNtbHVaeWdwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQmxkbUZzS0dOdlpHVXVZMjl1ZEdWdWRDazdYRzRnSUNBZ0lDQWdJSDBnWTJGMFkyZ2dLR1VwSUh0Y2JpQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0dVdWJXVnpjMkZuWlN3Z1pTNXpkR0ZqYXlrN1hHNGdJQ0FnSUNBZ0lDQWdkR2h5YjNjZ1pUdGNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lDQWdkR2h5YjNjZ1hDSjFibk4xY0hCdmNuUmxaQ0JqYjJSbElIUjVjR1V1WENJN1hHNGdJQ0FnSUNCOVhHNGdJQ0FnSUNCcFppQW9ZMjlrWlM1MGVYQmxJRDA5UFNCY0luSmxjWFZwY21WdFpXNTBjMXdpS1NCN1hHNGdJQ0FnSUNBZ0lITmxiR1l1Y0c5emRFMWxjM05oWjJVb2UxeHVJQ0FnSUNBZ0lDQWdJSFI1Y0dVNklGd2lZMkZqYUdWU1pYRjFhWEpsYldWdWRITmNJaXhjYmlBZ0lDQWdJQ0FnSUNCeVpYRjFhWEpsYldWdWRITTZJR052WkdVdWNtVnhkV2x5WlcxbGJuUnpYRzRnSUNBZ0lDQWdJSDBwTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJSDFjYmlBZ2ZWeHVJQ0JqYjI1emRDQmpiMjVtYVdjZ1BTQjdYRzRnSUNBZ2RIbHdaVG9nWENKM1pXSXRkMjl5YTJWeVhDSXNYRzRnSUNBZ1pHVmthV05oZEdWa1gzUm9jbVZoWkRvZ2RISjFaU3hjYmlBZ0lDQmhiR3h2ZDE5bGVHVmpkWFJwYjI0NklIUnlkV1VzWEc0Z0lDQWdiR0Z1WnpvZ1hDSnFZWFpoYzJOeWFYQjBYQ0lzWEc0Z0lDQWdZWEJwWDNabGNuTnBiMjQ2SUVGUVNWOVdSVkpUU1U5T1hHNGdJSDA3WEc0Z0lHTnZibk4wSUdOdmJtNGdQU0J1WlhjZ1EyOXVibVZqZEdsdmJpaGpiMjVtYVdjcE8xeHVJQ0JqYjI1dUxtOXVLRndpWTI5dWJtVmpkRkpRUTF3aUxDQmtZWFJoSUQwK0lIdGNiaUFnSUNCamIyNXVaV04wVWxCREtHTnZibTRzSUU5aWFtVmpkQzVoYzNOcFoyNG9aR0YwWVM1amIyNW1hV2NzSUdOdmJtWnBaeWtwTzF4dUlDQjlLVHRjYmlBZ1kyOXViaTVqYjI1dVpXTjBLQ2s3WEc0Z0lITmxiR1l1Y0c5emRFMWxjM05oWjJVb2UxeHVJQ0FnSUhSNWNHVTZJRndpZDI5eWEyVnlMWEpsWVdSNVhDSmNiaUFnZlNrN1hHNTlLU2dwTzF4dUlsMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk95SXNJbk52ZFhKalpWSnZiM1FpT2lJaWZRPT1cXFxcbi8vIyBzb3VyY2VVUkw9d2VicGFjay1pbnRlcm5hbDovLy8uL3NyYy9wbHVnaW4ud2Vid29ya2VyLmpzXFxcXG5cXFwiKTtcXG5cXG4vKioqLyB9KSxcXG5cXG4vKioqLyBcXFwiLi9zcmMvcGx1Z2luQ29yZS5qc1xcXCI6XFxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxcXFxuICAhKioqIC4vc3JjL3BsdWdpbkNvcmUuanMgKioqIVxcbiAgXFxcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogY29ubmVjdFJQQyAqL1xcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcXG5cXG5cXFwidXNlIHN0cmljdFxcXCI7XFxuZXZhbChcXFwiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xcXFxuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcXFxcXFxcImNvbm5lY3RSUENcXFxcXFxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25uZWN0UlBDOyB9KTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcnBjX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JwYy5qcyAqLyBcXFxcXFxcIi4vc3JjL3JwYy5qc1xcXFxcXFwiKTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGx1Z2luSWZyYW1lX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BsdWdpbklmcmFtZS5qcyAqLyBcXFxcXFxcIi4vc3JjL3BsdWdpbklmcmFtZS5qc1xcXFxcXFwiKTtcXFxcbi8qKlxcXFxuICogQ29yZSBwbHVnaW4gc2NyaXB0IGxvYWRlZCBpbnRvIHRoZSBwbHVnaW4gcHJvY2Vzcy90aHJlYWQuXFxcXG4gKlxcXFxuICogSW5pdGlhbGl6ZXMgdGhlIHBsdWdpbi1zaXRlIEFQSSBnbG9iYWwgbWV0aG9kcy5cXFxcbiAqL1xcXFxuXFxcXG5cXFxcbmZ1bmN0aW9uIGNvbm5lY3RSUEMoY29ubmVjdGlvbiwgY29uZmlnKSB7XFxcXG4gIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcXFxcbiAgY29uc3QgcnBjID0gbmV3IF9ycGNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcXFxcXFxcIlJQQ1xcXFxcXFwiXShjb25uZWN0aW9uLCBjb25maWcpO1xcXFxuICBycGMub24oXFxcXFxcXCJnZXRJbnRlcmZhY2VcXFxcXFxcIiwgZnVuY3Rpb24gKCkge1xcXFxuICAgIGxhdW5jaENvbm5lY3RlZCgpO1xcXFxuICB9KTtcXFxcbiAgcnBjLm9uKFxcXFxcXFwicmVtb3RlUmVhZHlcXFxcXFxcIiwgZnVuY3Rpb24gKCkge1xcXFxuICAgIGNvbnN0IGFwaSA9IHJwYy5nZXRSZW1vdGUoKSB8fCB7fTtcXFxcblxcXFxuICAgIGlmIChhcGkuZXhwb3J0KSB7XFxcXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXFxcXFxcXCJgZXhwb3J0YCBpcyBhIHJlc2VydmVkIGZ1bmN0aW9uIG5hbWVcXFxcXFxcIik7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgaWYgKGFwaS5vbmxvYWQpIHtcXFxcbiAgICAgIHRocm93IG5ldyBFcnJvcihcXFxcXFxcImBvbmxvYWRgIGlzIGEgcmVzZXJ2ZWQgZnVuY3Rpb24gbmFtZVxcXFxcXFwiKTtcXFxcbiAgICB9XFxcXG5cXFxcbiAgICBpZiAoYXBpLmRpc3Bvc2UpIHtcXFxcbiAgICAgIHRocm93IG5ldyBFcnJvcihcXFxcXFxcImBkaXNwb3NlYCBpcyBhIHJlc2VydmVkIGZ1bmN0aW9uIG5hbWVcXFxcXFxcIik7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgYXBpLmV4cG9ydCA9IGZ1bmN0aW9uIChfaW50ZXJmYWNlKSB7XFxcXG4gICAgICBycGMuc2V0SW50ZXJmYWNlKF9pbnRlcmZhY2UpO1xcXFxuICAgIH07XFxcXG5cXFxcbiAgICBhcGkub25Mb2FkID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcXFxcbiAgICAgIGhhbmRsZXIgPSBjaGVja0hhbmRsZXIoaGFuZGxlcik7XFxcXG5cXFxcbiAgICAgIGlmIChjb25uZWN0ZWQpIHtcXFxcbiAgICAgICAgaGFuZGxlcigpO1xcXFxuICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgY29ubmVjdGVkSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcXFxcbiAgICAgIH1cXFxcbiAgICB9O1xcXFxuXFxcXG4gICAgYXBpLmRpc3Bvc2UgPSBmdW5jdGlvbiAoX2ludGVyZmFjZSkge1xcXFxuICAgICAgcnBjLmRpc2Nvbm5lY3QoKTtcXFxcbiAgICB9O1xcXFxuXFxcXG4gICAgaWYgKHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gXFxcXFxcXCJ1bmRlZmluZWRcXFxcXFxcIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpIHtcXFxcbiAgICAgIHNlbGYuYXBpID0gYXBpO1xcXFxuICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XFxcXG4gICAgICAgIHR5cGU6IFxcXFxcXFwiaW1qb3lfcmVtb3RlX2FwaV9yZWFkeVxcXFxcXFwiXFxcXG4gICAgICB9KTtcXFxcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cpIHtcXFxcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcXFxcXFxcImltam95X3JlbW90ZV9hcGlfcmVhZHlcXFxcXFxcIiwge1xcXFxuICAgICAgICBkZXRhaWw6IGFwaVxcXFxuICAgICAgfSkpO1xcXFxuICAgIH1cXFxcbiAgfSk7XFxcXG4gIGxldCBjb25uZWN0ZWQgPSBmYWxzZTtcXFxcbiAgY29uc3QgY29ubmVjdGVkSGFuZGxlcnMgPSBbXTtcXFxcblxcXFxuICBjb25zdCBsYXVuY2hDb25uZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XFxcXG4gICAgaWYgKCFjb25uZWN0ZWQpIHtcXFxcbiAgICAgIGNvbm5lY3RlZCA9IHRydWU7XFxcXG4gICAgICBsZXQgaGFuZGxlcjtcXFxcblxcXFxuICAgICAgd2hpbGUgKGhhbmRsZXIgPSBjb25uZWN0ZWRIYW5kbGVycy5wb3AoKSkge1xcXFxuICAgICAgICBoYW5kbGVyKCk7XFxcXG4gICAgICB9XFxcXG4gICAgfVxcXFxuICB9O1xcXFxuXFxcXG4gIGNvbnN0IGNoZWNrSGFuZGxlciA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XFxcXG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xcXFxuXFxcXG4gICAgaWYgKHR5cGUgIT09IFxcXFxcXFwiZnVuY3Rpb25cXFxcXFxcIikge1xcXFxuICAgICAgY29uc3QgbXNnID0gXFxcXFxcXCJBIGZ1bmN0aW9uIG1heSBvbmx5IGJlIHN1YnNyaWJlZCB0byB0aGUgZXZlbnQsIFxcXFxcXFwiICsgdHlwZSArIFxcXFxcXFwiIHdhcyBwcm92aWRlZCBpbnN0ZWFkXFxcXFxcXCI7XFxcXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcXFxcbiAgICB9XFxcXG5cXFxcbiAgICByZXR1cm4gaGFuZGxlcjtcXFxcbiAgfTtcXFxcblxcXFxuICByZXR1cm4gcnBjO1xcXFxufS8vIyBzb3VyY2VVUkw9W21vZHVsZV1cXFxcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pTGk5emNtTXZjR3gxWjJsdVEyOXlaUzVxY3k1cWN5SXNJbk52ZFhKalpYTWlPbHNpZDJWaWNHRmphem92TDJsdGFtOTVVbEJETDNOeVl5OXdiSFZuYVc1RGIzSmxMbXB6UDJFME56WWlYU3dpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpTHlvcVhHNGdLaUJEYjNKbElIQnNkV2RwYmlCelkzSnBjSFFnYkc5aFpHVmtJR2x1ZEc4Z2RHaGxJSEJzZFdkcGJpQndjbTlqWlhOekwzUm9jbVZoWkM1Y2JpQXFYRzRnS2lCSmJtbDBhV0ZzYVhwbGN5QjBhR1VnY0d4MVoybHVMWE5wZEdVZ1FWQkpJR2RzYjJKaGJDQnRaWFJvYjJSekxseHVJQ292WEc1cGJYQnZjblFnZXlCU1VFTWdmU0JtY205dElGd2lMaTl5Y0dNdWFuTmNJanRjYm1sdGNHOXlkQ0I3SUVOdmJtNWxZM1JwYjI0Z2ZTQm1jbTl0SUZ3aUxpOXdiSFZuYVc1SlpuSmhiV1V1YW5OY0lqdGNibHh1Wlhod2IzSjBJR1oxYm1OMGFXOXVJR052Ym01bFkzUlNVRU1vWTI5dWJtVmpkR2x2Yml3Z1kyOXVabWxuS1NCN1hHNGdJR052Ym1acFp5QTlJR052Ym1acFp5QjhmQ0I3ZlR0Y2JseHVJQ0JqYjI1emRDQnljR01nUFNCdVpYY2dVbEJES0dOdmJtNWxZM1JwYjI0c0lHTnZibVpwWnlrN1hHNGdJSEp3WXk1dmJpaGNJbWRsZEVsdWRHVnlabUZqWlZ3aUxDQm1kVzVqZEdsdmJpZ3BJSHRjYmlBZ0lDQnNZWFZ1WTJoRGIyNXVaV04wWldRb0tUdGNiaUFnZlNrN1hHNWNiaUFnY25CakxtOXVLRndpY21WdGIzUmxVbVZoWkhsY0lpd2dablZ1WTNScGIyNG9LU0I3WEc0Z0lDQWdZMjl1YzNRZ1lYQnBJRDBnY25CakxtZGxkRkpsYlc5MFpTZ3BJSHg4SUh0OU8xeHVJQ0FnSUdsbUlDaGhjR2t1Wlhod2IzSjBLU0I3WEc0Z0lDQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9YQ0pnWlhod2IzSjBZQ0JwY3lCaElISmxjMlZ5ZG1Wa0lHWjFibU4wYVc5dUlHNWhiV1ZjSWlrN1hHNGdJQ0FnZlZ4dUlDQWdJR2xtSUNoaGNHa3ViMjVzYjJGa0tTQjdYRzRnSUNBZ0lDQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb1hDSmdiMjVzYjJGa1lDQnBjeUJoSUhKbGMyVnlkbVZrSUdaMWJtTjBhVzl1SUc1aGJXVmNJaWs3WEc0Z0lDQWdmVnh1SUNBZ0lHbG1JQ2hoY0drdVpHbHpjRzl6WlNrZ2UxeHVJQ0FnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0Z3aVlHUnBjM0J2YzJWZ0lHbHpJR0VnY21WelpYSjJaV1FnWm5WdVkzUnBiMjRnYm1GdFpWd2lLVHRjYmlBZ0lDQjlYRzRnSUNBZ1lYQnBMbVY0Y0c5eWRDQTlJR1oxYm1OMGFXOXVLRjlwYm5SbGNtWmhZMlVwSUh0Y2JpQWdJQ0FnSUhKd1l5NXpaWFJKYm5SbGNtWmhZMlVvWDJsdWRHVnlabUZqWlNrN1hHNGdJQ0FnZlR0Y2JpQWdJQ0JoY0drdWIyNU1iMkZrSUQwZ1puVnVZM1JwYjI0b2FHRnVaR3hsY2lrZ2UxeHVJQ0FnSUNBZ2FHRnVaR3hsY2lBOUlHTm9aV05yU0dGdVpHeGxjaWhvWVc1a2JHVnlLVHRjYmlBZ0lDQWdJR2xtSUNoamIyNXVaV04wWldRcElIdGNiaUFnSUNBZ0lDQWdhR0Z1Wkd4bGNpZ3BPMXh1SUNBZ0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lDQWdZMjl1Ym1WamRHVmtTR0Z1Wkd4bGNuTXVjSFZ6YUNob1lXNWtiR1Z5S1R0Y2JpQWdJQ0FnSUgxY2JpQWdJQ0I5TzF4dUlDQWdJR0Z3YVM1a2FYTndiM05sSUQwZ1puVnVZM1JwYjI0b1gybHVkR1Z5Wm1GalpTa2dlMXh1SUNBZ0lDQWdjbkJqTG1ScGMyTnZibTVsWTNRb0tUdGNiaUFnSUNCOU8xeHVYRzRnSUNBZ2FXWWdLRnh1SUNBZ0lDQWdkSGx3Wlc5bUlGZHZjbXRsY2tkc2IySmhiRk5qYjNCbElDRTlQU0JjSW5WdVpHVm1hVzVsWkZ3aUlDWW1YRzRnSUNBZ0lDQnpaV3htSUdsdWMzUmhibU5sYjJZZ1YyOXlhMlZ5UjJ4dlltRnNVMk52Y0dWY2JpQWdJQ0FwSUh0Y2JpQWdJQ0FnSUhObGJHWXVZWEJwSUQwZ1lYQnBPMXh1SUNBZ0lDQWdjMlZzWmk1d2IzTjBUV1Z6YzJGblpTaDdYRzRnSUNBZ0lDQWdJSFI1Y0dVNklGd2lhVzFxYjNsZmNtVnRiM1JsWDJGd2FWOXlaV0ZrZVZ3aVhHNGdJQ0FnSUNCOUtUdGNiaUFnSUNCOUlHVnNjMlVnYVdZZ0tIUjVjR1Z2WmlCM2FXNWtiM2NwSUh0Y2JpQWdJQ0FnSUhkcGJtUnZkeTVrYVhOd1lYUmphRVYyWlc1MEtGeHVJQ0FnSUNBZ0lDQnVaWGNnUTNWemRHOXRSWFpsYm5Rb1hDSnBiV3B2ZVY5eVpXMXZkR1ZmWVhCcFgzSmxZV1I1WENJc0lIc2daR1YwWVdsc09pQmhjR2tnZlNsY2JpQWdJQ0FnSUNrN1hHNGdJQ0FnZlZ4dUlDQjlLVHRjYmx4dUlDQnNaWFFnWTI5dWJtVmpkR1ZrSUQwZ1ptRnNjMlU3WEc0Z0lHTnZibk4wSUdOdmJtNWxZM1JsWkVoaGJtUnNaWEp6SUQwZ1cxMDdYRzVjYmlBZ1kyOXVjM1FnYkdGMWJtTm9RMjl1Ym1WamRHVmtJRDBnWm5WdVkzUnBiMjRvS1NCN1hHNGdJQ0FnYVdZZ0tDRmpiMjV1WldOMFpXUXBJSHRjYmlBZ0lDQWdJR052Ym01bFkzUmxaQ0E5SUhSeWRXVTdYRzVjYmlBZ0lDQWdJR3hsZENCb1lXNWtiR1Z5TzF4dUlDQWdJQ0FnZDJocGJHVWdLQ2hvWVc1a2JHVnlJRDBnWTI5dWJtVmpkR1ZrU0dGdVpHeGxjbk11Y0c5d0tDa3BLU0I3WEc0Z0lDQWdJQ0FnSUdoaGJtUnNaWElvS1R0Y2JpQWdJQ0FnSUgxY2JpQWdJQ0I5WEc0Z0lIMDdYRzVjYmlBZ1kyOXVjM1FnWTJobFkydElZVzVrYkdWeUlEMGdablZ1WTNScGIyNG9hR0Z1Wkd4bGNpa2dlMXh1SUNBZ0lHTnZibk4wSUhSNWNHVWdQU0IwZVhCbGIyWWdhR0Z1Wkd4bGNqdGNiaUFnSUNCcFppQW9kSGx3WlNBaFBUMGdYQ0ptZFc1amRHbHZibHdpS1NCN1hHNGdJQ0FnSUNCamIyNXpkQ0J0YzJjZ1BWeHVJQ0FnSUNBZ0lDQmNJa0VnWm5WdVkzUnBiMjRnYldGNUlHOXViSGtnWW1VZ2MzVmljM0pwWW1Wa0lIUnZJSFJvWlNCbGRtVnVkQ3dnWENJZ0sxeHVJQ0FnSUNBZ0lDQjBlWEJsSUN0Y2JpQWdJQ0FnSUNBZ1hDSWdkMkZ6SUhCeWIzWnBaR1ZrSUdsdWMzUmxZV1JjSWp0Y2JpQWdJQ0FnSUhSb2NtOTNJRzVsZHlCRmNuSnZjaWh0YzJjcE8xeHVJQ0FnSUgxY2JpQWdJQ0J5WlhSMWNtNGdhR0Z1Wkd4bGNqdGNiaUFnZlR0Y2JseHVJQ0J5WlhSMWNtNGdjbkJqTzF4dWZWeHVJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCT3pzN096dEJRVXRCTzBGQlEwRTdRVUZGUVR0QlFVTkJPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVsQk8wRkJRMEU3UVVGRFFUdEJRVVJCTzBGQlIwRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkZRVHRCUVVOQk8wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUlVFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGSlFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQklpd2ljMjkxY21ObFVtOXZkQ0k2SWlKOVxcXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrLWludGVybmFsOi8vLy4vc3JjL3BsdWdpbkNvcmUuanNcXFxcblxcXCIpO1xcblxcbi8qKiovIH0pLFxcblxcbi8qKiovIFxcXCIuL3NyYy9wbHVnaW5JZnJhbWUuanNcXFwiOlxcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxcXFxuICAhKioqIC4vc3JjL3BsdWdpbklmcmFtZS5qcyAqKiohXFxuICBcXFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXFxuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IENvbm5lY3Rpb24sIGRlZmF1bHQgKi9cXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XFxuXFxuXFxcInVzZSBzdHJpY3RcXFwiO1xcbmV2YWwoXFxcIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcXFxcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXFxcXFxcXCJDb25uZWN0aW9uXFxcXFxcXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ29ubmVjdGlvbjsgfSk7XFxcXG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFxcXFxcXFwiZGVmYXVsdFxcXFxcXFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNldHVwSWZyYW1lOyB9KTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGx1Z2luQ29yZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wbHVnaW5Db3JlLmpzICovIFxcXFxcXFwiLi9zcmMvcGx1Z2luQ29yZS5qc1xcXFxcXFwiKTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcnBjX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JwYy5qcyAqLyBcXFxcXFxcIi4vc3JjL3JwYy5qc1xcXFxcXFwiKTtcXFxcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXRpbHMuanMgKi8gXFxcXFxcXCIuL3NyYy91dGlscy5qc1xcXFxcXFwiKTtcXFxcbi8qKlxcXFxuICogQ29udGFpbnMgdGhlIHJvdXRpbmVzIGxvYWRlZCBieSB0aGUgcGx1Z2luIGlmcmFtZSB1bmRlciB3ZWItYnJvd3NlclxcXFxuICogaW4gY2FzZSB3aGVuIHdvcmtlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZVxcXFxuICpcXFxcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWIgZW52aXJvbm1lbnQgdmVyc2lvbiBvZiB0aGUgcGxhdGZvcm0tZGVwZW5kZW50XFxcXG4gKiBjb25uZWN0aW9uIG9iamVjdCBmb3IgdGhlIHBsdWdpbiBzaXRlXFxcXG4gKi9cXFxcblxcXFxuXFxcXG4gLy8gQ3JlYXRlIGEgbmV3LCBwbGFpbiA8c3Bhbj4gZWxlbWVudFxcXFxuXFxcXG5mdW5jdGlvbiBfaHRtbFRvRWxlbWVudChodG1sKSB7XFxcXG4gIHZhciB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcXFxcXCJ0ZW1wbGF0ZVxcXFxcXFwiKTtcXFxcbiAgaHRtbCA9IGh0bWwudHJpbSgpOyAvLyBOZXZlciByZXR1cm4gYSB0ZXh0IG5vZGUgb2Ygd2hpdGVzcGFjZSBhcyB0aGUgcmVzdWx0XFxcXG5cXFxcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcXFxcbiAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZDtcXFxcbn1cXFxcblxcXFxudmFyIF9pbXBvcnRTY3JpcHQgPSBmdW5jdGlvbiAodXJsKSB7XFxcXG4gIC8vdXJsIGlzIFVSTCBvZiBleHRlcm5hbCBmaWxlLCBpbXBsZW1lbnRhdGlvbkNvZGUgaXMgdGhlIGNvZGVcXFxcbiAgLy90byBiZSBjYWxsZWQgZnJvbSB0aGUgZmlsZSwgbG9jYXRpb24gaXMgdGhlIGxvY2F0aW9uIHRvXFxcXG4gIC8vaW5zZXJ0IHRoZSA8c2NyaXB0PiBlbGVtZW50XFxcXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XFxcXG4gICAgdmFyIHNjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcXFxcXCJzY3JpcHRcXFxcXFxcIik7XFxcXG4gICAgc2NyaXB0VGFnLnNyYyA9IHVybDtcXFxcbiAgICBzY3JpcHRUYWcudHlwZSA9IFxcXFxcXFwidGV4dC9qYXZhc2NyaXB0XFxcXFxcXCI7XFxcXG4gICAgc2NyaXB0VGFnLm9ubG9hZCA9IHJlc29sdmU7XFxcXG5cXFxcbiAgICBzY3JpcHRUYWcub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xcXFxuICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gXFxcXFxcXCJsb2FkZWRcXFxcXFxcIiB8fCB0aGlzLnJlYWR5U3RhdGUgPT09IFxcXFxcXFwiY29tcGxldGVcXFxcXFxcIikge1xcXFxuICAgICAgICByZXNvbHZlKCk7XFxcXG4gICAgICB9XFxcXG4gICAgfTtcXFxcblxcXFxuICAgIHNjcmlwdFRhZy5vbmVycm9yID0gcmVqZWN0O1xcXFxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcXFxcbiAgfSk7XFxcXG59OyAvLyBzdXBwb3J0IGltcG9ydFNjcmlwdHMgb3V0c2lkZSB3ZWIgd29ya2VyXFxcXG5cXFxcblxcXFxuYXN5bmMgZnVuY3Rpb24gaW1wb3J0U2NyaXB0cygpIHtcXFxcbiAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLFxcXFxuICAgICAgbGVuID0gYXJncy5sZW5ndGgsXFxcXG4gICAgICBpID0gMDtcXFxcblxcXFxuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XFxcXG4gICAgYXdhaXQgX2ltcG9ydFNjcmlwdChhcmdzW2ldKTtcXFxcbiAgfVxcXFxufVxcXFxuXFxcXG5jbGFzcyBDb25uZWN0aW9uIGV4dGVuZHMgX3V0aWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXFxcXFxcXCJFdmVudE1hbmFnZXJcXFxcXFxcIl0ge1xcXFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXFxcbiAgICBzdXBlcihjb25maWcgJiYgY29uZmlnLmRlYnVnKTtcXFxcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcXFxcbiAgfVxcXFxuXFxcXG4gIGNvbm5lY3QoKSB7XFxcXG4gICAgdGhpcy5jb25maWcudGFyZ2V0X29yaWdpbiA9IHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4gfHwgXFxcXFxcXCIqXFxcXFxcXCI7IC8vIHRoaXMgd2lsbCBjYWxsIGhhbmRsZUV2ZW50IGZ1bmN0aW9uXFxcXG5cXFxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcXFxcXFxcIm1lc3NhZ2VcXFxcXFxcIiwgdGhpcyk7XFxcXG4gICAgdGhpcy5lbWl0KHtcXFxcbiAgICAgIHR5cGU6IFxcXFxcXFwiaW5pdGlhbGl6ZWRcXFxcXFxcIixcXFxcbiAgICAgIGNvbmZpZzogdGhpcy5jb25maWdcXFxcbiAgICB9KTtcXFxcblxcXFxuICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJjb25uZWN0ZWRcXFxcXFxcIik7XFxcXG4gIH1cXFxcblxcXFxuICBoYW5kbGVFdmVudChlKSB7XFxcXG4gICAgaWYgKGUudHlwZSA9PT0gXFxcXFxcXCJtZXNzYWdlXFxcXFxcXCIgJiYgdGhpcy5jb25maWcudGFyZ2V0X29yaWdpbiA9PT0gXFxcXFxcXCIqXFxcXFxcXCIgfHwgZS5vcmlnaW4gPT09IHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4pIHtcXFxcbiAgICAgIHRoaXMuX2ZpcmUoZS5kYXRhLnR5cGUsIGUuZGF0YSk7XFxcXG4gICAgfVxcXFxuICB9XFxcXG5cXFxcbiAgZGlzY29ubmVjdCgpIHtcXFxcbiAgICB0aGlzLl9maXJlKFxcXFxcXFwiYmVmb3JlRGlzY29ubmVjdFxcXFxcXFwiKTtcXFxcblxcXFxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFxcXFxcXFwibWVzc2FnZVxcXFxcXFwiLCB0aGlzKTtcXFxcblxcXFxuICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJkaXNjb25uZWN0ZWRcXFxcXFxcIik7XFxcXG4gIH1cXFxcblxcXFxuICBlbWl0KGRhdGEpIHtcXFxcbiAgICBsZXQgdHJhbnNmZXJhYmxlcztcXFxcblxcXFxuICAgIGlmIChkYXRhLl9fdHJhbnNmZXJhYmxlc19fKSB7XFxcXG4gICAgICB0cmFuc2ZlcmFibGVzID0gZGF0YS5fX3RyYW5zZmVyYWJsZXNfXztcXFxcbiAgICAgIGRlbGV0ZSBkYXRhLl9fdHJhbnNmZXJhYmxlc19fO1xcXFxuICAgIH1cXFxcblxcXFxuICAgIHBhcmVudC5wb3N0TWVzc2FnZShkYXRhLCB0aGlzLmNvbmZpZy50YXJnZXRfb3JpZ2luLCB0cmFuc2ZlcmFibGVzKTtcXFxcbiAgfVxcXFxuXFxcXG4gIGFzeW5jIGV4ZWN1dGUoY29kZSkge1xcXFxuICAgIHRyeSB7XFxcXG4gICAgICBpZiAoY29kZS50eXBlID09PSBcXFxcXFxcInJlcXVpcmVtZW50c1xcXFxcXFwiKSB7XFxcXG4gICAgICAgIGlmIChjb2RlLnJlcXVpcmVtZW50cyAmJiAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykgfHwgdHlwZW9mIGNvZGUucmVxdWlyZW1lbnRzID09PSBcXFxcXFxcInN0cmluZ1xcXFxcXFwiKSkge1xcXFxuICAgICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgICB2YXIgbGlua19ub2RlO1xcXFxuICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMgPSB0eXBlb2YgY29kZS5yZXF1aXJlbWVudHMgPT09IFxcXFxcXFwic3RyaW5nXFxcXFxcXCIgPyBbY29kZS5yZXF1aXJlbWVudHNdIDogY29kZS5yZXF1aXJlbWVudHM7XFxcXG5cXFxcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvZGUucmVxdWlyZW1lbnRzKSkge1xcXFxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvZGUucmVxdWlyZW1lbnRzLmxlbmd0aDsgaSsrKSB7XFxcXG4gICAgICAgICAgICAgICAgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXFxcXFxcXCIuY3NzXFxcXFxcXCIpIHx8IGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJjc3M6XFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAgICBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcXFxcXFxcImNzczpcXFxcXFxcIikpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0gPSBjb2RlLnJlcXVpcmVtZW50c1tpXS5zbGljZSg0KTtcXFxcbiAgICAgICAgICAgICAgICAgIH1cXFxcblxcXFxuICAgICAgICAgICAgICAgICAgbGlua19ub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFxcXFxcImxpbmtcXFxcXFxcIik7XFxcXG4gICAgICAgICAgICAgICAgICBsaW5rX25vZGUucmVsID0gXFxcXFxcXCJzdHlsZXNoZWV0XFxcXFxcXCI7XFxcXG4gICAgICAgICAgICAgICAgICBsaW5rX25vZGUuaHJlZiA9IGNvZGUucmVxdWlyZW1lbnRzW2ldO1xcXFxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rX25vZGUpO1xcXFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0udG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcXFxcXFxcIi5qc1xcXFxcXFwiKSB8fCBjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFxcXFxcXFwianM6XFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAgICBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcXFxcXFxcImpzOlxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXSA9IGNvZGUucmVxdWlyZW1lbnRzW2ldLnNsaWNlKDMpO1xcXFxuICAgICAgICAgICAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJodHRwXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXFxcXFxcXCJjYWNoZTpcXFxcXFxcIikpIHsvL2lnbm9yZSBjYWNoZVxcXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcXFxcXFxcIlVucHJvY2Vzc2VkIHJlcXVpcmVtZW50cyB1cmw6IFxcXFxcXFwiICsgY29kZS5yZXF1aXJlbWVudHNbaV0pO1xcXFxuICAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgdGhyb3cgXFxcXFxcXCJ1bnN1cHBvcnRlZCByZXF1aXJlbWVudHMgZGVmaW5pdGlvblxcXFxcXFwiO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICAgIHRocm93IFxcXFxcXFwiZmFpbGVkIHRvIGltcG9ydCByZXF1aXJlZCBzY3JpcHRzOiBcXFxcXFxcIiArIGNvZGUucmVxdWlyZW1lbnRzLnRvU3RyaW5nKCk7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9XFxcXG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXFxcXFxcXCJzY3JpcHRcXFxcXFxcIikge1xcXFxuICAgICAgICBpZiAoY29kZS5zcmMpIHtcXFxcbiAgICAgICAgICB2YXIgc2NyaXB0X25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXFxcXFwic2NyaXB0XFxcXFxcXCIpO1xcXFxuICAgICAgICAgIHNjcmlwdF9ub2RlLnNldEF0dHJpYnV0ZShcXFxcXFxcInR5cGVcXFxcXFxcIiwgY29kZS5hdHRycy50eXBlKTtcXFxcbiAgICAgICAgICBzY3JpcHRfbm9kZS5zZXRBdHRyaWJ1dGUoXFxcXFxcXCJzcmNcXFxcXFxcIiwgY29kZS5zcmMpO1xcXFxuICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0X25vZGUpO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgIGlmIChjb2RlLmNvbnRlbnQgJiYgKCFjb2RlLmF0dHJzLnR5cGUgfHwgY29kZS5hdHRycy50eXBlID09PSBcXFxcXFxcInRleHQvamF2YXNjcmlwdFxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcXFxcXFxcIkRPTUNvbnRlbnRMb2FkZWRcXFxcXFxcIiwgZnVuY3Rpb24oKXtcXFxcbiAgICAgICAgICAgIGV2YWwoY29kZS5jb250ZW50KTsgLy8gfSk7XFxcXG4gICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFxcXFxcInNjcmlwdFxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFxcXFxcXFwidHlwZVxcXFxcXFwiLCBjb2RlLmF0dHJzLnR5cGUpO1xcXFxuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb2RlLmNvbnRlbnQpKTtcXFxcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9XFxcXG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXFxcXFxcXCJzdHlsZVxcXFxcXFwiKSB7XFxcXG4gICAgICAgIGNvbnN0IHN0eWxlX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXFxcXFwic3R5bGVcXFxcXFxcIik7XFxcXG5cXFxcbiAgICAgICAgaWYgKGNvZGUuc3JjKSB7XFxcXG4gICAgICAgICAgc3R5bGVfbm9kZS5zcmMgPSBjb2RlLnNyYztcXFxcbiAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgIHN0eWxlX25vZGUuaW5uZXJIVE1MID0gY29kZS5jb250ZW50O1xcXFxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlX25vZGUpO1xcXFxuICAgICAgfSBlbHNlIGlmIChjb2RlLnR5cGUgPT09IFxcXFxcXFwibGlua1xcXFxcXFwiKSB7XFxcXG4gICAgICAgIGNvbnN0IGxpbmtfbm9kZV8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXFxcXFwibGlua1xcXFxcXFwiKTtcXFxcblxcXFxuICAgICAgICBpZiAoY29kZS5yZWwpIHtcXFxcbiAgICAgICAgICBsaW5rX25vZGVfLnJlbCA9IGNvZGUucmVsO1xcXFxuICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgaWYgKGNvZGUuaHJlZikge1xcXFxuICAgICAgICAgIGxpbmtfbm9kZV8uaHJlZiA9IGNvZGUuaHJlZjtcXFxcbiAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgIGlmIChjb2RlLmF0dHJzICYmIGNvZGUuYXR0cnMudHlwZSkge1xcXFxuICAgICAgICAgIGxpbmtfbm9kZV8udHlwZSA9IGNvZGUuYXR0cnMudHlwZTtcXFxcbiAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua19ub2RlXyk7XFxcXG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXFxcXFxcXCJodG1sXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChfaHRtbFRvRWxlbWVudChjb2RlLmNvbnRlbnQpKTtcXFxcbiAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgIHRocm93IFxcXFxcXFwidW5zdXBwb3J0ZWQgY29kZSB0eXBlLlxcXFxcXFwiO1xcXFxuICAgICAgfVxcXFxuXFxcXG4gICAgICBwYXJlbnQucG9zdE1lc3NhZ2Uoe1xcXFxuICAgICAgICB0eXBlOiBcXFxcXFxcImV4ZWN1dGVkXFxcXFxcXCJcXFxcbiAgICAgIH0sIHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4pO1xcXFxuICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgIGNvbnNvbGUuZXJyb3IoXFxcXFxcXCJmYWlsZWQgdG8gZXhlY3V0ZSBzY3JpcHRzOiBcXFxcXFxcIiwgY29kZSwgZSk7XFxcXG4gICAgICBwYXJlbnQucG9zdE1lc3NhZ2Uoe1xcXFxuICAgICAgICB0eXBlOiBcXFxcXFxcImV4ZWN1dGVkXFxcXFxcXCIsXFxcXG4gICAgICAgIGVycm9yOiBlLnN0YWNrIHx8IFN0cmluZyhlKVxcXFxuICAgICAgfSwgdGhpcy5jb25maWcudGFyZ2V0X29yaWdpbik7XFxcXG4gICAgfVxcXFxuICB9XFxcXG5cXFxcbn1cXFxcbmZ1bmN0aW9uIHNldHVwSWZyYW1lKGNvbmZpZykge1xcXFxuICBjb25maWcgPSBjb25maWcgfHwge307XFxcXG4gIGNvbmZpZy5kZWRpY2F0ZWRfdGhyZWFkID0gZmFsc2U7XFxcXG4gIGNvbmZpZy5sYW5nID0gXFxcXFxcXCJqYXZhc2NyaXB0XFxcXFxcXCI7XFxcXG4gIGNvbmZpZy5hcGlfdmVyc2lvbiA9IF9ycGNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcXFxcXFxcIkFQSV9WRVJTSU9OXFxcXFxcXCJdO1xcXFxuICBjb25zdCBjb25uID0gbmV3IENvbm5lY3Rpb24oY29uZmlnKTtcXFxcbiAgT2JqZWN0KF9wbHVnaW5Db3JlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXFxcXFxcXCJjb25uZWN0UlBDXFxcXFxcXCJdKShjb25uLCBjb25maWcpO1xcXFxuICBjb25uLmNvbm5lY3QoKTtcXFxcbn0vLyMgc291cmNlVVJMPVttb2R1bGVdXFxcXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaUxpOXpjbU12Y0d4MVoybHVTV1p5WVcxbExtcHpMbXB6SWl3aWMyOTFjbU5sY3lJNld5SjNaV0p3WVdOck9pOHZhVzFxYjNsU1VFTXZjM0pqTDNCc2RXZHBia2xtY21GdFpTNXFjejlsTm1GbUlsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJaThxS2x4dUlDb2dRMjl1ZEdGcGJuTWdkR2hsSUhKdmRYUnBibVZ6SUd4dllXUmxaQ0JpZVNCMGFHVWdjR3gxWjJsdUlHbG1jbUZ0WlNCMWJtUmxjaUIzWldJdFluSnZkM05sY2x4dUlDb2dhVzRnWTJGelpTQjNhR1Z1SUhkdmNtdGxjaUJtWVdsc1pXUWdkRzhnYVc1cGRHbGhiR2w2WlZ4dUlDcGNiaUFxSUVsdWFYUnBZV3hwZW1WeklIUm9aU0IzWldJZ1pXNTJhWEp2Ym0xbGJuUWdkbVZ5YzJsdmJpQnZaaUIwYUdVZ2NHeGhkR1p2Y20wdFpHVndaVzVrWlc1MFhHNGdLaUJqYjI1dVpXTjBhVzl1SUc5aWFtVmpkQ0JtYjNJZ2RHaGxJSEJzZFdkcGJpQnphWFJsWEc0Z0tpOWNibWx0Y0c5eWRDQjdJR052Ym01bFkzUlNVRU1nZlNCbWNtOXRJRndpTGk5d2JIVm5hVzVEYjNKbExtcHpYQ0k3WEc1cGJYQnZjblFnZXlCQlVFbGZWa1ZTVTBsUFRpQjlJR1p5YjIwZ1hDSXVMM0p3WXk1cWMxd2lPMXh1YVcxd2IzSjBJSHNnUlhabGJuUk5ZVzVoWjJWeUlIMGdabkp2YlNCY0lpNHZkWFJwYkhNdWFuTmNJanRjYmk4dklFTnlaV0YwWlNCaElHNWxkeXdnY0d4aGFXNGdQSE53WVc0K0lHVnNaVzFsYm5SY2JtWjFibU4wYVc5dUlGOW9kRzFzVkc5RmJHVnRaVzUwS0doMGJXd3BJSHRjYmlBZ2RtRnlJSFJsYlhCc1lYUmxJRDBnWkc5amRXMWxiblF1WTNKbFlYUmxSV3hsYldWdWRDaGNJblJsYlhCc1lYUmxYQ0lwTzF4dUlDQm9kRzFzSUQwZ2FIUnRiQzUwY21sdEtDazdJQzh2SUU1bGRtVnlJSEpsZEhWeWJpQmhJSFJsZUhRZ2JtOWtaU0J2WmlCM2FHbDBaWE53WVdObElHRnpJSFJvWlNCeVpYTjFiSFJjYmlBZ2RHVnRjR3hoZEdVdWFXNXVaWEpJVkUxTUlEMGdhSFJ0YkR0Y2JpQWdjbVYwZFhKdUlIUmxiWEJzWVhSbExtTnZiblJsYm5RdVptbHljM1JEYUdsc1pEdGNibjFjYmx4dWRtRnlJRjlwYlhCdmNuUlRZM0pwY0hRZ1BTQm1kVzVqZEdsdmJpaDFjbXdwSUh0Y2JpQWdMeTkxY213Z2FYTWdWVkpNSUc5bUlHVjRkR1Z5Ym1Gc0lHWnBiR1VzSUdsdGNHeGxiV1Z1ZEdGMGFXOXVRMjlrWlNCcGN5QjBhR1VnWTI5a1pWeHVJQ0F2TDNSdklHSmxJR05oYkd4bFpDQm1jbTl0SUhSb1pTQm1hV3hsTENCc2IyTmhkR2x2YmlCcGN5QjBhR1VnYkc5allYUnBiMjRnZEc5Y2JpQWdMeTlwYm5ObGNuUWdkR2hsSUR4elkzSnBjSFErSUdWc1pXMWxiblJjYmlBZ2NtVjBkWEp1SUc1bGR5QlFjbTl0YVhObEtDaHlaWE52YkhabExDQnlaV3BsWTNRcElEMCtJSHRjYmlBZ0lDQjJZWElnYzJOeWFYQjBWR0ZuSUQwZ1pHOWpkVzFsYm5RdVkzSmxZWFJsUld4bGJXVnVkQ2hjSW5OamNtbHdkRndpS1R0Y2JpQWdJQ0J6WTNKcGNIUlVZV2N1YzNKaklEMGdkWEpzTzF4dUlDQWdJSE5qY21sd2RGUmhaeTUwZVhCbElEMGdYQ0owWlhoMEwycGhkbUZ6WTNKcGNIUmNJanRjYmlBZ0lDQnpZM0pwY0hSVVlXY3ViMjVzYjJGa0lEMGdjbVZ6YjJ4MlpUdGNiaUFnSUNCelkzSnBjSFJVWVdjdWIyNXlaV0ZrZVhOMFlYUmxZMmhoYm1kbElEMGdablZ1WTNScGIyNG9LU0I3WEc0Z0lDQWdJQ0JwWmlBb2RHaHBjeTV5WldGa2VWTjBZWFJsSUQwOVBTQmNJbXh2WVdSbFpGd2lJSHg4SUhSb2FYTXVjbVZoWkhsVGRHRjBaU0E5UFQwZ1hDSmpiMjF3YkdWMFpWd2lLU0I3WEc0Z0lDQWdJQ0FnSUhKbGMyOXNkbVVvS1R0Y2JpQWdJQ0FnSUgxY2JpQWdJQ0I5TzF4dUlDQWdJSE5qY21sd2RGUmhaeTV2Ym1WeWNtOXlJRDBnY21WcVpXTjBPMXh1SUNBZ0lHUnZZM1Z0Wlc1MExtaGxZV1F1WVhCd1pXNWtRMmhwYkdRb2MyTnlhWEIwVkdGbktUdGNiaUFnZlNrN1hHNTlPMXh1WEc0dkx5QnpkWEJ3YjNKMElHbHRjRzl5ZEZOamNtbHdkSE1nYjNWMGMybGtaU0IzWldJZ2QyOXlhMlZ5WEc1aGMzbHVZeUJtZFc1amRHbHZiaUJwYlhCdmNuUlRZM0pwY0hSektDa2dlMXh1SUNCMllYSWdZWEpuY3lBOUlFRnljbUY1TG5CeWIzUnZkSGx3WlM1emJHbGpaUzVqWVd4c0tHRnlaM1Z0Wlc1MGN5a3NYRzRnSUNBZ2JHVnVJRDBnWVhKbmN5NXNaVzVuZEdnc1hHNGdJQ0FnYVNBOUlEQTdYRzRnSUdadmNpQW9PeUJwSUR3Z2JHVnVPeUJwS3lzcElIdGNiaUFnSUNCaGQyRnBkQ0JmYVcxd2IzSjBVMk55YVhCMEtHRnlaM05iYVYwcE8xeHVJQ0I5WEc1OVhHNWNibVY0Y0c5eWRDQmpiR0Z6Y3lCRGIyNXVaV04wYVc5dUlHVjRkR1Z1WkhNZ1JYWmxiblJOWVc1aFoyVnlJSHRjYmlBZ1kyOXVjM1J5ZFdOMGIzSW9ZMjl1Wm1sbktTQjdYRzRnSUNBZ2MzVndaWElvWTI5dVptbG5JQ1ltSUdOdmJtWnBaeTVrWldKMVp5azdYRzRnSUNBZ2RHaHBjeTVqYjI1bWFXY2dQU0JqYjI1bWFXY2dmSHdnZTMwN1hHNGdJSDFjYmlBZ1kyOXVibVZqZENncElIdGNiaUFnSUNCMGFHbHpMbU52Ym1acFp5NTBZWEpuWlhSZmIzSnBaMmx1SUQwZ2RHaHBjeTVqYjI1bWFXY3VkR0Z5WjJWMFgyOXlhV2RwYmlCOGZDQmNJaXBjSWp0Y2JpQWdJQ0F2THlCMGFHbHpJSGRwYkd3Z1kyRnNiQ0JvWVc1a2JHVkZkbVZ1ZENCbWRXNWpkR2x2Ymx4dUlDQWdJSGRwYm1SdmR5NWhaR1JGZG1WdWRFeHBjM1JsYm1WeUtGd2liV1Z6YzJGblpWd2lMQ0IwYUdsektUdGNiaUFnSUNCMGFHbHpMbVZ0YVhRb2UxeHVJQ0FnSUNBZ2RIbHdaVG9nWENKcGJtbDBhV0ZzYVhwbFpGd2lMRnh1SUNBZ0lDQWdZMjl1Wm1sbk9pQjBhR2x6TG1OdmJtWnBaMXh1SUNBZ0lIMHBPMXh1SUNBZ0lIUm9hWE11WDJacGNtVW9YQ0pqYjI1dVpXTjBaV1JjSWlrN1hHNGdJSDFjYmlBZ2FHRnVaR3hsUlhabGJuUW9aU2tnZTF4dUlDQWdJR2xtSUNoY2JpQWdJQ0FnSUNobExuUjVjR1VnUFQwOUlGd2liV1Z6YzJGblpWd2lJQ1ltSUhSb2FYTXVZMjl1Wm1sbkxuUmhjbWRsZEY5dmNtbG5hVzRnUFQwOUlGd2lLbHdpS1NCOGZGeHVJQ0FnSUNBZ1pTNXZjbWxuYVc0Z1BUMDlJSFJvYVhNdVkyOXVabWxuTG5SaGNtZGxkRjl2Y21sbmFXNWNiaUFnSUNBcElIdGNiaUFnSUNBZ0lIUm9hWE11WDJacGNtVW9aUzVrWVhSaExuUjVjR1VzSUdVdVpHRjBZU2s3WEc0Z0lDQWdmVnh1SUNCOVhHNGdJR1JwYzJOdmJtNWxZM1FvS1NCN1hHNGdJQ0FnZEdocGN5NWZabWx5WlNoY0ltSmxabTl5WlVScGMyTnZibTVsWTNSY0lpazdYRzRnSUNBZ2QybHVaRzkzTG5KbGJXOTJaVVYyWlc1MFRHbHpkR1Z1WlhJb1hDSnRaWE56WVdkbFhDSXNJSFJvYVhNcE8xeHVJQ0FnSUhSb2FYTXVYMlpwY21Vb1hDSmthWE5qYjI1dVpXTjBaV1JjSWlrN1hHNGdJSDFjYmlBZ1pXMXBkQ2hrWVhSaEtTQjdYRzRnSUNBZ2JHVjBJSFJ5WVc1elptVnlZV0pzWlhNN1hHNGdJQ0FnYVdZZ0tHUmhkR0V1WDE5MGNtRnVjMlpsY21GaWJHVnpYMThwSUh0Y2JpQWdJQ0FnSUhSeVlXNXpabVZ5WVdKc1pYTWdQU0JrWVhSaExsOWZkSEpoYm5ObVpYSmhZbXhsYzE5Zk8xeHVJQ0FnSUNBZ1pHVnNaWFJsSUdSaGRHRXVYMTkwY21GdWMyWmxjbUZpYkdWelgxODdYRzRnSUNBZ2ZWeHVJQ0FnSUhCaGNtVnVkQzV3YjNOMFRXVnpjMkZuWlNoa1lYUmhMQ0IwYUdsekxtTnZibVpwWnk1MFlYSm5aWFJmYjNKcFoybHVMQ0IwY21GdWMyWmxjbUZpYkdWektUdGNiaUFnZlZ4dUlDQmhjM2x1WXlCbGVHVmpkWFJsS0dOdlpHVXBJSHRjYmlBZ0lDQjBjbmtnZTF4dUlDQWdJQ0FnYVdZZ0tHTnZaR1V1ZEhsd1pTQTlQVDBnWENKeVpYRjFhWEpsYldWdWRITmNJaWtnZTF4dUlDQWdJQ0FnSUNCcFppQW9YRzRnSUNBZ0lDQWdJQ0FnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE1nSmlaY2JpQWdJQ0FnSUNBZ0lDQW9RWEp5WVhrdWFYTkJjbkpoZVNoamIyUmxMbkpsY1hWcGNtVnRaVzUwY3lrZ2ZIeGNiaUFnSUNBZ0lDQWdJQ0FnSUhSNWNHVnZaaUJqYjJSbExuSmxjWFZwY21WdFpXNTBjeUE5UFQwZ1hDSnpkSEpwYm1kY0lpbGNiaUFnSUNBZ0lDQWdLU0I3WEc0Z0lDQWdJQ0FnSUNBZ2RISjVJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJzYVc1clgyNXZaR1U3WEc0Z0lDQWdJQ0FnSUNBZ0lDQmpiMlJsTG5KbGNYVnBjbVZ0Wlc1MGN5QTlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lIUjVjR1Z2WmlCamIyUmxMbkpsY1hWcGNtVnRaVzUwY3lBOVBUMGdYQ0p6ZEhKcGJtZGNJbHh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRDhnVzJOdlpHVXVjbVZ4ZFdseVpXMWxiblJ6WFZ4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSURvZ1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhNN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb1FYSnlZWGt1YVhOQmNuSmhlU2hqYjJSbExuSmxjWFZwY21WdFpXNTBjeWtwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnWm05eUlDaDJZWElnYVNBOUlEQTdJR2tnUENCamIyUmxMbkpsY1hWcGNtVnRaVzUwY3k1c1pXNW5kR2c3SUdrckt5a2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJR2xtSUNoY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZaR1V1Y21WeGRXbHlaVzFsYm5SelcybGRMblJ2VEc5M1pYSkRZWE5sS0NrdVpXNWtjMWRwZEdnb1hDSXVZM056WENJcElIeDhYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JqYjJSbExuSmxjWFZwY21WdFpXNTBjMXRwWFM1emRHRnlkSE5YYVhSb0tGd2lZM056T2x3aUtWeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tHTnZaR1V1Y21WeGRXbHlaVzFsYm5SelcybGRMbk4wWVhKMGMxZHBkR2dvWENKamMzTTZYQ0lwS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJR052WkdVdWNtVnhkV2x5WlcxbGJuUnpXMmxkSUQwZ1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhOYmFWMHVjMnhwWTJVb05DazdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCc2FXNXJYMjV2WkdVZ1BTQmtiMk4xYldWdWRDNWpjbVZoZEdWRmJHVnRaVzUwS0Z3aWJHbHVhMXdpS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHeHBibXRmYm05a1pTNXlaV3dnUFNCY0luTjBlV3hsYzJobFpYUmNJanRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUd4cGJtdGZibTlrWlM1b2NtVm1JRDBnWTI5a1pTNXlaWEYxYVhKbGJXVnVkSE5iYVYwN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmtiMk4xYldWdWRDNW9aV0ZrTG1Gd2NHVnVaRU5vYVd4a0tHeHBibXRmYm05a1pTazdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdmU0JsYkhObElHbG1JQ2hjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdOdlpHVXVjbVZ4ZFdseVpXMWxiblJ6VzJsZExuUnZURzkzWlhKRFlYTmxLQ2t1Wlc1a2MxZHBkR2dvWENJdWFuTmNJaWtnZkh4Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZaR1V1Y21WeGRXbHlaVzFsYm5SelcybGRMbk4wWVhKMGMxZHBkR2dvWENKcWN6cGNJaWxjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHbG1JQ2hqYjJSbExuSmxjWFZwY21WdFpXNTBjMXRwWFM1emRHRnlkSE5YYVhSb0tGd2lhbk02WENJcEtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdOdlpHVXVjbVZ4ZFdseVpXMWxiblJ6VzJsZElEMGdZMjlrWlM1eVpYRjFhWEpsYldWdWRITmJhVjB1YzJ4cFkyVW9NeWs3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmhkMkZwZENCcGJYQnZjblJUWTNKcGNIUnpLR052WkdVdWNtVnhkV2x5WlcxbGJuUnpXMmxkS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tHTnZaR1V1Y21WeGRXbHlaVzFsYm5SelcybGRMbk4wWVhKMGMxZHBkR2dvWENKb2RIUndYQ0lwS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmhkMkZwZENCcGJYQnZjblJUWTNKcGNIUnpLR052WkdVdWNtVnhkV2x5WlcxbGJuUnpXMmxkS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tHTnZaR1V1Y21WeGRXbHlaVzFsYm5SelcybGRMbk4wWVhKMGMxZHBkR2dvWENKallXTm9aVHBjSWlrcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQzh2YVdkdWIzSmxJR05oWTJobFhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCY0lsVnVjSEp2WTJWemMyVmtJSEpsY1hWcGNtVnRaVzUwY3lCMWNtdzZJRndpSUNzZ1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhOYmFWMWNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCMGFISnZkeUJjSW5WdWMzVndjRzl5ZEdWa0lISmxjWFZwY21WdFpXNTBjeUJrWldacGJtbDBhVzl1WENJN1hHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ2ZTQmpZWFJqYUNBb1pTa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2RHaHliM2NnWENKbVlXbHNaV1FnZEc4Z2FXMXdiM0owSUhKbGNYVnBjbVZrSUhOamNtbHdkSE02SUZ3aUlDdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1kyOWtaUzV5WlhGMWFYSmxiV1Z1ZEhNdWRHOVRkSEpwYm1jb0tUdGNiaUFnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgwZ1pXeHpaU0JwWmlBb1kyOWtaUzUwZVhCbElEMDlQU0JjSW5OamNtbHdkRndpS1NCN1hHNGdJQ0FnSUNBZ0lHbG1JQ2hqYjJSbExuTnlZeWtnZTF4dUlDQWdJQ0FnSUNBZ0lIWmhjaUJ6WTNKcGNIUmZibTlrWlNBOUlHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvWENKelkzSnBjSFJjSWlrN1hHNGdJQ0FnSUNBZ0lDQWdjMk55YVhCMFgyNXZaR1V1YzJWMFFYUjBjbWxpZFhSbEtGd2lkSGx3WlZ3aUxDQmpiMlJsTG1GMGRISnpMblI1Y0dVcE8xeHVJQ0FnSUNBZ0lDQWdJSE5qY21sd2RGOXViMlJsTG5ObGRFRjBkSEpwWW5WMFpTaGNJbk55WTF3aUxDQmpiMlJsTG5OeVl5azdYRzRnSUNBZ0lDQWdJQ0FnWkc5amRXMWxiblF1YUdWaFpDNWhjSEJsYm1SRGFHbHNaQ2h6WTNKcGNIUmZibTlrWlNrN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0Z4dUlDQWdJQ0FnSUNBZ0lDQWdZMjlrWlM1amIyNTBaVzUwSUNZbVhHNGdJQ0FnSUNBZ0lDQWdJQ0FvSVdOdlpHVXVZWFIwY25NdWRIbHdaU0I4ZkNCamIyUmxMbUYwZEhKekxuUjVjR1VnUFQwOUlGd2lkR1Y0ZEM5cVlYWmhjMk55YVhCMFhDSXBYRzRnSUNBZ0lDQWdJQ0FnS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0F2THlCa2IyTjFiV1Z1ZEM1aFpHUkZkbVZ1ZEV4cGMzUmxibVZ5S0Z3aVJFOU5RMjl1ZEdWdWRFeHZZV1JsWkZ3aUxDQm1kVzVqZEdsdmJpZ3BlMXh1SUNBZ0lDQWdJQ0FnSUNBZ1pYWmhiQ2hqYjJSbExtTnZiblJsYm5RcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnTHk4Z2ZTazdYRzRnSUNBZ0lDQWdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJ1YjJSbElEMGdaRzlqZFcxbGJuUXVZM0psWVhSbFJXeGxiV1Z1ZENoY0luTmpjbWx3ZEZ3aUtUdGNiaUFnSUNBZ0lDQWdJQ0FnSUc1dlpHVXVjMlYwUVhSMGNtbGlkWFJsS0Z3aWRIbHdaVndpTENCamIyUmxMbUYwZEhKekxuUjVjR1VwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdibTlrWlM1aGNIQmxibVJEYUdsc1pDaGtiMk4xYldWdWRDNWpjbVZoZEdWVVpYaDBUbTlrWlNoamIyUmxMbU52Ym5SbGJuUXBLVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHUnZZM1Z0Wlc1MExtSnZaSGt1WVhCd1pXNWtRMmhwYkdRb2JtOWtaU2s3WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLR052WkdVdWRIbHdaU0E5UFQwZ1hDSnpkSGxzWlZ3aUtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OMElITjBlV3hsWDI1dlpHVWdQU0JrYjJOMWJXVnVkQzVqY21WaGRHVkZiR1Z0Wlc1MEtGd2ljM1I1YkdWY0lpazdYRzRnSUNBZ0lDQWdJR2xtSUNoamIyUmxMbk55WXlrZ2UxeHVJQ0FnSUNBZ0lDQWdJSE4wZVd4bFgyNXZaR1V1YzNKaklEMGdZMjlrWlM1emNtTTdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnYzNSNWJHVmZibTlrWlM1cGJtNWxja2hVVFV3Z1BTQmpiMlJsTG1OdmJuUmxiblE3WEc0Z0lDQWdJQ0FnSUdSdlkzVnRaVzUwTG1obFlXUXVZWEJ3Wlc1a1EyaHBiR1FvYzNSNWJHVmZibTlrWlNrN1hHNGdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tHTnZaR1V1ZEhsd1pTQTlQVDBnWENKc2FXNXJYQ0lwSUh0Y2JpQWdJQ0FnSUNBZ1kyOXVjM1FnYkdsdWExOXViMlJsWHlBOUlHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvWENKc2FXNXJYQ0lwTzF4dUlDQWdJQ0FnSUNCcFppQW9ZMjlrWlM1eVpXd3BJSHRjYmlBZ0lDQWdJQ0FnSUNCc2FXNXJYMjV2WkdWZkxuSmxiQ0E5SUdOdlpHVXVjbVZzTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lHbG1JQ2hqYjJSbExtaHlaV1lwSUh0Y2JpQWdJQ0FnSUNBZ0lDQnNhVzVyWDI1dlpHVmZMbWh5WldZZ1BTQmpiMlJsTG1oeVpXWTdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnYVdZZ0tHTnZaR1V1WVhSMGNuTWdKaVlnWTI5a1pTNWhkSFJ5Y3k1MGVYQmxLU0I3WEc0Z0lDQWdJQ0FnSUNBZ2JHbHVhMTl1YjJSbFh5NTBlWEJsSUQwZ1kyOWtaUzVoZEhSeWN5NTBlWEJsTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lHUnZZM1Z0Wlc1MExtaGxZV1F1WVhCd1pXNWtRMmhwYkdRb2JHbHVhMTl1YjJSbFh5azdYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLR052WkdVdWRIbHdaU0E5UFQwZ1hDSm9kRzFzWENJcElIdGNiaUFnSUNBZ0lDQWdaRzlqZFcxbGJuUXVZbTlrZVM1aGNIQmxibVJEYUdsc1pDaGZhSFJ0YkZSdlJXeGxiV1Z1ZENoamIyUmxMbU52Ym5SbGJuUXBLVHRjYmlBZ0lDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQWdJSFJvY205M0lGd2lkVzV6ZFhCd2IzSjBaV1FnWTI5a1pTQjBlWEJsTGx3aU8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2NHRnlaVzUwTG5CdmMzUk5aWE56WVdkbEtIc2dkSGx3WlRvZ1hDSmxlR1ZqZFhSbFpGd2lJSDBzSUhSb2FYTXVZMjl1Wm1sbkxuUmhjbWRsZEY5dmNtbG5hVzRwTzF4dUlDQWdJSDBnWTJGMFkyZ2dLR1VwSUh0Y2JpQWdJQ0FnSUdOdmJuTnZiR1V1WlhKeWIzSW9YQ0ptWVdsc1pXUWdkRzhnWlhobFkzVjBaU0J6WTNKcGNIUnpPaUJjSWl3Z1kyOWtaU3dnWlNrN1hHNGdJQ0FnSUNCd1lYSmxiblF1Y0c5emRFMWxjM05oWjJVb1hHNGdJQ0FnSUNBZ0lIc2dkSGx3WlRvZ1hDSmxlR1ZqZFhSbFpGd2lMQ0JsY25KdmNqb2daUzV6ZEdGamF5QjhmQ0JUZEhKcGJtY29aU2tnZlN4Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVqYjI1bWFXY3VkR0Z5WjJWMFgyOXlhV2RwYmx4dUlDQWdJQ0FnS1R0Y2JpQWdJQ0I5WEc0Z0lIMWNibjFjYmx4dVpYaHdiM0owSUdSbFptRjFiSFFnWm5WdVkzUnBiMjRnYzJWMGRYQkpabkpoYldVb1kyOXVabWxuS1NCN1hHNGdJR052Ym1acFp5QTlJR052Ym1acFp5QjhmQ0I3ZlR0Y2JpQWdZMjl1Wm1sbkxtUmxaR2xqWVhSbFpGOTBhSEpsWVdRZ1BTQm1ZV3h6WlR0Y2JpQWdZMjl1Wm1sbkxteGhibWNnUFNCY0ltcGhkbUZ6WTNKcGNIUmNJanRjYmlBZ1kyOXVabWxuTG1Gd2FWOTJaWEp6YVc5dUlEMGdRVkJKWDFaRlVsTkpUMDQ3WEc0Z0lHTnZibk4wSUdOdmJtNGdQU0J1WlhjZ1EyOXVibVZqZEdsdmJpaGpiMjVtYVdjcE8xeHVJQ0JqYjI1dVpXTjBVbEJES0dOdmJtNHNJR052Ym1acFp5azdYRzRnSUdOdmJtNHVZMjl1Ym1WamRDZ3BPMXh1ZlZ4dUlsMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHM3T3pzN096dEJRVTlCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlFVRTdRVUZEUVR0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVWkJPMEZCUTBFN1FVRkhRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlNVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlMwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkhRVHRCUVVOQk8wRkJRMEU3UVVGSlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGSlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJSVUU3UVVGRFFUdEJRVWRCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGSlFUdEJRVU5CTzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZCUVR0QlFVZEJPMEZCUTBFN1FVRkRRVHRCUVM5SlFUdEJRV2xLUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUluMD1cXFxcbi8vIyBzb3VyY2VVUkw9d2VicGFjay1pbnRlcm5hbDovLy8uL3NyYy9wbHVnaW5JZnJhbWUuanNcXFxcblxcXCIpO1xcblxcbi8qKiovIH0pLFxcblxcbi8qKiovIFxcXCIuL3NyYy9ycGMuanNcXFwiOlxcbi8qISoqKioqKioqKioqKioqKioqKioqISpcXFxcXFxuICAhKioqIC4vc3JjL3JwYy5qcyAqKiohXFxuICBcXFxcKioqKioqKioqKioqKioqKioqKiovXFxuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IEFQSV9WRVJTSU9OLCBSUEMgKi9cXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XFxuXFxuXFxcInVzZSBzdHJpY3RcXFwiO1xcbmV2YWwoXFxcIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcXFxcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXFxcXFxcXCJBUElfVkVSU0lPTlxcXFxcXFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFQSV9WRVJTSU9OOyB9KTtcXFxcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXFxcXFxcXCJSUENcXFxcXFxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBSUEM7IH0pO1xcXFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91dGlscy5qcyAqLyBcXFxcXFxcIi4vc3JjL3V0aWxzLmpzXFxcXFxcXCIpO1xcXFxuLyoqXFxcXG4gKiBDb250YWlucyB0aGUgUlBDIG9iamVjdCB1c2VkIGJvdGggYnkgdGhlIGFwcGxpY2F0aW9uXFxcXG4gKiBzaXRlLCBhbmQgYnkgZWFjaCBwbHVnaW5cXFxcbiAqL1xcXFxuXFxcXG5jb25zdCBBUElfVkVSU0lPTiA9IFxcXFxcXFwiMC4yLjFcXFxcXFxcIjtcXFxcbmNvbnN0IEFycmF5QnVmZmVyVmlldyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3IFVpbnQ4QXJyYXkoKSkpLmNvbnN0cnVjdG9yO1xcXFxuXFxcXG5mdW5jdGlvbiBfYXBwZW5kQnVmZmVyKGJ1ZmZlcjEsIGJ1ZmZlcjIpIHtcXFxcbiAgY29uc3QgdG1wID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyMS5ieXRlTGVuZ3RoICsgYnVmZmVyMi5ieXRlTGVuZ3RoKTtcXFxcbiAgdG1wLnNldChuZXcgVWludDhBcnJheShidWZmZXIxKSwgMCk7XFxcXG4gIHRtcC5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyMiksIGJ1ZmZlcjEuYnl0ZUxlbmd0aCk7XFxcXG4gIHJldHVybiB0bXAuYnVmZmVyO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRLZXlCeVZhbHVlKG9iamVjdCwgdmFsdWUpIHtcXFxcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCkuZmluZChrZXkgPT4gb2JqZWN0W2tleV0gPT09IHZhbHVlKTtcXFxcbn1cXFxcbi8qKlxcXFxuICogUlBDIG9iamVjdCByZXByZXNlbnRzIGEgc2luZ2xlIHNpdGUgaW4gdGhlXFxcXG4gKiBjb21tdW5pY2F0aW9uIHByb3RvY29sIGJldHdlZW4gdGhlIGFwcGxpY2F0aW9uIGFuZCB0aGUgcGx1Z2luXFxcXG4gKlxcXFxuICogQHBhcmFtIHtPYmplY3R9IGNvbm5lY3Rpb24gYSBzcGVjaWFsIG9iamVjdCBhbGxvd2luZyB0byBzZW5kXFxcXG4gKiBhbmQgcmVjZWl2ZSBtZXNzYWdlcyBmcm9tIHRoZSBvcHBvc2l0ZSBzaXRlIChiYXNpY2FsbHkgaXRcXFxcbiAqIHNob3VsZCBvbmx5IHByb3ZpZGUgc2VuZCgpIGFuZCBvbk1lc3NhZ2UoKSBtZXRob2RzKVxcXFxuICovXFxcXG5cXFxcblxcXFxuY2xhc3MgUlBDIGV4dGVuZHMgX3V0aWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXFxcXFxcXCJFdmVudE1hbmFnZXJcXFxcXFxcIl0ge1xcXFxuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBjb25maWcpIHtcXFxcbiAgICBzdXBlcihjb25maWcgJiYgY29uZmlnLmRlYnVnKTtcXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcXFxcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcXFxcbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmUgPSB7fTtcXFxcbiAgICB0aGlzLl9sb2NhbF9hcGkgPSBudWxsOyAvLyBtYWtlIHN1cmUgdGhlcmUgaXMgYW4gZXhlY3V0ZSBmdW5jdGlvblxcXFxuXFxcXG4gICAgY29uc3QgbmFtZSA9IHRoaXMuY29uZmlnLm5hbWU7XFxcXG5cXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uLmV4ZWN1dGUgPSB0aGlzLl9jb25uZWN0aW9uLmV4ZWN1dGUgfHwgZnVuY3Rpb24gKCkge1xcXFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBjb25uZWN0aW9uLmV4ZWN1dGUgbm90IGltcGxlbWVudGVkIChpbiBcXFxcXFxcIiR7bmFtZX1cXFxcXFxcIilgKTtcXFxcbiAgICB9O1xcXFxuXFxcXG4gICAgdGhpcy5fc3RvcmUgPSBuZXcgUmVmZXJlbmNlU3RvcmUoKTtcXFxcbiAgICB0aGlzLl9tZXRob2RfcmVmcyA9IG5ldyBSZWZlcmVuY2VTdG9yZSgpO1xcXFxuXFxcXG4gICAgdGhpcy5fbWV0aG9kX3JlZnMub25SZWFkeSgoKSA9PiB7XFxcXG4gICAgICB0aGlzLl9maXJlKFxcXFxcXFwicmVtb3RlSWRsZVxcXFxcXFwiKTtcXFxcbiAgICB9KTtcXFxcblxcXFxuICAgIHRoaXMuX21ldGhvZF9yZWZzLm9uQnVzeSgoKSA9PiB7XFxcXG4gICAgICB0aGlzLl9maXJlKFxcXFxcXFwicmVtb3RlQnVzeVxcXFxcXFwiKTtcXFxcbiAgICB9KTtcXFxcblxcXFxuICAgIHRoaXMuX3NldHVwTWVzc2FnZUhhbmxkZXJzKCk7XFxcXG4gIH1cXFxcblxcXFxuICBpbml0KCkge1xcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7XFxcXG4gICAgICB0eXBlOiBcXFxcXFxcImluaXRpYWxpemVkXFxcXFxcXCIsXFxcXG4gICAgICBjb25maWc6IHRoaXMuY29uZmlnXFxcXG4gICAgfSk7XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIFNldCBhIGhhbmRsZXIgdG8gYmUgY2FsbGVkIHdoZW4gcmVjZWl2ZWQgYSByZXNwb25jZSBmcm9tIHRoZVxcXFxuICAgKiByZW1vdGUgc2l0ZSByZXBvcnRpbmcgdGhhdCB0aGUgcHJldmlvdXNseSBwcm92aWRlZCBpbnRlcmZhY2VcXFxcbiAgICogaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHNldCBhcyByZW1vdGUgZm9yIHRoYXQgc2l0ZVxcXFxuICAgKlxcXFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXFxcXG4gICAqL1xcXFxuXFxcXG5cXFxcbiAgZ2V0UmVtb3RlQ2FsbFN0YWNrKCkge1xcXFxuICAgIHJldHVybiB0aGlzLl9tZXRob2RfcmVmcy5nZXRTdGFjaygpO1xcXFxuICB9XFxcXG4gIC8qKlxcXFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBzZXQgb2YgcmVtb3RlIGludGVyZmFjZSBtZXRob2RzXFxcXG4gICAqL1xcXFxuXFxcXG5cXFxcbiAgZ2V0UmVtb3RlKCkge1xcXFxuICAgIHJldHVybiB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbXFxcXFxcXCJfcnJlbW90ZVxcXFxcXFwiXTtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogU2V0cyB0aGUgaW50ZXJmYWNlIG9mIHRoaXMgc2l0ZSBtYWtpbmcgaXQgYXZhaWxhYmxlIHRvIHRoZVxcXFxuICAgKiByZW1vdGUgc2l0ZSBieSBzZW5kaW5nIGEgbWVzc2FnZSB3aXRoIGEgc2V0IG9mIG1ldGhvZHMgbmFtZXNcXFxcbiAgICpcXFxcbiAgICogQHBhcmFtIHtPYmplY3R9IF9pbnRlcmZhY2UgdG8gc2V0XFxcXG4gICAqL1xcXFxuXFxcXG5cXFxcbiAgc2V0SW50ZXJmYWNlKF9pbnRlcmZhY2UpIHtcXFxcbiAgICBpZiAodGhpcy5jb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMpIHtcXFxcbiAgICAgIGZvciAobGV0IGZ1bmNfbmFtZSBvZiB0aGlzLmNvbmZpZy5mb3J3YXJkaW5nX2Z1bmN0aW9ucykge1xcXFxuICAgICAgICBjb25zdCBfcmVtb3RlID0gdGhpcy5faW50ZXJmYWNlX3N0b3JlW1xcXFxcXFwiX3JyZW1vdGVcXFxcXFxcIl07XFxcXG5cXFxcbiAgICAgICAgaWYgKF9yZW1vdGVbZnVuY19uYW1lXSkge1xcXFxuICAgICAgICAgIGlmIChfaW50ZXJmYWNlLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcXFxcbiAgICAgICAgICAgIGlmICghX2ludGVyZmFjZVtmdW5jX25hbWVdKSB7XFxcXG4gICAgICAgICAgICAgIF9pbnRlcmZhY2VbZnVuY19uYW1lXSA9ICguLi5hcmdzKSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgX3JlbW90ZVtmdW5jX25hbWVdKC4uLmFyZ3MpO1xcXFxuICAgICAgICAgICAgICB9O1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgIH0gZWxzZSBpZiAoX2ludGVyZmFjZS5jb25zdHJ1Y3Rvci5jb25zdHJ1Y3RvciA9PT0gRnVuY3Rpb24pIHtcXFxcbiAgICAgICAgICAgIGlmICghX2ludGVyZmFjZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbZnVuY19uYW1lXSkge1xcXFxuICAgICAgICAgICAgICBfaW50ZXJmYWNlLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jX25hbWVdID0gKC4uLmFyZ3MpID0+IHtcXFxcbiAgICAgICAgICAgICAgICBfcmVtb3RlW2Z1bmNfbmFtZV0oLi4uYXJncyk7XFxcXG4gICAgICAgICAgICAgIH07XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9XFxcXG4gICAgICB9XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgdGhpcy5fbG9jYWxfYXBpID0gX2ludGVyZmFjZTtcXFxcblxcXFxuICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJpbnRlcmZhY2VBdmFpbGFibGVcXFxcXFxcIik7XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIFNlbmRzIHRoZSBhY3R1YWwgaW50ZXJmYWNlIHRvIHRoZSByZW1vdGUgc2l0ZSB1cG9uIGl0IHdhc1xcXFxuICAgKiB1cGRhdGVkIG9yIGJ5IGEgc3BlY2lhbCByZXF1ZXN0IG9mIHRoZSByZW1vdGUgc2l0ZVxcXFxuICAgKi9cXFxcblxcXFxuXFxcXG4gIHNlbmRJbnRlcmZhY2UoKSB7XFxcXG4gICAgaWYgKCF0aGlzLl9sb2NhbF9hcGkpIHtcXFxcbiAgICAgIHRocm93IG5ldyBFcnJvcihcXFxcXFxcImludGVyZmFjZSBpcyBub3Qgc2V0LlxcXFxcXFwiKTtcXFxcbiAgICB9XFxcXG5cXFxcbiAgICB0aGlzLl9sb2NhbF9hcGkuX3JpZCA9IFxcXFxcXFwiX3Jsb2NhbFxcXFxcXFwiO1xcXFxuXFxcXG4gICAgY29uc3QgYXBpID0gdGhpcy5fZW5jb2RlKHRoaXMuX2xvY2FsX2FwaSwgdHJ1ZSk7XFxcXG5cXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xcXFxuICAgICAgdHlwZTogXFxcXFxcXCJzZXRJbnRlcmZhY2VcXFxcXFxcIixcXFxcbiAgICAgIGFwaTogYXBpXFxcXG4gICAgfSk7XFxcXG4gIH1cXFxcblxcXFxuICBzZXRBdXRoZW50aWNhdG9yKGF1dGhlbnRpY2F0b3IpIHtcXFxcbiAgICB0aGlzLmF1dGhlbnRpY2F0b3IgPSBhdXRoZW50aWNhdG9yO1xcXFxuICB9XFxcXG5cXFxcbiAgc2V0QXV0aG9yaXplcihhdXRob3JpemVyKSB7XFxcXG4gICAgdGhpcy5hdXRob3JpemVyID0gYXV0aG9yaXplcjtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogSGFuZGxlcyBhIG1lc3NhZ2UgZnJvbSB0aGUgcmVtb3RlIHNpdGVcXFxcbiAgICovXFxcXG4gIC8vIHZhciBjYWxsYmFja19yZWcgPSBuZXcgUmVnRXhwKFxcXFxcXFwib251cGRhdGV8cnVuJFxcXFxcXFwiKVxcXFxuXFxcXG5cXFxcbiAgX3NldHVwTWVzc2FnZUhhbmxkZXJzKCkge1xcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXFxcXFxcXCJpbml0XFxcXFxcXCIsIHRoaXMuaW5pdCk7XFxcXG5cXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFxcXFxcXFwiYXV0aGVudGljYXRlXFxcXFxcXCIsIGNyZWRlbnRpYWwgPT4ge1xcXFxuICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuYXV0aGVudGljYXRvcihjcmVkZW50aWFsKSkudGhlbihyZXN1bHQgPT4ge1xcXFxuICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSB7XFxcXG4gICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHtcXFxcbiAgICAgICAgICAgIHR5cGU6IFxcXFxcXFwiYXV0aGVudGljYXRlZFxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgdG9rZW46IHRva2VuXFxcXG4gICAgICAgICAgfSk7XFxcXG4gICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHtcXFxcbiAgICAgICAgICAgIHR5cGU6IFxcXFxcXFwiYXV0aGVudGljYXRlZFxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgZXJyb3I6IHJlc3VsdFxcXFxuICAgICAgICAgIH0pO1xcXFxuICAgICAgICB9XFxcXG4gICAgICB9KS5jYXRjaChlID0+IHtcXFxcbiAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHtcXFxcbiAgICAgICAgICB0eXBlOiBcXFxcXFxcImF1dGhlbnRpY2F0ZWRcXFxcXFxcIixcXFxcbiAgICAgICAgICBlcnJvcjogZVxcXFxuICAgICAgICB9KTtcXFxcbiAgICAgIH0pO1xcXFxuICAgIH0pO1xcXFxuXFxcXG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcXFxcXFxcImV4ZWN1dGVcXFxcXFxcIiwgZGF0YSA9PiB7XFxcXG4gICAgICBQcm9taXNlLnJlc29sdmUodGhpcy5fY29ubmVjdGlvbi5leGVjdXRlKGRhdGEuY29kZSkpLnRoZW4oKCkgPT4ge1xcXFxuICAgICAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xcXFxuICAgICAgICAgIHR5cGU6IFxcXFxcXFwiZXhlY3V0ZWRcXFxcXFxcIlxcXFxuICAgICAgICB9KTtcXFxcbiAgICAgIH0pLmNhdGNoKGUgPT4ge1xcXFxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xcXFxuXFxcXG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7XFxcXG4gICAgICAgICAgdHlwZTogXFxcXFxcXCJleGVjdXRlZFxcXFxcXFwiLFxcXFxuICAgICAgICAgIGVycm9yOiBlXFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgfSk7XFxcXG4gICAgfSk7XFxcXG5cXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFxcXFxcXFwibWV0aG9kXFxcXFxcXCIsIGRhdGEgPT4ge1xcXFxuICAgICAgbGV0IHJlc29sdmUsIHJlamVjdCwgbWV0aG9kLCBhcmdzLCByZXN1bHQ7XFxcXG4gICAgICBsZXQgX2ludGVyZmFjZSA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVtkYXRhLnBpZF07XFxcXG5cXFxcbiAgICAgIGNvbnN0IF9tZXRob2RfY29udGV4dCA9IF9pbnRlcmZhY2UuX190aGlzX18gfHwgX2ludGVyZmFjZTtcXFxcblxcXFxuICAgICAgaWYgKCFfaW50ZXJmYWNlKSB7XFxcXG4gICAgICAgIGlmIChkYXRhLnByb21pc2UpIHtcXFxcbiAgICAgICAgICBbcmVzb2x2ZSwgcmVqZWN0XSA9IHRoaXMuX3Vud3JhcChkYXRhLnByb21pc2UsIGZhbHNlKTtcXFxcbiAgICAgICAgICByZWplY3QoYHBsdWdpbiBhcGkgZnVuY3Rpb24gaXMgbm90IGF2YWlhbGJlIGluIFxcXFxcXFwiJHtkYXRhLnBpZH1cXFxcXFxcIiwgdGhlIHBsdWdpbiBtYXliZSB0ZXJtaW5hdGVkLmApO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYHBsdWdpbiBhcGkgZnVuY3Rpb24gaXMgbm90IGF2YWlhbGJlIGluICR7ZGF0YS5waWR9LCB0aGUgcGx1Z2luIG1heWJlIHRlcm1pbmF0ZWQuYCk7XFxcXG4gICAgICAgIH1cXFxcblxcXFxuICAgICAgICByZXR1cm47XFxcXG4gICAgICB9XFxcXG5cXFxcbiAgICAgIG1ldGhvZCA9IF9pbnRlcmZhY2VbZGF0YS5uYW1lXTtcXFxcbiAgICAgIGFyZ3MgPSB0aGlzLl91bndyYXAoZGF0YS5hcmdzLCB0cnVlKTtcXFxcblxcXFxuICAgICAgaWYgKGRhdGEucHJvbWlzZSkge1xcXFxuICAgICAgICBbcmVzb2x2ZSwgcmVqZWN0XSA9IHRoaXMuX3Vud3JhcChkYXRhLnByb21pc2UsIGZhbHNlKTtcXFxcblxcXFxuICAgICAgICB0cnkge1xcXFxuICAgICAgICAgIHJlc3VsdCA9IG1ldGhvZC5hcHBseShfbWV0aG9kX2NvbnRleHQsIGFyZ3MpO1xcXFxuXFxcXG4gICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHwgbWV0aG9kLmNvbnN0cnVjdG9yICYmIG1ldGhvZC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcXFxcXFxcIkFzeW5jRnVuY3Rpb25cXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgcmVzdWx0LnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcXFxcbiAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xcXFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5jb25maWcubmFtZSwgZSwgbWV0aG9kKTtcXFxcbiAgICAgICAgICByZWplY3QoZSk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgbWV0aG9kLmFwcGx5KF9tZXRob2RfY29udGV4dCwgYXJncyk7XFxcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uZmlnLm5hbWUsIGUsIG1ldGhvZCwgYXJncyk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH1cXFxcbiAgICB9KTtcXFxcblxcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXFxcXFxcXCJjYWxsYmFja1xcXFxcXFwiLCBkYXRhID0+IHtcXFxcbiAgICAgIGxldCByZXNvbHZlLCByZWplY3QsIG1ldGhvZCwgYXJncywgcmVzdWx0O1xcXFxuXFxcXG4gICAgICBpZiAoZGF0YS5wcm9taXNlKSB7XFxcXG4gICAgICAgIFtyZXNvbHZlLCByZWplY3RdID0gdGhpcy5fdW53cmFwKGRhdGEucHJvbWlzZSwgZmFsc2UpO1xcXFxuXFxcXG4gICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgbWV0aG9kID0gdGhpcy5fc3RvcmUuZmV0Y2goZGF0YS5fcmluZGV4KTtcXFxcbiAgICAgICAgICBhcmdzID0gdGhpcy5fdW53cmFwKGRhdGEuYXJncywgdHJ1ZSk7XFxcXG5cXFxcbiAgICAgICAgICBpZiAoIW1ldGhvZCkge1xcXFxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxcXFxcXFwiQ2FsbGJhY2sgZnVuY3Rpb24gY2FuIG9ubHkgY2FsbGVkIG9uY2UsIGlmIHlvdSB3YW50IHRvIGNhbGwgYSBmdW5jdGlvbiBmb3IgbXVsdGlwbGUgdGltZXMsIHBsZWFzZSBtYWtlIGl0IGFzIGEgcGx1Z2luIGFwaSBmdW5jdGlvbi4gU2VlIGh0dHBzOi8vaW1qb3kuaW8vZG9jcyBmb3IgbW9yZSBkZXRhaWxzLlxcXFxcXFwiKTtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICByZXN1bHQgPSBtZXRob2QuYXBwbHkobnVsbCwgYXJncyk7XFxcXG5cXFxcbiAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSB8fCBtZXRob2QuY29uc3RydWN0b3IgJiYgbWV0aG9kLmNvbnN0cnVjdG9yLm5hbWUgPT09IFxcXFxcXFwiQXN5bmNGdW5jdGlvblxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICByZXN1bHQudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xcXFxuICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLmNvbmZpZy5uYW1lLCBlLCBtZXRob2QpO1xcXFxuICAgICAgICAgIHJlamVjdChlKTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgdHJ5IHtcXFxcbiAgICAgICAgICBtZXRob2QgPSB0aGlzLl9zdG9yZS5mZXRjaChkYXRhLl9yaW5kZXgpO1xcXFxuICAgICAgICAgIGFyZ3MgPSB0aGlzLl91bndyYXAoZGF0YS5hcmdzLCB0cnVlKTtcXFxcblxcXFxuICAgICAgICAgIGlmICghbWV0aG9kKSB7XFxcXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXFxcXFxcXCJQbGVhc2Ugbm90aWNlIHRoYXQgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIG9ubHkgY2FsbGVkIG9uY2UsIGlmIHlvdSB3YW50IHRvIGNhbGwgYSBmdW5jdGlvbiBmb3IgbXVsdGlwbGUgdGltZXMsIHBsZWFzZSBtYWtlIGl0IGFzIGEgcGx1Z2luIGFwaSBmdW5jdGlvbi4gU2VlIGh0dHBzOi8vaW1qb3kuaW8vZG9jcyBmb3IgbW9yZSBkZXRhaWxzLlxcXFxcXFwiKTtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICBtZXRob2QuYXBwbHkobnVsbCwgYXJncyk7XFxcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uZmlnLm5hbWUsIGUsIG1ldGhvZCwgYXJncyk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH1cXFxcbiAgICB9KTtcXFxcblxcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXFxcXFxcXCJzZXRJbnRlcmZhY2VcXFxcXFxcIiwgZGF0YSA9PiB7XFxcXG4gICAgICB0aGlzLl9zZXRSZW1vdGVJbnRlcmZhY2UoZGF0YS5hcGkpO1xcXFxuICAgIH0pO1xcXFxuXFxcXG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcXFxcXFxcImdldEludGVyZmFjZVxcXFxcXFwiLCAoKSA9PiB7XFxcXG4gICAgICB0aGlzLl9maXJlKFxcXFxcXFwiZ2V0SW50ZXJmYWNlXFxcXFxcXCIpO1xcXFxuXFxcXG4gICAgICBpZiAodGhpcy5fbG9jYWxfYXBpKSB0aGlzLnNlbmRJbnRlcmZhY2UoKTtlbHNlIHRoaXMub25jZShcXFxcXFxcImludGVyZmFjZUF2YWlsYWJsZVxcXFxcXFwiLCB0aGlzLnNlbmRJbnRlcmZhY2UpO1xcXFxuICAgIH0pO1xcXFxuXFxcXG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcXFxcXFxcImludGVyZmFjZVNldEFzUmVtb3RlXFxcXFxcXCIsICgpID0+IHtcXFxcbiAgICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJpbnRlcmZhY2VTZXRBc1JlbW90ZVxcXFxcXFwiKTtcXFxcbiAgICB9KTtcXFxcblxcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXFxcXFxcXCJkaXNjb25uZWN0XFxcXFxcXCIsICgpID0+IHtcXFxcbiAgICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJiZWZvcmVEaXNjb25uZWN0XFxcXFxcXCIpO1xcXFxuXFxcXG4gICAgICB0aGlzLl9jb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcXFxcblxcXFxuICAgICAgdGhpcy5fZmlyZShcXFxcXFxcImRpc2Nvbm5lY3RlZFxcXFxcXFwiKTtcXFxcbiAgICB9KTtcXFxcbiAgfVxcXFxuXFxcXG4gIGFzeW5jIGF1dGhlbnRpY2F0ZShjcmVkZW50aWFsKSB7XFxcXG4gICAgdGhpcy5vbmNlKFxcXFxcXFwiYXV0aGVudGljYXRlZFxcXFxcXFwiLCByZXN1bHQgPT4ge1xcXFxuICAgICAgaWYgKCFyZXN1bHQuZXJyb3IpIHtcXFxcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xcXFxuICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgcmVqZWN0KHJlc3VsdC5lcnJvcik7XFxcXG4gICAgICB9XFxcXG4gICAgfSk7XFxcXG5cXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xcXFxuICAgICAgdHlwZTogXFxcXFxcXCJhdXRoZW50aWNhdGVcXFxcXFxcIixcXFxcbiAgICAgIGNyZWRlbnRpYWw6IGNyZWRlbnRpYWxcXFxcbiAgICB9KTtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogU2VuZHMgYSByZXF1ZXN0cyB0byB0aGUgcmVtb3RlIHNpdGUgYXNraW5nIGl0IHRvIHByb3ZpZGUgaXRzXFxcXG4gICAqIGN1cnJlbnQgaW50ZXJmYWNlXFxcXG4gICAqL1xcXFxuXFxcXG5cXFxcbiAgcmVxdWVzdFJlbW90ZSgpIHtcXFxcbiAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xcXFxuICAgICAgdHlwZTogXFxcXFxcXCJnZXRJbnRlcmZhY2VcXFxcXFxcIlxcXFxuICAgIH0pO1xcXFxuICB9XFxcXG5cXFxcbiAgX25kYXJyYXkodHlwZWRBcnJheSwgc2hhcGUsIGR0eXBlKSB7XFxcXG4gICAgdmFyIF9kdHlwZSA9IF91dGlsc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1xcXFxcXFwidHlwZWRBcnJheVRvRHR5cGVcXFxcXFxcIl1bdHlwZWRBcnJheS5jb25zdHJ1Y3Rvci5uYW1lXTtcXFxcblxcXFxuICAgIGlmIChkdHlwZSAmJiBkdHlwZSAhPT0gX2R0eXBlKSB7XFxcXG4gICAgICB0aHJvdyBcXFxcXFxcImR0eXBlIGRvZXNuJ3QgbWF0Y2ggdGhlIHR5cGUgb2YgdGhlIGFycmF5OiBcXFxcXFxcIiArIF9kdHlwZSArIFxcXFxcXFwiICE9IFxcXFxcXFwiICsgZHR5cGU7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgc2hhcGUgPSBzaGFwZSB8fCBbdHlwZWRBcnJheS5sZW5ndGhdO1xcXFxuICAgIHJldHVybiB7XFxcXG4gICAgICBfcnR5cGU6IFxcXFxcXFwibmRhcnJheVxcXFxcXFwiLFxcXFxuICAgICAgX3J2YWx1ZTogdHlwZWRBcnJheSxcXFxcbiAgICAgIF9yc2hhcGU6IHNoYXBlLFxcXFxuICAgICAgX3JkdHlwZTogX2R0eXBlXFxcXG4gICAgfTtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogU2V0cyB0aGUgbmV3IHJlbW90ZSBpbnRlcmZhY2UgcHJvdmlkZWQgYnkgdGhlIG90aGVyIHNpdGVcXFxcbiAgICpcXFxcbiAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMgbGlzdCBvZiBmdW5jdGlvbiBuYW1lc1xcXFxuICAgKi9cXFxcblxcXFxuXFxcXG4gIF9zZXRSZW1vdGVJbnRlcmZhY2UoYXBpKSB7XFxcXG4gICAgdGhpcy5faW50ZXJmYWNlX3N0b3JlW1xcXFxcXFwiX3JyZW1vdGVcXFxcXFxcIl0gPSB0aGlzLl9kZWNvZGUoYXBpKTtcXFxcblxcXFxuICAgIHRoaXMuX2ZpcmUoXFxcXFxcXCJyZW1vdGVSZWFkeVxcXFxcXFwiKTtcXFxcblxcXFxuICAgIHRoaXMuX3JlcG9ydFJlbW90ZVNldCgpO1xcXFxuICB9XFxcXG4gIC8qKlxcXFxuICAgKiBHZW5lcmF0ZXMgdGhlIHdyYXBwZWQgZnVuY3Rpb24gY29ycmVzcG9uZGluZyB0byBhIHNpbmdsZSByZW1vdGVcXFxcbiAgICogbWV0aG9kLiBXaGVuIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb24gaXMgY2FsbGVkLCBpdCB3aWxsIHNlbmQgdGhlXFxcXG4gICAqIGNvcnJlc3BvbmRpbmcgbWVzc2FnZSB0byB0aGUgcmVtb3RlIHNpdGUgYXNraW5nIGl0IHRvIGV4ZWN1dGVcXFxcbiAgICogdGhlIHBhcnRpY3VsYXIgbWV0aG9kIG9mIGl0cyBpbnRlcmZhY2VcXFxcbiAgICpcXFxcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgdGhlIHJlbW90ZSBtZXRob2RcXFxcbiAgICpcXFxcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSB3cmFwcGVkIHJlbW90ZSBtZXRob2RcXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBfZ2VuUmVtb3RlTWV0aG9kKG5hbWUsIGludGVyZmFjZV9pZCkge1xcXFxuICAgIHZhciBtZSA9IHRoaXM7XFxcXG5cXFxcbiAgICB2YXIgcmVtb3RlTWV0aG9kID0gZnVuY3Rpb24gKCkge1xcXFxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcXFxcbiAgICAgICAgbGV0IGlkID0gbnVsbDtcXFxcblxcXFxuICAgICAgICB0cnkge1xcXFxuICAgICAgICAgIGlkID0gbWUuX21ldGhvZF9yZWZzLnB1dChpbnRlcmZhY2VfaWQgPyBpbnRlcmZhY2VfaWQgKyBcXFxcXFxcIi9cXFxcXFxcIiArIG5hbWUgOiBuYW1lKTtcXFxcblxcXFxuICAgICAgICAgIHZhciB3cmFwcGVkX3Jlc29sdmUgPSBmdW5jdGlvbiAoKSB7XFxcXG4gICAgICAgICAgICBpZiAoaWQgIT09IG51bGwpIG1lLl9tZXRob2RfcmVmcy5mZXRjaChpZCk7XFxcXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcXFxuICAgICAgICAgIH07XFxcXG5cXFxcbiAgICAgICAgICB2YXIgd3JhcHBlZF9yZWplY3QgPSBmdW5jdGlvbiAoKSB7XFxcXG4gICAgICAgICAgICBpZiAoaWQgIT09IG51bGwpIG1lLl9tZXRob2RfcmVmcy5mZXRjaChpZCk7XFxcXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XFxcXG4gICAgICAgICAgfTtcXFxcblxcXFxuICAgICAgICAgIHdyYXBwZWRfcmVzb2x2ZS5fX2phaWxlZF9wYWlyc19fID0gd3JhcHBlZF9yZWplY3Q7XFxcXG4gICAgICAgICAgd3JhcHBlZF9yZWplY3QuX19qYWlsZWRfcGFpcnNfXyA9IHdyYXBwZWRfcmVzb2x2ZTtcXFxcbiAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XFxcXG5cXFxcbiAgICAgICAgICBpZiAobmFtZSA9PT0gXFxcXFxcXCJyZWdpc3RlclxcXFxcXFwiIHx8IG5hbWUgPT09IFxcXFxcXFwiZXhwb3J0XFxcXFxcXCIgfHwgbmFtZSA9PT0gXFxcXFxcXCJvblxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICBhcmdzID0gbWUuX3dyYXAoYXJncywgdHJ1ZSk7XFxcXG4gICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgIGFyZ3MgPSBtZS5fd3JhcChhcmdzKTtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcXFxcbiAgICAgICAgICBpZiAodHJhbnNmZXJhYmxlcykgZGVsZXRlIGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcXFxcblxcXFxuICAgICAgICAgIG1lLl9jb25uZWN0aW9uLmVtaXQoe1xcXFxuICAgICAgICAgICAgdHlwZTogXFxcXFxcXCJtZXRob2RcXFxcXFxcIixcXFxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXFxcXG4gICAgICAgICAgICBwaWQ6IGludGVyZmFjZV9pZCxcXFxcbiAgICAgICAgICAgIGFyZ3M6IGFyZ3MsXFxcXG4gICAgICAgICAgICBwcm9taXNlOiBtZS5fd3JhcChbd3JhcHBlZF9yZXNvbHZlLCB3cmFwcGVkX3JlamVjdF0pXFxcXG4gICAgICAgICAgfSwgdHJhbnNmZXJhYmxlcyk7XFxcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICBpZiAoaWQpIG1lLl9tZXRob2RfcmVmcy5mZXRjaChpZCk7XFxcXG4gICAgICAgICAgcmVqZWN0KGBGYWlsZWQgdG8gZXhlY3R1ZSByZW1vdGUgbWV0aG9kIChpbnRlcmZhY2U6ICR7aW50ZXJmYWNlX2lkIHx8IG1lLmlkfSwgbWV0aG9kOiAke25hbWV9KSwgZXJyb3I6ICR7ZX1gKTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgfSk7XFxcXG4gICAgfTtcXFxcblxcXFxuICAgIHJlbW90ZU1ldGhvZC5fX3JlbW90ZV9tZXRob2QgPSB0cnVlO1xcXFxuICAgIHJldHVybiByZW1vdGVNZXRob2Q7XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIFNlbmRzIGEgcmVzcG9uY2UgcmVwb3J0aW5nIHRoYXQgaW50ZXJmYWNlIGp1c3QgcHJvdmlkZWQgYnkgdGhlXFxcXG4gICAqIHJlbW90ZSBzaXRlIHdhcyBzdWNjZXNzZnVsbHkgc2V0IGJ5IHRoaXMgc2l0ZSBhcyByZW1vdGVcXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBfcmVwb3J0UmVtb3RlU2V0KCkge1xcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7XFxcXG4gICAgICB0eXBlOiBcXFxcXFxcImludGVyZmFjZVNldEFzUmVtb3RlXFxcXFxcXCJcXFxcbiAgICB9KTtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogUHJlcGFyZXMgdGhlIHByb3ZpZGVkIHNldCBvZiByZW1vdGUgbWV0aG9kIGFyZ3VtZW50cyBmb3JcXFxcbiAgICogc2VuZGluZyB0byB0aGUgcmVtb3RlIHNpdGUsIHJlcGxhY2VzIGFsbCB0aGUgY2FsbGJhY2tzIHdpdGhcXFxcbiAgICogaWRlbnRpZmllcnNcXFxcbiAgICpcXFxcbiAgICogQHBhcmFtIHtBcnJheX0gYXJncyB0byB3cmFwXFxcXG4gICAqXFxcXG4gICAqIEByZXR1cm5zIHtBcnJheX0gd3JhcHBlZCBhcmd1bWVudHNcXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBfZW5jb2RlSW50ZXJmYWNlKGFPYmplY3QpIHtcXFxcbiAgICBsZXQgdiwgaywga2V5cztcXFxcbiAgICBjb25zdCBlbmNvZGVkX2ludGVyZmFjZSA9IHt9O1xcXFxuICAgIGFPYmplY3RbXFxcXFxcXCJfcmlkXFxcXFxcXCJdID0gYU9iamVjdFtcXFxcXFxcIl9yaWRcXFxcXFxcIl0gfHwgT2JqZWN0KF91dGlsc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1xcXFxcXFwicmFuZElkXFxcXFxcXCJdKSgpOyAvLyBhbiBvYmplY3QvYXJyYXlcXFxcblxcXFxuICAgIGlmIChhT2JqZWN0LmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgQXJyYXkuaXNBcnJheShhT2JqZWN0KSkge1xcXFxuICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGFPYmplY3QpO1xcXFxuICAgIH0gLy8gYSBjbGFzc1xcXFxuICAgIGVsc2UgaWYgKGFPYmplY3QuY29uc3RydWN0b3IgPT09IEZ1bmN0aW9uKSB7XFxcXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcXFxcXFxcIlBsZWFzZSBpbnN0YW50aWF0ZSB0aGUgY2xhc3MgYmVmb3JlIGV4cG9ydHRpbmcgaXQuXFxcXFxcXCIpO1xcXFxuICAgICAgfSAvLyBpbnN0YW5jZSBvZiBhIGNsYXNzXFxcXG4gICAgICBlbHNlIGlmIChhT2JqZWN0LmNvbnN0cnVjdG9yLmNvbnN0cnVjdG9yID09PSBGdW5jdGlvbikge1xcXFxuICAgICAgICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YoYU9iamVjdCkpLmNvbmNhdChPYmplY3Qua2V5cyhhT2JqZWN0KSk7XFxcXG4gICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgdGhyb3cgRXJyb3IoXFxcXFxcXCJVbnN1cHBvcnRlZCBpbnRlcmZhY2UgdHlwZVxcXFxcXFwiKTtcXFxcbiAgICAgICAgfVxcXFxuXFxcXG4gICAgY29uc3QgYk9iamVjdCA9IEFycmF5LmlzQXJyYXkoYU9iamVjdCkgPyBbXSA6IHt9O1xcXFxuXFxcXG4gICAgZm9yIChrIG9mIGtleXMpIHtcXFxcbiAgICAgIGlmIChbXFxcXFxcXCJoYXNPd25Qcm9wZXJ0eVxcXFxcXFwiLCBcXFxcXFxcImNvbnN0cnVjdG9yXFxcXFxcXCJdLmluY2x1ZGVzKGspKSBjb250aW51ZTtcXFxcblxcXFxuICAgICAgaWYgKGsuc3RhcnRzV2l0aChcXFxcXFxcIl9cXFxcXFxcIikpIHtcXFxcbiAgICAgICAgY29udGludWU7XFxcXG4gICAgICB9XFxcXG5cXFxcbiAgICAgIHYgPSBhT2JqZWN0W2tdO1xcXFxuXFxcXG4gICAgICBpZiAodHlwZW9mIHYgPT09IFxcXFxcXFwiZnVuY3Rpb25cXFxcXFxcIikge1xcXFxuICAgICAgICBiT2JqZWN0W2tdID0ge1xcXFxuICAgICAgICAgIF9ydHlwZTogXFxcXFxcXCJpbnRlcmZhY2VcXFxcXFxcIixcXFxcbiAgICAgICAgICBfcmlkOiBhT2JqZWN0W1xcXFxcXFwiX3JpZFxcXFxcXFwiXSxcXFxcbiAgICAgICAgICBfcnZhbHVlOiBrXFxcXG4gICAgICAgIH07XFxcXG4gICAgICAgIGVuY29kZWRfaW50ZXJmYWNlW2tdID0gdjtcXFxcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0KHYpICE9PSB2KSB7XFxcXG4gICAgICAgIGJPYmplY3Rba10gPSB7XFxcXG4gICAgICAgICAgX3J0eXBlOiBcXFxcXFxcImFyZ3VtZW50XFxcXFxcXCIsXFxcXG4gICAgICAgICAgX3J2YWx1ZTogdlxcXFxuICAgICAgICB9O1xcXFxuICAgICAgICBlbmNvZGVkX2ludGVyZmFjZVtrXSA9IHY7XFxcXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcXFxcXFxcIm9iamVjdFxcXFxcXFwiKSB7XFxcXG4gICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9lbmNvZGVJbnRlcmZhY2Uodik7XFxcXG4gICAgICB9XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgdGhpcy5faW50ZXJmYWNlX3N0b3JlW2FPYmplY3RbXFxcXFxcXCJfcmlkXFxcXFxcXCJdXSA9IGVuY29kZWRfaW50ZXJmYWNlOyAvLyByZW1vdmUgaW50ZXJmYWNlIHdoZW4gY2xvc2VkXFxcXG5cXFxcbiAgICBpZiAoYU9iamVjdC5vbiAmJiB0eXBlb2YgYU9iamVjdC5vbiA9PT0gXFxcXFxcXCJmdW5jdGlvblxcXFxcXFwiKSB7XFxcXG4gICAgICBhT2JqZWN0Lm9uKFxcXFxcXFwiY2xvc2VcXFxcXFxcIiwgKCkgPT4ge1xcXFxuICAgICAgICBkZWxldGUgdGhpcy5faW50ZXJmYWNlX3N0b3JlW2FPYmplY3RbXFxcXFxcXCJfcmlkXFxcXFxcXCJdXTtcXFxcbiAgICAgIH0pO1xcXFxuICAgIH1cXFxcblxcXFxuICAgIHJldHVybiBiT2JqZWN0O1xcXFxuICB9XFxcXG5cXFxcbiAgX2VuY29kZShhT2JqZWN0LCBhc19pbnRlcmZhY2UpIHtcXFxcbiAgICBjb25zdCB0cmFuc2ZlcmFibGVzID0gW107XFxcXG5cXFxcbiAgICBpZiAoIWFPYmplY3QpIHtcXFxcbiAgICAgIHJldHVybiBhT2JqZWN0O1xcXFxuICAgIH1cXFxcblxcXFxuICAgIGNvbnN0IF90cmFuc2ZlciA9IGFPYmplY3QuX3RyYW5zZmVyO1xcXFxuICAgIGxldCBiT2JqZWN0LCB2LCBrO1xcXFxuICAgIGNvbnN0IGlzYXJyYXkgPSBBcnJheS5pc0FycmF5KGFPYmplY3QpOyAvL3NraXAgaWYgYWxyZWFkeSBlbmNvZGVkXFxcXG5cXFxcbiAgICBpZiAodHlwZW9mIGFPYmplY3QgPT09IFxcXFxcXFwib2JqZWN0XFxcXFxcXCIgJiYgYU9iamVjdC5fcnR5cGUgJiYgYU9iamVjdC5fcnZhbHVlKSB7XFxcXG4gICAgICByZXR1cm4gYU9iamVjdDtcXFxcbiAgICB9IC8vZW5jb2RlIGludGVyZmFjZXNcXFxcblxcXFxuXFxcXG4gICAgaWYgKHR5cGVvZiBhT2JqZWN0ID09PSBcXFxcXFxcIm9iamVjdFxcXFxcXFwiICYmICFBcnJheS5pc0FycmF5KGFPYmplY3QpICYmIChhT2JqZWN0Ll9yaW50ZiB8fCBhc19pbnRlcmZhY2UpKSB7XFxcXG4gICAgICByZXR1cm4gdGhpcy5fZW5jb2RlSW50ZXJmYWNlKGFPYmplY3QpO1xcXFxuICAgIH1cXFxcblxcXFxuICAgIGlmIChhc19pbnRlcmZhY2UpIHtcXFxcbiAgICAgIGFPYmplY3RbXFxcXFxcXCJfcmlkXFxcXFxcXCJdID0gYU9iamVjdFtcXFxcXFxcIl9yaWRcXFxcXFxcIl0gfHwgT2JqZWN0KF91dGlsc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1xcXFxcXFwicmFuZElkXFxcXFxcXCJdKSgpO1xcXFxuICAgICAgdGhpcy5faW50ZXJmYWNlX3N0b3JlW2FPYmplY3RbXFxcXFxcXCJfcmlkXFxcXFxcXCJdXSA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVthT2JqZWN0W1xcXFxcXFwiX3JpZFxcXFxcXFwiXV0gfHwgKGlzYXJyYXkgPyBbXSA6IHt9KTtcXFxcbiAgICB9XFxcXG5cXFxcbiAgICBiT2JqZWN0ID0gaXNhcnJheSA/IFtdIDoge307XFxcXG5cXFxcbiAgICBmb3IgKGsgaW4gYU9iamVjdCkge1xcXFxuICAgICAgaWYgKFtcXFxcXFxcImhhc093blByb3BlcnR5XFxcXFxcXCIsIFxcXFxcXFwiY29uc3RydWN0b3JcXFxcXFxcIl0uaW5jbHVkZXMoaykpIGNvbnRpbnVlO1xcXFxuXFxcXG4gICAgICBpZiAoaXNhcnJheSB8fCBhT2JqZWN0Lmhhc093blByb3BlcnR5KGspKSB7XFxcXG4gICAgICAgIHYgPSBhT2JqZWN0W2tdO1xcXFxuXFxcXG4gICAgICAgIGlmICh2ICYmIHR5cGVvZiB0aGlzLl9sb2NhbF9hcGkuX3JwY19lbmNvZGUgPT09IFxcXFxcXFwiZnVuY3Rpb25cXFxcXFxcIikge1xcXFxuICAgICAgICAgIGNvbnN0IGVuY29kZWRfb2JqID0gdGhpcy5fbG9jYWxfYXBpLl9ycGNfZW5jb2RlKHYpO1xcXFxuXFxcXG4gICAgICAgICAgaWYgKGVuY29kZWRfb2JqICYmIGVuY29kZWRfb2JqLl9jdHlwZSkge1xcXFxuICAgICAgICAgICAgYk9iamVjdFtrXSA9IHtcXFxcbiAgICAgICAgICAgICAgX3J0eXBlOiBcXFxcXFxcImN1c3RvbVxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgICBfcnZhbHVlOiBlbmNvZGVkX29iaixcXFxcbiAgICAgICAgICAgICAgX3JpZDogYU9iamVjdFtcXFxcXFxcIl9yaWRcXFxcXFxcIl1cXFxcbiAgICAgICAgICAgIH07XFxcXG4gICAgICAgICAgICBjb250aW51ZTtcXFxcbiAgICAgICAgICB9IC8vIGlmIHRoZSByZXR1cm5lZCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBfcnR5cGUsIGFzc3VtaW5nIHRoZSBvYmplY3QgaGFzIGJlZW4gdHJhbnNmb3JtZWRcXFxcbiAgICAgICAgICBlbHNlIGlmIChlbmNvZGVkX29iaiAhPT0gdW5kZWZpbmVkKSB7XFxcXG4gICAgICAgICAgICAgIHYgPSBlbmNvZGVkX29iajtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXFxcXFxcXCJmdW5jdGlvblxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgaWYgKGFzX2ludGVyZmFjZSkge1xcXFxuICAgICAgICAgICAgY29uc3QgZW5jb2RlZF9pbnRlcmZhY2UgPSB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbYU9iamVjdFtcXFxcXFxcIl9yaWRcXFxcXFxcIl1dO1xcXFxuICAgICAgICAgICAgYk9iamVjdFtrXSA9IHtcXFxcbiAgICAgICAgICAgICAgX3J0eXBlOiBcXFxcXFxcImludGVyZmFjZVxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgICBfcmlkOiBhT2JqZWN0W1xcXFxcXFwiX3JpZFxcXFxcXFwiXSxcXFxcbiAgICAgICAgICAgICAgX3J2YWx1ZToga1xcXFxuICAgICAgICAgICAgfTtcXFxcbiAgICAgICAgICAgIGVuY29kZWRfaW50ZXJmYWNlW2tdID0gdjtcXFxcbiAgICAgICAgICAgIGNvbnRpbnVlO1xcXFxuICAgICAgICAgIH1cXFxcblxcXFxuICAgICAgICAgIGxldCBpbnRlcmZhY2VGdW5jTmFtZSA9IG51bGw7XFxcXG5cXFxcbiAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2xvY2FsX2FwaSkge1xcXFxuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xcXFxuICAgICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKFxcXFxcXFwiX1xcXFxcXFwiKSkgY29udGludWU7XFxcXG5cXFxcbiAgICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaVtuYW1lXSA9PT0gdikge1xcXFxuICAgICAgICAgICAgICAgIGludGVyZmFjZUZ1bmNOYW1lID0gbmFtZTtcXFxcbiAgICAgICAgICAgICAgICBicmVhaztcXFxcbiAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgIH0gLy8gc2VhcmNoIGZvciBwcm90b3R5cGVzXFxcXG5cXFxcblxcXFxuICAgICAgICAgIHZhciBmdW5jdGlvbnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcy5fbG9jYWxfYXBpKSk7XFxcXG5cXFxcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xcXFxuICAgICAgICAgICAgdmFyIG5hbWVfID0gZnVuY3Rpb25zW2ldO1xcXFxuICAgICAgICAgICAgaWYgKG5hbWVfLnN0YXJ0c1dpdGgoXFxcXFxcXCJfXFxcXFxcXCIpKSBjb250aW51ZTtcXFxcblxcXFxuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaVtuYW1lX10gPT09IHYpIHtcXFxcbiAgICAgICAgICAgICAgaW50ZXJmYWNlRnVuY05hbWUgPSBuYW1lXztcXFxcbiAgICAgICAgICAgICAgYnJlYWs7XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgICAgaWYgKCFpbnRlcmZhY2VGdW5jTmFtZSkge1xcXFxuICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5fc3RvcmUucHV0KHYpO1xcXFxuXFxcXG4gICAgICAgICAgICBiT2JqZWN0W2tdID0ge1xcXFxuICAgICAgICAgICAgICBfcnR5cGU6IFxcXFxcXFwiY2FsbGJhY2tcXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgX3J2YWx1ZTogdi5jb25zdHJ1Y3RvciAmJiB2LmNvbnN0cnVjdG9yLm5hbWUgfHwgaWQsXFxcXG4gICAgICAgICAgICAgIF9yaW5kZXg6IGlkXFxcXG4gICAgICAgICAgICB9O1xcXFxuICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICBiT2JqZWN0W2tdID0ge1xcXFxuICAgICAgICAgICAgICBfcnR5cGU6IFxcXFxcXFwiaW50ZXJmYWNlXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICAgIF9ydmFsdWU6IGludGVyZmFjZUZ1bmNOYW1lLFxcXFxuICAgICAgICAgICAgICBfcmlkOiBcXFxcXFxcIl9ybG9jYWxcXFxcXFxcIlxcXFxuICAgICAgICAgICAgfTtcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0gZWxzZSBpZiAoXFxcXG4gICAgICAgIC8qZ2xvYmFsIHRmKi9cXFxcbiAgICAgICAgdHlwZW9mIHRmICE9PSBcXFxcXFxcInVuZGVmaW5lZFxcXFxcXFwiICYmIHRmLlRlbnNvciAmJiB2IGluc3RhbmNlb2YgdGYuVGVuc29yKSB7XFxcXG4gICAgICAgICAgY29uc3Qgdl9idWZmZXIgPSB2LmRhdGFTeW5jKCk7XFxcXG5cXFxcbiAgICAgICAgICBpZiAodi5fdHJhbnNmZXIgfHwgX3RyYW5zZmVyKSB7XFxcXG4gICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2godl9idWZmZXIuYnVmZmVyKTtcXFxcbiAgICAgICAgICAgIGRlbGV0ZSB2Ll90cmFuc2ZlcjtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICBiT2JqZWN0W2tdID0ge1xcXFxuICAgICAgICAgICAgX3J0eXBlOiBcXFxcXFxcIm5kYXJyYXlcXFxcXFxcIixcXFxcbiAgICAgICAgICAgIF9ydmFsdWU6IHZfYnVmZmVyLFxcXFxuICAgICAgICAgICAgX3JzaGFwZTogdi5zaGFwZSxcXFxcbiAgICAgICAgICAgIF9yZHR5cGU6IHYuZHR5cGVcXFxcbiAgICAgICAgICB9O1xcXFxuICAgICAgICB9IGVsc2UgaWYgKFxcXFxuICAgICAgICAvKmdsb2JhbCBuaiovXFxcXG4gICAgICAgIHR5cGVvZiBuaiAhPT0gXFxcXFxcXCJ1bmRlZmluZWRcXFxcXFxcIiAmJiBuai5OZEFycmF5ICYmIHYgaW5zdGFuY2VvZiBuai5OZEFycmF5KSB7XFxcXG4gICAgICAgICAgdmFyIGR0eXBlID0gX3V0aWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXFxcXFxcXCJ0eXBlZEFycmF5VG9EdHlwZVxcXFxcXFwiXVt2LnNlbGVjdGlvbi5kYXRhLmNvbnN0cnVjdG9yLm5hbWVdO1xcXFxuXFxcXG4gICAgICAgICAgaWYgKHYuX3RyYW5zZmVyIHx8IF90cmFuc2Zlcikge1xcXFxuICAgICAgICAgICAgdHJhbnNmZXJhYmxlcy5wdXNoKHYuc2VsZWN0aW9uLmRhdGEuYnVmZmVyKTtcXFxcbiAgICAgICAgICAgIGRlbGV0ZSB2Ll90cmFuc2ZlcjtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICBiT2JqZWN0W2tdID0ge1xcXFxuICAgICAgICAgICAgX3J0eXBlOiBcXFxcXFxcIm5kYXJyYXlcXFxcXFxcIixcXFxcbiAgICAgICAgICAgIF9ydmFsdWU6IHYuc2VsZWN0aW9uLmRhdGEsXFxcXG4gICAgICAgICAgICBfcnNoYXBlOiB2LnNoYXBlLFxcXFxuICAgICAgICAgICAgX3JkdHlwZTogZHR5cGVcXFxcbiAgICAgICAgICB9O1xcXFxuICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBFcnJvcikge1xcXFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3Iodik7XFxcXG4gICAgICAgICAgYk9iamVjdFtrXSA9IHtcXFxcbiAgICAgICAgICAgIF9ydHlwZTogXFxcXFxcXCJlcnJvclxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgX3J2YWx1ZTogdi50b1N0cmluZygpXFxcXG4gICAgICAgICAgfTtcXFxcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgRmlsZSAhPT0gXFxcXFxcXCJ1bmRlZmluZWRcXFxcXFxcIiAmJiB2IGluc3RhbmNlb2YgRmlsZSkge1xcXFxuICAgICAgICAgIGJPYmplY3Rba10gPSB7XFxcXG4gICAgICAgICAgICBfcnR5cGU6IFxcXFxcXFwiZmlsZVxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgX3J2YWx1ZTogdixcXFxcbiAgICAgICAgICAgIF9ycmVsYXRpdmVfcGF0aDogdi5yZWxhdGl2ZVBhdGggfHwgdi53ZWJraXRSZWxhdGl2ZVBhdGhcXFxcbiAgICAgICAgICB9O1xcXFxuICAgICAgICB9IC8vIHNlbmQgb2JqZWN0cyBzdXBwb3J0ZWQgYnkgc3RydWN0dXJlIGNsb25lIGFsZ29yaXRobVxcXFxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1dvcmtlcnNfQVBJL1N0cnVjdHVyZWRfY2xvbmVfYWxnb3JpdGhtXFxcXG4gICAgICAgIGVsc2UgaWYgKHYgIT09IE9iamVjdCh2KSB8fCB2IGluc3RhbmNlb2YgQm9vbGVhbiB8fCB2IGluc3RhbmNlb2YgU3RyaW5nIHx8IHYgaW5zdGFuY2VvZiBEYXRlIHx8IHYgaW5zdGFuY2VvZiBSZWdFeHAgfHwgdiBpbnN0YW5jZW9mIEJsb2IgfHwgdiBpbnN0YW5jZW9mIEltYWdlRGF0YSB8fCB0eXBlb2YgRmlsZUxpc3QgIT09IFxcXFxcXFwidW5kZWZpbmVkXFxcXFxcXCIgJiYgdiBpbnN0YW5jZW9mIEZpbGVMaXN0KSB7XFxcXG4gICAgICAgICAgICBiT2JqZWN0W2tdID0ge1xcXFxuICAgICAgICAgICAgICBfcnR5cGU6IFxcXFxcXFwiYXJndW1lbnRcXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgX3J2YWx1ZTogdlxcXFxuICAgICAgICAgICAgfTtcXFxcbiAgICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xcXFxuICAgICAgICAgICAgaWYgKHYuX3RyYW5zZmVyIHx8IF90cmFuc2Zlcikge1xcXFxuICAgICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2godik7XFxcXG4gICAgICAgICAgICAgIGRlbGV0ZSB2Ll90cmFuc2ZlcjtcXFxcbiAgICAgICAgICAgIH1cXFxcblxcXFxuICAgICAgICAgICAgYk9iamVjdFtrXSA9IHtcXFxcbiAgICAgICAgICAgICAgX3J0eXBlOiBcXFxcXFxcImFyZ3VtZW50XFxcXFxcXCIsXFxcXG4gICAgICAgICAgICAgIF9ydmFsdWU6IHZcXFxcbiAgICAgICAgICAgIH07XFxcXG4gICAgICAgICAgfSBlbHNlIGlmICh2IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJWaWV3KSB7XFxcXG4gICAgICAgICAgICBpZiAodi5fdHJhbnNmZXIgfHwgX3RyYW5zZmVyKSB7XFxcXG4gICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaCh2LmJ1ZmZlcik7XFxcXG4gICAgICAgICAgICAgIGRlbGV0ZSB2Ll90cmFuc2ZlcjtcXFxcbiAgICAgICAgICAgIH1cXFxcblxcXFxuICAgICAgICAgICAgYk9iamVjdFtrXSA9IHtcXFxcbiAgICAgICAgICAgICAgX3J0eXBlOiBcXFxcXFxcImFyZ3VtZW50XFxcXFxcXCIsXFxcXG4gICAgICAgICAgICAgIF9ydmFsdWU6IHZcXFxcbiAgICAgICAgICAgIH07XFxcXG4gICAgICAgICAgfSAvLyBUT0RPOiBzdXBwb3J0IGFsc28gTWFwIGFuZCBTZXRcXFxcbiAgICAgICAgICAvLyBUT0RPOiBhdm9pZCBvYmplY3Qgc3VjaCBhcyBEeW5hbWljUGx1Z2luIGluc3RhbmNlLlxcXFxuICAgICAgICAgIGVsc2UgaWYgKHYuX3JpbnRmKSB7XFxcXG4gICAgICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9lbmNvZGUodiwgdHJ1ZSk7XFxcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcXFxcXFxcIm9iamVjdFxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9lbmNvZGUodiwgYXNfaW50ZXJmYWNlKTsgLy8gbW92ZSB0cmFuc2ZlcmFibGVzIHRvIHRoZSB0b3AgbGV2ZWwgb2JqZWN0XFxcXG5cXFxcbiAgICAgICAgICAgICAgaWYgKGJPYmplY3Rba10uX190cmFuc2ZlcmFibGVzX18pIHtcXFxcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGJPYmplY3Rba10uX190cmFuc2ZlcmFibGVzX18ubGVuZ3RoOyB0KyspIHtcXFxcbiAgICAgICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaChiT2JqZWN0W2tdLl9fdHJhbnNmZXJhYmxlc19fW3RdKTtcXFxcbiAgICAgICAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICAgICAgICBkZWxldGUgYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfXztcXFxcbiAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgdGhyb3cgXFxcXFxcXCJpbWpveS1ycGM6IFVuc3VwcG9ydGVkIGRhdGEgdHlwZSBcXFxcXFxcIiArIGsgKyBcXFxcXFxcIixcXFxcXFxcIiArIHY7XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICB9XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgaWYgKHRyYW5zZmVyYWJsZXMubGVuZ3RoID4gMCkge1xcXFxuICAgICAgYk9iamVjdC5fX3RyYW5zZmVyYWJsZXNfXyA9IHRyYW5zZmVyYWJsZXM7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgcmV0dXJuIGJPYmplY3Q7XFxcXG4gIH1cXFxcblxcXFxuICBfZGVjb2RlKGFPYmplY3QsIGNhbGxiYWNrSWQsIHdpdGhQcm9taXNlKSB7XFxcXG4gICAgaWYgKCFhT2JqZWN0KSB7XFxcXG4gICAgICByZXR1cm4gYU9iamVjdDtcXFxcbiAgICB9XFxcXG5cXFxcbiAgICB2YXIgYk9iamVjdCwgdiwgaztcXFxcblxcXFxuICAgIGlmIChhT2JqZWN0Lmhhc093blByb3BlcnR5KFxcXFxcXFwiX3J0eXBlXFxcXFxcXCIpICYmIGFPYmplY3QuaGFzT3duUHJvcGVydHkoXFxcXFxcXCJfcnZhbHVlXFxcXFxcXCIpKSB7XFxcXG4gICAgICBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFxcXFxcXFwiY3VzdG9tXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgaWYgKGFPYmplY3QuX3J2YWx1ZSAmJiB0eXBlb2YgdGhpcy5fbG9jYWxfYXBpLl9ycGNfZGVjb2RlID09PSBcXFxcXFxcImZ1bmN0aW9uXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICBiT2JqZWN0ID0gdGhpcy5fbG9jYWxfYXBpLl9ycGNfZGVjb2RlKGFPYmplY3QuX3J2YWx1ZSk7XFxcXG5cXFxcbiAgICAgICAgICBpZiAoYk9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XFxcXG4gICAgICAgICAgICBiT2JqZWN0ID0gYU9iamVjdDtcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgYk9iamVjdCA9IGFPYmplY3Q7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0gZWxzZSBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFxcXFxcXFwiY2FsbGJhY2tcXFxcXFxcIikge1xcXFxuICAgICAgICBiT2JqZWN0ID0gdGhpcy5fZ2VuUmVtb3RlQ2FsbGJhY2soY2FsbGJhY2tJZCwgYU9iamVjdC5fcmluZGV4LCB3aXRoUHJvbWlzZSk7XFxcXG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcXFxcXFxcImludGVyZmFjZVxcXFxcXFwiKSB7XFxcXG4gICAgICAgIGNvbnN0IGludGZpZCA9IGFPYmplY3QuX3JpZCA9PT0gXFxcXFxcXCJfcmxvY2FsXFxcXFxcXCIgPyBcXFxcXFxcIl9ycm1vdGVcXFxcXFxcIiA6IGFPYmplY3QuX3JpZDtcXFxcbiAgICAgICAgYk9iamVjdCA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVtpbnRmaWRdICYmIHRoaXMuX2ludGVyZmFjZV9zdG9yZVtpbnRmaWRdW2FPYmplY3QuX3J2YWx1ZV0gfHwgdGhpcy5fZ2VuUmVtb3RlTWV0aG9kKGFPYmplY3QuX3J2YWx1ZSwgYU9iamVjdC5fcmlkKTtcXFxcbiAgICAgIH0gZWxzZSBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFxcXFxcXFwibmRhcnJheVxcXFxcXFwiKSB7XFxcXG4gICAgICAgIC8qZ2xvYmFsIG5qIHRmKi9cXFxcbiAgICAgICAgLy9jcmVhdGUgYnVpbGQgYXJyYXkvdGVuc29yIGlmIHVzZWQgaW4gdGhlIHBsdWdpblxcXFxuICAgICAgICBpZiAodHlwZW9mIG5qICE9PSBcXFxcXFxcInVuZGVmaW5lZFxcXFxcXFwiICYmIG5qLmFycmF5KSB7XFxcXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYU9iamVjdC5fcnZhbHVlKSkge1xcXFxuICAgICAgICAgICAgYU9iamVjdC5fcnZhbHVlID0gYU9iamVjdC5fcnZhbHVlLnJlZHVjZShfYXBwZW5kQnVmZmVyKTtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICBiT2JqZWN0ID0gbmouYXJyYXkoYU9iamVjdC5fcnZhbHVlLCBhT2JqZWN0Ll9yZHR5cGUpLnJlc2hhcGUoYU9iamVjdC5fcnNoYXBlKTtcXFxcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGYgIT09IFxcXFxcXFwidW5kZWZpbmVkXFxcXFxcXCIgJiYgdGYuVGVuc29yKSB7XFxcXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYU9iamVjdC5fcnZhbHVlKSkge1xcXFxuICAgICAgICAgICAgYU9iamVjdC5fcnZhbHVlID0gYU9iamVjdC5fcnZhbHVlLnJlZHVjZShfYXBwZW5kQnVmZmVyKTtcXFxcbiAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICBiT2JqZWN0ID0gdGYudGVuc29yKGFPYmplY3QuX3J2YWx1ZSwgYU9iamVjdC5fcnNoYXBlLCBhT2JqZWN0Ll9yZHR5cGUpO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgIC8va2VlcCBpdCBhcyByZWd1bGFyIGlmIHRyYW5zZmVyZWQgdG8gdGhlIG1haW4gYXBwXFxcXG4gICAgICAgICAgYk9iamVjdCA9IGFPYmplY3Q7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0gZWxzZSBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFxcXFxcXFwiZXJyb3JcXFxcXFxcIikge1xcXFxuICAgICAgICBiT2JqZWN0ID0gbmV3IEVycm9yKGFPYmplY3QuX3J2YWx1ZSk7XFxcXG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcXFxcXFxcImZpbGVcXFxcXFxcIikge1xcXFxuICAgICAgICBiT2JqZWN0ID0gYU9iamVjdC5fcnZhbHVlOyAvL3BhdGNoIHJlbGF0aXZlUGF0aFxcXFxuXFxcXG4gICAgICAgIGJPYmplY3QucmVsYXRpdmVQYXRoID0gYU9iamVjdC5fcnJlbGF0aXZlX3BhdGg7XFxcXG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcXFxcXFxcImFyZ3VtZW50XFxcXFxcXCIpIHtcXFxcbiAgICAgICAgYk9iamVjdCA9IGFPYmplY3QuX3J2YWx1ZTtcXFxcbiAgICAgIH1cXFxcblxcXFxuICAgICAgcmV0dXJuIGJPYmplY3Q7XFxcXG4gICAgfSBlbHNlIHtcXFxcbiAgICAgIHZhciBpc2FycmF5ID0gQXJyYXkuaXNBcnJheShhT2JqZWN0KTtcXFxcbiAgICAgIGJPYmplY3QgPSBpc2FycmF5ID8gW10gOiB7fTtcXFxcblxcXFxuICAgICAgZm9yIChrIGluIGFPYmplY3QpIHtcXFxcbiAgICAgICAgaWYgKGlzYXJyYXkgfHwgYU9iamVjdC5oYXNPd25Qcm9wZXJ0eShrKSkge1xcXFxuICAgICAgICAgIHYgPSBhT2JqZWN0W2tdO1xcXFxuXFxcXG4gICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcXFxcXFxcIm9iamVjdFxcXFxcXFwiIHx8IEFycmF5LmlzQXJyYXkodikpIHtcXFxcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9kZWNvZGUodiwgY2FsbGJhY2tJZCwgd2l0aFByb21pc2UpO1xcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfVxcXFxuICAgICAgfVxcXFxuXFxcXG4gICAgICByZXR1cm4gYk9iamVjdDtcXFxcbiAgICB9XFxcXG4gIH1cXFxcblxcXFxuICBfd3JhcChhcmdzLCBhc19pbnRlcmZhY2UpIHtcXFxcbiAgICB2YXIgd3JhcHBlZCA9IHRoaXMuX2VuY29kZShhcmdzLCBhc19pbnRlcmZhY2UpO1xcXFxuXFxcXG4gICAgdmFyIHJlc3VsdCA9IHtcXFxcbiAgICAgIGFyZ3M6IHdyYXBwZWRcXFxcbiAgICB9O1xcXFxuICAgIHJldHVybiByZXN1bHQ7XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIFVud3JhcHMgdGhlIHNldCBvZiBhcmd1bWVudHMgZGVsaXZlcmVkIGZyb20gdGhlIHJlbW90ZSBzaXRlLFxcXFxuICAgKiByZXBsYWNlcyBhbGwgY2FsbGJhY2sgaWRlbnRpZmllcnMgd2l0aCBhIGZ1bmN0aW9uIHdoaWNoIHdpbGxcXFxcbiAgICogaW5pdGlhdGUgc2VuZGluZyB0aGF0IGNhbGxiYWNrIGlkZW50aWZpZXIgYmFjayB0byBvdGhlciBzaXRlXFxcXG4gICAqXFxcXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIHRvIHVud3JhcFxcXFxuICAgKlxcXFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhQcm9taXNlIGlzIHRydWUgbWVhbnMgdGhpcyB0aGUgY2FsbGJhY2sgc2hvdWxkIGNvbnRhaW4gYSBwcm9taXNlXFxcXG4gICAqXFxcXG4gICAqIEByZXR1cm5zIHtBcnJheX0gdW53cmFwcGVkIGFyZ3NcXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBfdW53cmFwKGFyZ3MsIHdpdGhQcm9taXNlKSB7XFxcXG4gICAgLy8gdmFyIGNhbGxlZCA9IGZhbHNlO1xcXFxuICAgIC8vIHdyYXBzIGVhY2ggY2FsbGJhY2sgc28gdGhhdCB0aGUgb25seSBvbmUgY291bGQgYmUgY2FsbGVkXFxcXG4gICAgLy8gdmFyIG9uY2UoY2IpIHtcXFxcbiAgICAvLyAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xcXFxuICAgIC8vICAgICAgICAgaWYgKCFjYWxsZWQpIHtcXFxcbiAgICAvLyAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xcXFxuICAgIC8vICAgICAgICAgICAgIHJldHVybiBjYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcXFxuICAgIC8vICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAvLyAgICAgICAgICAgICB2YXIgbXNnID1cXFxcbiAgICAvLyAgICAgICAgICAgICAgICdBIGNhbGxiYWNrIGZyb20gdGhpcyBzZXQgaGFzIGFscmVhZHkgYmVlbiBleGVjdXRlZCc7XFxcXG4gICAgLy8gICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XFxcXG4gICAgLy8gICAgICAgICB9XFxcXG4gICAgLy8gICAgIH07XFxcXG4gICAgLy8gfVxcXFxuICAgIHZhciByZXN1bHQgPSB0aGlzLl9kZWNvZGUoYXJncy5hcmdzLCBhcmdzLmNhbGxiYWNrSWQsIHdpdGhQcm9taXNlKTtcXFxcblxcXFxuICAgIHJldHVybiByZXN1bHQ7XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIEdlbmVyYXRlcyB0aGUgd3JhcHBlZCBmdW5jdGlvbiBjb3JyZXNwb25kaW5nIHRvIGEgc2luZ2xlIHJlbW90ZVxcXFxuICAgKiBjYWxsYmFjay4gV2hlbiB0aGUgZ2VuZXJhdGVkIGZ1bmN0aW9uIGlzIGNhbGxlZCwgaXQgd2lsbCBzZW5kXFxcXG4gICAqIHRoZSBjb3JyZXNwb25kaW5nIG1lc3NhZ2UgdG8gdGhlIHJlbW90ZSBzaXRlIGFza2luZyBpdCB0b1xcXFxuICAgKiBleGVjdXRlIHRoZSBwYXJ0aWN1bGFyIGNhbGxiYWNrIHByZXZpb3VzbHkgc2F2ZWQgZHVyaW5nIGEgY2FsbFxcXFxuICAgKiBieSB0aGUgcmVtb3RlIHNpdGUgYSBtZXRob2QgZnJvbSB0aGUgaW50ZXJmYWNlIG9mIHRoaXMgc2l0ZVxcXFxuICAgKlxcXFxuICAgKiBAcGFyYW0ge051bWJlcn0gaWQgb2YgdGhlIHJlbW90ZSBjYWxsYmFjayB0byBleGVjdXRlXFxcXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhcmdOdW0gYXJndW1lbnQgaW5kZXggb2YgdGhlIGNhbGxiYWNrXFxcXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFByb21pc2UgaXMgdHJ1ZSBtZWFucyB0aGlzIHRoZSBjYWxsYmFjayBzaG91bGQgY29udGFpbiBhIHByb21pc2VcXFxcbiAgICpcXFxcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSB3cmFwcGVkIHJlbW90ZSBjYWxsYmFja1xcXFxuICAgKi9cXFxcblxcXFxuXFxcXG4gIF9nZW5SZW1vdGVDYWxsYmFjayhpZCwgYXJnTnVtLCB3aXRoUHJvbWlzZSkge1xcXFxuICAgIHZhciBtZSA9IHRoaXM7XFxcXG4gICAgdmFyIHJlbW90ZUNhbGxiYWNrO1xcXFxuXFxcXG4gICAgaWYgKHdpdGhQcm9taXNlKSB7XFxcXG4gICAgICByZW1vdGVDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcXFxcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcXFxcbiAgICAgICAgICB2YXIgYXJncyA9IG1lLl93cmFwKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xcXFxuXFxcXG4gICAgICAgICAgdmFyIHRyYW5zZmVyYWJsZXMgPSBhcmdzLmFyZ3MuX190cmFuc2ZlcmFibGVzX187XFxcXG4gICAgICAgICAgaWYgKHRyYW5zZmVyYWJsZXMpIGRlbGV0ZSBhcmdzLmFyZ3MuX190cmFuc2ZlcmFibGVzX187XFxcXG4gICAgICAgICAgcmVzb2x2ZS5fX2phaWxlZF9wYWlyc19fID0gcmVqZWN0O1xcXFxuICAgICAgICAgIHJlamVjdC5fX2phaWxlZF9wYWlyc19fID0gcmVzb2x2ZTtcXFxcblxcXFxuICAgICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgICBtZS5fY29ubmVjdGlvbi5lbWl0KHtcXFxcbiAgICAgICAgICAgICAgdHlwZTogXFxcXFxcXCJjYWxsYmFja1xcXFxcXFwiLFxcXFxuICAgICAgICAgICAgICBpZDogaWQsXFxcXG4gICAgICAgICAgICAgIF9yaW5kZXg6IGFyZ051bSxcXFxcbiAgICAgICAgICAgICAgYXJnczogYXJncyxcXFxcbiAgICAgICAgICAgICAgLy8gcGlkIDogIG1lLmlkLFxcXFxuICAgICAgICAgICAgICBwcm9taXNlOiBtZS5fd3JhcChbcmVzb2x2ZSwgcmVqZWN0XSlcXFxcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpO1xcXFxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICAgIHJlamVjdChgRmFpbGVkIHRvIGV4ZWN0dWUgcmVtb3RlIGNhbGxiYWNrIChpZDogJHtpZH0sIGFyZ051bTogJHthcmdOdW19KS5gKTtcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgfTtcXFxcblxcXFxuICAgICAgcmV0dXJuIHJlbW90ZUNhbGxiYWNrO1xcXFxuICAgIH0gZWxzZSB7XFxcXG4gICAgICByZW1vdGVDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcXFxcbiAgICAgICAgdmFyIGFyZ3MgPSBtZS5fd3JhcChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcXFxcblxcXFxuICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcXFxcbiAgICAgICAgaWYgKHRyYW5zZmVyYWJsZXMpIGRlbGV0ZSBhcmdzLmFyZ3MuX190cmFuc2ZlcmFibGVzX187XFxcXG4gICAgICAgIHJldHVybiBtZS5fY29ubmVjdGlvbi5lbWl0KHtcXFxcbiAgICAgICAgICB0eXBlOiBcXFxcXFxcImNhbGxiYWNrXFxcXFxcXCIsXFxcXG4gICAgICAgICAgaWQ6IGlkLFxcXFxuICAgICAgICAgIF9yaW5kZXg6IGFyZ051bSxcXFxcbiAgICAgICAgICBhcmdzOiBhcmdzIC8vIHBpZCA6ICBtZS5pZFxcXFxuXFxcXG4gICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpO1xcXFxuICAgICAgfTtcXFxcblxcXFxuICAgICAgcmV0dXJuIHJlbW90ZUNhbGxiYWNrO1xcXFxuICAgIH1cXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogU2VuZHMgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlIGFuZCBicmVha3MgdGhlIGNvbm5lY3Rpb25cXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBkaXNjb25uZWN0KCkge1xcXFxuICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7XFxcXG4gICAgICB0eXBlOiBcXFxcXFxcImRpc2Nvbm5lY3RcXFxcXFxcIlxcXFxuICAgIH0pO1xcXFxuXFxcXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XFxcXG4gICAgICB0aGlzLl9jb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcXFxcbiAgICB9LCAyMDAwKTtcXFxcbiAgfVxcXFxuXFxcXG59XFxcXG4vKipcXFxcbiAqIFJlZmVyZW5jZVN0b3JlIGlzIGEgc3BlY2lhbCBvYmplY3Qgd2hpY2ggc3RvcmVzIG90aGVyIG9iamVjdHNcXFxcbiAqIGFuZCBwcm92aWRlcyB0aGUgcmVmZXJlbmNlcyAobnVtYmVyKSBpbnN0ZWFkLiBUaGlzIHJlZmVyZW5jZVxcXFxuICogbWF5IHRoZW4gYmUgc2VudCBvdmVyIGEganNvbi1iYXNlZCBjb21tdW5pY2F0aW9uIGNoYW5uZWwgKElQQ1xcXFxuICogdG8gYW5vdGhlciBOb2RlLmpzIHByb2Nlc3Mgb3IgYSBtZXNzYWdlIHRvIHRoZSBXb3JrZXIpLiBPdGhlclxcXFxuICogc2l0ZSBtYXkgdGhlbiBwcm92aWRlIHRoZSByZWZlcmVuY2UgaW4gdGhlIHJlc3BvbmNlIG1lc3NhZ2VcXFxcbiAqIGltcGx5aW5nIHRoZSBnaXZlbiBvYmplY3Qgc2hvdWxkIGJlIGFjdGl2YXRlZC5cXFxcbiAqXFxcXG4gKiBQcmltYXJ5IHVzYWdlIGZvciB0aGUgUmVmZXJlbmNlU3RvcmUgaXMgYSBzdG9yYWdlIGZvciB0aGVcXFxcbiAqIGNhbGxiYWNrcywgd2hpY2ggdGhlcmVmb3JlIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGluaXRpYXRlIGFcXFxcbiAqIGNhbGxiYWNrIGV4ZWN1dGlvbiBieSB0aGUgb3Bwb3NpdGUgc2l0ZSAod2hpY2ggbm9ybWFsbHkgY2Fubm90XFxcXG4gKiBkaXJlY3RseSBleGVjdXRlIGZ1bmN0aW9ucyBvdmVyIHRoZSBjb21tdW5pY2F0aW9uIGNoYW5uZWwpLlxcXFxuICpcXFxcbiAqIEVhY2ggc3RvcmVkIG9iamVjdCBjYW4gb25seSBiZSBmZXRjaGVkIG9uY2UgYW5kIGlzIG5vdFxcXFxuICogYXZhaWxhYmxlIGZvciB0aGUgc2Vjb25kIHRpbWUuIEVhY2ggc3RvcmVkIG9iamVjdCBtdXN0IGJlXFxcXG4gKiBmZXRjaGVkLCBzaW5jZSBvdGhlcndpc2UgaXQgd2lsbCByZW1haW4gc3RvcmVkIGZvcmV2ZXIgYW5kXFxcXG4gKiBjb25zdW1lIG1lbW9yeS5cXFxcbiAqXFxcXG4gKiBTdG9yZWQgb2JqZWN0IGluZGVjZXMgYXJlIHNpbXBseSB0aGUgbnVtYmVycywgd2hpY2ggYXJlIGhvd2V2ZXJcXFxcbiAqIHJlbGVhc2VkIGFsb25nIHdpdGggdGhlIG9iamVjdHMsIGFuZCBhcmUgbGF0ZXIgcmV1c2VkIGFnYWluIChpblxcXFxuICogb3JkZXIgdG8gcG9zdHBvbmUgdGhlIG92ZXJmbG93LCB3aGljaCBzaG91bGQgbm90IGxpa2VseSBoYXBwZW4sXFxcXG4gKiBidXQgYW55d2F5KS5cXFxcbiAqL1xcXFxuXFxcXG5jbGFzcyBSZWZlcmVuY2VTdG9yZSB7XFxcXG4gIGNvbnN0cnVjdG9yKCkge1xcXFxuICAgIHRoaXMuX3N0b3JlID0ge307IC8vIHN0b3JlZCBvYmplY3RcXFxcblxcXFxuICAgIHRoaXMuX2luZGljZXMgPSBbMF07IC8vIHNtYWxsZXN0IGF2YWlsYWJsZSBpbmRpY2VzXFxcXG5cXFxcbiAgICB0aGlzLl9yZWFkeUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcXFxcblxcXFxuICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gZnVuY3Rpb24gKCkge307XFxcXG5cXFxcbiAgICB0aGlzLl9yZWFkeUhhbmRsZXIoKTtcXFxcbiAgfVxcXFxuICAvKipcXFxcbiAgICogY2FsbCBoYW5kbGVyIHdoZW4gdGhlIHN0b3JlIGlzIGVtcHR5XFxcXG4gICAqXFxcXG4gICAqIEBwYXJhbSB7RlVOQ1RJT059IGlkIG9mIGEgaGFuZGxlclxcXFxuICAgKi9cXFxcblxcXFxuXFxcXG4gIG9uUmVhZHkocmVhZHlIYW5kbGVyKSB7XFxcXG4gICAgdGhpcy5fcmVhZHlIYW5kbGVyID0gcmVhZHlIYW5kbGVyIHx8IGZ1bmN0aW9uICgpIHt9O1xcXFxuICB9XFxcXG4gIC8qKlxcXFxuICAgKiBjYWxsIGhhbmRsZXIgd2hlbiB0aGUgc3RvcmUgaXMgbm90IGVtcHR5XFxcXG4gICAqXFxcXG4gICAqIEBwYXJhbSB7RlVOQ1RJT059IGlkIG9mIGEgaGFuZGxlclxcXFxuICAgKi9cXFxcblxcXFxuXFxcXG4gIG9uQnVzeShidXN5SGFuZGxlcikge1xcXFxuICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gYnVzeUhhbmRsZXIgfHwgZnVuY3Rpb24gKCkge307XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBzdG9yZVxcXFxuICAgKlxcXFxuICAgKi9cXFxcblxcXFxuXFxcXG4gIGdldFN0YWNrKCkge1xcXFxuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9zdG9yZSkubGVuZ3RoO1xcXFxuICB9XFxcXG4gIC8qKlxcXFxuICAgKiBAZnVuY3Rpb24gX2dlbklkKCkgZ2VuZXJhdGVzIHRoZSBuZXcgcmVmZXJlbmNlIGlkXFxcXG4gICAqXFxcXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHNtYWxsZXN0IGF2YWlsYWJsZSBpZCBhbmQgcmVzZXJ2ZXMgaXRcXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBfZ2VuSWQoKSB7XFxcXG4gICAgdmFyIGlkO1xcXFxuXFxcXG4gICAgaWYgKHRoaXMuX2luZGljZXMubGVuZ3RoID09PSAxKSB7XFxcXG4gICAgICBpZCA9IHRoaXMuX2luZGljZXNbMF0rKztcXFxcbiAgICB9IGVsc2Uge1xcXFxuICAgICAgaWQgPSB0aGlzLl9pbmRpY2VzLnNoaWZ0KCk7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgcmV0dXJuIGlkO1xcXFxuICB9XFxcXG4gIC8qKlxcXFxuICAgKiBSZWxlYXNlcyB0aGUgZ2l2ZW4gcmVmZXJlbmNlIGlkIHNvIHRoYXQgaXQgd2lsbCBiZSBhdmFpbGFibGUgYnlcXFxcbiAgICogYW5vdGhlciBvYmplY3Qgc3RvcmVkXFxcXG4gICAqXFxcXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpZCB0byByZWxlYXNlXFxcXG4gICAqL1xcXFxuXFxcXG5cXFxcbiAgX3JlbGVhc2VJZChpZCkge1xcXFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faW5kaWNlcy5sZW5ndGg7IGkrKykge1xcXFxuICAgICAgaWYgKGlkIDwgdGhpcy5faW5kaWNlc1tpXSkge1xcXFxuICAgICAgICB0aGlzLl9pbmRpY2VzLnNwbGljZShpLCAwLCBpZCk7XFxcXG5cXFxcbiAgICAgICAgYnJlYWs7XFxcXG4gICAgICB9XFxcXG4gICAgfSAvLyBjbGVhbmluZy11cCB0aGUgc2VxdWVuY2UgdGFpbFxcXFxuXFxcXG5cXFxcbiAgICBmb3IgKGkgPSB0aGlzLl9pbmRpY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XFxcXG4gICAgICBpZiAodGhpcy5faW5kaWNlc1tpXSAtIDEgPT09IHRoaXMuX2luZGljZXNbaSAtIDFdKSB7XFxcXG4gICAgICAgIHRoaXMuX2luZGljZXMucG9wKCk7XFxcXG4gICAgICB9IGVsc2Uge1xcXFxuICAgICAgICBicmVhaztcXFxcbiAgICAgIH1cXFxcbiAgICB9XFxcXG4gIH1cXFxcbiAgLyoqXFxcXG4gICAqIFN0b3JlcyB0aGUgZ2l2ZW4gb2JqZWN0IGFuZCByZXR1cm5zIHRoZSByZWZlcm5jZSBpZCBpbnN0ZWFkXFxcXG4gICAqXFxcXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdG8gc3RvcmVcXFxcbiAgICpcXFxcbiAgICogQHJldHVybnMge051bWJlcn0gcmVmZXJlbmNlIGlkIG9mIHRoZSBzdG9yZWQgb2JqZWN0XFxcXG4gICAqL1xcXFxuXFxcXG5cXFxcbiAgcHV0KG9iaikge1xcXFxuICAgIGlmICh0aGlzLl9idXN5SGFuZGxlciAmJiBPYmplY3Qua2V5cyh0aGlzLl9zdG9yZSkubGVuZ3RoID09PSAwKSB7XFxcXG4gICAgICB0aGlzLl9idXN5SGFuZGxlcigpO1xcXFxuICAgIH1cXFxcblxcXFxuICAgIHZhciBpZCA9IHRoaXMuX2dlbklkKCk7XFxcXG5cXFxcbiAgICB0aGlzLl9zdG9yZVtpZF0gPSBvYmo7XFxcXG4gICAgcmV0dXJuIGlkO1xcXFxuICB9XFxcXG4gIC8qKlxcXFxuICAgKiBSZXRyaWV2ZXMgcHJldmlvdXNseSBzdG9yZWQgb2JqZWN0IGFuZCByZWxlYXNlcyBpdHMgcmVmZXJlbmNlXFxcXG4gICAqXFxcXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBvZiBhbiBvYmplY3QgdG8gcmV0cmlldmVcXFxcbiAgICovXFxcXG5cXFxcblxcXFxuICBmZXRjaChpZCkge1xcXFxuICAgIHZhciBvYmogPSB0aGlzLl9zdG9yZVtpZF07XFxcXG5cXFxcbiAgICBpZiAob2JqICYmICFvYmouX19yZW1vdGVfbWV0aG9kKSB7XFxcXG4gICAgICBkZWxldGUgdGhpcy5fc3RvcmVbaWRdO1xcXFxuXFxcXG4gICAgICB0aGlzLl9yZWxlYXNlSWQoaWQpO1xcXFxuXFxcXG4gICAgICBpZiAodGhpcy5fcmVhZHlIYW5kbGVyICYmIE9iamVjdC5rZXlzKHRoaXMuX3N0b3JlKS5sZW5ndGggPT09IDApIHtcXFxcbiAgICAgICAgdGhpcy5fcmVhZHlIYW5kbGVyKCk7XFxcXG4gICAgICB9XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgaWYgKG9iaiAmJiBvYmouX19qYWlsZWRfcGFpcnNfXykge1xcXFxuICAgICAgY29uc3QgX2lkID0gZ2V0S2V5QnlWYWx1ZSh0aGlzLl9zdG9yZSwgb2JqLl9famFpbGVkX3BhaXJzX18pO1xcXFxuXFxcXG4gICAgICB0aGlzLmZldGNoKF9pZCk7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgcmV0dXJuIG9iajtcXFxcbiAgfVxcXFxuXFxcXG59Ly8jIHNvdXJjZVVSTD1bbW9kdWxlXVxcXFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMaTl6Y21NdmNuQmpMbXB6TG1weklpd2ljMjkxY21ObGN5STZXeUozWldKd1lXTnJPaTh2YVcxcWIzbFNVRU12YzNKakwzSndZeTVxY3o4eU0yTXlJbDBzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSWk4cUtseHVJQ29nUTI5dWRHRnBibk1nZEdobElGSlFReUJ2WW1wbFkzUWdkWE5sWkNCaWIzUm9JR0o1SUhSb1pTQmhjSEJzYVdOaGRHbHZibHh1SUNvZ2MybDBaU3dnWVc1a0lHSjVJR1ZoWTJnZ2NHeDFaMmx1WEc0Z0tpOWNibWx0Y0c5eWRDQjdJSEpoYm1SSlpDd2dkSGx3WldSQmNuSmhlVlJ2UkhSNWNHVXNJRVYyWlc1MFRXRnVZV2RsY2lCOUlHWnliMjBnWENJdUwzVjBhV3h6TG1welhDSTdYRzVjYm1WNGNHOXlkQ0JqYjI1emRDQkJVRWxmVmtWU1UwbFBUaUE5SUZ3aU1DNHlMakZjSWp0Y2JseHVZMjl1YzNRZ1FYSnlZWGxDZFdabVpYSldhV1YzSUQwZ1QySnFaV04wTG1kbGRGQnliM1J2ZEhsd1pVOW1LRnh1SUNCUFltcGxZM1F1WjJWMFVISnZkRzkwZVhCbFQyWW9ibVYzSUZWcGJuUTRRWEp5WVhrb0tTbGNiaWt1WTI5dWMzUnlkV04wYjNJN1hHNWNibVoxYm1OMGFXOXVJRjloY0hCbGJtUkNkV1ptWlhJb1luVm1abVZ5TVN3Z1luVm1abVZ5TWlrZ2UxeHVJQ0JqYjI1emRDQjBiWEFnUFNCdVpYY2dWV2x1ZERoQmNuSmhlU2hpZFdabVpYSXhMbUo1ZEdWTVpXNW5kR2dnS3lCaWRXWm1aWEl5TG1KNWRHVk1aVzVuZEdncE8xeHVJQ0IwYlhBdWMyVjBLRzVsZHlCVmFXNTBPRUZ5Y21GNUtHSjFabVpsY2pFcExDQXdLVHRjYmlBZ2RHMXdMbk5sZENodVpYY2dWV2x1ZERoQmNuSmhlU2hpZFdabVpYSXlLU3dnWW5WbVptVnlNUzVpZVhSbFRHVnVaM1JvS1R0Y2JpQWdjbVYwZFhKdUlIUnRjQzVpZFdabVpYSTdYRzU5WEc1Y2JtWjFibU4wYVc5dUlHZGxkRXRsZVVKNVZtRnNkV1VvYjJKcVpXTjBMQ0IyWVd4MVpTa2dlMXh1SUNCeVpYUjFjbTRnVDJKcVpXTjBMbXRsZVhNb2IySnFaV04wS1M1bWFXNWtLR3RsZVNBOVBpQnZZbXBsWTNSYmEyVjVYU0E5UFQwZ2RtRnNkV1VwTzF4dWZWeHVMeW9xWEc0Z0tpQlNVRU1nYjJKcVpXTjBJSEpsY0hKbGMyVnVkSE1nWVNCemFXNW5iR1VnYzJsMFpTQnBiaUIwYUdWY2JpQXFJR052YlcxMWJtbGpZWFJwYjI0Z2NISnZkRzlqYjJ3Z1ltVjBkMlZsYmlCMGFHVWdZWEJ3YkdsallYUnBiMjRnWVc1a0lIUm9aU0J3YkhWbmFXNWNiaUFxWEc0Z0tpQkFjR0Z5WVcwZ2UwOWlhbVZqZEgwZ1kyOXVibVZqZEdsdmJpQmhJSE53WldOcFlXd2diMkpxWldOMElHRnNiRzkzYVc1bklIUnZJSE5sYm1SY2JpQXFJR0Z1WkNCeVpXTmxhWFpsSUcxbGMzTmhaMlZ6SUdaeWIyMGdkR2hsSUc5d2NHOXphWFJsSUhOcGRHVWdLR0poYzJsallXeHNlU0JwZEZ4dUlDb2djMmh2ZFd4a0lHOXViSGtnY0hKdmRtbGtaU0J6Wlc1a0tDa2dZVzVrSUc5dVRXVnpjMkZuWlNncElHMWxkR2h2WkhNcFhHNGdLaTljYm1WNGNHOXlkQ0JqYkdGemN5QlNVRU1nWlhoMFpXNWtjeUJGZG1WdWRFMWhibUZuWlhJZ2UxeHVJQ0JqYjI1emRISjFZM1J2Y2loamIyNXVaV04wYVc5dUxDQmpiMjVtYVdjcElIdGNiaUFnSUNCemRYQmxjaWhqYjI1bWFXY2dKaVlnWTI5dVptbG5MbVJsWW5WbktUdGNiaUFnSUNCMGFHbHpMbDlqYjI1dVpXTjBhVzl1SUQwZ1kyOXVibVZqZEdsdmJqdGNiaUFnSUNCMGFHbHpMbU52Ym1acFp5QTlJR052Ym1acFp5QjhmQ0I3ZlR0Y2JpQWdJQ0IwYUdsekxsOXBiblJsY21aaFkyVmZjM1J2Y21VZ1BTQjdmVHRjYmlBZ0lDQjBhR2x6TGw5c2IyTmhiRjloY0drZ1BTQnVkV3hzTzF4dUlDQWdJQzh2SUcxaGEyVWdjM1Z5WlNCMGFHVnlaU0JwY3lCaGJpQmxlR1ZqZFhSbElHWjFibU4wYVc5dVhHNGdJQ0FnWTI5dWMzUWdibUZ0WlNBOUlIUm9hWE11WTI5dVptbG5MbTVoYldVN1hHNGdJQ0FnZEdocGN5NWZZMjl1Ym1WamRHbHZiaTVsZUdWamRYUmxJRDFjYmlBZ0lDQWdJSFJvYVhNdVgyTnZibTVsWTNScGIyNHVaWGhsWTNWMFpTQjhmRnh1SUNBZ0lDQWdablZ1WTNScGIyNG9LU0I3WEc0Z0lDQWdJQ0FnSUhSb2NtOTNJRzVsZHlCRmNuSnZjaWhnWTI5dWJtVmpkR2x2Ymk1bGVHVmpkWFJsSUc1dmRDQnBiWEJzWlcxbGJuUmxaQ0FvYVc0Z1hDSWtlMjVoYldWOVhDSXBZQ2s3WEc0Z0lDQWdJQ0I5TzF4dUlDQWdJSFJvYVhNdVgzTjBiM0psSUQwZ2JtVjNJRkpsWm1WeVpXNWpaVk4wYjNKbEtDazdYRzRnSUNBZ2RHaHBjeTVmYldWMGFHOWtYM0psWm5NZ1BTQnVaWGNnVW1WbVpYSmxibU5sVTNSdmNtVW9LVHRjYmlBZ0lDQjBhR2x6TGw5dFpYUm9iMlJmY21WbWN5NXZibEpsWVdSNUtDZ3BJRDArSUh0Y2JpQWdJQ0FnSUhSb2FYTXVYMlpwY21Vb1hDSnlaVzF2ZEdWSlpHeGxYQ0lwTzF4dUlDQWdJSDBwTzF4dUlDQWdJSFJvYVhNdVgyMWxkR2h2WkY5eVpXWnpMbTl1UW5WemVTZ29LU0E5UGlCN1hHNGdJQ0FnSUNCMGFHbHpMbDltYVhKbEtGd2ljbVZ0YjNSbFFuVnplVndpS1R0Y2JpQWdJQ0I5S1R0Y2JpQWdJQ0IwYUdsekxsOXpaWFIxY0UxbGMzTmhaMlZJWVc1c1pHVnljeWdwTzF4dUlDQjlYRzVjYmlBZ2FXNXBkQ2dwSUh0Y2JpQWdJQ0IwYUdsekxsOWpiMjV1WldOMGFXOXVMbVZ0YVhRb2UxeHVJQ0FnSUNBZ2RIbHdaVG9nWENKcGJtbDBhV0ZzYVhwbFpGd2lMRnh1SUNBZ0lDQWdZMjl1Wm1sbk9pQjBhR2x6TG1OdmJtWnBaMXh1SUNBZ0lIMHBPMXh1SUNCOVhHNGdJQzhxS2x4dUlDQWdLaUJUWlhRZ1lTQm9ZVzVrYkdWeUlIUnZJR0psSUdOaGJHeGxaQ0IzYUdWdUlISmxZMlZwZG1Wa0lHRWdjbVZ6Y0c5dVkyVWdabkp2YlNCMGFHVmNiaUFnSUNvZ2NtVnRiM1JsSUhOcGRHVWdjbVZ3YjNKMGFXNW5JSFJvWVhRZ2RHaGxJSEJ5WlhacGIzVnpiSGtnY0hKdmRtbGtaV1FnYVc1MFpYSm1ZV05sWEc0Z0lDQXFJR2hoY3lCaVpXVnVJSE4xWTJObGMzTm1kV3hzZVNCelpYUWdZWE1nY21WdGIzUmxJR1p2Y2lCMGFHRjBJSE5wZEdWY2JpQWdJQ3BjYmlBZ0lDb2dRSEJoY21GdElIdEdkVzVqZEdsdmJuMGdhR0Z1Wkd4bGNseHVJQ0FnS2k5Y2JseHVJQ0JuWlhSU1pXMXZkR1ZEWVd4c1UzUmhZMnNvS1NCN1hHNGdJQ0FnY21WMGRYSnVJSFJvYVhNdVgyMWxkR2h2WkY5eVpXWnpMbWRsZEZOMFlXTnJLQ2s3WEc0Z0lIMWNibHh1SUNBdktpcGNiaUFnSUNvZ1FISmxkSFZ5Ym5NZ2UwOWlhbVZqZEgwZ2MyVjBJRzltSUhKbGJXOTBaU0JwYm5SbGNtWmhZMlVnYldWMGFHOWtjMXh1SUNBZ0tpOWNiaUFnWjJWMFVtVnRiM1JsS0NrZ2UxeHVJQ0FnSUhKbGRIVnliaUIwYUdsekxsOXBiblJsY21aaFkyVmZjM1J2Y21WYlhDSmZjbkpsYlc5MFpWd2lYVHRjYmlBZ2ZWeHVYRzRnSUM4cUtseHVJQ0FnS2lCVFpYUnpJSFJvWlNCcGJuUmxjbVpoWTJVZ2IyWWdkR2hwY3lCemFYUmxJRzFoYTJsdVp5QnBkQ0JoZG1GcGJHRmliR1VnZEc4Z2RHaGxYRzRnSUNBcUlISmxiVzkwWlNCemFYUmxJR0o1SUhObGJtUnBibWNnWVNCdFpYTnpZV2RsSUhkcGRHZ2dZU0J6WlhRZ2IyWWdiV1YwYUc5a2N5QnVZVzFsYzF4dUlDQWdLbHh1SUNBZ0tpQkFjR0Z5WVcwZ2UwOWlhbVZqZEgwZ1gybHVkR1Z5Wm1GalpTQjBieUJ6WlhSY2JpQWdJQ292WEc0Z0lITmxkRWx1ZEdWeVptRmpaU2hmYVc1MFpYSm1ZV05sS1NCN1hHNGdJQ0FnYVdZZ0tIUm9hWE11WTI5dVptbG5MbVp2Y25kaGNtUnBibWRmWm5WdVkzUnBiMjV6S1NCN1hHNGdJQ0FnSUNCbWIzSWdLR3hsZENCbWRXNWpYMjVoYldVZ2IyWWdkR2hwY3k1amIyNW1hV2N1Wm05eWQyRnlaR2x1WjE5bWRXNWpkR2x2Ym5NcElIdGNiaUFnSUNBZ0lDQWdZMjl1YzNRZ1gzSmxiVzkwWlNBOUlIUm9hWE11WDJsdWRHVnlabUZqWlY5emRHOXlaVnRjSWw5eWNtVnRiM1JsWENKZE8xeHVJQ0FnSUNBZ0lDQnBaaUFvWDNKbGJXOTBaVnRtZFc1algyNWhiV1ZkS1NCN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0Y5cGJuUmxjbVpoWTJVdVkyOXVjM1J5ZFdOMGIzSWdQVDA5SUU5aWFtVmpkQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdhV1lnS0NGZmFXNTBaWEptWVdObFcyWjFibU5mYm1GdFpWMHBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdYMmx1ZEdWeVptRmpaVnRtZFc1algyNWhiV1ZkSUQwZ0tDNHVMbUZ5WjNNcElEMCtJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JmY21WdGIzUmxXMloxYm1OZmJtRnRaVjBvTGk0dVlYSm5jeWs3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJSDA3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJQ0FnZlNCbGJITmxJR2xtSUNoZmFXNTBaWEptWVdObExtTnZibk4wY25WamRHOXlMbU52Ym5OMGNuVmpkRzl5SUQwOVBTQkdkVzVqZEdsdmJpa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2FXWWdLQ0ZmYVc1MFpYSm1ZV05sTG1OdmJuTjBjblZqZEc5eUxuQnliM1J2ZEhsd1pWdG1kVzVqWDI1aGJXVmRLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJRjlwYm5SbGNtWmhZMlV1WTI5dWMzUnlkV04wYjNJdWNISnZkRzkwZVhCbFcyWjFibU5mYm1GdFpWMGdQU0FvTGk0dVlYSm5jeWtnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lGOXlaVzF2ZEdWYlpuVnVZMTl1WVcxbFhTZ3VMaTVoY21kektUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2ZUdGNiaUFnSUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlYRzRnSUNBZ2RHaHBjeTVmYkc5allXeGZZWEJwSUQwZ1gybHVkR1Z5Wm1GalpUdGNiaUFnSUNCMGFHbHpMbDltYVhKbEtGd2lhVzUwWlhKbVlXTmxRWFpoYVd4aFlteGxYQ0lwTzF4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlGTmxibVJ6SUhSb1pTQmhZM1IxWVd3Z2FXNTBaWEptWVdObElIUnZJSFJvWlNCeVpXMXZkR1VnYzJsMFpTQjFjRzl1SUdsMElIZGhjMXh1SUNBZ0tpQjFjR1JoZEdWa0lHOXlJR0o1SUdFZ2MzQmxZMmxoYkNCeVpYRjFaWE4wSUc5bUlIUm9aU0J5WlcxdmRHVWdjMmwwWlZ4dUlDQWdLaTljYmlBZ2MyVnVaRWx1ZEdWeVptRmpaU2dwSUh0Y2JpQWdJQ0JwWmlBb0lYUm9hWE11WDJ4dlkyRnNYMkZ3YVNrZ2UxeHVJQ0FnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0Z3aWFXNTBaWEptWVdObElHbHpJRzV2ZENCelpYUXVYQ0lwTzF4dUlDQWdJSDFjYmlBZ0lDQjBhR2x6TGw5c2IyTmhiRjloY0drdVgzSnBaQ0E5SUZ3aVgzSnNiMk5oYkZ3aU8xeHVJQ0FnSUdOdmJuTjBJR0Z3YVNBOUlIUm9hWE11WDJWdVkyOWtaU2gwYUdsekxsOXNiMk5oYkY5aGNHa3NJSFJ5ZFdVcE8xeHVJQ0FnSUhSb2FYTXVYMk52Ym01bFkzUnBiMjR1WlcxcGRDaDdJSFI1Y0dVNklGd2ljMlYwU1c1MFpYSm1ZV05sWENJc0lHRndhVG9nWVhCcElIMHBPMXh1SUNCOVhHNWNiaUFnYzJWMFFYVjBhR1Z1ZEdsallYUnZjaWhoZFhSb1pXNTBhV05oZEc5eUtTQjdYRzRnSUNBZ2RHaHBjeTVoZFhSb1pXNTBhV05oZEc5eUlEMGdZWFYwYUdWdWRHbGpZWFJ2Y2p0Y2JpQWdmVnh1WEc0Z0lITmxkRUYxZEdodmNtbDZaWElvWVhWMGFHOXlhWHBsY2lrZ2UxeHVJQ0FnSUhSb2FYTXVZWFYwYUc5eWFYcGxjaUE5SUdGMWRHaHZjbWw2WlhJN1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dTR0Z1Wkd4bGN5QmhJRzFsYzNOaFoyVWdabkp2YlNCMGFHVWdjbVZ0YjNSbElITnBkR1ZjYmlBZ0lDb3ZYRzRnSUM4dklIWmhjaUJqWVd4c1ltRmphMTl5WldjZ1BTQnVaWGNnVW1WblJYaHdLRndpYjI1MWNHUmhkR1Y4Y25WdUpGd2lLVnh1SUNCZmMyVjBkWEJOWlhOellXZGxTR0Z1YkdSbGNuTW9LU0I3WEc0Z0lDQWdkR2hwY3k1ZlkyOXVibVZqZEdsdmJpNXZiaWhjSW1sdWFYUmNJaXdnZEdocGN5NXBibWwwS1R0Y2JpQWdJQ0IwYUdsekxsOWpiMjV1WldOMGFXOXVMbTl1S0Z3aVlYVjBhR1Z1ZEdsallYUmxYQ0lzSUdOeVpXUmxiblJwWVd3Z1BUNGdlMXh1SUNBZ0lDQWdVSEp2YldselpTNXlaWE52YkhabEtIUm9hWE11WVhWMGFHVnVkR2xqWVhSdmNpaGpjbVZrWlc1MGFXRnNLU2xjYmlBZ0lDQWdJQ0FnTG5Sb1pXNG9jbVZ6ZFd4MElEMCtJSHRjYmlBZ0lDQWdJQ0FnSUNCcFppQW9jbVZ6ZFd4MElEMDlQU0IwY25WbEtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCMGFHbHpMbDlqYjI1dVpXTjBhVzl1TG1WdGFYUW9lMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQjBlWEJsT2lCY0ltRjFkR2hsYm5ScFkyRjBaV1JjSWl4Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnZEc5clpXNDZJSFJ2YTJWdVhHNGdJQ0FnSUNBZ0lDQWdJQ0I5S1R0Y2JpQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnZEdocGN5NWZZMjl1Ym1WamRHbHZiaTVsYldsMEtIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2RIbHdaVG9nWENKaGRYUm9aVzUwYVdOaGRHVmtYQ0lzWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJR1Z5Y205eU9pQnlaWE4xYkhSY2JpQWdJQ0FnSUNBZ0lDQWdJSDBwTzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdmU2xjYmlBZ0lDQWdJQ0FnTG1OaGRHTm9LR1VnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQWdJSFJvYVhNdVgyTnZibTVsWTNScGIyNHVaVzFwZENoN1hHNGdJQ0FnSUNBZ0lDQWdJQ0IwZVhCbE9pQmNJbUYxZEdobGJuUnBZMkYwWldSY0lpeGNiaUFnSUNBZ0lDQWdJQ0FnSUdWeWNtOXlPaUJsWEc0Z0lDQWdJQ0FnSUNBZ2ZTazdYRzRnSUNBZ0lDQWdJSDBwTzF4dUlDQWdJSDBwTzF4dUlDQWdJSFJvYVhNdVgyTnZibTVsWTNScGIyNHViMjRvWENKbGVHVmpkWFJsWENJc0lHUmhkR0VnUFQ0Z2UxeHVJQ0FnSUNBZ1VISnZiV2x6WlM1eVpYTnZiSFpsS0hSb2FYTXVYMk52Ym01bFkzUnBiMjR1WlhobFkzVjBaU2hrWVhSaExtTnZaR1VwS1Z4dUlDQWdJQ0FnSUNBdWRHaGxiaWdvS1NBOVBpQjdYRzRnSUNBZ0lDQWdJQ0FnZEdocGN5NWZZMjl1Ym1WamRHbHZiaTVsYldsMEtIc2dkSGx3WlRvZ1hDSmxlR1ZqZFhSbFpGd2lJSDBwTzF4dUlDQWdJQ0FnSUNCOUtWeHVJQ0FnSUNBZ0lDQXVZMkYwWTJnb1pTQTlQaUI3WEc0Z0lDQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1bGNuSnZjaWhsS1R0Y2JpQWdJQ0FnSUNBZ0lDQjBhR2x6TGw5amIyNXVaV04wYVc5dUxtVnRhWFFvZTF4dUlDQWdJQ0FnSUNBZ0lDQWdkSGx3WlRvZ1hDSmxlR1ZqZFhSbFpGd2lMRnh1SUNBZ0lDQWdJQ0FnSUNBZ1pYSnliM0k2SUdWY2JpQWdJQ0FnSUNBZ0lDQjlLVHRjYmlBZ0lDQWdJQ0FnZlNrN1hHNGdJQ0FnZlNrN1hHNWNiaUFnSUNCMGFHbHpMbDlqYjI1dVpXTjBhVzl1TG05dUtGd2liV1YwYUc5a1hDSXNJR1JoZEdFZ1BUNGdlMXh1SUNBZ0lDQWdiR1YwSUhKbGMyOXNkbVVzSUhKbGFtVmpkQ3dnYldWMGFHOWtMQ0JoY21kekxDQnlaWE4xYkhRN1hHNGdJQ0FnSUNCc1pYUWdYMmx1ZEdWeVptRmpaU0E5SUhSb2FYTXVYMmx1ZEdWeVptRmpaVjl6ZEc5eVpWdGtZWFJoTG5CcFpGMDdYRzRnSUNBZ0lDQmpiMjV6ZENCZmJXVjBhRzlrWDJOdmJuUmxlSFFnUFNCZmFXNTBaWEptWVdObExsOWZkR2hwYzE5ZklIeDhJRjlwYm5SbGNtWmhZMlU3WEc0Z0lDQWdJQ0JwWmlBb0lWOXBiblJsY21aaFkyVXBJSHRjYmlBZ0lDQWdJQ0FnYVdZZ0tHUmhkR0V1Y0hKdmJXbHpaU2tnZTF4dUlDQWdJQ0FnSUNBZ0lGdHlaWE52YkhabExDQnlaV3BsWTNSZElEMGdkR2hwY3k1ZmRXNTNjbUZ3S0dSaGRHRXVjSEp2YldselpTd2dabUZzYzJVcE8xeHVJQ0FnSUNBZ0lDQWdJSEpsYW1WamRDaGNiaUFnSUNBZ0lDQWdJQ0FnSUdCd2JIVm5hVzRnWVhCcElHWjFibU4wYVc5dUlHbHpJRzV2ZENCaGRtRnBZV3hpWlNCcGJpQmNJaVI3WkdGMFlTNXdhV1I5WENJc0lIUm9aU0J3YkhWbmFXNGdiV0Y1WW1VZ2RHVnliV2x1WVhSbFpDNWdYRzRnSUNBZ0lDQWdJQ0FnS1R0Y2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0Z4dUlDQWdJQ0FnSUNBZ0lDQWdZSEJzZFdkcGJpQmhjR2tnWm5WdVkzUnBiMjRnYVhNZ2JtOTBJR0YyWVdsaGJHSmxJR2x1SUNSN1pHRjBZUzV3YVdSOUxDQjBhR1VnY0d4MVoybHVJRzFoZVdKbElIUmxjbTFwYm1GMFpXUXVZRnh1SUNBZ0lDQWdJQ0FnSUNrN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdjbVYwZFhKdU8xeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQnRaWFJvYjJRZ1BTQmZhVzUwWlhKbVlXTmxXMlJoZEdFdWJtRnRaVjA3WEc0Z0lDQWdJQ0JoY21keklEMGdkR2hwY3k1ZmRXNTNjbUZ3S0dSaGRHRXVZWEpuY3l3Z2RISjFaU2s3WEc0Z0lDQWdJQ0JwWmlBb1pHRjBZUzV3Y205dGFYTmxLU0I3WEc0Z0lDQWdJQ0FnSUZ0eVpYTnZiSFpsTENCeVpXcGxZM1JkSUQwZ2RHaHBjeTVmZFc1M2NtRndLR1JoZEdFdWNISnZiV2x6WlN3Z1ptRnNjMlVwTzF4dUlDQWdJQ0FnSUNCMGNua2dlMXh1SUNBZ0lDQWdJQ0FnSUhKbGMzVnNkQ0E5SUcxbGRHaHZaQzVoY0hCc2VTaGZiV1YwYUc5a1gyTnZiblJsZUhRc0lHRnlaM01wTzF4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2hjYmlBZ0lDQWdJQ0FnSUNBZ0lISmxjM1ZzZENCcGJuTjBZVzVqWlc5bUlGQnliMjFwYzJVZ2ZIeGNiaUFnSUNBZ0lDQWdJQ0FnSUNodFpYUm9iMlF1WTI5dWMzUnlkV04wYjNJZ0ppWWdiV1YwYUc5a0xtTnZibk4wY25WamRHOXlMbTVoYldVZ1BUMDlJRndpUVhONWJtTkdkVzVqZEdsdmJsd2lLVnh1SUNBZ0lDQWdJQ0FnSUNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnY21WemRXeDBMblJvWlc0b2NtVnpiMngyWlNrdVkyRjBZMmdvY21WcVpXTjBLVHRjYmlBZ0lDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdjbVZ6YjJ4MlpTaHlaWE4xYkhRcE8xeHVJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnZlNCallYUmphQ0FvWlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXVaWEp5YjNJb2RHaHBjeTVqYjI1bWFXY3VibUZ0WlN3Z1pTd2diV1YwYUc5a0tUdGNiaUFnSUNBZ0lDQWdJQ0J5WldwbFkzUW9aU2s3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJQ0FnYldWMGFHOWtMbUZ3Y0d4NUtGOXRaWFJvYjJSZlkyOXVkR1Y0ZEN3Z1lYSm5jeWs3WEc0Z0lDQWdJQ0FnSUgwZ1kyRjBZMmdnS0dVcElIdGNiaUFnSUNBZ0lDQWdJQ0JqYjI1emIyeGxMbVZ5Y205eUtIUm9hWE11WTI5dVptbG5MbTVoYldVc0lHVXNJRzFsZEdodlpDd2dZWEpuY3lrN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMWNiaUFnSUNCOUtUdGNibHh1SUNBZ0lIUm9hWE11WDJOdmJtNWxZM1JwYjI0dWIyNG9YQ0pqWVd4c1ltRmphMXdpTENCa1lYUmhJRDArSUh0Y2JpQWdJQ0FnSUd4bGRDQnlaWE52YkhabExDQnlaV3BsWTNRc0lHMWxkR2h2WkN3Z1lYSm5jeXdnY21WemRXeDBPMXh1SUNBZ0lDQWdhV1lnS0dSaGRHRXVjSEp2YldselpTa2dlMXh1SUNBZ0lDQWdJQ0JiY21WemIyeDJaU3dnY21WcVpXTjBYU0E5SUhSb2FYTXVYM1Z1ZDNKaGNDaGtZWFJoTG5CeWIyMXBjMlVzSUdaaGJITmxLVHRjYmlBZ0lDQWdJQ0FnZEhKNUlIdGNiaUFnSUNBZ0lDQWdJQ0J0WlhSb2IyUWdQU0IwYUdsekxsOXpkRzl5WlM1bVpYUmphQ2hrWVhSaExsOXlhVzVrWlhncE8xeHVJQ0FnSUNBZ0lDQWdJR0Z5WjNNZ1BTQjBhR2x6TGw5MWJuZHlZWEFvWkdGMFlTNWhjbWR6TENCMGNuVmxLVHRjYmlBZ0lDQWdJQ0FnSUNCcFppQW9JVzFsZEdodlpDa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0Z4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0JjSWtOaGJHeGlZV05ySUdaMWJtTjBhVzl1SUdOaGJpQnZibXg1SUdOaGJHeGxaQ0J2Ym1ObExDQnBaaUI1YjNVZ2QyRnVkQ0IwYnlCallXeHNJR0VnWm5WdVkzUnBiMjRnWm05eUlHMTFiSFJwY0d4bElIUnBiV1Z6TENCd2JHVmhjMlVnYldGclpTQnBkQ0JoY3lCaElIQnNkV2RwYmlCaGNHa2dablZ1WTNScGIyNHVJRk5sWlNCb2RIUndjem92TDJsdGFtOTVMbWx2TDJSdlkzTWdabTl5SUcxdmNtVWdaR1YwWVdsc2N5NWNJbHh1SUNBZ0lDQWdJQ0FnSUNBZ0tUdGNiaUFnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ2NtVnpkV3gwSUQwZ2JXVjBhRzlrTG1Gd2NHeDVLRzUxYkd3c0lHRnlaM01wTzF4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2hjYmlBZ0lDQWdJQ0FnSUNBZ0lISmxjM1ZzZENCcGJuTjBZVzVqWlc5bUlGQnliMjFwYzJVZ2ZIeGNiaUFnSUNBZ0lDQWdJQ0FnSUNodFpYUm9iMlF1WTI5dWMzUnlkV04wYjNJZ0ppWWdiV1YwYUc5a0xtTnZibk4wY25WamRHOXlMbTVoYldVZ1BUMDlJRndpUVhONWJtTkdkVzVqZEdsdmJsd2lLVnh1SUNBZ0lDQWdJQ0FnSUNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnY21WemRXeDBMblJvWlc0b2NtVnpiMngyWlNrdVkyRjBZMmdvY21WcVpXTjBLVHRjYmlBZ0lDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdjbVZ6YjJ4MlpTaHlaWE4xYkhRcE8xeHVJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnZlNCallYUmphQ0FvWlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXVaWEp5YjNJb2RHaHBjeTVqYjI1bWFXY3VibUZ0WlN3Z1pTd2diV1YwYUc5a0tUdGNiaUFnSUNBZ0lDQWdJQ0J5WldwbFkzUW9aU2s3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJQ0FnYldWMGFHOWtJRDBnZEdocGN5NWZjM1J2Y21VdVptVjBZMmdvWkdGMFlTNWZjbWx1WkdWNEtUdGNiaUFnSUNBZ0lDQWdJQ0JoY21keklEMGdkR2hwY3k1ZmRXNTNjbUZ3S0dSaGRHRXVZWEpuY3l3Z2RISjFaU2s3WEc0Z0lDQWdJQ0FnSUNBZ2FXWWdLQ0Z0WlhSb2IyUXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIUm9jbTkzSUc1bGR5QkZjbkp2Y2loY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnWENKUWJHVmhjMlVnYm05MGFXTmxJSFJvWVhRZ1kyRnNiR0poWTJzZ1puVnVZM1JwYjI0Z1kyRnVJRzl1YkhrZ1kyRnNiR1ZrSUc5dVkyVXNJR2xtSUhsdmRTQjNZVzUwSUhSdklHTmhiR3dnWVNCbWRXNWpkR2x2YmlCbWIzSWdiWFZzZEdsd2JHVWdkR2x0WlhNc0lIQnNaV0Z6WlNCdFlXdGxJR2wwSUdGeklHRWdjR3gxWjJsdUlHRndhU0JtZFc1amRHbHZiaTRnVTJWbElHaDBkSEJ6T2k4dmFXMXFiM2t1YVc4dlpHOWpjeUJtYjNJZ2JXOXlaU0JrWlhSaGFXeHpMbHdpWEc0Z0lDQWdJQ0FnSUNBZ0lDQXBPMXh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQnRaWFJvYjJRdVlYQndiSGtvYm5Wc2JDd2dZWEpuY3lrN1hHNGdJQ0FnSUNBZ0lIMGdZMkYwWTJnZ0tHVXBJSHRjYmlBZ0lDQWdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLSFJvYVhNdVkyOXVabWxuTG01aGJXVXNJR1VzSUcxbGRHaHZaQ3dnWVhKbmN5azdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlLVHRjYmlBZ0lDQjBhR2x6TGw5amIyNXVaV04wYVc5dUxtOXVLRndpYzJWMFNXNTBaWEptWVdObFhDSXNJR1JoZEdFZ1BUNGdlMXh1SUNBZ0lDQWdkR2hwY3k1ZmMyVjBVbVZ0YjNSbFNXNTBaWEptWVdObEtHUmhkR0V1WVhCcEtUdGNiaUFnSUNCOUtUdGNiaUFnSUNCMGFHbHpMbDlqYjI1dVpXTjBhVzl1TG05dUtGd2laMlYwU1c1MFpYSm1ZV05sWENJc0lDZ3BJRDArSUh0Y2JpQWdJQ0FnSUhSb2FYTXVYMlpwY21Vb1hDSm5aWFJKYm5SbGNtWmhZMlZjSWlrN1hHNGdJQ0FnSUNCcFppQW9kR2hwY3k1ZmJHOWpZV3hmWVhCcEtTQjBhR2x6TG5ObGJtUkpiblJsY21aaFkyVW9LVHRjYmlBZ0lDQWdJR1ZzYzJVZ2RHaHBjeTV2Ym1ObEtGd2lhVzUwWlhKbVlXTmxRWFpoYVd4aFlteGxYQ0lzSUhSb2FYTXVjMlZ1WkVsdWRHVnlabUZqWlNrN1hHNGdJQ0FnZlNrN1hHNGdJQ0FnZEdocGN5NWZZMjl1Ym1WamRHbHZiaTV2YmloY0ltbHVkR1Z5Wm1GalpWTmxkRUZ6VW1WdGIzUmxYQ0lzSUNncElEMCtJSHRjYmlBZ0lDQWdJSFJvYVhNdVgyWnBjbVVvWENKcGJuUmxjbVpoWTJWVFpYUkJjMUpsYlc5MFpWd2lLVHRjYmlBZ0lDQjlLVHRjYmlBZ0lDQjBhR2x6TGw5amIyNXVaV04wYVc5dUxtOXVLRndpWkdselkyOXVibVZqZEZ3aUxDQW9LU0E5UGlCN1hHNGdJQ0FnSUNCMGFHbHpMbDltYVhKbEtGd2lZbVZtYjNKbFJHbHpZMjl1Ym1WamRGd2lLVHRjYmlBZ0lDQWdJSFJvYVhNdVgyTnZibTVsWTNScGIyNHVaR2x6WTI5dWJtVmpkQ2dwTzF4dUlDQWdJQ0FnZEdocGN5NWZabWx5WlNoY0ltUnBjMk52Ym01bFkzUmxaRndpS1R0Y2JpQWdJQ0I5S1R0Y2JpQWdmVnh1WEc0Z0lHRnplVzVqSUdGMWRHaGxiblJwWTJGMFpTaGpjbVZrWlc1MGFXRnNLU0I3WEc0Z0lDQWdkR2hwY3k1dmJtTmxLRndpWVhWMGFHVnVkR2xqWVhSbFpGd2lMQ0J5WlhOMWJIUWdQVDRnZTF4dUlDQWdJQ0FnYVdZZ0tDRnlaWE4xYkhRdVpYSnliM0lwSUh0Y2JpQWdJQ0FnSUNBZ2NtVnpiMngyWlNoeVpYTjFiSFFwTzF4dUlDQWdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnY21WcVpXTjBLSEpsYzNWc2RDNWxjbkp2Y2lrN1hHNGdJQ0FnSUNCOVhHNGdJQ0FnZlNrN1hHNGdJQ0FnZEdocGN5NWZZMjl1Ym1WamRHbHZiaTVsYldsMEtIc2dkSGx3WlRvZ1hDSmhkWFJvWlc1MGFXTmhkR1ZjSWl3Z1kzSmxaR1Z1ZEdsaGJEb2dZM0psWkdWdWRHbGhiQ0I5S1R0Y2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQlRaVzVrY3lCaElISmxjWFZsYzNSeklIUnZJSFJvWlNCeVpXMXZkR1VnYzJsMFpTQmhjMnRwYm1jZ2FYUWdkRzhnY0hKdmRtbGtaU0JwZEhOY2JpQWdJQ29nWTNWeWNtVnVkQ0JwYm5SbGNtWmhZMlZjYmlBZ0lDb3ZYRzRnSUhKbGNYVmxjM1JTWlcxdmRHVW9LU0I3WEc0Z0lDQWdkR2hwY3k1ZlkyOXVibVZqZEdsdmJpNWxiV2wwS0hzZ2RIbHdaVG9nWENKblpYUkpiblJsY21aaFkyVmNJaUI5S1R0Y2JpQWdmVnh1WEc0Z0lGOXVaR0Z5Y21GNUtIUjVjR1ZrUVhKeVlYa3NJSE5vWVhCbExDQmtkSGx3WlNrZ2UxeHVJQ0FnSUhaaGNpQmZaSFI1Y0dVZ1BTQjBlWEJsWkVGeWNtRjVWRzlFZEhsd1pWdDBlWEJsWkVGeWNtRjVMbU52Ym5OMGNuVmpkRzl5TG01aGJXVmRPMXh1SUNBZ0lHbG1JQ2hrZEhsd1pTQW1KaUJrZEhsd1pTQWhQVDBnWDJSMGVYQmxLU0I3WEc0Z0lDQWdJQ0IwYUhKdmR5QmNJbVIwZVhCbElHUnZaWE51SjNRZ2JXRjBZMmdnZEdobElIUjVjR1VnYjJZZ2RHaGxJR0Z5Y21GNU9pQmNJaUFyWEc0Z0lDQWdJQ0FnSUY5a2RIbHdaU0FyWEc0Z0lDQWdJQ0FnSUZ3aUlDRTlJRndpSUN0Y2JpQWdJQ0FnSUNBZ1pIUjVjR1U3WEc0Z0lDQWdmVnh1SUNBZ0lITm9ZWEJsSUQwZ2MyaGhjR1VnZkh3Z1czUjVjR1ZrUVhKeVlYa3ViR1Z1WjNSb1hUdGNiaUFnSUNCeVpYUjFjbTRnZTF4dUlDQWdJQ0FnWDNKMGVYQmxPaUJjSW01a1lYSnlZWGxjSWl4Y2JpQWdJQ0FnSUY5eWRtRnNkV1U2SUhSNWNHVmtRWEp5WVhrc1hHNGdJQ0FnSUNCZmNuTm9ZWEJsT2lCemFHRndaU3hjYmlBZ0lDQWdJRjl5WkhSNWNHVTZJRjlrZEhsd1pWeHVJQ0FnSUgwN1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dVMlYwY3lCMGFHVWdibVYzSUhKbGJXOTBaU0JwYm5SbGNtWmhZMlVnY0hKdmRtbGtaV1FnWW5rZ2RHaGxJRzkwYUdWeUlITnBkR1ZjYmlBZ0lDcGNiaUFnSUNvZ1FIQmhjbUZ0SUh0QmNuSmhlWDBnYm1GdFpYTWdiR2x6ZENCdlppQm1kVzVqZEdsdmJpQnVZVzFsYzF4dUlDQWdLaTljYmlBZ1gzTmxkRkpsYlc5MFpVbHVkR1Z5Wm1GalpTaGhjR2twSUh0Y2JpQWdJQ0IwYUdsekxsOXBiblJsY21aaFkyVmZjM1J2Y21WYlhDSmZjbkpsYlc5MFpWd2lYU0E5SUhSb2FYTXVYMlJsWTI5a1pTaGhjR2twTzF4dUlDQWdJSFJvYVhNdVgyWnBjbVVvWENKeVpXMXZkR1ZTWldGa2VWd2lLVHRjYmlBZ0lDQjBhR2x6TGw5eVpYQnZjblJTWlcxdmRHVlRaWFFvS1R0Y2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQkhaVzVsY21GMFpYTWdkR2hsSUhkeVlYQndaV1FnWm5WdVkzUnBiMjRnWTI5eWNtVnpjRzl1WkdsdVp5QjBieUJoSUhOcGJtZHNaU0J5WlcxdmRHVmNiaUFnSUNvZ2JXVjBhRzlrTGlCWGFHVnVJSFJvWlNCblpXNWxjbUYwWldRZ1puVnVZM1JwYjI0Z2FYTWdZMkZzYkdWa0xDQnBkQ0IzYVd4c0lITmxibVFnZEdobFhHNGdJQ0FxSUdOdmNuSmxjM0J2Ym1ScGJtY2diV1Z6YzJGblpTQjBieUIwYUdVZ2NtVnRiM1JsSUhOcGRHVWdZWE5yYVc1bklHbDBJSFJ2SUdWNFpXTjFkR1ZjYmlBZ0lDb2dkR2hsSUhCaGNuUnBZM1ZzWVhJZ2JXVjBhRzlrSUc5bUlHbDBjeUJwYm5SbGNtWmhZMlZjYmlBZ0lDcGNiaUFnSUNvZ1FIQmhjbUZ0SUh0VGRISnBibWQ5SUc1aGJXVWdiMllnZEdobElISmxiVzkwWlNCdFpYUm9iMlJjYmlBZ0lDcGNiaUFnSUNvZ1FISmxkSFZ5Ym5NZ2UwWjFibU4wYVc5dWZTQjNjbUZ3Y0dWa0lISmxiVzkwWlNCdFpYUm9iMlJjYmlBZ0lDb3ZYRzRnSUY5blpXNVNaVzF2ZEdWTlpYUm9iMlFvYm1GdFpTd2dhVzUwWlhKbVlXTmxYMmxrS1NCN1hHNGdJQ0FnZG1GeUlHMWxJRDBnZEdocGN6dGNiaUFnSUNCMllYSWdjbVZ0YjNSbFRXVjBhRzlrSUQwZ1puVnVZM1JwYjI0b0tTQjdYRzRnSUNBZ0lDQnlaWFIxY200Z2JtVjNJRkJ5YjIxcGMyVW9LSEpsYzI5c2RtVXNJSEpsYW1WamRDa2dQVDRnZTF4dUlDQWdJQ0FnSUNCc1pYUWdhV1FnUFNCdWRXeHNPMXh1SUNBZ0lDQWdJQ0IwY25rZ2UxeHVJQ0FnSUNBZ0lDQWdJR2xrSUQwZ2JXVXVYMjFsZEdodlpGOXlaV1p6TG5CMWRDaGNiaUFnSUNBZ0lDQWdJQ0FnSUdsdWRHVnlabUZqWlY5cFpDQS9JR2x1ZEdWeVptRmpaVjlwWkNBcklGd2lMMXdpSUNzZ2JtRnRaU0E2SUc1aGJXVmNiaUFnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNBZ0lIWmhjaUIzY21Gd2NHVmtYM0psYzI5c2RtVWdQU0JtZFc1amRHbHZiaWdwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJR2xtSUNocFpDQWhQVDBnYm5Wc2JDa2diV1V1WDIxbGRHaHZaRjl5WldaekxtWmxkR05vS0dsa0tUdGNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGRIVnliaUJ5WlhOdmJIWmxMbUZ3Y0d4NUtIUm9hWE1zSUdGeVozVnRaVzUwY3lrN1hHNGdJQ0FnSUNBZ0lDQWdmVHRjYmlBZ0lDQWdJQ0FnSUNCMllYSWdkM0poY0hCbFpGOXlaV3BsWTNRZ1BTQm1kVzVqZEdsdmJpZ3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHbG1JQ2hwWkNBaFBUMGdiblZzYkNrZ2JXVXVYMjFsZEdodlpGOXlaV1p6TG1abGRHTm9LR2xrS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQnlaV3BsWTNRdVlYQndiSGtvZEdocGN5d2dZWEpuZFcxbGJuUnpLVHRjYmlBZ0lDQWdJQ0FnSUNCOU8xeHVYRzRnSUNBZ0lDQWdJQ0FnZDNKaGNIQmxaRjl5WlhOdmJIWmxMbDlmYW1GcGJHVmtYM0JoYVhKelgxOGdQU0IzY21Gd2NHVmtYM0psYW1WamREdGNiaUFnSUNBZ0lDQWdJQ0IzY21Gd2NHVmtYM0psYW1WamRDNWZYMnBoYVd4bFpGOXdZV2x5YzE5ZklEMGdkM0poY0hCbFpGOXlaWE52YkhabE8xeHVYRzRnSUNBZ0lDQWdJQ0FnZG1GeUlHRnlaM01nUFNCQmNuSmhlUzV3Y205MGIzUjVjR1V1YzJ4cFkyVXVZMkZzYkNoaGNtZDFiV1Z1ZEhNcE8xeHVJQ0FnSUNBZ0lDQWdJR2xtSUNodVlXMWxJRDA5UFNCY0luSmxaMmx6ZEdWeVhDSWdmSHdnYm1GdFpTQTlQVDBnWENKbGVIQnZjblJjSWlCOGZDQnVZVzFsSUQwOVBTQmNJbTl1WENJcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUdGeVozTWdQU0J0WlM1ZmQzSmhjQ2hoY21kekxDQjBjblZsS1R0Y2JpQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnWVhKbmN5QTlJRzFsTGw5M2NtRndLR0Z5WjNNcE8xeHVJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnSUNCMllYSWdkSEpoYm5ObVpYSmhZbXhsY3lBOUlHRnlaM011WVhKbmN5NWZYM1J5WVc1elptVnlZV0pzWlhOZlh6dGNiaUFnSUNBZ0lDQWdJQ0JwWmlBb2RISmhibk5tWlhKaFlteGxjeWtnWkdWc1pYUmxJR0Z5WjNNdVlYSm5jeTVmWDNSeVlXNXpabVZ5WVdKc1pYTmZYenRjYmlBZ0lDQWdJQ0FnSUNCdFpTNWZZMjl1Ym1WamRHbHZiaTVsYldsMEtGeHVJQ0FnSUNBZ0lDQWdJQ0FnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0IwZVhCbE9pQmNJbTFsZEdodlpGd2lMRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQnVZVzFsT2lCdVlXMWxMRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQndhV1E2SUdsdWRHVnlabUZqWlY5cFpDeGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1lYSm5jem9nWVhKbmN5eGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2NISnZiV2x6WlRvZ2JXVXVYM2R5WVhBb1czZHlZWEJ3WldSZmNtVnpiMngyWlN3Z2QzSmhjSEJsWkY5eVpXcGxZM1JkS1Z4dUlDQWdJQ0FnSUNBZ0lDQWdmU3hjYmlBZ0lDQWdJQ0FnSUNBZ0lIUnlZVzV6Wm1WeVlXSnNaWE5jYmlBZ0lDQWdJQ0FnSUNBcE8xeHVJQ0FnSUNBZ0lDQjlJR05oZEdOb0lDaGxLU0I3WEc0Z0lDQWdJQ0FnSUNBZ2FXWWdLR2xrS1NCdFpTNWZiV1YwYUc5a1gzSmxabk11Wm1WMFkyZ29hV1FwTzF4dUlDQWdJQ0FnSUNBZ0lISmxhbVZqZENoY2JpQWdJQ0FnSUNBZ0lDQWdJR0JHWVdsc1pXUWdkRzhnWlhobFkzUjFaU0J5WlcxdmRHVWdiV1YwYUc5a0lDaHBiblJsY21aaFkyVTZJQ1I3YVc1MFpYSm1ZV05sWDJsa0lIeDhYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lHMWxMbWxrZlN3Z2JXVjBhRzlrT2lBa2UyNWhiV1Y5S1N3Z1pYSnliM0k2SUNSN1pYMWdYRzRnSUNBZ0lDQWdJQ0FnS1R0Y2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2ZTazdYRzRnSUNBZ2ZUdGNiaUFnSUNCeVpXMXZkR1ZOWlhSb2IyUXVYMTl5WlcxdmRHVmZiV1YwYUc5a0lEMGdkSEoxWlR0Y2JpQWdJQ0J5WlhSMWNtNGdjbVZ0YjNSbFRXVjBhRzlrTzF4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlGTmxibVJ6SUdFZ2NtVnpjRzl1WTJVZ2NtVndiM0owYVc1bklIUm9ZWFFnYVc1MFpYSm1ZV05sSUdwMWMzUWdjSEp2ZG1sa1pXUWdZbmtnZEdobFhHNGdJQ0FxSUhKbGJXOTBaU0J6YVhSbElIZGhjeUJ6ZFdOalpYTnpablZzYkhrZ2MyVjBJR0o1SUhSb2FYTWdjMmwwWlNCaGN5QnlaVzF2ZEdWY2JpQWdJQ292WEc0Z0lGOXlaWEJ2Y25SU1pXMXZkR1ZUWlhRb0tTQjdYRzRnSUNBZ2RHaHBjeTVmWTI5dWJtVmpkR2x2Ymk1bGJXbDBLSHNnZEhsd1pUb2dYQ0pwYm5SbGNtWmhZMlZUWlhSQmMxSmxiVzkwWlZ3aUlIMHBPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZCeVpYQmhjbVZ6SUhSb1pTQndjbTkyYVdSbFpDQnpaWFFnYjJZZ2NtVnRiM1JsSUcxbGRHaHZaQ0JoY21kMWJXVnVkSE1nWm05eVhHNGdJQ0FxSUhObGJtUnBibWNnZEc4Z2RHaGxJSEpsYlc5MFpTQnphWFJsTENCeVpYQnNZV05sY3lCaGJHd2dkR2hsSUdOaGJHeGlZV05yY3lCM2FYUm9YRzRnSUNBcUlHbGtaVzUwYVdacFpYSnpYRzRnSUNBcVhHNGdJQ0FxSUVCd1lYSmhiU0I3UVhKeVlYbDlJR0Z5WjNNZ2RHOGdkM0poY0Z4dUlDQWdLbHh1SUNBZ0tpQkFjbVYwZFhKdWN5QjdRWEp5WVhsOUlIZHlZWEJ3WldRZ1lYSm5kVzFsYm5SelhHNGdJQ0FxTDF4dVhHNGdJRjlsYm1OdlpHVkpiblJsY21aaFkyVW9ZVTlpYW1WamRDa2dlMXh1SUNBZ0lHeGxkQ0IyTENCckxDQnJaWGx6TzF4dUlDQWdJR052Ym5OMElHVnVZMjlrWldSZmFXNTBaWEptWVdObElEMGdlMzA3WEc0Z0lDQWdZVTlpYW1WamRGdGNJbDl5YVdSY0lsMGdQU0JoVDJKcVpXTjBXMXdpWDNKcFpGd2lYU0I4ZkNCeVlXNWtTV1FvS1R0Y2JpQWdJQ0F2THlCaGJpQnZZbXBsWTNRdllYSnlZWGxjYmlBZ0lDQnBaaUFvWVU5aWFtVmpkQzVqYjI1emRISjFZM1J2Y2lBOVBUMGdUMkpxWldOMElIeDhJRUZ5Y21GNUxtbHpRWEp5WVhrb1lVOWlhbVZqZENrcElIdGNiaUFnSUNBZ0lHdGxlWE1nUFNCUFltcGxZM1F1YTJWNWN5aGhUMkpxWldOMEtUdGNiaUFnSUNCOVhHNGdJQ0FnTHk4Z1lTQmpiR0Z6YzF4dUlDQWdJR1ZzYzJVZ2FXWWdLR0ZQWW1wbFkzUXVZMjl1YzNSeWRXTjBiM0lnUFQwOUlFWjFibU4wYVc5dUtTQjdYRzRnSUNBZ0lDQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb1hDSlFiR1ZoYzJVZ2FXNXpkR0Z1ZEdsaGRHVWdkR2hsSUdOc1lYTnpJR0psWm05eVpTQmxlSEJ2Y25SMGFXNW5JR2wwTGx3aUtUdGNiaUFnSUNCOVhHNGdJQ0FnTHk4Z2FXNXpkR0Z1WTJVZ2IyWWdZU0JqYkdGemMxeHVJQ0FnSUdWc2MyVWdhV1lnS0dGUFltcGxZM1F1WTI5dWMzUnlkV04wYjNJdVkyOXVjM1J5ZFdOMGIzSWdQVDA5SUVaMWJtTjBhVzl1S1NCN1hHNGdJQ0FnSUNCclpYbHpJRDBnVDJKcVpXTjBMbWRsZEU5M2JsQnliM0JsY25SNVRtRnRaWE1vVDJKcVpXTjBMbWRsZEZCeWIzUnZkSGx3WlU5bUtHRlBZbXBsWTNRcEtTNWpiMjVqWVhRb1hHNGdJQ0FnSUNBZ0lFOWlhbVZqZEM1clpYbHpLR0ZQWW1wbFkzUXBYRzRnSUNBZ0lDQXBPMXh1SUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNCMGFISnZkeUJGY25KdmNpaGNJbFZ1YzNWd2NHOXlkR1ZrSUdsdWRHVnlabUZqWlNCMGVYQmxYQ0lwTzF4dUlDQWdJSDFjYmx4dUlDQWdJR052Ym5OMElHSlBZbXBsWTNRZ1BTQkJjbkpoZVM1cGMwRnljbUY1S0dGUFltcGxZM1FwSUQ4Z1cxMGdPaUI3ZlR0Y2JseHVJQ0FnSUdadmNpQW9heUJ2WmlCclpYbHpLU0I3WEc0Z0lDQWdJQ0JwWmlBb1cxd2lhR0Z6VDNkdVVISnZjR1Z5ZEhsY0lpd2dYQ0pqYjI1emRISjFZM1J2Y2x3aVhTNXBibU5zZFdSbGN5aHJLU2tnWTI5dWRHbHVkV1U3WEc1Y2JpQWdJQ0FnSUdsbUlDaHJMbk4wWVhKMGMxZHBkR2dvWENKZlhDSXBLU0I3WEc0Z0lDQWdJQ0FnSUdOdmJuUnBiblZsTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJQ0FnZGlBOUlHRlBZbXBsWTNSYmExMDdYRzVjYmlBZ0lDQWdJR2xtSUNoMGVYQmxiMllnZGlBOVBUMGdYQ0ptZFc1amRHbHZibHdpS1NCN1hHNGdJQ0FnSUNBZ0lHSlBZbXBsWTNSYmExMGdQU0I3WEc0Z0lDQWdJQ0FnSUNBZ1gzSjBlWEJsT2lCY0ltbHVkR1Z5Wm1GalpWd2lMRnh1SUNBZ0lDQWdJQ0FnSUY5eWFXUTZJR0ZQWW1wbFkzUmJYQ0pmY21sa1hDSmRMRnh1SUNBZ0lDQWdJQ0FnSUY5eWRtRnNkV1U2SUd0Y2JpQWdJQ0FnSUNBZ2ZUdGNiaUFnSUNBZ0lDQWdaVzVqYjJSbFpGOXBiblJsY21aaFkyVmJhMTBnUFNCMk8xeHVJQ0FnSUNBZ2ZTQmxiSE5sSUdsbUlDaFBZbXBsWTNRb2Rpa2dJVDA5SUhZcElIdGNiaUFnSUNBZ0lDQWdZazlpYW1WamRGdHJYU0E5SUhzZ1gzSjBlWEJsT2lCY0ltRnlaM1Z0Wlc1MFhDSXNJRjl5ZG1Gc2RXVTZJSFlnZlR0Y2JpQWdJQ0FnSUNBZ1pXNWpiMlJsWkY5cGJuUmxjbVpoWTJWYmExMGdQU0IyTzF4dUlDQWdJQ0FnZlNCbGJITmxJR2xtSUNoMGVYQmxiMllnZGlBOVBUMGdYQ0p2WW1wbFkzUmNJaWtnZTF4dUlDQWdJQ0FnSUNCaVQySnFaV04wVzJ0ZElEMGdkR2hwY3k1ZlpXNWpiMlJsU1c1MFpYSm1ZV05sS0hZcE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgxY2JpQWdJQ0IwYUdsekxsOXBiblJsY21aaFkyVmZjM1J2Y21WYllVOWlhbVZqZEZ0Y0lsOXlhV1JjSWwxZElEMGdaVzVqYjJSbFpGOXBiblJsY21aaFkyVTdYRzVjYmlBZ0lDQXZMeUJ5WlcxdmRtVWdhVzUwWlhKbVlXTmxJSGRvWlc0Z1kyeHZjMlZrWEc0Z0lDQWdhV1lnS0dGUFltcGxZM1F1YjI0Z0ppWWdkSGx3Wlc5bUlHRlBZbXBsWTNRdWIyNGdQVDA5SUZ3aVpuVnVZM1JwYjI1Y0lpa2dlMXh1SUNBZ0lDQWdZVTlpYW1WamRDNXZiaWhjSW1Oc2IzTmxYQ0lzSUNncElEMCtJSHRjYmlBZ0lDQWdJQ0FnWkdWc1pYUmxJSFJvYVhNdVgybHVkR1Z5Wm1GalpWOXpkRzl5WlZ0aFQySnFaV04wVzF3aVgzSnBaRndpWFYwN1hHNGdJQ0FnSUNCOUtUdGNiaUFnSUNCOVhHNGdJQ0FnY21WMGRYSnVJR0pQWW1wbFkzUTdYRzRnSUgxY2JseHVJQ0JmWlc1amIyUmxLR0ZQWW1wbFkzUXNJR0Z6WDJsdWRHVnlabUZqWlNrZ2UxeHVJQ0FnSUdOdmJuTjBJSFJ5WVc1elptVnlZV0pzWlhNZ1BTQmJYVHRjYmlBZ0lDQnBaaUFvSVdGUFltcGxZM1FwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUJoVDJKcVpXTjBPMXh1SUNBZ0lIMWNiaUFnSUNCamIyNXpkQ0JmZEhKaGJuTm1aWElnUFNCaFQySnFaV04wTGw5MGNtRnVjMlpsY2p0Y2JpQWdJQ0JzWlhRZ1lrOWlhbVZqZEN3Z2Rpd2dhenRjYmlBZ0lDQmpiMjV6ZENCcGMyRnljbUY1SUQwZ1FYSnlZWGt1YVhOQmNuSmhlU2hoVDJKcVpXTjBLVHRjYmlBZ0lDQXZMM05yYVhBZ2FXWWdZV3h5WldGa2VTQmxibU52WkdWa1hHNGdJQ0FnYVdZZ0tIUjVjR1Z2WmlCaFQySnFaV04wSUQwOVBTQmNJbTlpYW1WamRGd2lJQ1ltSUdGUFltcGxZM1F1WDNKMGVYQmxJQ1ltSUdGUFltcGxZM1F1WDNKMllXeDFaU2tnZTF4dUlDQWdJQ0FnY21WMGRYSnVJR0ZQWW1wbFkzUTdYRzRnSUNBZ2ZWeHVYRzRnSUNBZ0x5OWxibU52WkdVZ2FXNTBaWEptWVdObGMxeHVJQ0FnSUdsbUlDaGNiaUFnSUNBZ0lIUjVjR1Z2WmlCaFQySnFaV04wSUQwOVBTQmNJbTlpYW1WamRGd2lJQ1ltWEc0Z0lDQWdJQ0FoUVhKeVlYa3VhWE5CY25KaGVTaGhUMkpxWldOMEtTQW1KbHh1SUNBZ0lDQWdLR0ZQWW1wbFkzUXVYM0pwYm5SbUlIeDhJR0Z6WDJsdWRHVnlabUZqWlNsY2JpQWdJQ0FwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUIwYUdsekxsOWxibU52WkdWSmJuUmxjbVpoWTJVb1lVOWlhbVZqZENrN1hHNGdJQ0FnZlZ4dVhHNGdJQ0FnYVdZZ0tHRnpYMmx1ZEdWeVptRmpaU2tnZTF4dUlDQWdJQ0FnWVU5aWFtVmpkRnRjSWw5eWFXUmNJbDBnUFNCaFQySnFaV04wVzF3aVgzSnBaRndpWFNCOGZDQnlZVzVrU1dRb0tUdGNiaUFnSUNBZ0lIUm9hWE11WDJsdWRHVnlabUZqWlY5emRHOXlaVnRoVDJKcVpXTjBXMXdpWDNKcFpGd2lYVjBnUFZ4dUlDQWdJQ0FnSUNCMGFHbHpMbDlwYm5SbGNtWmhZMlZmYzNSdmNtVmJZVTlpYW1WamRGdGNJbDl5YVdSY0lsMWRJSHg4SUNocGMyRnljbUY1SUQ4Z1cxMGdPaUI3ZlNrN1hHNGdJQ0FnZlZ4dVhHNGdJQ0FnWWs5aWFtVmpkQ0E5SUdsellYSnlZWGtnUHlCYlhTQTZJSHQ5TzF4dUlDQWdJR1p2Y2lBb2F5QnBiaUJoVDJKcVpXTjBLU0I3WEc0Z0lDQWdJQ0JwWmlBb1cxd2lhR0Z6VDNkdVVISnZjR1Z5ZEhsY0lpd2dYQ0pqYjI1emRISjFZM1J2Y2x3aVhTNXBibU5zZFdSbGN5aHJLU2tnWTI5dWRHbHVkV1U3WEc0Z0lDQWdJQ0JwWmlBb2FYTmhjbkpoZVNCOGZDQmhUMkpxWldOMExtaGhjMDkzYmxCeWIzQmxjblI1S0dzcEtTQjdYRzRnSUNBZ0lDQWdJSFlnUFNCaFQySnFaV04wVzJ0ZE8xeHVJQ0FnSUNBZ0lDQnBaaUFvZGlBbUppQjBlWEJsYjJZZ2RHaHBjeTVmYkc5allXeGZZWEJwTGw5eWNHTmZaVzVqYjJSbElEMDlQU0JjSW1aMWJtTjBhVzl1WENJcElIdGNiaUFnSUNBZ0lDQWdJQ0JqYjI1emRDQmxibU52WkdWa1gyOWlhaUE5SUhSb2FYTXVYMnh2WTJGc1gyRndhUzVmY25CalgyVnVZMjlrWlNoMktUdGNiaUFnSUNBZ0lDQWdJQ0JwWmlBb1pXNWpiMlJsWkY5dlltb2dKaVlnWlc1amIyUmxaRjl2WW1vdVgyTjBlWEJsS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JpVDJKcVpXTjBXMnRkSUQwZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCZmNuUjVjR1U2SUZ3aVkzVnpkRzl0WENJc1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUY5eWRtRnNkV1U2SUdWdVkyOWtaV1JmYjJKcUxGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCZmNtbGtPaUJoVDJKcVpXTjBXMXdpWDNKcFpGd2lYVnh1SUNBZ0lDQWdJQ0FnSUNBZ2ZUdGNiaUFnSUNBZ0lDQWdJQ0FnSUdOdmJuUnBiblZsTzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0F2THlCcFppQjBhR1VnY21WMGRYSnVaV1FnYjJKcVpXTjBJR1J2WlhNZ2JtOTBJR052Ym5SaGFXNGdYM0owZVhCbExDQmhjM04xYldsdVp5QjBhR1VnYjJKcVpXTjBJR2hoY3lCaVpXVnVJSFJ5WVc1elptOXliV1ZrWEc0Z0lDQWdJQ0FnSUNBZ1pXeHpaU0JwWmlBb1pXNWpiMlJsWkY5dlltb2dJVDA5SUhWdVpHVm1hVzVsWkNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnZGlBOUlHVnVZMjlrWldSZmIySnFPMXh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQnBaaUFvZEhsd1pXOW1JSFlnUFQwOUlGd2lablZ1WTNScGIyNWNJaWtnZTF4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2hoYzE5cGJuUmxjbVpoWTJVcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUdOdmJuTjBJR1Z1WTI5a1pXUmZhVzUwWlhKbVlXTmxJRDBnZEdocGN5NWZhVzUwWlhKbVlXTmxYM04wYjNKbFcyRlBZbXBsWTNSYlhDSmZjbWxrWENKZFhUdGNiaUFnSUNBZ0lDQWdJQ0FnSUdKUFltcGxZM1JiYTEwZ1BTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lGOXlkSGx3WlRvZ1hDSnBiblJsY21aaFkyVmNJaXhjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdYM0pwWkRvZ1lVOWlhbVZqZEZ0Y0lsOXlhV1JjSWwwc1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUY5eWRtRnNkV1U2SUd0Y2JpQWdJQ0FnSUNBZ0lDQWdJSDA3WEc0Z0lDQWdJQ0FnSUNBZ0lDQmxibU52WkdWa1gybHVkR1Z5Wm1GalpWdHJYU0E5SUhZN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JqYjI1MGFXNTFaVHRjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdiR1YwSUdsdWRHVnlabUZqWlVaMWJtTk9ZVzFsSUQwZ2JuVnNiRHRjYmlBZ0lDQWdJQ0FnSUNCbWIzSWdLSFpoY2lCdVlXMWxJR2x1SUhSb2FYTXVYMnh2WTJGc1gyRndhU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdhV1lnS0hSb2FYTXVYMnh2WTJGc1gyRndhUzVvWVhOUGQyNVFjbTl3WlhKMGVTaHVZVzFsS1NrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCcFppQW9ibUZ0WlM1emRHRnlkSE5YYVhSb0tGd2lYMXdpS1NrZ1kyOXVkR2x1ZFdVN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUdsbUlDaDBhR2x6TGw5c2IyTmhiRjloY0dsYmJtRnRaVjBnUFQwOUlIWXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JwYm5SbGNtWmhZMlZHZFc1alRtRnRaU0E5SUc1aGJXVTdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdZbkpsWVdzN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdMeThnYzJWaGNtTm9JR1p2Y2lCd2NtOTBiM1I1Y0dWelhHNGdJQ0FnSUNBZ0lDQWdkbUZ5SUdaMWJtTjBhVzl1Y3lBOUlFOWlhbVZqZEM1blpYUlBkMjVRY205d1pYSjBlVTVoYldWektGeHVJQ0FnSUNBZ0lDQWdJQ0FnVDJKcVpXTjBMbWRsZEZCeWIzUnZkSGx3WlU5bUtIUm9hWE11WDJ4dlkyRnNYMkZ3YVNsY2JpQWdJQ0FnSUNBZ0lDQXBPMXh1SUNBZ0lDQWdJQ0FnSUdadmNpQW9kbUZ5SUdrZ1BTQXdPeUJwSUR3Z1puVnVZM1JwYjI1ekxteGxibWQwYURzZ2FTc3JLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjJZWElnYm1GdFpWOGdQU0JtZFc1amRHbHZibk5iYVYwN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb2JtRnRaVjh1YzNSaGNuUnpWMmwwYUNoY0lsOWNJaWtwSUdOdmJuUnBiblZsTzF4dUlDQWdJQ0FnSUNBZ0lDQWdhV1lnS0hSb2FYTXVYMnh2WTJGc1gyRndhVnR1WVcxbFgxMGdQVDA5SUhZcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2FXNTBaWEptWVdObFJuVnVZMDVoYldVZ1BTQnVZVzFsWHp0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnWW5KbFlXczdYRzRnSUNBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUdsbUlDZ2hhVzUwWlhKbVlXTmxSblZ1WTA1aGJXVXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJwWkNBOUlIUm9hWE11WDNOMGIzSmxMbkIxZENoMktUdGNiaUFnSUNBZ0lDQWdJQ0FnSUdKUFltcGxZM1JiYTEwZ1BTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lGOXlkSGx3WlRvZ1hDSmpZV3hzWW1GamExd2lMRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQmZjblpoYkhWbE9pQW9kaTVqYjI1emRISjFZM1J2Y2lBbUppQjJMbU52Ym5OMGNuVmpkRzl5TG01aGJXVXBJSHg4SUdsa0xGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCZmNtbHVaR1Y0T2lCcFpGeHVJQ0FnSUNBZ0lDQWdJQ0FnZlR0Y2JpQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnWWs5aWFtVmpkRnRyWFNBOUlIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1gzSjBlWEJsT2lCY0ltbHVkR1Z5Wm1GalpWd2lMRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQmZjblpoYkhWbE9pQnBiblJsY21aaFkyVkdkVzVqVG1GdFpTeGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1gzSnBaRG9nWENKZmNteHZZMkZzWENKY2JpQWdJQ0FnSUNBZ0lDQWdJSDA3WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLRnh1SUNBZ0lDQWdJQ0FnSUM4cVoyeHZZbUZzSUhSbUtpOWNiaUFnSUNBZ0lDQWdJQ0IwZVhCbGIyWWdkR1lnSVQwOUlGd2lkVzVrWldacGJtVmtYQ0lnSmlaY2JpQWdJQ0FnSUNBZ0lDQjBaaTVVWlc1emIzSWdKaVpjYmlBZ0lDQWdJQ0FnSUNCMklHbHVjM1JoYm1ObGIyWWdkR1l1VkdWdWMyOXlYRzRnSUNBZ0lDQWdJQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lHTnZibk4wSUhaZlluVm1abVZ5SUQwZ2RpNWtZWFJoVTNsdVl5Z3BPMXh1SUNBZ0lDQWdJQ0FnSUdsbUlDaDJMbDkwY21GdWMyWmxjaUI4ZkNCZmRISmhibk5tWlhJcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUhSeVlXNXpabVZ5WVdKc1pYTXVjSFZ6YUNoMlgySjFabVpsY2k1aWRXWm1aWElwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdaR1ZzWlhSbElIWXVYM1J5WVc1elptVnlPMXh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQmlUMkpxWldOMFcydGRJRDBnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdYM0owZVhCbE9pQmNJbTVrWVhKeVlYbGNJaXhjYmlBZ0lDQWdJQ0FnSUNBZ0lGOXlkbUZzZFdVNklIWmZZblZtWm1WeUxGeHVJQ0FnSUNBZ0lDQWdJQ0FnWDNKemFHRndaVG9nZGk1emFHRndaU3hjYmlBZ0lDQWdJQ0FnSUNBZ0lGOXlaSFI1Y0dVNklIWXVaSFI1Y0dWY2JpQWdJQ0FnSUNBZ0lDQjlPMXh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdhV1lnS0Z4dUlDQWdJQ0FnSUNBZ0lDOHFaMnh2WW1Gc0lHNXFLaTljYmlBZ0lDQWdJQ0FnSUNCMGVYQmxiMllnYm1vZ0lUMDlJRndpZFc1a1pXWnBibVZrWENJZ0ppWmNiaUFnSUNBZ0lDQWdJQ0J1YWk1T1pFRnljbUY1SUNZbVhHNGdJQ0FnSUNBZ0lDQWdkaUJwYm5OMFlXNWpaVzltSUc1cUxrNWtRWEp5WVhsY2JpQWdJQ0FnSUNBZ0tTQjdYRzRnSUNBZ0lDQWdJQ0FnZG1GeUlHUjBlWEJsSUQwZ2RIbHdaV1JCY25KaGVWUnZSSFI1Y0dWYmRpNXpaV3hsWTNScGIyNHVaR0YwWVM1amIyNXpkSEoxWTNSdmNpNXVZVzFsWFR0Y2JpQWdJQ0FnSUNBZ0lDQnBaaUFvZGk1ZmRISmhibk5tWlhJZ2ZId2dYM1J5WVc1elptVnlLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjBjbUZ1YzJabGNtRmliR1Z6TG5CMWMyZ29kaTV6Wld4bFkzUnBiMjR1WkdGMFlTNWlkV1ptWlhJcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnWkdWc1pYUmxJSFl1WDNSeVlXNXpabVZ5TzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0JpVDJKcVpXTjBXMnRkSUQwZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnWDNKMGVYQmxPaUJjSW01a1lYSnlZWGxjSWl4Y2JpQWdJQ0FnSUNBZ0lDQWdJRjl5ZG1Gc2RXVTZJSFl1YzJWc1pXTjBhVzl1TG1SaGRHRXNYRzRnSUNBZ0lDQWdJQ0FnSUNCZmNuTm9ZWEJsT2lCMkxuTm9ZWEJsTEZ4dUlDQWdJQ0FnSUNBZ0lDQWdYM0prZEhsd1pUb2daSFI1Y0dWY2JpQWdJQ0FnSUNBZ0lDQjlPMXh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdhV1lnS0hZZ2FXNXpkR0Z1WTJWdlppQkZjbkp2Y2lrZ2UxeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXVaWEp5YjNJb2RpazdYRzRnSUNBZ0lDQWdJQ0FnWWs5aWFtVmpkRnRyWFNBOUlIc2dYM0owZVhCbE9pQmNJbVZ5Y205eVhDSXNJRjl5ZG1Gc2RXVTZJSFl1ZEc5VGRISnBibWNvS1NCOU8xeHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLSFI1Y0dWdlppQkdhV3hsSUNFOVBTQmNJblZ1WkdWbWFXNWxaRndpSUNZbUlIWWdhVzV6ZEdGdVkyVnZaaUJHYVd4bEtTQjdYRzRnSUNBZ0lDQWdJQ0FnWWs5aWFtVmpkRnRyWFNBOUlIdGNiaUFnSUNBZ0lDQWdJQ0FnSUY5eWRIbHdaVG9nWENKbWFXeGxYQ0lzWEc0Z0lDQWdJQ0FnSUNBZ0lDQmZjblpoYkhWbE9pQjJMRnh1SUNBZ0lDQWdJQ0FnSUNBZ1gzSnlaV3hoZEdsMlpWOXdZWFJvT2lCMkxuSmxiR0YwYVhabFVHRjBhQ0I4ZkNCMkxuZGxZbXRwZEZKbGJHRjBhWFpsVUdGMGFGeHVJQ0FnSUNBZ0lDQWdJSDA3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0x5OGdjMlZ1WkNCdlltcGxZM1J6SUhOMWNIQnZjblJsWkNCaWVTQnpkSEoxWTNSMWNtVWdZMnh2Ym1VZ1lXeG5iM0pwZEdodFhHNGdJQ0FnSUNBZ0lDOHZJR2gwZEhCek9pOHZaR1YyWld4dmNHVnlMbTF2ZW1sc2JHRXViM0puTDJWdUxWVlRMMlJ2WTNNdlYyVmlMMEZRU1M5WFpXSmZWMjl5YTJWeWMxOUJVRWt2VTNSeWRXTjBkWEpsWkY5amJHOXVaVjloYkdkdmNtbDBhRzFjYmlBZ0lDQWdJQ0FnWld4elpTQnBaaUFvWEc0Z0lDQWdJQ0FnSUNBZ2RpQWhQVDBnVDJKcVpXTjBLSFlwSUh4OFhHNGdJQ0FnSUNBZ0lDQWdkaUJwYm5OMFlXNWpaVzltSUVKdmIyeGxZVzRnZkh4Y2JpQWdJQ0FnSUNBZ0lDQjJJR2x1YzNSaGJtTmxiMllnVTNSeWFXNW5JSHg4WEc0Z0lDQWdJQ0FnSUNBZ2RpQnBibk4wWVc1alpXOW1JRVJoZEdVZ2ZIeGNiaUFnSUNBZ0lDQWdJQ0IySUdsdWMzUmhibU5sYjJZZ1VtVm5SWGh3SUh4OFhHNGdJQ0FnSUNBZ0lDQWdkaUJwYm5OMFlXNWpaVzltSUVKc2IySWdmSHhjYmlBZ0lDQWdJQ0FnSUNCMklHbHVjM1JoYm1ObGIyWWdTVzFoWjJWRVlYUmhJSHg4WEc0Z0lDQWdJQ0FnSUNBZ0tIUjVjR1Z2WmlCR2FXeGxUR2x6ZENBaFBUMGdYQ0oxYm1SbFptbHVaV1JjSWlBbUppQjJJR2x1YzNSaGJtTmxiMllnUm1sc1pVeHBjM1FwWEc0Z0lDQWdJQ0FnSUNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR0pQWW1wbFkzUmJhMTBnUFNCN0lGOXlkSGx3WlRvZ1hDSmhjbWQxYldWdWRGd2lMQ0JmY25aaGJIVmxPaUIySUgwN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppQW9kaUJwYm5OMFlXNWpaVzltSUVGeWNtRjVRblZtWm1WeUtTQjdYRzRnSUNBZ0lDQWdJQ0FnYVdZZ0tIWXVYM1J5WVc1elptVnlJSHg4SUY5MGNtRnVjMlpsY2lrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnZEhKaGJuTm1aWEpoWW14bGN5NXdkWE5vS0hZcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnWkdWc1pYUmxJSFl1WDNSeVlXNXpabVZ5TzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0JpVDJKcVpXTjBXMnRkSUQwZ2V5QmZjblI1Y0dVNklGd2lZWEpuZFcxbGJuUmNJaXdnWDNKMllXeDFaVG9nZGlCOU8xeHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLSFlnYVc1emRHRnVZMlZ2WmlCQmNuSmhlVUoxWm1abGNsWnBaWGNwSUh0Y2JpQWdJQ0FnSUNBZ0lDQnBaaUFvZGk1ZmRISmhibk5tWlhJZ2ZId2dYM1J5WVc1elptVnlLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjBjbUZ1YzJabGNtRmliR1Z6TG5CMWMyZ29kaTVpZFdabVpYSXBPMXh1SUNBZ0lDQWdJQ0FnSUNBZ1pHVnNaWFJsSUhZdVgzUnlZVzV6Wm1WeU8xeHVJQ0FnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnSUNCaVQySnFaV04wVzJ0ZElEMGdleUJmY25SNWNHVTZJRndpWVhKbmRXMWxiblJjSWl3Z1gzSjJZV3gxWlRvZ2RpQjlPMXh1SUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUM4dklGUlBSRTg2SUhOMWNIQnZjblFnWVd4emJ5Qk5ZWEFnWVc1a0lGTmxkRnh1SUNBZ0lDQWdJQ0F2THlCVVQwUlBPaUJoZG05cFpDQnZZbXBsWTNRZ2MzVmphQ0JoY3lCRWVXNWhiV2xqVUd4MVoybHVJR2x1YzNSaGJtTmxMbHh1SUNBZ0lDQWdJQ0JsYkhObElHbG1JQ2gyTGw5eWFXNTBaaWtnZTF4dUlDQWdJQ0FnSUNBZ0lHSlBZbXBsWTNSYmExMGdQU0IwYUdsekxsOWxibU52WkdVb2Rpd2dkSEoxWlNrN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppQW9kSGx3Wlc5bUlIWWdQVDA5SUZ3aWIySnFaV04wWENJcElIdGNiaUFnSUNBZ0lDQWdJQ0JpVDJKcVpXTjBXMnRkSUQwZ2RHaHBjeTVmWlc1amIyUmxLSFlzSUdGelgybHVkR1Z5Wm1GalpTazdYRzRnSUNBZ0lDQWdJQ0FnTHk4Z2JXOTJaU0IwY21GdWMyWmxjbUZpYkdWeklIUnZJSFJvWlNCMGIzQWdiR1YyWld3Z2IySnFaV04wWEc0Z0lDQWdJQ0FnSUNBZ2FXWWdLR0pQWW1wbFkzUmJhMTB1WDE5MGNtRnVjMlpsY21GaWJHVnpYMThwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJR1p2Y2lBb2RtRnlJSFFnUFNBd095QjBJRHdnWWs5aWFtVmpkRnRyWFM1ZlgzUnlZVzV6Wm1WeVlXSnNaWE5mWHk1c1pXNW5kR2c3SUhRckt5a2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQjBjbUZ1YzJabGNtRmliR1Z6TG5CMWMyZ29ZazlpYW1WamRGdHJYUzVmWDNSeVlXNXpabVZ5WVdKc1pYTmZYMXQwWFNrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ0lDQmtaV3hsZEdVZ1lrOWlhbVZqZEZ0clhTNWZYM1J5WVc1elptVnlZV0pzWlhOZlh6dGNiaUFnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUNBZ2RHaHliM2NnWENKcGJXcHZlUzF5Y0dNNklGVnVjM1Z3Y0c5eWRHVmtJR1JoZEdFZ2RIbHdaU0JjSWlBcklHc2dLeUJjSWl4Y0lpQXJJSFk3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgxY2JpQWdJQ0I5WEc0Z0lDQWdhV1lnS0hSeVlXNXpabVZ5WVdKc1pYTXViR1Z1WjNSb0lENGdNQ2tnZTF4dUlDQWdJQ0FnWWs5aWFtVmpkQzVmWDNSeVlXNXpabVZ5WVdKc1pYTmZYeUE5SUhSeVlXNXpabVZ5WVdKc1pYTTdYRzRnSUNBZ2ZWeHVJQ0FnSUhKbGRIVnliaUJpVDJKcVpXTjBPMXh1SUNCOVhHNWNiaUFnWDJSbFkyOWtaU2hoVDJKcVpXTjBMQ0JqWVd4c1ltRmphMGxrTENCM2FYUm9VSEp2YldselpTa2dlMXh1SUNBZ0lHbG1JQ2doWVU5aWFtVmpkQ2tnZTF4dUlDQWdJQ0FnY21WMGRYSnVJR0ZQWW1wbFkzUTdYRzRnSUNBZ2ZWeHVJQ0FnSUhaaGNpQmlUMkpxWldOMExDQjJMQ0JyTzF4dUlDQWdJR2xtSUNoaFQySnFaV04wTG1oaGMwOTNibEJ5YjNCbGNuUjVLRndpWDNKMGVYQmxYQ0lwSUNZbUlHRlBZbXBsWTNRdWFHRnpUM2R1VUhKdmNHVnlkSGtvWENKZmNuWmhiSFZsWENJcEtTQjdYRzRnSUNBZ0lDQnBaaUFvWVU5aWFtVmpkQzVmY25SNWNHVWdQVDA5SUZ3aVkzVnpkRzl0WENJcElIdGNiaUFnSUNBZ0lDQWdhV1lnS0Z4dUlDQWdJQ0FnSUNBZ0lHRlBZbXBsWTNRdVgzSjJZV3gxWlNBbUpseHVJQ0FnSUNBZ0lDQWdJSFI1Y0dWdlppQjBhR2x6TGw5c2IyTmhiRjloY0drdVgzSndZMTlrWldOdlpHVWdQVDA5SUZ3aVpuVnVZM1JwYjI1Y0lseHVJQ0FnSUNBZ0lDQXBJSHRjYmlBZ0lDQWdJQ0FnSUNCaVQySnFaV04wSUQwZ2RHaHBjeTVmYkc5allXeGZZWEJwTGw5eWNHTmZaR1ZqYjJSbEtHRlBZbXBsWTNRdVgzSjJZV3gxWlNrN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0dKUFltcGxZM1FnUFQwOUlIVnVaR1ZtYVc1bFpDa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ1lrOWlhbVZqZENBOUlHRlBZbXBsWTNRN1hHNGdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdJQ0FnSUdKUFltcGxZM1FnUFNCaFQySnFaV04wTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tHRlBZbXBsWTNRdVgzSjBlWEJsSUQwOVBTQmNJbU5oYkd4aVlXTnJYQ0lwSUh0Y2JpQWdJQ0FnSUNBZ1lrOWlhbVZqZENBOUlIUm9hWE11WDJkbGJsSmxiVzkwWlVOaGJHeGlZV05yS0Z4dUlDQWdJQ0FnSUNBZ0lHTmhiR3hpWVdOclNXUXNYRzRnSUNBZ0lDQWdJQ0FnWVU5aWFtVmpkQzVmY21sdVpHVjRMRnh1SUNBZ0lDQWdJQ0FnSUhkcGRHaFFjbTl0YVhObFhHNGdJQ0FnSUNBZ0lDazdYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLR0ZQWW1wbFkzUXVYM0owZVhCbElEMDlQU0JjSW1sdWRHVnlabUZqWlZ3aUtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OMElHbHVkR1pwWkNBOUlHRlBZbXBsWTNRdVgzSnBaQ0E5UFQwZ1hDSmZjbXh2WTJGc1hDSWdQeUJjSWw5eWNtMXZkR1ZjSWlBNklHRlBZbXBsWTNRdVgzSnBaRHRjYmlBZ0lDQWdJQ0FnWWs5aWFtVmpkQ0E5WEc0Z0lDQWdJQ0FnSUNBZ0tIUm9hWE11WDJsdWRHVnlabUZqWlY5emRHOXlaVnRwYm5SbWFXUmRJQ1ltWEc0Z0lDQWdJQ0FnSUNBZ0lDQjBhR2x6TGw5cGJuUmxjbVpoWTJWZmMzUnZjbVZiYVc1MFptbGtYVnRoVDJKcVpXTjBMbDl5ZG1Gc2RXVmRLU0I4ZkZ4dUlDQWdJQ0FnSUNBZ0lIUm9hWE11WDJkbGJsSmxiVzkwWlUxbGRHaHZaQ2hoVDJKcVpXTjBMbDl5ZG1Gc2RXVXNJR0ZQWW1wbFkzUXVYM0pwWkNrN1hHNGdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tHRlBZbXBsWTNRdVgzSjBlWEJsSUQwOVBTQmNJbTVrWVhKeVlYbGNJaWtnZTF4dUlDQWdJQ0FnSUNBdkttZHNiMkpoYkNCdWFpQjBaaW92WEc0Z0lDQWdJQ0FnSUM4dlkzSmxZWFJsSUdKMWFXeGtJR0Z5Y21GNUwzUmxibk52Y2lCcFppQjFjMlZrSUdsdUlIUm9aU0J3YkhWbmFXNWNiaUFnSUNBZ0lDQWdhV1lnS0hSNWNHVnZaaUJ1YWlBaFBUMGdYQ0oxYm1SbFptbHVaV1JjSWlBbUppQnVhaTVoY25KaGVTa2dlMXh1SUNBZ0lDQWdJQ0FnSUdsbUlDaEJjbkpoZVM1cGMwRnljbUY1S0dGUFltcGxZM1F1WDNKMllXeDFaU2twSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJR0ZQWW1wbFkzUXVYM0oyWVd4MVpTQTlJR0ZQWW1wbFkzUXVYM0oyWVd4MVpTNXlaV1IxWTJVb1gyRndjR1Z1WkVKMVptWmxjaWs3WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJR0pQWW1wbFkzUWdQU0J1YWx4dUlDQWdJQ0FnSUNBZ0lDQWdMbUZ5Y21GNUtHRlBZbXBsWTNRdVgzSjJZV3gxWlN3Z1lVOWlhbVZqZEM1ZmNtUjBlWEJsS1Z4dUlDQWdJQ0FnSUNBZ0lDQWdMbkpsYzJoaGNHVW9ZVTlpYW1WamRDNWZjbk5vWVhCbEtUdGNiaUFnSUNBZ0lDQWdmU0JsYkhObElHbG1JQ2gwZVhCbGIyWWdkR1lnSVQwOUlGd2lkVzVrWldacGJtVmtYQ0lnSmlZZ2RHWXVWR1Z1YzI5eUtTQjdYRzRnSUNBZ0lDQWdJQ0FnYVdZZ0tFRnljbUY1TG1selFYSnlZWGtvWVU5aWFtVmpkQzVmY25aaGJIVmxLU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdZVTlpYW1WamRDNWZjblpoYkhWbElEMGdZVTlpYW1WamRDNWZjblpoYkhWbExuSmxaSFZqWlNoZllYQndaVzVrUW5WbVptVnlLVHRjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdZazlpYW1WamRDQTlJSFJtTG5SbGJuTnZjaWhjYmlBZ0lDQWdJQ0FnSUNBZ0lHRlBZbXBsWTNRdVgzSjJZV3gxWlN4Y2JpQWdJQ0FnSUNBZ0lDQWdJR0ZQWW1wbFkzUXVYM0p6YUdGd1pTeGNiaUFnSUNBZ0lDQWdJQ0FnSUdGUFltcGxZM1F1WDNKa2RIbHdaVnh1SUNBZ0lDQWdJQ0FnSUNrN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNBZ0lDQWdMeTlyWldWd0lHbDBJR0Z6SUhKbFozVnNZWElnYVdZZ2RISmhibk5tWlhKbFpDQjBieUIwYUdVZ2JXRnBiaUJoY0hCY2JpQWdJQ0FnSUNBZ0lDQmlUMkpxWldOMElEMGdZVTlpYW1WamREdGNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmU0JsYkhObElHbG1JQ2hoVDJKcVpXTjBMbDl5ZEhsd1pTQTlQVDBnWENKbGNuSnZjbHdpS1NCN1hHNGdJQ0FnSUNBZ0lHSlBZbXBsWTNRZ1BTQnVaWGNnUlhKeWIzSW9ZVTlpYW1WamRDNWZjblpoYkhWbEtUdGNiaUFnSUNBZ0lIMGdaV3h6WlNCcFppQW9ZVTlpYW1WamRDNWZjblI1Y0dVZ1BUMDlJRndpWm1sc1pWd2lLU0I3WEc0Z0lDQWdJQ0FnSUdKUFltcGxZM1FnUFNCaFQySnFaV04wTGw5eWRtRnNkV1U3WEc0Z0lDQWdJQ0FnSUM4dmNHRjBZMmdnY21Wc1lYUnBkbVZRWVhSb1hHNGdJQ0FnSUNBZ0lHSlBZbXBsWTNRdWNtVnNZWFJwZG1WUVlYUm9JRDBnWVU5aWFtVmpkQzVmY25KbGJHRjBhWFpsWDNCaGRHZzdYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLR0ZQWW1wbFkzUXVYM0owZVhCbElEMDlQU0JjSW1GeVozVnRaVzUwWENJcElIdGNiaUFnSUNBZ0lDQWdZazlpYW1WamRDQTlJR0ZQWW1wbFkzUXVYM0oyWVd4MVpUdGNiaUFnSUNBZ0lIMWNiaUFnSUNBZ0lISmxkSFZ5YmlCaVQySnFaV04wTzF4dUlDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQjJZWElnYVhOaGNuSmhlU0E5SUVGeWNtRjVMbWx6UVhKeVlYa29ZVTlpYW1WamRDazdYRzRnSUNBZ0lDQmlUMkpxWldOMElEMGdhWE5oY25KaGVTQS9JRnRkSURvZ2UzMDdYRzRnSUNBZ0lDQm1iM0lnS0dzZ2FXNGdZVTlpYW1WamRDa2dlMXh1SUNBZ0lDQWdJQ0JwWmlBb2FYTmhjbkpoZVNCOGZDQmhUMkpxWldOMExtaGhjMDkzYmxCeWIzQmxjblI1S0dzcEtTQjdYRzRnSUNBZ0lDQWdJQ0FnZGlBOUlHRlBZbXBsWTNSYmExMDdYRzRnSUNBZ0lDQWdJQ0FnYVdZZ0tIUjVjR1Z2WmlCMklEMDlQU0JjSW05aWFtVmpkRndpSUh4OElFRnljbUY1TG1selFYSnlZWGtvZGlrcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUdKUFltcGxZM1JiYTEwZ1BTQjBhR2x6TGw5a1pXTnZaR1VvZGl3Z1kyRnNiR0poWTJ0SlpDd2dkMmwwYUZCeWIyMXBjMlVwTzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdjbVYwZFhKdUlHSlBZbXBsWTNRN1hHNGdJQ0FnZlZ4dUlDQjlYRzVjYmlBZ1gzZHlZWEFvWVhKbmN5d2dZWE5mYVc1MFpYSm1ZV05sS1NCN1hHNGdJQ0FnZG1GeUlIZHlZWEJ3WldRZ1BTQjBhR2x6TGw5bGJtTnZaR1VvWVhKbmN5d2dZWE5mYVc1MFpYSm1ZV05sS1R0Y2JpQWdJQ0IyWVhJZ2NtVnpkV3gwSUQwZ2V5QmhjbWR6T2lCM2NtRndjR1ZrSUgwN1hHNGdJQ0FnY21WMGRYSnVJSEpsYzNWc2REdGNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJWYm5keVlYQnpJSFJvWlNCelpYUWdiMllnWVhKbmRXMWxiblJ6SUdSbGJHbDJaWEpsWkNCbWNtOXRJSFJvWlNCeVpXMXZkR1VnYzJsMFpTeGNiaUFnSUNvZ2NtVndiR0ZqWlhNZ1lXeHNJR05oYkd4aVlXTnJJR2xrWlc1MGFXWnBaWEp6SUhkcGRHZ2dZU0JtZFc1amRHbHZiaUIzYUdsamFDQjNhV3hzWEc0Z0lDQXFJR2x1YVhScFlYUmxJSE5sYm1ScGJtY2dkR2hoZENCallXeHNZbUZqYXlCcFpHVnVkR2xtYVdWeUlHSmhZMnNnZEc4Z2IzUm9aWElnYzJsMFpWeHVJQ0FnS2x4dUlDQWdLaUJBY0dGeVlXMGdlMDlpYW1WamRIMGdZWEpuY3lCMGJ5QjFibmR5WVhCY2JpQWdJQ3BjYmlBZ0lDb2dRSEJoY21GdElIdENiMjlzWldGdWZTQjNhWFJvVUhKdmJXbHpaU0JwY3lCMGNuVmxJRzFsWVc1eklIUm9hWE1nZEdobElHTmhiR3hpWVdOcklITm9iM1ZzWkNCamIyNTBZV2x1SUdFZ2NISnZiV2x6WlZ4dUlDQWdLbHh1SUNBZ0tpQkFjbVYwZFhKdWN5QjdRWEp5WVhsOUlIVnVkM0poY0hCbFpDQmhjbWR6WEc0Z0lDQXFMMXh1SUNCZmRXNTNjbUZ3S0dGeVozTXNJSGRwZEdoUWNtOXRhWE5sS1NCN1hHNGdJQ0FnTHk4Z2RtRnlJR05oYkd4bFpDQTlJR1poYkhObE8xeHVYRzRnSUNBZ0x5OGdkM0poY0hNZ1pXRmphQ0JqWVd4c1ltRmpheUJ6YnlCMGFHRjBJSFJvWlNCdmJteDVJRzl1WlNCamIzVnNaQ0JpWlNCallXeHNaV1JjYmlBZ0lDQXZMeUIyWVhJZ2IyNWpaU2hqWWlrZ2UxeHVJQ0FnSUM4dklDQWdJQ0J5WlhSMWNtNGdablZ1WTNScGIyNG9LU0I3WEc0Z0lDQWdMeThnSUNBZ0lDQWdJQ0JwWmlBb0lXTmhiR3hsWkNrZ2UxeHVJQ0FnSUM4dklDQWdJQ0FnSUNBZ0lDQWdJR05oYkd4bFpDQTlJSFJ5ZFdVN1hHNGdJQ0FnTHk4Z0lDQWdJQ0FnSUNBZ0lDQWdjbVYwZFhKdUlHTmlMbUZ3Y0d4NUtIUm9hWE1zSUdGeVozVnRaVzUwY3lrN1hHNGdJQ0FnTHk4Z0lDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQzh2SUNBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJ0YzJjZ1BWeHVJQ0FnSUM4dklDQWdJQ0FnSUNBZ0lDQWdJQ0FnSjBFZ1kyRnNiR0poWTJzZ1puSnZiU0IwYUdseklITmxkQ0JvWVhNZ1lXeHlaV0ZrZVNCaVpXVnVJR1Y0WldOMWRHVmtKenRjYmlBZ0lDQXZMeUFnSUNBZ0lDQWdJQ0FnSUNCMGFISnZkeUJ1WlhjZ1JYSnliM0lvYlhObktUdGNiaUFnSUNBdkx5QWdJQ0FnSUNBZ0lIMWNiaUFnSUNBdkx5QWdJQ0FnZlR0Y2JpQWdJQ0F2THlCOVhHNGdJQ0FnZG1GeUlISmxjM1ZzZENBOUlIUm9hWE11WDJSbFkyOWtaU2hoY21kekxtRnlaM01zSUdGeVozTXVZMkZzYkdKaFkydEpaQ3dnZDJsMGFGQnliMjFwYzJVcE8xeHVJQ0FnSUhKbGRIVnliaUJ5WlhOMWJIUTdYRzRnSUgxY2JseHVJQ0F2S2lwY2JpQWdJQ29nUjJWdVpYSmhkR1Z6SUhSb1pTQjNjbUZ3Y0dWa0lHWjFibU4wYVc5dUlHTnZjbkpsYzNCdmJtUnBibWNnZEc4Z1lTQnphVzVuYkdVZ2NtVnRiM1JsWEc0Z0lDQXFJR05oYkd4aVlXTnJMaUJYYUdWdUlIUm9aU0JuWlc1bGNtRjBaV1FnWm5WdVkzUnBiMjRnYVhNZ1kyRnNiR1ZrTENCcGRDQjNhV3hzSUhObGJtUmNiaUFnSUNvZ2RHaGxJR052Y25KbGMzQnZibVJwYm1jZ2JXVnpjMkZuWlNCMGJ5QjBhR1VnY21WdGIzUmxJSE5wZEdVZ1lYTnJhVzVuSUdsMElIUnZYRzRnSUNBcUlHVjRaV04xZEdVZ2RHaGxJSEJoY25ScFkzVnNZWElnWTJGc2JHSmhZMnNnY0hKbGRtbHZkWE5zZVNCellYWmxaQ0JrZFhKcGJtY2dZU0JqWVd4c1hHNGdJQ0FxSUdKNUlIUm9aU0J5WlcxdmRHVWdjMmwwWlNCaElHMWxkR2h2WkNCbWNtOXRJSFJvWlNCcGJuUmxjbVpoWTJVZ2IyWWdkR2hwY3lCemFYUmxYRzRnSUNBcVhHNGdJQ0FxSUVCd1lYSmhiU0I3VG5WdFltVnlmU0JwWkNCdlppQjBhR1VnY21WdGIzUmxJR05oYkd4aVlXTnJJSFJ2SUdWNFpXTjFkR1ZjYmlBZ0lDb2dRSEJoY21GdElIdE9kVzFpWlhKOUlHRnlaMDUxYlNCaGNtZDFiV1Z1ZENCcGJtUmxlQ0J2WmlCMGFHVWdZMkZzYkdKaFkydGNiaUFnSUNvZ1FIQmhjbUZ0SUh0Q2IyOXNaV0Z1ZlNCM2FYUm9VSEp2YldselpTQnBjeUIwY25WbElHMWxZVzV6SUhSb2FYTWdkR2hsSUdOaGJHeGlZV05ySUhOb2IzVnNaQ0JqYjI1MFlXbHVJR0VnY0hKdmJXbHpaVnh1SUNBZ0tseHVJQ0FnS2lCQWNtVjBkWEp1Y3lCN1JuVnVZM1JwYjI1OUlIZHlZWEJ3WldRZ2NtVnRiM1JsSUdOaGJHeGlZV05yWEc0Z0lDQXFMMXh1SUNCZloyVnVVbVZ0YjNSbFEyRnNiR0poWTJzb2FXUXNJR0Z5WjA1MWJTd2dkMmwwYUZCeWIyMXBjMlVwSUh0Y2JpQWdJQ0IyWVhJZ2JXVWdQU0IwYUdsek8xeHVJQ0FnSUhaaGNpQnlaVzF2ZEdWRFlXeHNZbUZqYXp0Y2JpQWdJQ0JwWmlBb2QybDBhRkJ5YjIxcGMyVXBJSHRjYmlBZ0lDQWdJSEpsYlc5MFpVTmhiR3hpWVdOcklEMGdablZ1WTNScGIyNG9LU0I3WEc0Z0lDQWdJQ0FnSUhKbGRIVnliaUJ1WlhjZ1VISnZiV2x6WlNnb2NtVnpiMngyWlN3Z2NtVnFaV04wS1NBOVBpQjdYRzRnSUNBZ0lDQWdJQ0FnZG1GeUlHRnlaM01nUFNCdFpTNWZkM0poY0NoQmNuSmhlUzV3Y205MGIzUjVjR1V1YzJ4cFkyVXVZMkZzYkNoaGNtZDFiV1Z1ZEhNcEtUdGNiaUFnSUNBZ0lDQWdJQ0IyWVhJZ2RISmhibk5tWlhKaFlteGxjeUE5SUdGeVozTXVZWEpuY3k1ZlgzUnlZVzV6Wm1WeVlXSnNaWE5mWHp0Y2JpQWdJQ0FnSUNBZ0lDQnBaaUFvZEhKaGJuTm1aWEpoWW14bGN5a2daR1ZzWlhSbElHRnlaM011WVhKbmN5NWZYM1J5WVc1elptVnlZV0pzWlhOZlh6dGNiaUFnSUNBZ0lDQWdJQ0J5WlhOdmJIWmxMbDlmYW1GcGJHVmtYM0JoYVhKelgxOGdQU0J5WldwbFkzUTdYRzRnSUNBZ0lDQWdJQ0FnY21WcVpXTjBMbDlmYW1GcGJHVmtYM0JoYVhKelgxOGdQU0J5WlhOdmJIWmxPMXh1SUNBZ0lDQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCdFpTNWZZMjl1Ym1WamRHbHZiaTVsYldsMEtGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2RIbHdaVG9nWENKallXeHNZbUZqYTF3aUxGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHbGtPaUJwWkN4Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCZmNtbHVaR1Y0T2lCaGNtZE9kVzBzWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWVhKbmN6b2dZWEpuY3l4Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBdkx5QndhV1FnT2lBZ2JXVXVhV1FzWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnY0hKdmJXbHpaVG9nYldVdVgzZHlZWEFvVzNKbGMyOXNkbVVzSUhKbGFtVmpkRjBwWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJSDBzWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJSFJ5WVc1elptVnlZV0pzWlhOY2JpQWdJQ0FnSUNBZ0lDQWdJQ2s3WEc0Z0lDQWdJQ0FnSUNBZ2ZTQmpZWFJqYUNBb1pTa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2NtVnFaV04wS0Z4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0JnUm1GcGJHVmtJSFJ2SUdWNFpXTjBkV1VnY21WdGIzUmxJR05oYkd4aVlXTnJJQ2hwWkRvZ0pIdHBaSDBzSUdGeVowNTFiVG9nSkh0aGNtZE9kVzE5S1M1Z1hHNGdJQ0FnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdmU2s3WEc0Z0lDQWdJQ0I5TzF4dUlDQWdJQ0FnY21WMGRYSnVJSEpsYlc5MFpVTmhiR3hpWVdOck8xeHVJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0J5WlcxdmRHVkRZV3hzWW1GamF5QTlJR1oxYm1OMGFXOXVLQ2tnZTF4dUlDQWdJQ0FnSUNCMllYSWdZWEpuY3lBOUlHMWxMbDkzY21Gd0tFRnljbUY1TG5CeWIzUnZkSGx3WlM1emJHbGpaUzVqWVd4c0tHRnlaM1Z0Wlc1MGN5a3BPMXh1SUNBZ0lDQWdJQ0IyWVhJZ2RISmhibk5tWlhKaFlteGxjeUE5SUdGeVozTXVZWEpuY3k1ZlgzUnlZVzV6Wm1WeVlXSnNaWE5mWHp0Y2JpQWdJQ0FnSUNBZ2FXWWdLSFJ5WVc1elptVnlZV0pzWlhNcElHUmxiR1YwWlNCaGNtZHpMbUZ5WjNNdVgxOTBjbUZ1YzJabGNtRmliR1Z6WDE4N1hHNGdJQ0FnSUNBZ0lISmxkSFZ5YmlCdFpTNWZZMjl1Ym1WamRHbHZiaTVsYldsMEtGeHVJQ0FnSUNBZ0lDQWdJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIUjVjR1U2SUZ3aVkyRnNiR0poWTJ0Y0lpeGNiaUFnSUNBZ0lDQWdJQ0FnSUdsa09pQnBaQ3hjYmlBZ0lDQWdJQ0FnSUNBZ0lGOXlhVzVrWlhnNklHRnlaMDUxYlN4Y2JpQWdJQ0FnSUNBZ0lDQWdJR0Z5WjNNNklHRnlaM05jYmlBZ0lDQWdJQ0FnSUNBZ0lDOHZJSEJwWkNBNklDQnRaUzVwWkZ4dUlDQWdJQ0FnSUNBZ0lIMHNYRzRnSUNBZ0lDQWdJQ0FnZEhKaGJuTm1aWEpoWW14bGMxeHVJQ0FnSUNBZ0lDQXBPMXh1SUNBZ0lDQWdmVHRjYmlBZ0lDQWdJSEpsZEhWeWJpQnlaVzF2ZEdWRFlXeHNZbUZqYXp0Y2JpQWdJQ0I5WEc0Z0lIMWNibHh1SUNBdktpcGNiaUFnSUNvZ1UyVnVaSE1nZEdobElHNXZkR2xtYVdOaGRHbHZiaUJ0WlhOellXZGxJR0Z1WkNCaWNtVmhhM01nZEdobElHTnZibTVsWTNScGIyNWNiaUFnSUNvdlhHNGdJR1JwYzJOdmJtNWxZM1FvS1NCN1hHNGdJQ0FnZEdocGN5NWZZMjl1Ym1WamRHbHZiaTVsYldsMEtIc2dkSGx3WlRvZ1hDSmthWE5qYjI1dVpXTjBYQ0lnZlNrN1hHNGdJQ0FnYzJWMFZHbHRaVzkxZENnb0tTQTlQaUI3WEc0Z0lDQWdJQ0IwYUdsekxsOWpiMjV1WldOMGFXOXVMbVJwYzJOdmJtNWxZM1FvS1R0Y2JpQWdJQ0I5TENBeU1EQXdLVHRjYmlBZ2ZWeHVmVnh1WEc0dktpcGNiaUFxSUZKbFptVnlaVzVqWlZOMGIzSmxJR2x6SUdFZ2MzQmxZMmxoYkNCdlltcGxZM1FnZDJocFkyZ2djM1J2Y21WeklHOTBhR1Z5SUc5aWFtVmpkSE5jYmlBcUlHRnVaQ0J3Y205MmFXUmxjeUIwYUdVZ2NtVm1aWEpsYm1ObGN5QW9iblZ0WW1WeUtTQnBibk4wWldGa0xpQlVhR2x6SUhKbFptVnlaVzVqWlZ4dUlDb2diV0Y1SUhSb1pXNGdZbVVnYzJWdWRDQnZkbVZ5SUdFZ2FuTnZiaTFpWVhObFpDQmpiMjF0ZFc1cFkyRjBhVzl1SUdOb1lXNXVaV3dnS0VsUVExeHVJQ29nZEc4Z1lXNXZkR2hsY2lCT2IyUmxMbXB6SUhCeWIyTmxjM01nYjNJZ1lTQnRaWE56WVdkbElIUnZJSFJvWlNCWGIzSnJaWElwTGlCUGRHaGxjbHh1SUNvZ2MybDBaU0J0WVhrZ2RHaGxiaUJ3Y205MmFXUmxJSFJvWlNCeVpXWmxjbVZ1WTJVZ2FXNGdkR2hsSUhKbGMzQnZibU5sSUcxbGMzTmhaMlZjYmlBcUlHbHRjR3g1YVc1bklIUm9aU0JuYVhabGJpQnZZbXBsWTNRZ2MyaHZkV3hrSUdKbElHRmpkR2wyWVhSbFpDNWNiaUFxWEc0Z0tpQlFjbWx0WVhKNUlIVnpZV2RsSUdadmNpQjBhR1VnVW1WbVpYSmxibU5sVTNSdmNtVWdhWE1nWVNCemRHOXlZV2RsSUdadmNpQjBhR1ZjYmlBcUlHTmhiR3hpWVdOcmN5d2dkMmhwWTJnZ2RHaGxjbVZtYjNKbElHMWhhMlZ6SUdsMElIQnZjM05wWW14bElIUnZJR2x1YVhScFlYUmxJR0ZjYmlBcUlHTmhiR3hpWVdOcklHVjRaV04xZEdsdmJpQmllU0IwYUdVZ2IzQndiM05wZEdVZ2MybDBaU0FvZDJocFkyZ2dibTl5YldGc2JIa2dZMkZ1Ym05MFhHNGdLaUJrYVhKbFkzUnNlU0JsZUdWamRYUmxJR1oxYm1OMGFXOXVjeUJ2ZG1WeUlIUm9aU0JqYjIxdGRXNXBZMkYwYVc5dUlHTm9ZVzV1Wld3cExseHVJQ3BjYmlBcUlFVmhZMmdnYzNSdmNtVmtJRzlpYW1WamRDQmpZVzRnYjI1c2VTQmlaU0JtWlhSamFHVmtJRzl1WTJVZ1lXNWtJR2x6SUc1dmRGeHVJQ29nWVhaaGFXeGhZbXhsSUdadmNpQjBhR1VnYzJWamIyNWtJSFJwYldVdUlFVmhZMmdnYzNSdmNtVmtJRzlpYW1WamRDQnRkWE4wSUdKbFhHNGdLaUJtWlhSamFHVmtMQ0J6YVc1alpTQnZkR2hsY25kcGMyVWdhWFFnZDJsc2JDQnlaVzFoYVc0Z2MzUnZjbVZrSUdadmNtVjJaWElnWVc1a1hHNGdLaUJqYjI1emRXMWxJRzFsYlc5eWVTNWNiaUFxWEc0Z0tpQlRkRzl5WldRZ2IySnFaV04wSUdsdVpHVmpaWE1nWVhKbElITnBiWEJzZVNCMGFHVWdiblZ0WW1WeWN5d2dkMmhwWTJnZ1lYSmxJR2h2ZDJWMlpYSmNiaUFxSUhKbGJHVmhjMlZrSUdGc2IyNW5JSGRwZEdnZ2RHaGxJRzlpYW1WamRITXNJR0Z1WkNCaGNtVWdiR0YwWlhJZ2NtVjFjMlZrSUdGbllXbHVJQ2hwYmx4dUlDb2diM0prWlhJZ2RHOGdjRzl6ZEhCdmJtVWdkR2hsSUc5MlpYSm1iRzkzTENCM2FHbGphQ0J6YUc5MWJHUWdibTkwSUd4cGEyVnNlU0JvWVhCd1pXNHNYRzRnS2lCaWRYUWdZVzU1ZDJGNUtTNWNiaUFxTDF4dVkyeGhjM01nVW1WbVpYSmxibU5sVTNSdmNtVWdlMXh1SUNCamIyNXpkSEoxWTNSdmNpZ3BJSHRjYmlBZ0lDQjBhR2x6TGw5emRHOXlaU0E5SUh0OU95QXZMeUJ6ZEc5eVpXUWdiMkpxWldOMFhHNGdJQ0FnZEdocGN5NWZhVzVrYVdObGN5QTlJRnN3WFRzZ0x5OGdjMjFoYkd4bGMzUWdZWFpoYVd4aFlteGxJR2x1WkdsalpYTmNiaUFnSUNCMGFHbHpMbDl5WldGa2VVaGhibVJzWlhJZ1BTQm1kVzVqZEdsdmJpZ3BJSHQ5TzF4dUlDQWdJSFJvYVhNdVgySjFjM2xJWVc1a2JHVnlJRDBnWm5WdVkzUnBiMjRvS1NCN2ZUdGNiaUFnSUNCMGFHbHpMbDl5WldGa2VVaGhibVJzWlhJb0tUdGNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJqWVd4c0lHaGhibVJzWlhJZ2QyaGxiaUIwYUdVZ2MzUnZjbVVnYVhNZ1pXMXdkSGxjYmlBZ0lDcGNiaUFnSUNvZ1FIQmhjbUZ0SUh0R1ZVNURWRWxQVG4wZ2FXUWdiMllnWVNCb1lXNWtiR1Z5WEc0Z0lDQXFMMXh1SUNCdmJsSmxZV1I1S0hKbFlXUjVTR0Z1Wkd4bGNpa2dlMXh1SUNBZ0lIUm9hWE11WDNKbFlXUjVTR0Z1Wkd4bGNpQTlJSEpsWVdSNVNHRnVaR3hsY2lCOGZDQm1kVzVqZEdsdmJpZ3BJSHQ5TzF4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlHTmhiR3dnYUdGdVpHeGxjaUIzYUdWdUlIUm9aU0J6ZEc5eVpTQnBjeUJ1YjNRZ1pXMXdkSGxjYmlBZ0lDcGNiaUFnSUNvZ1FIQmhjbUZ0SUh0R1ZVNURWRWxQVG4wZ2FXUWdiMllnWVNCb1lXNWtiR1Z5WEc0Z0lDQXFMMXh1SUNCdmJrSjFjM2tvWW5WemVVaGhibVJzWlhJcElIdGNiaUFnSUNCMGFHbHpMbDlpZFhONVNHRnVaR3hsY2lBOUlHSjFjM2xJWVc1a2JHVnlJSHg4SUdaMWJtTjBhVzl1S0NrZ2UzMDdYRzRnSUgxY2JseHVJQ0F2S2lwY2JpQWdJQ29nWjJWMElIUm9aU0JzWlc1bmRHZ2diMllnZEdobElITjBiM0psWEc0Z0lDQXFYRzRnSUNBcUwxeHVJQ0JuWlhSVGRHRmpheWdwSUh0Y2JpQWdJQ0J5WlhSMWNtNGdUMkpxWldOMExtdGxlWE1vZEdocGN5NWZjM1J2Y21VcExteGxibWQwYUR0Y2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQkFablZ1WTNScGIyNGdYMmRsYmtsa0tDa2daMlZ1WlhKaGRHVnpJSFJvWlNCdVpYY2djbVZtWlhKbGJtTmxJR2xrWEc0Z0lDQXFYRzRnSUNBcUlFQnlaWFIxY201eklIdE9kVzFpWlhKOUlITnRZV3hzWlhOMElHRjJZV2xzWVdKc1pTQnBaQ0JoYm1RZ2NtVnpaWEoyWlhNZ2FYUmNiaUFnSUNvdlhHNGdJRjluWlc1SlpDZ3BJSHRjYmlBZ0lDQjJZWElnYVdRN1hHNGdJQ0FnYVdZZ0tIUm9hWE11WDJsdVpHbGpaWE11YkdWdVozUm9JRDA5UFNBeEtTQjdYRzRnSUNBZ0lDQnBaQ0E5SUhSb2FYTXVYMmx1WkdsalpYTmJNRjByS3p0Y2JpQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdhV1FnUFNCMGFHbHpMbDlwYm1ScFkyVnpMbk5vYVdaMEtDazdYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2NtVjBkWEp1SUdsa08xeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRkpsYkdWaGMyVnpJSFJvWlNCbmFYWmxiaUJ5WldabGNtVnVZMlVnYVdRZ2MyOGdkR2hoZENCcGRDQjNhV3hzSUdKbElHRjJZV2xzWVdKc1pTQmllVnh1SUNBZ0tpQmhibTkwYUdWeUlHOWlhbVZqZENCemRHOXlaV1JjYmlBZ0lDcGNiaUFnSUNvZ1FIQmhjbUZ0SUh0T2RXMWlaWEo5SUdsa0lIUnZJSEpsYkdWaGMyVmNiaUFnSUNvdlhHNGdJRjl5Wld4bFlYTmxTV1FvYVdRcElIdGNiaUFnSUNCbWIzSWdLSFpoY2lCcElEMGdNRHNnYVNBOElIUm9hWE11WDJsdVpHbGpaWE11YkdWdVozUm9PeUJwS3lzcElIdGNiaUFnSUNBZ0lHbG1JQ2hwWkNBOElIUm9hWE11WDJsdVpHbGpaWE5iYVYwcElIdGNiaUFnSUNBZ0lDQWdkR2hwY3k1ZmFXNWthV05sY3k1emNHeHBZMlVvYVN3Z01Dd2dhV1FwTzF4dUlDQWdJQ0FnSUNCaWNtVmhhenRjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlYRzVjYmlBZ0lDQXZMeUJqYkdWaGJtbHVaeTExY0NCMGFHVWdjMlZ4ZFdWdVkyVWdkR0ZwYkZ4dUlDQWdJR1p2Y2lBb2FTQTlJSFJvYVhNdVgybHVaR2xqWlhNdWJHVnVaM1JvSUMwZ01Uc2dhU0ErUFNBd095QnBMUzBwSUh0Y2JpQWdJQ0FnSUdsbUlDaDBhR2x6TGw5cGJtUnBZMlZ6VzJsZElDMGdNU0E5UFQwZ2RHaHBjeTVmYVc1a2FXTmxjMXRwSUMwZ01WMHBJSHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWZhVzVrYVdObGN5NXdiM0FvS1R0Y2JpQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUdKeVpXRnJPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lIMWNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJUZEc5eVpYTWdkR2hsSUdkcGRtVnVJRzlpYW1WamRDQmhibVFnY21WMGRYSnVjeUIwYUdVZ2NtVm1aWEp1WTJVZ2FXUWdhVzV6ZEdWaFpGeHVJQ0FnS2x4dUlDQWdLaUJBY0dGeVlXMGdlMDlpYW1WamRIMGdiMkpxSUhSdklITjBiM0psWEc0Z0lDQXFYRzRnSUNBcUlFQnlaWFIxY201eklIdE9kVzFpWlhKOUlISmxabVZ5Wlc1alpTQnBaQ0J2WmlCMGFHVWdjM1J2Y21Wa0lHOWlhbVZqZEZ4dUlDQWdLaTljYmlBZ2NIVjBLRzlpYWlrZ2UxeHVJQ0FnSUdsbUlDaDBhR2x6TGw5aWRYTjVTR0Z1Wkd4bGNpQW1KaUJQWW1wbFkzUXVhMlY1Y3loMGFHbHpMbDl6ZEc5eVpTa3ViR1Z1WjNSb0lEMDlQU0F3S1NCN1hHNGdJQ0FnSUNCMGFHbHpMbDlpZFhONVNHRnVaR3hsY2lncE8xeHVJQ0FnSUgxY2JpQWdJQ0IyWVhJZ2FXUWdQU0IwYUdsekxsOW5aVzVKWkNncE8xeHVJQ0FnSUhSb2FYTXVYM04wYjNKbFcybGtYU0E5SUc5aWFqdGNiaUFnSUNCeVpYUjFjbTRnYVdRN1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dVbVYwY21sbGRtVnpJSEJ5WlhacGIzVnpiSGtnYzNSdmNtVmtJRzlpYW1WamRDQmhibVFnY21Wc1pXRnpaWE1nYVhSeklISmxabVZ5Wlc1alpWeHVJQ0FnS2x4dUlDQWdLaUJBY0dGeVlXMGdlMDUxYldKbGNuMGdhV1FnYjJZZ1lXNGdiMkpxWldOMElIUnZJSEpsZEhKcFpYWmxYRzRnSUNBcUwxeHVJQ0JtWlhSamFDaHBaQ2tnZTF4dUlDQWdJSFpoY2lCdlltb2dQU0IwYUdsekxsOXpkRzl5WlZ0cFpGMDdYRzRnSUNBZ2FXWWdLRzlpYWlBbUppQWhiMkpxTGw5ZmNtVnRiM1JsWDIxbGRHaHZaQ2tnZTF4dUlDQWdJQ0FnWkdWc1pYUmxJSFJvYVhNdVgzTjBiM0psVzJsa1hUdGNiaUFnSUNBZ0lIUm9hWE11WDNKbGJHVmhjMlZKWkNocFpDazdYRzRnSUNBZ0lDQnBaaUFvZEdocGN5NWZjbVZoWkhsSVlXNWtiR1Z5SUNZbUlFOWlhbVZqZEM1clpYbHpLSFJvYVhNdVgzTjBiM0psS1M1c1pXNW5kR2dnUFQwOUlEQXBJSHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWZjbVZoWkhsSVlXNWtiR1Z5S0NrN1hHNGdJQ0FnSUNCOVhHNGdJQ0FnZlZ4dUlDQWdJR2xtSUNodlltb2dKaVlnYjJKcUxsOWZhbUZwYkdWa1gzQmhhWEp6WDE4cElIdGNiaUFnSUNBZ0lHTnZibk4wSUY5cFpDQTlJR2RsZEV0bGVVSjVWbUZzZFdVb2RHaHBjeTVmYzNSdmNtVXNJRzlpYWk1ZlgycGhhV3hsWkY5d1lXbHljMTlmS1R0Y2JpQWdJQ0FnSUhSb2FYTXVabVYwWTJnb1gybGtLVHRjYmlBZ0lDQjlYRzRnSUNBZ2NtVjBkWEp1SUc5aWFqdGNiaUFnZlZ4dWZWeHVJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCT3pzN08wRkJTVUU3UVVGRlFUdEJRVVZCTzBGQlEwRTdRVUZIUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPenM3T3pzN096czdPMEZCVVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVkQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVVpCTzBGQlNVRTdRVUZEUVRzN096czdPenM3TzBGQlVVRTdRVUZEUVR0QlFVTkJPMEZCUlVFN096czdPMEZCUjBFN1FVRkRRVHRCUVVOQk8wRkJSVUU3T3pzN096czdPMEZCVFVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUlVFN096czdPenRCUVVsQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlJVRTdPenRCUVVkQk8wRkJRMEU3UVVGRFFUdEJRVVJCTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVVpCTzBGQlNVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkdRVHRCUVVsQk8wRkJRMEU3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZHUVR0QlFVbEJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRlFUdEJRVUZCTzBGQlFVRTdRVUZEUVR0QlFVVkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGR1FUdEJRVWxCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUjBFN1FVRkRRVHRCUVVkQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVbEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkhRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVUZCTzBGQlNVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJSMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVWQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRMEU3UVVGRlFUczdPenM3TzBGQlNVRTdRVUZEUVR0QlFVRkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVbEJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZLUVR0QlFVMUJPMEZCUlVFN096czdPenM3UVVGTFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVWQk96czdPenM3T3pzN096czdRVUZWUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVWQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRk1RVHRCUVZOQk8wRkJRMEU3UVVGRFFUdEJRVWxCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJSVUU3T3pzN096dEJRVWxCTzBGQlEwRTdRVUZCUVR0QlFVRkJPMEZCUTBFN1FVRkZRVHM3T3pzN096czdPenM3UVVGVlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJSa0U3UVVGTFFUdEJRVU5CTzBGQlJrRTdRVUZMUVR0QlFVZEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRklRVHRCUVV0Qk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlMwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJTRUU3UVVGTFFUdEJRVU5CTzBGQlVFRTdRVUZWUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCU0VFN1FVRkxRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVoQk8wRkJTMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVaEJPMEZCUzBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGSlFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZLUVR0QlFVMUJPMEZCUTBFN1FVRkRRVHRCUVVsQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVXBCTzBGQlRVRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVaEJPMEZCUzBFN1FVRkZRVHRCUVZKQk8wRkJiVUpCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVOQk8wRkJSVUU3UVVGU1FUdEJRVlZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJTVUU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGTFFUdEJRVU5CTzBGQlEwRTdRVUZKUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZIUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGTFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUlVFN096czdPenM3T3pzN096czdRVUZYUVR0QlFVTkJPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVVkJPenM3T3pzN096czdPenM3T3pzN1FVRmhRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVTVCTzBGQlZVRTdRVUZEUVR0QlFVZEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkRRVHRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZNUVR0QlFWTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRlFUczdPenM3UVVGSFFUdEJRVU5CTzBGQlFVRTdRVUZCUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRWFo1UWtFN1FVRjVlVUpCT3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdRVUYxUWtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJSVUU3T3pzN096czdRVUZMUVR0QlFVTkJPMEZCUTBFN1FVRkZRVHM3T3pzN096dEJRVXRCTzBGQlEwRTdRVUZEUVR0QlFVVkJPenM3T3pzN1FVRkpRVHRCUVVOQk8wRkJRMEU3UVVGRlFUczdPenM3T3p0QlFVdEJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkZRVHM3T3pzN096czdRVUZOUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZGUVRzN096czdPenM3TzBGQlQwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZGUVRzN096czdPenRCUVV0Qk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVRkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUVVFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQkwwZEJJaXdpYzI5MWNtTmxVbTl2ZENJNklpSjlcXFxcbi8vIyBzb3VyY2VVUkw9d2VicGFjay1pbnRlcm5hbDovLy8uL3NyYy9ycGMuanNcXFxcblxcXCIpO1xcblxcbi8qKiovIH0pLFxcblxcbi8qKiovIFxcXCIuL3NyYy91dGlscy5qc1xcXCI6XFxuLyohKioqKioqKioqKioqKioqKioqKioqKiEqXFxcXFxcbiAgISoqKiAuL3NyYy91dGlscy5qcyAqKiohXFxuICBcXFxcKioqKioqKioqKioqKioqKioqKioqKi9cXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogcmFuZElkLCBkdHlwZVRvVHlwZWRBcnJheSwgdHlwZWRBcnJheVRvRHR5cGUsIGNhY2hlUmVxdWlyZW1lbnRzLCBzZXR1cFNlcnZpY2VXb3JrZXIsIHVybEpvaW4sIEV2ZW50TWFuYWdlciAqL1xcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcXG5cXG5cXFwidXNlIHN0cmljdFxcXCI7XFxuZXZhbChcXFwiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xcXFxuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcXFxcXFxcInJhbmRJZFxcXFxcXFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJhbmRJZDsgfSk7XFxcXG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFxcXFxcXFwiZHR5cGVUb1R5cGVkQXJyYXlcXFxcXFxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkdHlwZVRvVHlwZWRBcnJheTsgfSk7XFxcXG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFxcXFxcXFwidHlwZWRBcnJheVRvRHR5cGVcXFxcXFxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB0eXBlZEFycmF5VG9EdHlwZTsgfSk7XFxcXG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFxcXFxcXFwiY2FjaGVSZXF1aXJlbWVudHNcXFxcXFxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjYWNoZVJlcXVpcmVtZW50czsgfSk7XFxcXG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFxcXFxcXFwic2V0dXBTZXJ2aWNlV29ya2VyXFxcXFxcXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2V0dXBTZXJ2aWNlV29ya2VyOyB9KTtcXFxcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXFxcXFxcXCJ1cmxKb2luXFxcXFxcXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdXJsSm9pbjsgfSk7XFxcXG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFxcXFxcXFwiRXZlbnRNYW5hZ2VyXFxcXFxcXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRXZlbnRNYW5hZ2VyOyB9KTtcXFxcbmZ1bmN0aW9uIHJhbmRJZCgpIHtcXFxcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCkgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcXFxcbn1cXFxcbmNvbnN0IGR0eXBlVG9UeXBlZEFycmF5ID0ge1xcXFxuICBpbnQ4OiBcXFxcXFxcIkludDhBcnJheVxcXFxcXFwiLFxcXFxuICBpbnQxNjogXFxcXFxcXCJJbnQxNkFycmF5XFxcXFxcXCIsXFxcXG4gIGludDMyOiBcXFxcXFxcIkludDMyQXJyYXlcXFxcXFxcIixcXFxcbiAgdWludDg6IFxcXFxcXFwiVWludDhBcnJheVxcXFxcXFwiLFxcXFxuICB1aW50MTY6IFxcXFxcXFwiVWludDE2QXJyYXlcXFxcXFxcIixcXFxcbiAgdWludDMyOiBcXFxcXFxcIlVpbnQzMkFycmF5XFxcXFxcXCIsXFxcXG4gIGZsb2F0MzI6IFxcXFxcXFwiRmxvYXQzMkFycmF5XFxcXFxcXCIsXFxcXG4gIGZsb2F0NjQ6IFxcXFxcXFwiRmxvYXQ2NEFycmF5XFxcXFxcXCIsXFxcXG4gIGFycmF5OiBcXFxcXFxcIkFycmF5XFxcXFxcXCJcXFxcbn07XFxcXG5jb25zdCB0eXBlZEFycmF5VG9EdHlwZSA9IHtcXFxcbiAgSW50OEFycmF5OiBcXFxcXFxcImludDhcXFxcXFxcIixcXFxcbiAgSW50MTZBcnJheTogXFxcXFxcXCJpbnQxNlxcXFxcXFwiLFxcXFxuICBJbnQzMkFycmF5OiBcXFxcXFxcImludDMyXFxcXFxcXCIsXFxcXG4gIFVpbnQ4QXJyYXk6IFxcXFxcXFwidWludDhcXFxcXFxcIixcXFxcbiAgVWludDE2QXJyYXk6IFxcXFxcXFwidWludDE2XFxcXFxcXCIsXFxcXG4gIFVpbnQzMkFycmF5OiBcXFxcXFxcInVpbnQzMlxcXFxcXFwiLFxcXFxuICBGbG9hdDMyQXJyYXk6IFxcXFxcXFwiZmxvYXQzMlxcXFxcXFwiLFxcXFxuICBGbG9hdDY0QXJyYXk6IFxcXFxcXFwiZmxvYXQ2NFxcXFxcXFwiLFxcXFxuICBBcnJheTogXFxcXFxcXCJhcnJheVxcXFxcXFwiXFxcXG59O1xcXFxuXFxcXG5mdW5jdGlvbiBjYWNoZVVybEluU2VydmljZVdvcmtlcih1cmwpIHtcXFxcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcXFxcbiAgICBjb25zdCBtZXNzYWdlID0ge1xcXFxuICAgICAgY29tbWFuZDogXFxcXFxcXCJhZGRcXFxcXFxcIixcXFxcbiAgICAgIHVybDogdXJsXFxcXG4gICAgfTtcXFxcblxcXFxuICAgIGlmICghbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIgfHwgIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKSB7XFxcXG4gICAgICByZWplY3QoXFxcXFxcXCJTZXJ2aWNlIHdvcmtlciBpcyBub3Qgc3VwcG9ydGVkLlxcXFxcXFwiKTtcXFxcbiAgICAgIHJldHVybjtcXFxcbiAgICB9XFxcXG5cXFxcbiAgICBjb25zdCBtZXNzYWdlQ2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xcXFxuXFxcXG4gICAgbWVzc2FnZUNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XFxcXG4gICAgICBpZiAoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLmVycm9yKSB7XFxcXG4gICAgICAgIHJlamVjdChldmVudC5kYXRhLmVycm9yKTtcXFxcbiAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgIHJlc29sdmUoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLnJlc3VsdCk7XFxcXG4gICAgICB9XFxcXG4gICAgfTtcXFxcblxcXFxuICAgIGlmIChuYXZpZ2F0b3Iuc2VydmljZVdvcmtlciAmJiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XFxcXG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFttZXNzYWdlQ2hhbm5lbC5wb3J0Ml0pO1xcXFxuICAgIH0gZWxzZSB7XFxcXG4gICAgICByZWplY3QoXFxcXFxcXCJTZXJ2aWNlIHdvcmtlciBjb250cm9sbGVyIGlzIG5vdCBhdmFpbGFibGVcXFxcXFxcIik7XFxcXG4gICAgfVxcXFxuICB9KTtcXFxcbn1cXFxcblxcXFxuYXN5bmMgZnVuY3Rpb24gY2FjaGVSZXF1aXJlbWVudHMocmVxdWlyZW1lbnRzKSB7XFxcXG4gIGlmICghQXJyYXkuaXNBcnJheShyZXF1aXJlbWVudHMpKSB7XFxcXG4gICAgcmVxdWlyZW1lbnRzbS5jb2RlLnJlcXVpcmVtZW50cyA9IFtyZXF1aXJlbWVudHNdO1xcXFxuICB9XFxcXG5cXFxcbiAgaWYgKHJlcXVpcmVtZW50cyAmJiByZXF1aXJlbWVudHMubGVuZ3RoID4gMCkge1xcXFxuICAgIGZvciAobGV0IHJlcSBvZiByZXF1aXJlbWVudHMpIHtcXFxcbiAgICAgIC8vcmVtb3ZlIHByZWZpeFxcXFxuICAgICAgaWYgKHJlcS5zdGFydHNXaXRoKFxcXFxcXFwianM6XFxcXFxcXCIpKSByZXEgPSByZXEuc2xpY2UoMyk7XFxcXG4gICAgICBpZiAocmVxLnN0YXJ0c1dpdGgoXFxcXFxcXCJjc3M6XFxcXFxcXCIpKSByZXEgPSByZXEuc2xpY2UoNCk7XFxcXG4gICAgICBpZiAocmVxLnN0YXJ0c1dpdGgoXFxcXFxcXCJjYWNoZTpcXFxcXFxcIikpIHJlcSA9IHJlcS5zbGljZSg2KTtcXFxcbiAgICAgIGlmICghcmVxLnN0YXJ0c1dpdGgoXFxcXFxcXCJodHRwXFxcXFxcXCIpKSBjb250aW51ZTtcXFxcbiAgICAgIGF3YWl0IGNhY2hlVXJsSW5TZXJ2aWNlV29ya2VyKHJlcSkuY2F0Y2goZSA9PiB7XFxcXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XFxcXG4gICAgICB9KTtcXFxcbiAgICB9XFxcXG4gIH1cXFxcbn1cXFxcbmZ1bmN0aW9uIHNldHVwU2VydmljZVdvcmtlcih0YXJnZXRPcmlnaW4sIGNhY2hlQ2FsbGJhY2spIHtcXFxcbiAgLy8gcmVnaXN0ZXIgc2VydmljZSB3b3JrZXIgZm9yIG9mZmxpbmUgYWNjZXNzXFxcXG4gIGlmIChcXFxcXFxcInNlcnZpY2VXb3JrZXJcXFxcXFxcIiBpbiBuYXZpZ2F0b3IpIHtcXFxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcXFxcXFxcImxvYWRcXFxcXFxcIiwgZnVuY3Rpb24gKCkge1xcXFxuICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoXFxcXFxcXCIvcGx1Z2luLXNlcnZpY2Utd29ya2VyLmpzXFxcXFxcXCIpLnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xcXFxuICAgICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcXFxcbiAgICAgICAgY29uc29sZS5sb2coXFxcXFxcXCJTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6IFxcXFxcXFwiLCByZWdpc3RyYXRpb24uc2NvcGUpO1xcXFxuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xcXFxuICAgICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXFxcXG4gICAgICAgIGNvbnNvbGUubG9nKFxcXFxcXFwiU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiBcXFxcXFxcIiwgZXJyKTtcXFxcbiAgICAgIH0pO1xcXFxuICAgICAgdGFyZ2V0T3JpZ2luID0gdGFyZ2V0T3JpZ2luIHx8IFxcXFxcXFwiKlxcXFxcXFwiO1xcXFxuICAgICAgY2FjaGVDYWxsYmFjayA9IGNhY2hlQ2FsbGJhY2sgfHwgY2FjaGVSZXF1aXJlbWVudHM7XFxcXG5cXFxcbiAgICAgIGlmIChjYWNoZUNhbGxiYWNrICYmIHR5cGVvZiBjYWNoZUNhbGxiYWNrICE9PSBcXFxcXFxcImZ1bmN0aW9uXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxcXFxcXFwiY29uZmlnLmNhY2hlX3JlcXVpcmVtZW50cyBtdXN0IGJlIGEgZnVuY3Rpb25cXFxcXFxcIik7XFxcXG4gICAgICB9XFxcXG5cXFxcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxcXFxcXFwibWVzc2FnZVxcXFxcXFwiLCBmdW5jdGlvbiAoZSkge1xcXFxuICAgICAgICBpZiAodGFyZ2V0T3JpZ2luID09PSBcXFxcXFxcIipcXFxcXFxcIiB8fCBlLm9yaWdpbiA9PT0gdGFyZ2V0T3JpZ2luKSB7XFxcXG4gICAgICAgICAgY29uc3QgbSA9IGUuZGF0YTtcXFxcblxcXFxuICAgICAgICAgIGlmIChtLnR5cGUgPT09IFxcXFxcXFwiY2FjaGVSZXF1aXJlbWVudHNcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgY2FjaGVDYWxsYmFjayhtLnJlcXVpcmVtZW50cyk7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9XFxcXG4gICAgICB9KTtcXFxcbiAgICB9KTtcXFxcbiAgfVxcXFxufSAvLyNTb3VyY2UgaHR0cHM6Ly9iaXQubHkvMm5lV2ZKMlxcXFxuXFxcXG5mdW5jdGlvbiB1cmxKb2luKC4uLmFyZ3MpIHtcXFxcbiAgcmV0dXJuIGFyZ3Muam9pbihcXFxcXFxcIi9cXFxcXFxcIikucmVwbGFjZSgvW1xcXFxcXFxcL10rL2csIFxcXFxcXFwiL1xcXFxcXFwiKS5yZXBsYWNlKC9eKC4rKTpcXFxcXFxcXC8vLCBcXFxcXFxcIiQxOi8vXFxcXFxcXCIpLnJlcGxhY2UoL15maWxlOi8sIFxcXFxcXFwiZmlsZTovXFxcXFxcXCIpLnJlcGxhY2UoL1xcXFxcXFxcLyhcXFxcXFxcXD98JnwjW14hXSkvZywgXFxcXFxcXCIkMVxcXFxcXFwiKS5yZXBsYWNlKC9cXFxcXFxcXD8vZywgXFxcXFxcXCImXFxcXFxcXCIpLnJlcGxhY2UoXFxcXFxcXCImXFxcXFxcXCIsIFxcXFxcXFwiP1xcXFxcXFwiKTtcXFxcbn1cXFxcbmNsYXNzIEV2ZW50TWFuYWdlciB7XFxcXG4gIGNvbnN0cnVjdG9yKGRlYnVnKSB7XFxcXG4gICAgdGhpcy5fZXZlbnRfaGFuZGxlcnMgPSB7fTtcXFxcbiAgICB0aGlzLl9vbmNlX2hhbmRsZXJzID0ge307XFxcXG4gICAgdGhpcy5fZGVidWcgPSBkZWJ1ZztcXFxcbiAgfVxcXFxuXFxcXG4gIG9uKGV2ZW50LCBoYW5kbGVyKSB7XFxcXG4gICAgaWYgKCF0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0pIHtcXFxcbiAgICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XSA9IFtdO1xcXFxuICAgIH1cXFxcblxcXFxuICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xcXFxuICB9XFxcXG5cXFxcbiAgb25jZShldmVudCwgaGFuZGxlcikge1xcXFxuICAgIGhhbmRsZXIuX19fZXZlbnRfcnVuX29uY2UgPSB0cnVlO1xcXFxuICAgIHRoaXMub24oZXZlbnQsIGhhbmRsZXIpO1xcXFxuICB9XFxcXG5cXFxcbiAgb2ZmKGV2ZW50LCBoYW5kbGVyKSB7XFxcXG4gICAgaWYgKCFldmVudCAmJiAhaGFuZGxlcikge1xcXFxuICAgICAgLy8gcmVtb3ZlIGFsbCBldmVudHMgaGFuZGxlcnNcXFxcbiAgICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzID0ge307XFxcXG4gICAgfSBlbHNlIGlmIChldmVudCAmJiAhaGFuZGxlcikge1xcXFxuICAgICAgLy8gcmVtb3ZlIGFsbCBoYW5sZGVycyBmb3IgdGhlIGV2ZW50XFxcXG4gICAgICBpZiAodGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdKSB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0gPSBbXTtcXFxcbiAgICB9IGVsc2Uge1xcXFxuICAgICAgLy8gcmVtb3ZlIGEgc3BlY2lmaWMgaGFuZGxlclxcXFxuICAgICAgaWYgKHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XSkge1xcXFxuICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0uaW5kZXhPZihoYW5kbGVyKTtcXFxcblxcXFxuICAgICAgICBpZiAoaWR4ID49IDApIHtcXFxcbiAgICAgICAgICB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0uc3BsaWNlKGlkeCwgMSk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH1cXFxcbiAgICB9XFxcXG4gIH1cXFxcblxcXFxuICBfZmlyZShldmVudCwgZGF0YSkge1xcXFxuICAgIGlmICh0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0pIHtcXFxcbiAgICAgIHZhciBpID0gdGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdLmxlbmd0aDtcXFxcblxcXFxuICAgICAgd2hpbGUgKGktLSkge1xcXFxuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdW2ldO1xcXFxuXFxcXG4gICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgaGFuZGxlcihkYXRhKTtcXFxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xcXFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XFxcXG4gICAgICAgIH0gZmluYWxseSB7XFxcXG4gICAgICAgICAgaWYgKGhhbmRsZXIuX19fZXZlbnRfcnVuX29uY2UpIHtcXFxcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaSwgMSk7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9XFxcXG4gICAgICB9XFxcXG4gICAgfSBlbHNlIHtcXFxcbiAgICAgIGlmICh0aGlzLl9kZWJ1Zykge1xcXFxuICAgICAgICBjb25zb2xlLndhcm4oXFxcXFxcXCJ1bmhhbmRsZWQgZXZlbnRcXFxcXFxcIiwgZXZlbnQsIGRhdGEpO1xcXFxuICAgICAgfVxcXFxuICAgIH1cXFxcbiAgfVxcXFxuXFxcXG59Ly8jIHNvdXJjZVVSTD1bbW9kdWxlXVxcXFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lMaTl6Y21NdmRYUnBiSE11YW5NdWFuTWlMQ0p6YjNWeVkyVnpJanBiSW5kbFluQmhZMnM2THk5cGJXcHZlVkpRUXk5emNtTXZkWFJwYkhNdWFuTS9ZVE13TkNKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SmxlSEJ2Y25RZ1puVnVZM1JwYjI0Z2NtRnVaRWxrS0NrZ2UxeHVJQ0J5WlhSMWNtNGdLRnh1SUNBZ0lFMWhkR2d1Y21GdVpHOXRLQ2xjYmlBZ0lDQWdJQzUwYjFOMGNtbHVaeWd6TmlsY2JpQWdJQ0FnSUM1emRXSnpkSElvTWl3Z01UQXBJQ3NnYm1WM0lFUmhkR1VvS1M1blpYUlVhVzFsS0NsY2JpQWdLVHRjYm4xY2JseHVaWGh3YjNKMElHTnZibk4wSUdSMGVYQmxWRzlVZVhCbFpFRnljbUY1SUQwZ2UxeHVJQ0JwYm5RNE9pQmNJa2x1ZERoQmNuSmhlVndpTEZ4dUlDQnBiblF4TmpvZ1hDSkpiblF4TmtGeWNtRjVYQ0lzWEc0Z0lHbHVkRE15T2lCY0lrbHVkRE15UVhKeVlYbGNJaXhjYmlBZ2RXbHVkRGc2SUZ3aVZXbHVkRGhCY25KaGVWd2lMRnh1SUNCMWFXNTBNVFk2SUZ3aVZXbHVkREUyUVhKeVlYbGNJaXhjYmlBZ2RXbHVkRE15T2lCY0lsVnBiblF6TWtGeWNtRjVYQ0lzWEc0Z0lHWnNiMkYwTXpJNklGd2lSbXh2WVhRek1rRnljbUY1WENJc1hHNGdJR1pzYjJGME5qUTZJRndpUm14dllYUTJORUZ5Y21GNVhDSXNYRzRnSUdGeWNtRjVPaUJjSWtGeWNtRjVYQ0pjYm4wN1hHNWxlSEJ2Y25RZ1kyOXVjM1FnZEhsd1pXUkJjbkpoZVZSdlJIUjVjR1VnUFNCN1hHNGdJRWx1ZERoQmNuSmhlVG9nWENKcGJuUTRYQ0lzWEc0Z0lFbHVkREUyUVhKeVlYazZJRndpYVc1ME1UWmNJaXhjYmlBZ1NXNTBNekpCY25KaGVUb2dYQ0pwYm5Rek1sd2lMRnh1SUNCVmFXNTBPRUZ5Y21GNU9pQmNJblZwYm5RNFhDSXNYRzRnSUZWcGJuUXhOa0Z5Y21GNU9pQmNJblZwYm5ReE5sd2lMRnh1SUNCVmFXNTBNekpCY25KaGVUb2dYQ0oxYVc1ME16SmNJaXhjYmlBZ1JteHZZWFF6TWtGeWNtRjVPaUJjSW1ac2IyRjBNekpjSWl4Y2JpQWdSbXh2WVhRMk5FRnljbUY1T2lCY0ltWnNiMkYwTmpSY0lpeGNiaUFnUVhKeVlYazZJRndpWVhKeVlYbGNJbHh1ZlR0Y2JseHVablZ1WTNScGIyNGdZMkZqYUdWVmNteEpibE5sY25acFkyVlhiM0pyWlhJb2RYSnNLU0I3WEc0Z0lISmxkSFZ5YmlCdVpYY2dVSEp2YldselpTaG1kVzVqZEdsdmJpaHlaWE52YkhabExDQnlaV3BsWTNRcElIdGNiaUFnSUNCamIyNXpkQ0J0WlhOellXZGxJRDBnZTF4dUlDQWdJQ0FnWTI5dGJXRnVaRG9nWENKaFpHUmNJaXhjYmlBZ0lDQWdJSFZ5YkRvZ2RYSnNYRzRnSUNBZ2ZUdGNiaUFnSUNCcFppQW9JVzVoZG1sbllYUnZjaTV6WlhKMmFXTmxWMjl5YTJWeUlIeDhJQ0Z1WVhacFoyRjBiM0l1YzJWeWRtbGpaVmR2Y210bGNpNXlaV2RwYzNSbGNpa2dlMXh1SUNBZ0lDQWdjbVZxWldOMEtGd2lVMlZ5ZG1salpTQjNiM0pyWlhJZ2FYTWdibTkwSUhOMWNIQnZjblJsWkM1Y0lpazdYRzRnSUNBZ0lDQnlaWFIxY200N1hHNGdJQ0FnZlZ4dUlDQWdJR052Ym5OMElHMWxjM05oWjJWRGFHRnVibVZzSUQwZ2JtVjNJRTFsYzNOaFoyVkRhR0Z1Ym1Wc0tDazdYRzRnSUNBZ2JXVnpjMkZuWlVOb1lXNXVaV3d1Y0c5eWRERXViMjV0WlhOellXZGxJRDBnWm5WdVkzUnBiMjRvWlhabGJuUXBJSHRjYmlBZ0lDQWdJR2xtSUNobGRtVnVkQzVrWVhSaElDWW1JR1YyWlc1MExtUmhkR0V1WlhKeWIzSXBJSHRjYmlBZ0lDQWdJQ0FnY21WcVpXTjBLR1YyWlc1MExtUmhkR0V1WlhKeWIzSXBPMXh1SUNBZ0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lDQWdjbVZ6YjJ4MlpTaGxkbVZ1ZEM1a1lYUmhJQ1ltSUdWMlpXNTBMbVJoZEdFdWNtVnpkV3gwS1R0Y2JpQWdJQ0FnSUgxY2JpQWdJQ0I5TzF4dVhHNGdJQ0FnYVdZZ0tHNWhkbWxuWVhSdmNpNXpaWEoyYVdObFYyOXlhMlZ5SUNZbUlHNWhkbWxuWVhSdmNpNXpaWEoyYVdObFYyOXlhMlZ5TG1OdmJuUnliMnhzWlhJcElIdGNiaUFnSUNBZ0lHNWhkbWxuWVhSdmNpNXpaWEoyYVdObFYyOXlhMlZ5TG1OdmJuUnliMnhzWlhJdWNHOXpkRTFsYzNOaFoyVW9iV1Z6YzJGblpTd2dXMXh1SUNBZ0lDQWdJQ0J0WlhOellXZGxRMmhoYm01bGJDNXdiM0owTWx4dUlDQWdJQ0FnWFNrN1hHNGdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJSEpsYW1WamRDaGNJbE5sY25acFkyVWdkMjl5YTJWeUlHTnZiblJ5YjJ4c1pYSWdhWE1nYm05MElHRjJZV2xzWVdKc1pWd2lLVHRjYmlBZ0lDQjlYRzRnSUgwcE8xeHVmVnh1WEc1bGVIQnZjblFnWVhONWJtTWdablZ1WTNScGIyNGdZMkZqYUdWU1pYRjFhWEpsYldWdWRITW9jbVZ4ZFdseVpXMWxiblJ6S1NCN1hHNGdJR2xtSUNnaFFYSnlZWGt1YVhOQmNuSmhlU2h5WlhGMWFYSmxiV1Z1ZEhNcEtTQjdYRzRnSUNBZ2NtVnhkV2x5WlcxbGJuUnpiUzVqYjJSbExuSmxjWFZwY21WdFpXNTBjeUE5SUZ0eVpYRjFhWEpsYldWdWRITmRPMXh1SUNCOVhHNGdJR2xtSUNoeVpYRjFhWEpsYldWdWRITWdKaVlnY21WeGRXbHlaVzFsYm5SekxteGxibWQwYUNBK0lEQXBJSHRjYmlBZ0lDQm1iM0lnS0d4bGRDQnlaWEVnYjJZZ2NtVnhkV2x5WlcxbGJuUnpLU0I3WEc0Z0lDQWdJQ0F2TDNKbGJXOTJaU0J3Y21WbWFYaGNiaUFnSUNBZ0lHbG1JQ2h5WlhFdWMzUmhjblJ6VjJsMGFDaGNJbXB6T2x3aUtTa2djbVZ4SUQwZ2NtVnhMbk5zYVdObEtETXBPMXh1SUNBZ0lDQWdhV1lnS0hKbGNTNXpkR0Z5ZEhOWGFYUm9LRndpWTNOek9sd2lLU2tnY21WeElEMGdjbVZ4TG5Oc2FXTmxLRFFwTzF4dUlDQWdJQ0FnYVdZZ0tISmxjUzV6ZEdGeWRITlhhWFJvS0Z3aVkyRmphR1U2WENJcEtTQnlaWEVnUFNCeVpYRXVjMnhwWTJVb05pazdYRzRnSUNBZ0lDQnBaaUFvSVhKbGNTNXpkR0Z5ZEhOWGFYUm9LRndpYUhSMGNGd2lLU2tnWTI5dWRHbHVkV1U3WEc1Y2JpQWdJQ0FnSUdGM1lXbDBJR05oWTJobFZYSnNTVzVUWlhKMmFXTmxWMjl5YTJWeUtISmxjU2t1WTJGMFkyZ29aU0E5UGlCN1hHNGdJQ0FnSUNBZ0lHTnZibk52YkdVdVpYSnliM0lvWlNrN1hHNGdJQ0FnSUNCOUtUdGNiaUFnSUNCOVhHNGdJSDFjYm4xY2JseHVaWGh3YjNKMElHWjFibU4wYVc5dUlITmxkSFZ3VTJWeWRtbGpaVmR2Y210bGNpaDBZWEpuWlhSUGNtbG5hVzRzSUdOaFkyaGxRMkZzYkdKaFkyc3BJSHRjYmlBZ0x5OGdjbVZuYVhOMFpYSWdjMlZ5ZG1salpTQjNiM0pyWlhJZ1ptOXlJRzltWm14cGJtVWdZV05qWlhOelhHNGdJR2xtSUNoY0luTmxjblpwWTJWWGIzSnJaWEpjSWlCcGJpQnVZWFpwWjJGMGIzSXBJSHRjYmlBZ0lDQjNhVzVrYjNjdVlXUmtSWFpsYm5STWFYTjBaVzVsY2loY0lteHZZV1JjSWl3Z1puVnVZM1JwYjI0b0tTQjdYRzRnSUNBZ0lDQnVZWFpwWjJGMGIzSXVjMlZ5ZG1salpWZHZjbXRsY2k1eVpXZHBjM1JsY2loY0lpOXdiSFZuYVc0dGMyVnlkbWxqWlMxM2IzSnJaWEl1YW5OY0lpa3VkR2hsYmloY2JpQWdJQ0FnSUNBZ1puVnVZM1JwYjI0b2NtVm5hWE4wY21GMGFXOXVLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0x5OGdVbVZuYVhOMGNtRjBhVzl1SUhkaGN5QnpkV05qWlhOelpuVnNYRzRnSUNBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb1hHNGdJQ0FnSUNBZ0lDQWdJQ0JjSWxObGNuWnBZMlZYYjNKclpYSWdjbVZuYVhOMGNtRjBhVzl1SUhOMVkyTmxjM05tZFd3Z2QybDBhQ0J6WTI5d1pUb2dYQ0lzWEc0Z0lDQWdJQ0FnSUNBZ0lDQnlaV2RwYzNSeVlYUnBiMjR1YzJOdmNHVmNiaUFnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNCOUxGeHVJQ0FnSUNBZ0lDQm1kVzVqZEdsdmJpaGxjbklwSUh0Y2JpQWdJQ0FnSUNBZ0lDQXZMeUJ5WldkcGMzUnlZWFJwYjI0Z1ptRnBiR1ZrSURvb1hHNGdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvWENKVFpYSjJhV05sVjI5eWEyVnlJSEpsWjJsemRISmhkR2x2YmlCbVlXbHNaV1E2SUZ3aUxDQmxjbklwTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBcE8xeHVJQ0FnSUNBZ2RHRnlaMlYwVDNKcFoybHVJRDBnZEdGeVoyVjBUM0pwWjJsdUlIeDhJRndpS2x3aU8xeHVJQ0FnSUNBZ1kyRmphR1ZEWVd4c1ltRmpheUE5SUdOaFkyaGxRMkZzYkdKaFkyc2dmSHdnWTJGamFHVlNaWEYxYVhKbGJXVnVkSE03WEc0Z0lDQWdJQ0JwWmlBb1kyRmphR1ZEWVd4c1ltRmpheUFtSmlCMGVYQmxiMllnWTJGamFHVkRZV3hzWW1GamF5QWhQVDBnWENKbWRXNWpkR2x2Ymx3aUtTQjdYRzRnSUNBZ0lDQWdJSFJvY205M0lHNWxkeUJGY25KdmNpaGNJbU52Ym1acFp5NWpZV05vWlY5eVpYRjFhWEpsYldWdWRITWdiWFZ6ZENCaVpTQmhJR1oxYm1OMGFXOXVYQ0lwTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJQ0FnZDJsdVpHOTNMbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9YQ0p0WlhOellXZGxYQ0lzSUdaMWJtTjBhVzl1S0dVcElIdGNiaUFnSUNBZ0lDQWdhV1lnS0hSaGNtZGxkRTl5YVdkcGJpQTlQVDBnWENJcVhDSWdmSHdnWlM1dmNtbG5hVzRnUFQwOUlIUmhjbWRsZEU5eWFXZHBiaWtnZTF4dUlDQWdJQ0FnSUNBZ0lHTnZibk4wSUcwZ1BTQmxMbVJoZEdFN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0cwdWRIbHdaU0E5UFQwZ1hDSmpZV05vWlZKbGNYVnBjbVZ0Wlc1MGMxd2lLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQmpZV05vWlVOaGJHeGlZV05yS0cwdWNtVnhkV2x5WlcxbGJuUnpLVHRjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMHBPMXh1SUNBZ0lIMHBPMXh1SUNCOVhHNTlYRzVjYmk4dkkxTnZkWEpqWlNCb2RIUndjem92TDJKcGRDNXNlUzh5Ym1WWFprb3lYRzVsZUhCdmNuUWdablZ1WTNScGIyNGdkWEpzU205cGJpZ3VMaTVoY21kektTQjdYRzRnSUhKbGRIVnliaUJoY21kelhHNGdJQ0FnTG1wdmFXNG9YQ0l2WENJcFhHNGdJQ0FnTG5KbGNHeGhZMlVvTDF0Y1hDOWRLeTluTENCY0lpOWNJaWxjYmlBZ0lDQXVjbVZ3YkdGalpTZ3ZYaWd1S3lrNlhGd3ZMeXdnWENJa01Ub3ZMMXdpS1Z4dUlDQWdJQzV5WlhCc1lXTmxLQzllWm1sc1pUb3ZMQ0JjSW1acGJHVTZMMXdpS1Z4dUlDQWdJQzV5WlhCc1lXTmxLQzljWEM4b1hGdy9mQ1o4STF0ZUlWMHBMMmNzSUZ3aUpERmNJaWxjYmlBZ0lDQXVjbVZ3YkdGalpTZ3ZYRncvTDJjc0lGd2lKbHdpS1Z4dUlDQWdJQzV5WlhCc1lXTmxLRndpSmx3aUxDQmNJajljSWlrN1hHNTlYRzVjYm1WNGNHOXlkQ0JqYkdGemN5QkZkbVZ1ZEUxaGJtRm5aWElnZTF4dUlDQmpiMjV6ZEhKMVkzUnZjaWhrWldKMVp5a2dlMXh1SUNBZ0lIUm9hWE11WDJWMlpXNTBYMmhoYm1Sc1pYSnpJRDBnZTMwN1hHNGdJQ0FnZEdocGN5NWZiMjVqWlY5b1lXNWtiR1Z5Y3lBOUlIdDlPMXh1SUNBZ0lIUm9hWE11WDJSbFluVm5JRDBnWkdWaWRXYzdYRzRnSUgxY2JpQWdiMjRvWlhabGJuUXNJR2hoYm1Sc1pYSXBJSHRjYmlBZ0lDQnBaaUFvSVhSb2FYTXVYMlYyWlc1MFgyaGhibVJzWlhKelcyVjJaVzUwWFNrZ2UxeHVJQ0FnSUNBZ2RHaHBjeTVmWlhabGJuUmZhR0Z1Wkd4bGNuTmJaWFpsYm5SZElEMGdXMTA3WEc0Z0lDQWdmVnh1SUNBZ0lIUm9hWE11WDJWMlpXNTBYMmhoYm1Sc1pYSnpXMlYyWlc1MFhTNXdkWE5vS0doaGJtUnNaWElwTzF4dUlDQjlYRzRnSUc5dVkyVW9aWFpsYm5Rc0lHaGhibVJzWlhJcElIdGNiaUFnSUNCb1lXNWtiR1Z5TGw5ZlgyVjJaVzUwWDNKMWJsOXZibU5sSUQwZ2RISjFaVHRjYmlBZ0lDQjBhR2x6TG05dUtHVjJaVzUwTENCb1lXNWtiR1Z5S1R0Y2JpQWdmVnh1SUNCdlptWW9aWFpsYm5Rc0lHaGhibVJzWlhJcElIdGNiaUFnSUNCcFppQW9JV1YyWlc1MElDWW1JQ0ZvWVc1a2JHVnlLU0I3WEc0Z0lDQWdJQ0F2THlCeVpXMXZkbVVnWVd4c0lHVjJaVzUwY3lCb1lXNWtiR1Z5YzF4dUlDQWdJQ0FnZEdocGN5NWZaWFpsYm5SZmFHRnVaR3hsY25NZ1BTQjdmVHRjYmlBZ0lDQjlJR1ZzYzJVZ2FXWWdLR1YyWlc1MElDWW1JQ0ZvWVc1a2JHVnlLU0I3WEc0Z0lDQWdJQ0F2THlCeVpXMXZkbVVnWVd4c0lHaGhibXhrWlhKeklHWnZjaUIwYUdVZ1pYWmxiblJjYmlBZ0lDQWdJR2xtSUNoMGFHbHpMbDlsZG1WdWRGOW9ZVzVrYkdWeWMxdGxkbVZ1ZEYwcElIUm9hWE11WDJWMlpXNTBYMmhoYm1Sc1pYSnpXMlYyWlc1MFhTQTlJRnRkTzF4dUlDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQXZMeUJ5WlcxdmRtVWdZU0J6Y0dWamFXWnBZeUJvWVc1a2JHVnlYRzRnSUNBZ0lDQnBaaUFvZEdocGN5NWZaWFpsYm5SZmFHRnVaR3hsY25OYlpYWmxiblJkS1NCN1hHNGdJQ0FnSUNBZ0lHTnZibk4wSUdsa2VDQTlJSFJvYVhNdVgyVjJaVzUwWDJoaGJtUnNaWEp6VzJWMlpXNTBYUzVwYm1SbGVFOW1LR2hoYm1Sc1pYSXBPMXh1SUNBZ0lDQWdJQ0JwWmlBb2FXUjRJRDQ5SURBcElIdGNiaUFnSUNBZ0lDQWdJQ0IwYUdsekxsOWxkbVZ1ZEY5b1lXNWtiR1Z5YzF0bGRtVnVkRjB1YzNCc2FXTmxLR2xrZUN3Z01TazdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlYRzRnSUgxY2JpQWdYMlpwY21Vb1pYWmxiblFzSUdSaGRHRXBJSHRjYmlBZ0lDQnBaaUFvZEdocGN5NWZaWFpsYm5SZmFHRnVaR3hsY25OYlpYWmxiblJkS1NCN1hHNGdJQ0FnSUNCMllYSWdhU0E5SUhSb2FYTXVYMlYyWlc1MFgyaGhibVJzWlhKelcyVjJaVzUwWFM1c1pXNW5kR2c3WEc0Z0lDQWdJQ0IzYUdsc1pTQW9hUzB0S1NCN1hHNGdJQ0FnSUNBZ0lHTnZibk4wSUdoaGJtUnNaWElnUFNCMGFHbHpMbDlsZG1WdWRGOW9ZVzVrYkdWeWMxdGxkbVZ1ZEYxYmFWMDdYRzRnSUNBZ0lDQWdJSFJ5ZVNCN1hHNGdJQ0FnSUNBZ0lDQWdhR0Z1Wkd4bGNpaGtZWFJoS1R0Y2JpQWdJQ0FnSUNBZ2ZTQmpZWFJqYUNBb1pTa2dlMXh1SUNBZ0lDQWdJQ0FnSUdOdmJuTnZiR1V1WlhKeWIzSW9aU2s3WEc0Z0lDQWdJQ0FnSUgwZ1ptbHVZV3hzZVNCN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0doaGJtUnNaWEl1WDE5ZlpYWmxiblJmY25WdVgyOXVZMlVwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJSFJvYVhNdVgyVjJaVzUwWDJoaGJtUnNaWEp6VzJWMlpXNTBYUzV6Y0d4cFkyVW9hU3dnTVNrN1hHNGdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lHbG1JQ2gwYUdsekxsOWtaV0oxWnlrZ2UxeHVJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExuZGhjbTRvWENKMWJtaGhibVJzWldRZ1pYWmxiblJjSWl3Z1pYWmxiblFzSUdSaGRHRXBPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lIMWNiaUFnZlZ4dWZWeHVJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkRRVHRCUVV0Qk8wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGVVFUdEJRVmRCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlZFRTdRVUZEUVR0QlFWZEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGR1FUdEJRVU5CTzBGQlIwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVWRCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZGUVR0QlFVTkJPMEZCU1VFN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlJVRTdRVUZEUVR0QlFWRkJPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlFVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVUZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZCUVR0QlFVTkJPMEZCUTBFN1FVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCZEVSQklpd2ljMjkxY21ObFVtOXZkQ0k2SWlKOVxcXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrLWludGVybmFsOi8vLy4vc3JjL3V0aWxzLmpzXFxcXG5cXFwiKTtcXG5cXG4vKioqLyB9KVxcblxcbi8qKioqKiovIH0pO1wiLCBudWxsKTtcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/plugin.webworker.js\n");

/***/ }),

/***/ "./src/pluginCore.js":
/*!***************************!*\
  !*** ./src/pluginCore.js ***!
  \***************************/
/*! exports provided: connectRPC */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"connectRPC\", function() { return connectRPC; });\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rpc.js */ \"./src/rpc.js\");\n/* harmony import */ var _pluginIframe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pluginIframe.js */ \"./src/pluginIframe.js\");\n/**\n * Core plugin script loaded into the plugin process/thread.\n *\n * Initializes the plugin-site API global methods.\n */\n\n\nfunction connectRPC(connection, config) {\n  config = config || {};\n  const rpc = new _rpc_js__WEBPACK_IMPORTED_MODULE_0__[\"RPC\"](connection, config);\n  rpc.on(\"getInterface\", function () {\n    launchConnected();\n  });\n  rpc.on(\"remoteReady\", function () {\n    const api = rpc.getRemote() || {};\n\n    if (api.export) {\n      throw new Error(\"`export` is a reserved function name\");\n    }\n\n    if (api.onload) {\n      throw new Error(\"`onload` is a reserved function name\");\n    }\n\n    if (api.dispose) {\n      throw new Error(\"`dispose` is a reserved function name\");\n    }\n\n    api.export = function (_interface) {\n      rpc.setInterface(_interface);\n    };\n\n    api.onLoad = function (handler) {\n      handler = checkHandler(handler);\n\n      if (connected) {\n        handler();\n      } else {\n        connectedHandlers.push(handler);\n      }\n    };\n\n    api.dispose = function (_interface) {\n      rpc.disconnect();\n    };\n\n    if (typeof WorkerGlobalScope !== \"undefined\" && self instanceof WorkerGlobalScope) {\n      self.api = api;\n      self.postMessage({\n        type: \"imjoy_remote_api_ready\"\n      });\n    } else if (typeof window) {\n      window.dispatchEvent(new CustomEvent(\"imjoy_remote_api_ready\", {\n        detail: api\n      }));\n    }\n  });\n  let connected = false;\n  const connectedHandlers = [];\n\n  const launchConnected = function () {\n    if (!connected) {\n      connected = true;\n      let handler;\n\n      while (handler = connectedHandlers.pop()) {\n        handler();\n      }\n    }\n  };\n\n  const checkHandler = function (handler) {\n    const type = typeof handler;\n\n    if (type !== \"function\") {\n      const msg = \"A function may only be subsribed to the event, \" + type + \" was provided instead\";\n      throw new Error(msg);\n    }\n\n    return handler;\n  };\n\n  return rpc;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luQ29yZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2ltam95UlBDL3NyYy9wbHVnaW5Db3JlLmpzP2E0NzYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3JlIHBsdWdpbiBzY3JpcHQgbG9hZGVkIGludG8gdGhlIHBsdWdpbiBwcm9jZXNzL3RocmVhZC5cbiAqXG4gKiBJbml0aWFsaXplcyB0aGUgcGx1Z2luLXNpdGUgQVBJIGdsb2JhbCBtZXRob2RzLlxuICovXG5pbXBvcnQgeyBSUEMgfSBmcm9tIFwiLi9ycGMuanNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb24gfSBmcm9tIFwiLi9wbHVnaW5JZnJhbWUuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3RSUEMoY29ubmVjdGlvbiwgY29uZmlnKSB7XG4gIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblxuICBjb25zdCBycGMgPSBuZXcgUlBDKGNvbm5lY3Rpb24sIGNvbmZpZyk7XG4gIHJwYy5vbihcImdldEludGVyZmFjZVwiLCBmdW5jdGlvbigpIHtcbiAgICBsYXVuY2hDb25uZWN0ZWQoKTtcbiAgfSk7XG5cbiAgcnBjLm9uKFwicmVtb3RlUmVhZHlcIiwgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgYXBpID0gcnBjLmdldFJlbW90ZSgpIHx8IHt9O1xuICAgIGlmIChhcGkuZXhwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgZXhwb3J0YCBpcyBhIHJlc2VydmVkIGZ1bmN0aW9uIG5hbWVcIik7XG4gICAgfVxuICAgIGlmIChhcGkub25sb2FkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgb25sb2FkYCBpcyBhIHJlc2VydmVkIGZ1bmN0aW9uIG5hbWVcIik7XG4gICAgfVxuICAgIGlmIChhcGkuZGlzcG9zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYGRpc3Bvc2VgIGlzIGEgcmVzZXJ2ZWQgZnVuY3Rpb24gbmFtZVwiKTtcbiAgICB9XG4gICAgYXBpLmV4cG9ydCA9IGZ1bmN0aW9uKF9pbnRlcmZhY2UpIHtcbiAgICAgIHJwYy5zZXRJbnRlcmZhY2UoX2ludGVyZmFjZSk7XG4gICAgfTtcbiAgICBhcGkub25Mb2FkID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgaGFuZGxlciA9IGNoZWNrSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgIGlmIChjb25uZWN0ZWQpIHtcbiAgICAgICAgaGFuZGxlcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29ubmVjdGVkSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGFwaS5kaXNwb3NlID0gZnVuY3Rpb24oX2ludGVyZmFjZSkge1xuICAgICAgcnBjLmRpc2Nvbm5lY3QoKTtcbiAgICB9O1xuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGVcbiAgICApIHtcbiAgICAgIHNlbGYuYXBpID0gYXBpO1xuICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGU6IFwiaW1qb3lfcmVtb3RlX2FwaV9yZWFkeVwiXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cpIHtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJpbWpveV9yZW1vdGVfYXBpX3JlYWR5XCIsIHsgZGV0YWlsOiBhcGkgfSlcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBsZXQgY29ubmVjdGVkID0gZmFsc2U7XG4gIGNvbnN0IGNvbm5lY3RlZEhhbmRsZXJzID0gW107XG5cbiAgY29uc3QgbGF1bmNoQ29ubmVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFjb25uZWN0ZWQpIHtcbiAgICAgIGNvbm5lY3RlZCA9IHRydWU7XG5cbiAgICAgIGxldCBoYW5kbGVyO1xuICAgICAgd2hpbGUgKChoYW5kbGVyID0gY29ubmVjdGVkSGFuZGxlcnMucG9wKCkpKSB7XG4gICAgICAgIGhhbmRsZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hlY2tIYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25zdCBtc2cgPVxuICAgICAgICBcIkEgZnVuY3Rpb24gbWF5IG9ubHkgYmUgc3Vic3JpYmVkIHRvIHRoZSBldmVudCwgXCIgK1xuICAgICAgICB0eXBlICtcbiAgICAgICAgXCIgd2FzIHByb3ZpZGVkIGluc3RlYWRcIjtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZGxlcjtcbiAgfTtcblxuICByZXR1cm4gcnBjO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pluginCore.js\n");

/***/ }),

/***/ "./src/pluginIframe.js":
/*!*****************************!*\
  !*** ./src/pluginIframe.js ***!
  \*****************************/
/*! exports provided: Connection, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Connection\", function() { return Connection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return setupIframe; });\n/* harmony import */ var _pluginCore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pluginCore.js */ \"./src/pluginCore.js\");\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rpc.js */ \"./src/rpc.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/**\n * Contains the routines loaded by the plugin iframe under web-browser\n * in case when worker failed to initialize\n *\n * Initializes the web environment version of the platform-dependent\n * connection object for the plugin site\n */\n\n\n // Create a new, plain <span> element\n\nfunction _htmlToElement(html) {\n  var template = document.createElement(\"template\");\n  html = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = html;\n  return template.content.firstChild;\n}\n\nvar _importScript = function (url) {\n  //url is URL of external file, implementationCode is the code\n  //to be called from the file, location is the location to\n  //insert the <script> element\n  return new Promise((resolve, reject) => {\n    var scriptTag = document.createElement(\"script\");\n    scriptTag.src = url;\n    scriptTag.type = \"text/javascript\";\n    scriptTag.onload = resolve;\n\n    scriptTag.onreadystatechange = function () {\n      if (this.readyState === \"loaded\" || this.readyState === \"complete\") {\n        resolve();\n      }\n    };\n\n    scriptTag.onerror = reject;\n    document.head.appendChild(scriptTag);\n  });\n}; // support importScripts outside web worker\n\n\nasync function importScripts() {\n  var args = Array.prototype.slice.call(arguments),\n      len = args.length,\n      i = 0;\n\n  for (; i < len; i++) {\n    await _importScript(args[i]);\n  }\n}\n\nclass Connection extends _utils_js__WEBPACK_IMPORTED_MODULE_2__[\"EventManager\"] {\n  constructor(config) {\n    super(config && config.debug);\n    this.config = config || {};\n  }\n\n  connect() {\n    this.config.target_origin = this.config.target_origin || \"*\"; // this will call handleEvent function\n\n    window.addEventListener(\"message\", this);\n    this.emit({\n      type: \"initialized\",\n      config: this.config\n    });\n\n    this._fire(\"connected\");\n  }\n\n  handleEvent(e) {\n    if (e.type === \"message\" && this.config.target_origin === \"*\" || e.origin === this.config.target_origin) {\n      this._fire(e.data.type, e.data);\n    }\n  }\n\n  disconnect() {\n    this._fire(\"beforeDisconnect\");\n\n    window.removeEventListener(\"message\", this);\n\n    this._fire(\"disconnected\");\n  }\n\n  emit(data) {\n    let transferables;\n\n    if (data.__transferables__) {\n      transferables = data.__transferables__;\n      delete data.__transferables__;\n    }\n\n    parent.postMessage(data, this.config.target_origin, transferables);\n  }\n\n  async execute(code) {\n    try {\n      if (code.type === \"requirements\") {\n        if (code.requirements && (Array.isArray(code.requirements) || typeof code.requirements === \"string\")) {\n          try {\n            var link_node;\n            code.requirements = typeof code.requirements === \"string\" ? [code.requirements] : code.requirements;\n\n            if (Array.isArray(code.requirements)) {\n              for (var i = 0; i < code.requirements.length; i++) {\n                if (code.requirements[i].toLowerCase().endsWith(\".css\") || code.requirements[i].startsWith(\"css:\")) {\n                  if (code.requirements[i].startsWith(\"css:\")) {\n                    code.requirements[i] = code.requirements[i].slice(4);\n                  }\n\n                  link_node = document.createElement(\"link\");\n                  link_node.rel = \"stylesheet\";\n                  link_node.href = code.requirements[i];\n                  document.head.appendChild(link_node);\n                } else if (code.requirements[i].toLowerCase().endsWith(\".js\") || code.requirements[i].startsWith(\"js:\")) {\n                  if (code.requirements[i].startsWith(\"js:\")) {\n                    code.requirements[i] = code.requirements[i].slice(3);\n                  }\n\n                  await importScripts(code.requirements[i]);\n                } else if (code.requirements[i].startsWith(\"http\")) {\n                  await importScripts(code.requirements[i]);\n                } else if (code.requirements[i].startsWith(\"cache:\")) {//ignore cache\n                } else {\n                  console.log(\"Unprocessed requirements url: \" + code.requirements[i]);\n                }\n              }\n            } else {\n              throw \"unsupported requirements definition\";\n            }\n          } catch (e) {\n            throw \"failed to import required scripts: \" + code.requirements.toString();\n          }\n        }\n      } else if (code.type === \"script\") {\n        if (code.src) {\n          var script_node = document.createElement(\"script\");\n          script_node.setAttribute(\"type\", code.attrs.type);\n          script_node.setAttribute(\"src\", code.src);\n          document.head.appendChild(script_node);\n        } else {\n          if (code.content && (!code.attrs.type || code.attrs.type === \"text/javascript\")) {\n            // document.addEventListener(\"DOMContentLoaded\", function(){\n            eval(code.content); // });\n          } else {\n            var node = document.createElement(\"script\");\n            node.setAttribute(\"type\", code.attrs.type);\n            node.appendChild(document.createTextNode(code.content));\n            document.body.appendChild(node);\n          }\n        }\n      } else if (code.type === \"style\") {\n        const style_node = document.createElement(\"style\");\n\n        if (code.src) {\n          style_node.src = code.src;\n        }\n\n        style_node.innerHTML = code.content;\n        document.head.appendChild(style_node);\n      } else if (code.type === \"link\") {\n        const link_node_ = document.createElement(\"link\");\n\n        if (code.rel) {\n          link_node_.rel = code.rel;\n        }\n\n        if (code.href) {\n          link_node_.href = code.href;\n        }\n\n        if (code.attrs && code.attrs.type) {\n          link_node_.type = code.attrs.type;\n        }\n\n        document.head.appendChild(link_node_);\n      } else if (code.type === \"html\") {\n        document.body.appendChild(_htmlToElement(code.content));\n      } else {\n        throw \"unsupported code type.\";\n      }\n\n      parent.postMessage({\n        type: \"executed\"\n      }, this.config.target_origin);\n    } catch (e) {\n      console.error(\"failed to execute scripts: \", code, e);\n      parent.postMessage({\n        type: \"executed\",\n        error: e.stack || String(e)\n      }, this.config.target_origin);\n    }\n  }\n\n}\nfunction setupIframe(config) {\n  config = config || {};\n  config.dedicated_thread = false;\n  config.lang = \"javascript\";\n  config.api_version = _rpc_js__WEBPACK_IMPORTED_MODULE_1__[\"API_VERSION\"];\n  const conn = new Connection(config);\n  Object(_pluginCore_js__WEBPACK_IMPORTED_MODULE_0__[\"connectRPC\"])(conn, config);\n  conn.connect();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luSWZyYW1lLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1qb3lSUEMvc3JjL3BsdWdpbklmcmFtZS5qcz9lNmFmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGFpbnMgdGhlIHJvdXRpbmVzIGxvYWRlZCBieSB0aGUgcGx1Z2luIGlmcmFtZSB1bmRlciB3ZWItYnJvd3NlclxuICogaW4gY2FzZSB3aGVuIHdvcmtlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZVxuICpcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWIgZW52aXJvbm1lbnQgdmVyc2lvbiBvZiB0aGUgcGxhdGZvcm0tZGVwZW5kZW50XG4gKiBjb25uZWN0aW9uIG9iamVjdCBmb3IgdGhlIHBsdWdpbiBzaXRlXG4gKi9cbmltcG9ydCB7IGNvbm5lY3RSUEMgfSBmcm9tIFwiLi9wbHVnaW5Db3JlLmpzXCI7XG5pbXBvcnQgeyBBUElfVkVSU0lPTiB9IGZyb20gXCIuL3JwYy5qc1wiO1xuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbi8vIENyZWF0ZSBhIG5ldywgcGxhaW4gPHNwYW4+IGVsZW1lbnRcbmZ1bmN0aW9uIF9odG1sVG9FbGVtZW50KGh0bWwpIHtcbiAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICBodG1sID0gaHRtbC50cmltKCk7IC8vIE5ldmVyIHJldHVybiBhIHRleHQgbm9kZSBvZiB3aGl0ZXNwYWNlIGFzIHRoZSByZXN1bHRcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZDtcbn1cblxudmFyIF9pbXBvcnRTY3JpcHQgPSBmdW5jdGlvbih1cmwpIHtcbiAgLy91cmwgaXMgVVJMIG9mIGV4dGVybmFsIGZpbGUsIGltcGxlbWVudGF0aW9uQ29kZSBpcyB0aGUgY29kZVxuICAvL3RvIGJlIGNhbGxlZCBmcm9tIHRoZSBmaWxlLCBsb2NhdGlvbiBpcyB0aGUgbG9jYXRpb24gdG9cbiAgLy9pbnNlcnQgdGhlIDxzY3JpcHQ+IGVsZW1lbnRcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB2YXIgc2NyaXB0VGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICBzY3JpcHRUYWcuc3JjID0gdXJsO1xuICAgIHNjcmlwdFRhZy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICBzY3JpcHRUYWcub25sb2FkID0gcmVzb2x2ZTtcbiAgICBzY3JpcHRUYWcub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcImxvYWRlZFwiIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNjcmlwdFRhZy5vbmVycm9yID0gcmVqZWN0O1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcbiAgfSk7XG59O1xuXG4vLyBzdXBwb3J0IGltcG9ydFNjcmlwdHMgb3V0c2lkZSB3ZWIgd29ya2VyXG5hc3luYyBmdW5jdGlvbiBpbXBvcnRTY3JpcHRzKCkge1xuICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksXG4gICAgbGVuID0gYXJncy5sZW5ndGgsXG4gICAgaSA9IDA7XG4gIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhd2FpdCBfaW1wb3J0U2NyaXB0KGFyZ3NbaV0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uIGV4dGVuZHMgRXZlbnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnICYmIGNvbmZpZy5kZWJ1Zyk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XG4gIH1cbiAgY29ubmVjdCgpIHtcbiAgICB0aGlzLmNvbmZpZy50YXJnZXRfb3JpZ2luID0gdGhpcy5jb25maWcudGFyZ2V0X29yaWdpbiB8fCBcIipcIjtcbiAgICAvLyB0aGlzIHdpbGwgY2FsbCBoYW5kbGVFdmVudCBmdW5jdGlvblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB0aGlzKTtcbiAgICB0aGlzLmVtaXQoe1xuICAgICAgdHlwZTogXCJpbml0aWFsaXplZFwiLFxuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZ1xuICAgIH0pO1xuICAgIHRoaXMuX2ZpcmUoXCJjb25uZWN0ZWRcIik7XG4gIH1cbiAgaGFuZGxlRXZlbnQoZSkge1xuICAgIGlmIChcbiAgICAgIChlLnR5cGUgPT09IFwibWVzc2FnZVwiICYmIHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4gPT09IFwiKlwiKSB8fFxuICAgICAgZS5vcmlnaW4gPT09IHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW5cbiAgICApIHtcbiAgICAgIHRoaXMuX2ZpcmUoZS5kYXRhLnR5cGUsIGUuZGF0YSk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5fZmlyZShcImJlZm9yZURpc2Nvbm5lY3RcIik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMpO1xuICAgIHRoaXMuX2ZpcmUoXCJkaXNjb25uZWN0ZWRcIik7XG4gIH1cbiAgZW1pdChkYXRhKSB7XG4gICAgbGV0IHRyYW5zZmVyYWJsZXM7XG4gICAgaWYgKGRhdGEuX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgIHRyYW5zZmVyYWJsZXMgPSBkYXRhLl9fdHJhbnNmZXJhYmxlc19fO1xuICAgICAgZGVsZXRlIGRhdGEuX190cmFuc2ZlcmFibGVzX187XG4gICAgfVxuICAgIHBhcmVudC5wb3N0TWVzc2FnZShkYXRhLCB0aGlzLmNvbmZpZy50YXJnZXRfb3JpZ2luLCB0cmFuc2ZlcmFibGVzKTtcbiAgfVxuICBhc3luYyBleGVjdXRlKGNvZGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvZGUudHlwZSA9PT0gXCJyZXF1aXJlbWVudHNcIikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMgJiZcbiAgICAgICAgICAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykgfHxcbiAgICAgICAgICAgIHR5cGVvZiBjb2RlLnJlcXVpcmVtZW50cyA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBsaW5rX25vZGU7XG4gICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50cyA9XG4gICAgICAgICAgICAgIHR5cGVvZiBjb2RlLnJlcXVpcmVtZW50cyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gW2NvZGUucmVxdWlyZW1lbnRzXVxuICAgICAgICAgICAgICAgIDogY29kZS5yZXF1aXJlbWVudHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb2RlLnJlcXVpcmVtZW50cykpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2RlLnJlcXVpcmVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXCIuY3NzXCIpIHx8XG4gICAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwiY3NzOlwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJjc3M6XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldID0gY29kZS5yZXF1aXJlbWVudHNbaV0uc2xpY2UoNCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBsaW5rX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgICAgICAgICAgIGxpbmtfbm9kZS5yZWwgPSBcInN0eWxlc2hlZXRcIjtcbiAgICAgICAgICAgICAgICAgIGxpbmtfbm9kZS5ocmVmID0gY29kZS5yZXF1aXJlbWVudHNbaV07XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmtfbm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXCIuanNcIikgfHxcbiAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJqczpcIilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGlmIChjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwianM6XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUucmVxdWlyZW1lbnRzW2ldID0gY29kZS5yZXF1aXJlbWVudHNbaV0uc2xpY2UoMyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUucmVxdWlyZW1lbnRzW2ldLnN0YXJ0c1dpdGgoXCJjYWNoZTpcIikpIHtcbiAgICAgICAgICAgICAgICAgIC8vaWdub3JlIGNhY2hlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBcIlVucHJvY2Vzc2VkIHJlcXVpcmVtZW50cyB1cmw6IFwiICsgY29kZS5yZXF1aXJlbWVudHNbaV1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBcInVuc3VwcG9ydGVkIHJlcXVpcmVtZW50cyBkZWZpbml0aW9uXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgXCJmYWlsZWQgdG8gaW1wb3J0IHJlcXVpcmVkIHNjcmlwdHM6IFwiICtcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHMudG9TdHJpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29kZS50eXBlID09PSBcInNjcmlwdFwiKSB7XG4gICAgICAgIGlmIChjb2RlLnNyYykge1xuICAgICAgICAgIHZhciBzY3JpcHRfbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgc2NyaXB0X25vZGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBjb2RlLmF0dHJzLnR5cGUpO1xuICAgICAgICAgIHNjcmlwdF9ub2RlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjb2RlLnNyYyk7XG4gICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRfbm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29kZS5jb250ZW50ICYmXG4gICAgICAgICAgICAoIWNvZGUuYXR0cnMudHlwZSB8fCBjb2RlLmF0dHJzLnR5cGUgPT09IFwidGV4dC9qYXZhc2NyaXB0XCIpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZXZhbChjb2RlLmNvbnRlbnQpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBjb2RlLmF0dHJzLnR5cGUpO1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb2RlLmNvbnRlbnQpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlX25vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIGlmIChjb2RlLnNyYykge1xuICAgICAgICAgIHN0eWxlX25vZGUuc3JjID0gY29kZS5zcmM7XG4gICAgICAgIH1cbiAgICAgICAgc3R5bGVfbm9kZS5pbm5lckhUTUwgPSBjb2RlLmNvbnRlbnQ7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVfbm9kZSk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJsaW5rXCIpIHtcbiAgICAgICAgY29uc3QgbGlua19ub2RlXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICBpZiAoY29kZS5yZWwpIHtcbiAgICAgICAgICBsaW5rX25vZGVfLnJlbCA9IGNvZGUucmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlLmhyZWYpIHtcbiAgICAgICAgICBsaW5rX25vZGVfLmhyZWYgPSBjb2RlLmhyZWY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGUuYXR0cnMgJiYgY29kZS5hdHRycy50eXBlKSB7XG4gICAgICAgICAgbGlua19ub2RlXy50eXBlID0gY29kZS5hdHRycy50eXBlO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua19ub2RlXyk7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChfaHRtbFRvRWxlbWVudChjb2RlLmNvbnRlbnQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IFwidW5zdXBwb3J0ZWQgY29kZSB0eXBlLlwiO1xuICAgICAgfVxuICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJleGVjdXRlZFwiIH0sIHRoaXMuY29uZmlnLnRhcmdldF9vcmlnaW4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gZXhlY3V0ZSBzY3JpcHRzOiBcIiwgY29kZSwgZSk7XG4gICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoXG4gICAgICAgIHsgdHlwZTogXCJleGVjdXRlZFwiLCBlcnJvcjogZS5zdGFjayB8fCBTdHJpbmcoZSkgfSxcbiAgICAgICAgdGhpcy5jb25maWcudGFyZ2V0X29yaWdpblxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0dXBJZnJhbWUoY29uZmlnKSB7XG4gIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgY29uZmlnLmRlZGljYXRlZF90aHJlYWQgPSBmYWxzZTtcbiAgY29uZmlnLmxhbmcgPSBcImphdmFzY3JpcHRcIjtcbiAgY29uZmlnLmFwaV92ZXJzaW9uID0gQVBJX1ZFUlNJT047XG4gIGNvbnN0IGNvbm4gPSBuZXcgQ29ubmVjdGlvbihjb25maWcpO1xuICBjb25uZWN0UlBDKGNvbm4sIGNvbmZpZyk7XG4gIGNvbm4uY29ubmVjdCgpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQS9JQTtBQWlKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pluginIframe.js\n");

/***/ }),

/***/ "./src/pluginWebPython.js":
/*!********************************!*\
  !*** ./src/pluginWebPython.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return setupWebPython; });\n/* harmony import */ var _pluginCore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pluginCore.js */ \"./src/pluginCore.js\");\n/* harmony import */ var _rpc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rpc.js */ \"./src/rpc.js\");\n/* harmony import */ var _pluginIframe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pluginIframe */ \"./src/pluginIframe.js\");\n/**\n * Contains the routines loaded by the plugin iframe under web-browser\n * in case when worker failed to initialize\n *\n * Initializes the web environment version of the platform-dependent\n * connection object for the plugin site\n */\n\n\n // Create a new, plain <span> element\n\nfunction _htmlToElement(html) {\n  var template = document.createElement(\"template\");\n  html = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = html;\n  return template.content.firstChild;\n}\n\nconst _importScript = function (url) {\n  //url is URL of external file, implementationCode is the code\n  //to be called from the file, location is the location to\n  //insert the <script> element\n  return new Promise((resolve, reject) => {\n    var scriptTag = document.createElement(\"script\");\n    scriptTag.src = url;\n    scriptTag.onload = resolve;\n\n    scriptTag.onreadystatechange = function () {\n      if (this.readyState === \"loaded\" || this.readyState === \"complete\") {\n        resolve();\n      }\n    };\n\n    scriptTag.onerror = reject;\n    document.head.appendChild(scriptTag);\n  });\n}; // support importScripts outside web worker\n\n\nasync function importScripts() {\n  var args = Array.prototype.slice.call(arguments),\n      len = args.length,\n      i = 0;\n\n  for (; i < len; i++) {\n    await _importScript(args[i]);\n  }\n}\n\nconst startup_script = `\nfrom js import api\nimport sys\nfrom types import ModuleType\nm = ModuleType(\"imjoy\")\nsys.modules[m.__name__] = m\nm.__file__ = m.__name__ + \".py\"\nm.api = api\n`;\nlet _export_plugin_api = null;\n\nconst execute_python_code = function (code) {\n  try {\n    if (!_export_plugin_api) {\n      _export_plugin_api = window.api.export;\n\n      window.api.export = function (p) {\n        if (typeof p === \"object\") {\n          const _api = {};\n\n          for (let k in p) {\n            if (!k.startsWith(\"_\")) {\n              _api[k] = p[k];\n            }\n          }\n\n          _export_plugin_api(_api);\n        } else if (typeof p === \"function\") {\n          const _api = {};\n          const getattr = window.pyodide.pyimport(\"getattr\");\n          const hasattr = window.pyodide.pyimport(\"hasattr\");\n\n          for (let k of Object.getOwnPropertyNames(p)) {\n            if (!k.startsWith(\"_\") && hasattr(p, k)) {\n              const func = getattr(p, k);\n\n              _api[k] = function () {\n                return func(...Array.prototype.slice.call(arguments));\n              };\n            }\n          }\n\n          _export_plugin_api(_api);\n        } else {\n          throw \"unsupported api export\";\n        }\n      };\n    }\n\n    window.pyodide.runPython(startup_script);\n    window.pyodide.runPython(code.content);\n  } catch (e) {\n    throw e;\n  }\n};\n\nfunction setupPyodide() {\n  return new Promise((resolve, reject) => {\n    window.languagePluginUrl = \"https://static.imjoy.io/pyodide/\";\n    importScripts(\"https://static.imjoy.io/pyodide/pyodide.js\").then(() => {\n      // hack for matplotlib etc.\n      window.iodide = {\n        output: {\n          element: function element(type) {\n            const div = document.createElement(type);\n            const output = document.getElementById(\"output\") || document.body;\n            output.appendChild(div);\n            return div;\n          }\n        }\n      };\n      window.languagePluginLoader.then(() => {\n        // pyodide is now ready to use...\n        console.log(window.pyodide.runPython(\"import sys\\nsys.version\"));\n        resolve();\n      }).catch(reject);\n    });\n  });\n} // connection object for the RPC constructor\n\n\nclass Connection extends _pluginIframe__WEBPACK_IMPORTED_MODULE_2__[\"Connection\"] {\n  constructor(config) {\n    super(config);\n  }\n\n  async execute(code) {\n    if (code.type === \"requirements\") {\n      if (code.requirements) {\n        code.requirements = typeof code.requirements === \"string\" ? [code.requirements] : code.requirements;\n\n        if (Array.isArray(code.requirements)) {\n          const python_packages = [];\n\n          for (var i = 0; i < code.requirements.length; i++) {\n            if (code.requirements[i].toLowerCase().endsWith(\".css\") || code.requirements[i].startsWith(\"css:\")) {\n              if (code.requirements[i].startsWith(\"css:\")) {\n                code.requirements[i] = code.requirements[i].slice(4);\n              }\n\n              link_node = document.createElement(\"link\");\n              link_node.rel = \"stylesheet\";\n              link_node.href = code.requirements[i];\n              document.head.appendChild(link_node);\n            } else if ( // code.requirements[i].toLowerCase().endsWith(\".js\") ||\n            code.requirements[i].startsWith(\"js:\")) {\n              if (code.requirements[i].startsWith(\"js:\")) {\n                code.requirements[i] = code.requirements[i].slice(3);\n              }\n\n              await importScripts(code.requirements[i]);\n            } else if (code.requirements[i].startsWith(\"cache:\")) {//ignore cache\n            } else if (code.requirements[i].toLowerCase().endsWith(\".js\") || code.requirements[i].startsWith(\"package:\")) {\n              if (code.requirements[i].startsWith(\"package:\")) {\n                code.requirements[i] = code.requirements[i].slice(8);\n              }\n\n              python_packages.push(code.requirements[i]);\n            } else if (code.requirements[i].startsWith(\"http:\") || code.requirements[i].startsWith(\"https:\")) {\n              console.log(\"Unprocessed requirements url: \" + code.requirements[i]);\n            } else {\n              python_packages.push(code.requirements[i]);\n            }\n          }\n\n          await window.pyodide.loadPackage(python_packages);\n        } else {\n          throw \"unsupported requirements definition\";\n        }\n      }\n    } else if (code.type === \"script\") {\n      if (code.src) {\n        var script_node = document.createElement(\"script\");\n        script_node.setAttribute(\"type\", code.attrs.type);\n        script_node.setAttribute(\"src\", code.src);\n        document.head.appendChild(script_node);\n      } else {\n        if (code.content && code.lang === \"python\") {\n          execute_python_code(code);\n        } else if (code.content && code.lang === \"javascript\") {\n          try {\n            eval(code.content);\n          } catch (e) {\n            console.error(e.message, e.stack);\n            throw e;\n          }\n        } else {\n          const node = document.createElement(\"script\");\n          node.setAttribute(\"type\", code.attrs.type);\n          node.appendChild(document.createTextNode(code.content));\n          document.body.appendChild(node);\n        }\n      }\n    } else if (code.type === \"style\") {\n      const style_node = document.createElement(\"style\");\n\n      if (code.src) {\n        style_node.src = code.src;\n      }\n\n      style_node.innerHTML = code.content;\n      document.head.appendChild(style_node);\n    } else if (code.type === \"link\") {\n      const link_node = document.createElement(\"link\");\n\n      if (code.rel) {\n        link_node.rel = code.rel;\n      }\n\n      if (code.href) {\n        link_node.href = code.href;\n      }\n\n      if (code.attrs && code.attrs.type) {\n        link_node.type = code.attrs.type;\n      }\n\n      document.head.appendChild(link_node);\n    } else if (code.type === \"html\") {\n      document.body.appendChild(_htmlToElement(code.content));\n    } else {\n      throw \"unsupported code type.\";\n    }\n  }\n\n}\n\nfunction setupWebPython(config) {\n  config = config || {};\n  config.debug = true;\n  config.dedicated_thread = false;\n  config.lang = \"python\";\n  config.api_version = _rpc_js__WEBPACK_IMPORTED_MODULE_1__[\"API_VERSION\"];\n  const conn = new Connection(config);\n  setupPyodide().then(() => {\n    Object(_pluginCore_js__WEBPACK_IMPORTED_MODULE_0__[\"connectRPC\"])(conn, config);\n    conn.connect();\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2luV2ViUHl0aG9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1qb3lSUEMvc3JjL3BsdWdpbldlYlB5dGhvbi5qcz9iZmU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGFpbnMgdGhlIHJvdXRpbmVzIGxvYWRlZCBieSB0aGUgcGx1Z2luIGlmcmFtZSB1bmRlciB3ZWItYnJvd3NlclxuICogaW4gY2FzZSB3aGVuIHdvcmtlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZVxuICpcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWIgZW52aXJvbm1lbnQgdmVyc2lvbiBvZiB0aGUgcGxhdGZvcm0tZGVwZW5kZW50XG4gKiBjb25uZWN0aW9uIG9iamVjdCBmb3IgdGhlIHBsdWdpbiBzaXRlXG4gKi9cbmltcG9ydCB7IGNvbm5lY3RSUEMgfSBmcm9tIFwiLi9wbHVnaW5Db3JlLmpzXCI7XG5pbXBvcnQgeyBBUElfVkVSU0lPTiB9IGZyb20gXCIuL3JwYy5qc1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbiBhcyBJZnJhbWVDb25uZWN0aW9uLCBleGVjdXRlQ29kZSB9IGZyb20gXCIuL3BsdWdpbklmcmFtZVwiO1xuLy8gQ3JlYXRlIGEgbmV3LCBwbGFpbiA8c3Bhbj4gZWxlbWVudFxuZnVuY3Rpb24gX2h0bWxUb0VsZW1lbnQoaHRtbCkge1xuICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gIGh0bWwgPSBodG1sLnRyaW0oKTsgLy8gTmV2ZXIgcmV0dXJuIGEgdGV4dCBub2RlIG9mIHdoaXRlc3BhY2UgYXMgdGhlIHJlc3VsdFxuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sO1xuICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xufVxuXG5jb25zdCBfaW1wb3J0U2NyaXB0ID0gZnVuY3Rpb24odXJsKSB7XG4gIC8vdXJsIGlzIFVSTCBvZiBleHRlcm5hbCBmaWxlLCBpbXBsZW1lbnRhdGlvbkNvZGUgaXMgdGhlIGNvZGVcbiAgLy90byBiZSBjYWxsZWQgZnJvbSB0aGUgZmlsZSwgbG9jYXRpb24gaXMgdGhlIGxvY2F0aW9uIHRvXG4gIC8vaW5zZXJ0IHRoZSA8c2NyaXB0PiBlbGVtZW50XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdmFyIHNjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgc2NyaXB0VGFnLnNyYyA9IHVybDtcbiAgICBzY3JpcHRUYWcub25sb2FkID0gcmVzb2x2ZTtcbiAgICBzY3JpcHRUYWcub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcImxvYWRlZFwiIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNjcmlwdFRhZy5vbmVycm9yID0gcmVqZWN0O1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcbiAgfSk7XG59O1xuXG4vLyBzdXBwb3J0IGltcG9ydFNjcmlwdHMgb3V0c2lkZSB3ZWIgd29ya2VyXG5cbmFzeW5jIGZ1bmN0aW9uIGltcG9ydFNjcmlwdHMoKSB7XG4gIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxcbiAgICBsZW4gPSBhcmdzLmxlbmd0aCxcbiAgICBpID0gMDtcbiAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgIGF3YWl0IF9pbXBvcnRTY3JpcHQoYXJnc1tpXSk7XG4gIH1cbn1cblxuY29uc3Qgc3RhcnR1cF9zY3JpcHQgPSBgXG5mcm9tIGpzIGltcG9ydCBhcGlcbmltcG9ydCBzeXNcbmZyb20gdHlwZXMgaW1wb3J0IE1vZHVsZVR5cGVcbm0gPSBNb2R1bGVUeXBlKFwiaW1qb3lcIilcbnN5cy5tb2R1bGVzW20uX19uYW1lX19dID0gbVxubS5fX2ZpbGVfXyA9IG0uX19uYW1lX18gKyBcIi5weVwiXG5tLmFwaSA9IGFwaVxuYDtcblxubGV0IF9leHBvcnRfcGx1Z2luX2FwaSA9IG51bGw7XG5jb25zdCBleGVjdXRlX3B5dGhvbl9jb2RlID0gZnVuY3Rpb24oY29kZSkge1xuICB0cnkge1xuICAgIGlmICghX2V4cG9ydF9wbHVnaW5fYXBpKSB7XG4gICAgICBfZXhwb3J0X3BsdWdpbl9hcGkgPSB3aW5kb3cuYXBpLmV4cG9ydDtcbiAgICAgIHdpbmRvdy5hcGkuZXhwb3J0ID0gZnVuY3Rpb24ocCkge1xuICAgICAgICBpZiAodHlwZW9mIHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBjb25zdCBfYXBpID0ge307XG4gICAgICAgICAgZm9yIChsZXQgayBpbiBwKSB7XG4gICAgICAgICAgICBpZiAoIWsuc3RhcnRzV2l0aChcIl9cIikpIHtcbiAgICAgICAgICAgICAgX2FwaVtrXSA9IHBba107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIF9leHBvcnRfcGx1Z2luX2FwaShfYXBpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc3QgX2FwaSA9IHt9O1xuICAgICAgICAgIGNvbnN0IGdldGF0dHIgPSB3aW5kb3cucHlvZGlkZS5weWltcG9ydChcImdldGF0dHJcIik7XG4gICAgICAgICAgY29uc3QgaGFzYXR0ciA9IHdpbmRvdy5weW9kaWRlLnB5aW1wb3J0KFwiaGFzYXR0clwiKTtcbiAgICAgICAgICBmb3IgKGxldCBrIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHApKSB7XG4gICAgICAgICAgICBpZiAoIWsuc3RhcnRzV2l0aChcIl9cIikgJiYgaGFzYXR0cihwLCBrKSkge1xuICAgICAgICAgICAgICBjb25zdCBmdW5jID0gZ2V0YXR0cihwLCBrKTtcbiAgICAgICAgICAgICAgX2FwaVtrXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jKC4uLkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBfZXhwb3J0X3BsdWdpbl9hcGkoX2FwaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgXCJ1bnN1cHBvcnRlZCBhcGkgZXhwb3J0XCI7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIHdpbmRvdy5weW9kaWRlLnJ1blB5dGhvbihzdGFydHVwX3NjcmlwdCk7XG4gICAgd2luZG93LnB5b2RpZGUucnVuUHl0aG9uKGNvZGUuY29udGVudCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9XG59O1xuXG5mdW5jdGlvbiBzZXR1cFB5b2RpZGUoKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgd2luZG93Lmxhbmd1YWdlUGx1Z2luVXJsID0gXCJodHRwczovL3N0YXRpYy5pbWpveS5pby9weW9kaWRlL1wiO1xuICAgIGltcG9ydFNjcmlwdHMoXCJodHRwczovL3N0YXRpYy5pbWpveS5pby9weW9kaWRlL3B5b2RpZGUuanNcIikudGhlbigoKSA9PiB7XG4gICAgICAvLyBoYWNrIGZvciBtYXRwbG90bGliIGV0Yy5cbiAgICAgIHdpbmRvdy5pb2RpZGUgPSB7XG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgIGVsZW1lbnQ6IGZ1bmN0aW9uIGVsZW1lbnQodHlwZSkge1xuICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0XCIpIHx8IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICBvdXRwdXQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIHJldHVybiBkaXY7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB3aW5kb3cubGFuZ3VhZ2VQbHVnaW5Mb2FkZXJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIC8vIHB5b2RpZGUgaXMgbm93IHJlYWR5IHRvIHVzZS4uLlxuICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5weW9kaWRlLnJ1blB5dGhvbihcImltcG9ydCBzeXNcXG5zeXMudmVyc2lvblwiKSk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG59XG4vLyBjb25uZWN0aW9uIG9iamVjdCBmb3IgdGhlIFJQQyBjb25zdHJ1Y3RvclxuY2xhc3MgQ29ubmVjdGlvbiBleHRlbmRzIElmcmFtZUNvbm5lY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpO1xuICB9XG4gIGFzeW5jIGV4ZWN1dGUoY29kZSkge1xuICAgIGlmIChjb2RlLnR5cGUgPT09IFwicmVxdWlyZW1lbnRzXCIpIHtcbiAgICAgIGlmIChjb2RlLnJlcXVpcmVtZW50cykge1xuICAgICAgICBjb2RlLnJlcXVpcmVtZW50cyA9XG4gICAgICAgICAgdHlwZW9mIGNvZGUucmVxdWlyZW1lbnRzID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IFtjb2RlLnJlcXVpcmVtZW50c11cbiAgICAgICAgICAgIDogY29kZS5yZXF1aXJlbWVudHM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvZGUucmVxdWlyZW1lbnRzKSkge1xuICAgICAgICAgIGNvbnN0IHB5dGhvbl9wYWNrYWdlcyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZS5yZXF1aXJlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0udG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcIi5jc3NcIikgfHxcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImNzczpcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImNzczpcIikpIHtcbiAgICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXSA9IGNvZGUucmVxdWlyZW1lbnRzW2ldLnNsaWNlKDQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGxpbmtfbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICAgICAgICBsaW5rX25vZGUucmVsID0gXCJzdHlsZXNoZWV0XCI7XG4gICAgICAgICAgICAgIGxpbmtfbm9kZS5ocmVmID0gY29kZS5yZXF1aXJlbWVudHNbaV07XG4gICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua19ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIC8vIGNvZGUucmVxdWlyZW1lbnRzW2ldLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoXCIuanNcIikgfHxcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImpzOlwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwianM6XCIpKSB7XG4gICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0gPSBjb2RlLnJlcXVpcmVtZW50c1tpXS5zbGljZSgzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhd2FpdCBpbXBvcnRTY3JpcHRzKGNvZGUucmVxdWlyZW1lbnRzW2ldKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImNhY2hlOlwiKSkge1xuICAgICAgICAgICAgICAvL2lnbm9yZSBjYWNoZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0udG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcIi5qc1wiKSB8fFxuICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwicGFja2FnZTpcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAoY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcInBhY2thZ2U6XCIpKSB7XG4gICAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0gPSBjb2RlLnJlcXVpcmVtZW50c1tpXS5zbGljZSg4KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBweXRob25fcGFja2FnZXMucHVzaChjb2RlLnJlcXVpcmVtZW50c1tpXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBjb2RlLnJlcXVpcmVtZW50c1tpXS5zdGFydHNXaXRoKFwiaHR0cDpcIikgfHxcbiAgICAgICAgICAgICAgY29kZS5yZXF1aXJlbWVudHNbaV0uc3RhcnRzV2l0aChcImh0dHBzOlwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIFwiVW5wcm9jZXNzZWQgcmVxdWlyZW1lbnRzIHVybDogXCIgKyBjb2RlLnJlcXVpcmVtZW50c1tpXVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcHl0aG9uX3BhY2thZ2VzLnB1c2goY29kZS5yZXF1aXJlbWVudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB3aW5kb3cucHlvZGlkZS5sb2FkUGFja2FnZShweXRob25fcGFja2FnZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IFwidW5zdXBwb3J0ZWQgcmVxdWlyZW1lbnRzIGRlZmluaXRpb25cIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29kZS50eXBlID09PSBcInNjcmlwdFwiKSB7XG4gICAgICBpZiAoY29kZS5zcmMpIHtcbiAgICAgICAgdmFyIHNjcmlwdF9ub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgc2NyaXB0X25vZGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBjb2RlLmF0dHJzLnR5cGUpO1xuICAgICAgICBzY3JpcHRfbm9kZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgY29kZS5zcmMpO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdF9ub2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb2RlLmNvbnRlbnQgJiYgY29kZS5sYW5nID09PSBcInB5dGhvblwiKSB7XG4gICAgICAgICAgZXhlY3V0ZV9weXRob25fY29kZShjb2RlKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb2RlLmNvbnRlbnQgJiYgY29kZS5sYW5nID09PSBcImphdmFzY3JpcHRcIikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBldmFsKGNvZGUuY29udGVudCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlLm1lc3NhZ2UsIGUuc3RhY2spO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIGNvZGUuYXR0cnMudHlwZSk7XG4gICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb2RlLmNvbnRlbnQpKTtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb2RlLnR5cGUgPT09IFwic3R5bGVcIikge1xuICAgICAgY29uc3Qgc3R5bGVfbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgIGlmIChjb2RlLnNyYykge1xuICAgICAgICBzdHlsZV9ub2RlLnNyYyA9IGNvZGUuc3JjO1xuICAgICAgfVxuICAgICAgc3R5bGVfbm9kZS5pbm5lckhUTUwgPSBjb2RlLmNvbnRlbnQ7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlX25vZGUpO1xuICAgIH0gZWxzZSBpZiAoY29kZS50eXBlID09PSBcImxpbmtcIikge1xuICAgICAgY29uc3QgbGlua19ub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICBpZiAoY29kZS5yZWwpIHtcbiAgICAgICAgbGlua19ub2RlLnJlbCA9IGNvZGUucmVsO1xuICAgICAgfVxuICAgICAgaWYgKGNvZGUuaHJlZikge1xuICAgICAgICBsaW5rX25vZGUuaHJlZiA9IGNvZGUuaHJlZjtcbiAgICAgIH1cbiAgICAgIGlmIChjb2RlLmF0dHJzICYmIGNvZGUuYXR0cnMudHlwZSkge1xuICAgICAgICBsaW5rX25vZGUudHlwZSA9IGNvZGUuYXR0cnMudHlwZTtcbiAgICAgIH1cbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua19ub2RlKTtcbiAgICB9IGVsc2UgaWYgKGNvZGUudHlwZSA9PT0gXCJodG1sXCIpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX2h0bWxUb0VsZW1lbnQoY29kZS5jb250ZW50KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwidW5zdXBwb3J0ZWQgY29kZSB0eXBlLlwiO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR1cFdlYlB5dGhvbihjb25maWcpIHtcbiAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICBjb25maWcuZGVidWcgPSB0cnVlO1xuICBjb25maWcuZGVkaWNhdGVkX3RocmVhZCA9IGZhbHNlO1xuICBjb25maWcubGFuZyA9IFwicHl0aG9uXCI7XG4gIGNvbmZpZy5hcGlfdmVyc2lvbiA9IEFQSV9WRVJTSU9OO1xuICBjb25zdCBjb25uID0gbmV3IENvbm5lY3Rpb24oY29uZmlnKTtcbiAgc2V0dXBQeW9kaWRlKCkudGhlbigoKSA9PiB7XG4gICAgY29ubmVjdFJQQyhjb25uLCBjb25maWcpO1xuICAgIGNvbm4uY29ubmVjdCgpO1xuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFBQTtBQVVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFXQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzR0E7QUFDQTtBQTRHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pluginWebPython.js\n");

/***/ }),

/***/ "./src/rpc.js":
/*!********************!*\
  !*** ./src/rpc.js ***!
  \********************/
/*! exports provided: API_VERSION, RPC */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"API_VERSION\", function() { return API_VERSION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RPC\", function() { return RPC; });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/**\n * Contains the RPC object used both by the application\n * site, and by each plugin\n */\n\nconst API_VERSION = \"0.2.1\";\nconst ArrayBufferView = Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array())).constructor;\n\nfunction _appendBuffer(buffer1, buffer2) {\n  const tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n  tmp.set(new Uint8Array(buffer1), 0);\n  tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n  return tmp.buffer;\n}\n\nfunction getKeyByValue(object, value) {\n  return Object.keys(object).find(key => object[key] === value);\n}\n/**\n * RPC object represents a single site in the\n * communication protocol between the application and the plugin\n *\n * @param {Object} connection a special object allowing to send\n * and receive messages from the opposite site (basically it\n * should only provide send() and onMessage() methods)\n */\n\n\nclass RPC extends _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"EventManager\"] {\n  constructor(connection, config) {\n    super(config && config.debug);\n    this._connection = connection;\n    this.config = config || {};\n    this._interface_store = {};\n    this._local_api = null; // make sure there is an execute function\n\n    const name = this.config.name;\n\n    this._connection.execute = this._connection.execute || function () {\n      throw new Error(`connection.execute not implemented (in \"${name}\")`);\n    };\n\n    this._store = new ReferenceStore();\n    this._method_refs = new ReferenceStore();\n\n    this._method_refs.onReady(() => {\n      this._fire(\"remoteIdle\");\n    });\n\n    this._method_refs.onBusy(() => {\n      this._fire(\"remoteBusy\");\n    });\n\n    this._setupMessageHanlders();\n  }\n\n  init() {\n    this._connection.emit({\n      type: \"initialized\",\n      config: this.config\n    });\n  }\n  /**\n   * Set a handler to be called when received a responce from the\n   * remote site reporting that the previously provided interface\n   * has been successfully set as remote for that site\n   *\n   * @param {Function} handler\n   */\n\n\n  getRemoteCallStack() {\n    return this._method_refs.getStack();\n  }\n  /**\n   * @returns {Object} set of remote interface methods\n   */\n\n\n  getRemote() {\n    return this._interface_store[\"_rremote\"];\n  }\n  /**\n   * Sets the interface of this site making it available to the\n   * remote site by sending a message with a set of methods names\n   *\n   * @param {Object} _interface to set\n   */\n\n\n  setInterface(_interface) {\n    if (this.config.forwarding_functions) {\n      for (let func_name of this.config.forwarding_functions) {\n        const _remote = this._interface_store[\"_rremote\"];\n\n        if (_remote[func_name]) {\n          if (_interface.constructor === Object) {\n            if (!_interface[func_name]) {\n              _interface[func_name] = (...args) => {\n                _remote[func_name](...args);\n              };\n            }\n          } else if (_interface.constructor.constructor === Function) {\n            if (!_interface.constructor.prototype[func_name]) {\n              _interface.constructor.prototype[func_name] = (...args) => {\n                _remote[func_name](...args);\n              };\n            }\n          }\n        }\n      }\n    }\n\n    this._local_api = _interface;\n\n    this._fire(\"interfaceAvailable\");\n  }\n  /**\n   * Sends the actual interface to the remote site upon it was\n   * updated or by a special request of the remote site\n   */\n\n\n  sendInterface() {\n    if (!this._local_api) {\n      throw new Error(\"interface is not set.\");\n    }\n\n    this._local_api._rid = \"_rlocal\";\n\n    const api = this._encode(this._local_api, true);\n\n    this._connection.emit({\n      type: \"setInterface\",\n      api: api\n    });\n  }\n\n  setAuthenticator(authenticator) {\n    this.authenticator = authenticator;\n  }\n\n  setAuthorizer(authorizer) {\n    this.authorizer = authorizer;\n  }\n  /**\n   * Handles a message from the remote site\n   */\n  // var callback_reg = new RegExp(\"onupdate|run$\")\n\n\n  _setupMessageHanlders() {\n    this._connection.on(\"init\", this.init);\n\n    this._connection.on(\"authenticate\", credential => {\n      Promise.resolve(this.authenticator(credential)).then(result => {\n        if (result === true) {\n          this._connection.emit({\n            type: \"authenticated\",\n            token: token\n          });\n        } else {\n          this._connection.emit({\n            type: \"authenticated\",\n            error: result\n          });\n        }\n      }).catch(e => {\n        this._connection.emit({\n          type: \"authenticated\",\n          error: e\n        });\n      });\n    });\n\n    this._connection.on(\"execute\", data => {\n      Promise.resolve(this._connection.execute(data.code)).then(() => {\n        this._connection.emit({\n          type: \"executed\"\n        });\n      }).catch(e => {\n        console.error(e);\n\n        this._connection.emit({\n          type: \"executed\",\n          error: e\n        });\n      });\n    });\n\n    this._connection.on(\"method\", data => {\n      let resolve, reject, method, args, result;\n      let _interface = this._interface_store[data.pid];\n\n      const _method_context = _interface.__this__ || _interface;\n\n      if (!_interface) {\n        if (data.promise) {\n          [resolve, reject] = this._unwrap(data.promise, false);\n          reject(`plugin api function is not avaialbe in \"${data.pid}\", the plugin maybe terminated.`);\n        } else {\n          console.error(`plugin api function is not avaialbe in ${data.pid}, the plugin maybe terminated.`);\n        }\n\n        return;\n      }\n\n      method = _interface[data.name];\n      args = this._unwrap(data.args, true);\n\n      if (data.promise) {\n        [resolve, reject] = this._unwrap(data.promise, false);\n\n        try {\n          result = method.apply(_method_context, args);\n\n          if (result instanceof Promise || method.constructor && method.constructor.name === \"AsyncFunction\") {\n            result.then(resolve).catch(reject);\n          } else {\n            resolve(result);\n          }\n        } catch (e) {\n          console.error(this.config.name, e, method);\n          reject(e);\n        }\n      } else {\n        try {\n          method.apply(_method_context, args);\n        } catch (e) {\n          console.error(this.config.name, e, method, args);\n        }\n      }\n    });\n\n    this._connection.on(\"callback\", data => {\n      let resolve, reject, method, args, result;\n\n      if (data.promise) {\n        [resolve, reject] = this._unwrap(data.promise, false);\n\n        try {\n          method = this._store.fetch(data._rindex);\n          args = this._unwrap(data.args, true);\n\n          if (!method) {\n            throw new Error(\"Callback function can only called once, if you want to call a function for multiple times, please make it as a plugin api function. See https://imjoy.io/docs for more details.\");\n          }\n\n          result = method.apply(null, args);\n\n          if (result instanceof Promise || method.constructor && method.constructor.name === \"AsyncFunction\") {\n            result.then(resolve).catch(reject);\n          } else {\n            resolve(result);\n          }\n        } catch (e) {\n          console.error(this.config.name, e, method);\n          reject(e);\n        }\n      } else {\n        try {\n          method = this._store.fetch(data._rindex);\n          args = this._unwrap(data.args, true);\n\n          if (!method) {\n            throw new Error(\"Please notice that callback function can only called once, if you want to call a function for multiple times, please make it as a plugin api function. See https://imjoy.io/docs for more details.\");\n          }\n\n          method.apply(null, args);\n        } catch (e) {\n          console.error(this.config.name, e, method, args);\n        }\n      }\n    });\n\n    this._connection.on(\"setInterface\", data => {\n      this._setRemoteInterface(data.api);\n    });\n\n    this._connection.on(\"getInterface\", () => {\n      this._fire(\"getInterface\");\n\n      if (this._local_api) this.sendInterface();else this.once(\"interfaceAvailable\", this.sendInterface);\n    });\n\n    this._connection.on(\"interfaceSetAsRemote\", () => {\n      this._fire(\"interfaceSetAsRemote\");\n    });\n\n    this._connection.on(\"disconnect\", () => {\n      this._fire(\"beforeDisconnect\");\n\n      this._connection.disconnect();\n\n      this._fire(\"disconnected\");\n    });\n  }\n\n  async authenticate(credential) {\n    this.once(\"authenticated\", result => {\n      if (!result.error) {\n        resolve(result);\n      } else {\n        reject(result.error);\n      }\n    });\n\n    this._connection.emit({\n      type: \"authenticate\",\n      credential: credential\n    });\n  }\n  /**\n   * Sends a requests to the remote site asking it to provide its\n   * current interface\n   */\n\n\n  requestRemote() {\n    this._connection.emit({\n      type: \"getInterface\"\n    });\n  }\n\n  _ndarray(typedArray, shape, dtype) {\n    var _dtype = _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"typedArrayToDtype\"][typedArray.constructor.name];\n\n    if (dtype && dtype !== _dtype) {\n      throw \"dtype doesn't match the type of the array: \" + _dtype + \" != \" + dtype;\n    }\n\n    shape = shape || [typedArray.length];\n    return {\n      _rtype: \"ndarray\",\n      _rvalue: typedArray,\n      _rshape: shape,\n      _rdtype: _dtype\n    };\n  }\n  /**\n   * Sets the new remote interface provided by the other site\n   *\n   * @param {Array} names list of function names\n   */\n\n\n  _setRemoteInterface(api) {\n    this._interface_store[\"_rremote\"] = this._decode(api);\n\n    this._fire(\"remoteReady\");\n\n    this._reportRemoteSet();\n  }\n  /**\n   * Generates the wrapped function corresponding to a single remote\n   * method. When the generated function is called, it will send the\n   * corresponding message to the remote site asking it to execute\n   * the particular method of its interface\n   *\n   * @param {String} name of the remote method\n   *\n   * @returns {Function} wrapped remote method\n   */\n\n\n  _genRemoteMethod(name, interface_id) {\n    var me = this;\n\n    var remoteMethod = function () {\n      return new Promise((resolve, reject) => {\n        let id = null;\n\n        try {\n          id = me._method_refs.put(interface_id ? interface_id + \"/\" + name : name);\n\n          var wrapped_resolve = function () {\n            if (id !== null) me._method_refs.fetch(id);\n            return resolve.apply(this, arguments);\n          };\n\n          var wrapped_reject = function () {\n            if (id !== null) me._method_refs.fetch(id);\n            return reject.apply(this, arguments);\n          };\n\n          wrapped_resolve.__jailed_pairs__ = wrapped_reject;\n          wrapped_reject.__jailed_pairs__ = wrapped_resolve;\n          var args = Array.prototype.slice.call(arguments);\n\n          if (name === \"register\" || name === \"export\" || name === \"on\") {\n            args = me._wrap(args, true);\n          } else {\n            args = me._wrap(args);\n          }\n\n          var transferables = args.args.__transferables__;\n          if (transferables) delete args.args.__transferables__;\n\n          me._connection.emit({\n            type: \"method\",\n            name: name,\n            pid: interface_id,\n            args: args,\n            promise: me._wrap([wrapped_resolve, wrapped_reject])\n          }, transferables);\n        } catch (e) {\n          if (id) me._method_refs.fetch(id);\n          reject(`Failed to exectue remote method (interface: ${interface_id || me.id}, method: ${name}), error: ${e}`);\n        }\n      });\n    };\n\n    remoteMethod.__remote_method = true;\n    return remoteMethod;\n  }\n  /**\n   * Sends a responce reporting that interface just provided by the\n   * remote site was successfully set by this site as remote\n   */\n\n\n  _reportRemoteSet() {\n    this._connection.emit({\n      type: \"interfaceSetAsRemote\"\n    });\n  }\n  /**\n   * Prepares the provided set of remote method arguments for\n   * sending to the remote site, replaces all the callbacks with\n   * identifiers\n   *\n   * @param {Array} args to wrap\n   *\n   * @returns {Array} wrapped arguments\n   */\n\n\n  _encodeInterface(aObject) {\n    let v, k, keys;\n    const encoded_interface = {};\n    aObject[\"_rid\"] = aObject[\"_rid\"] || Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"randId\"])(); // an object/array\n\n    if (aObject.constructor === Object || Array.isArray(aObject)) {\n      keys = Object.keys(aObject);\n    } // a class\n    else if (aObject.constructor === Function) {\n        throw new Error(\"Please instantiate the class before exportting it.\");\n      } // instance of a class\n      else if (aObject.constructor.constructor === Function) {\n          keys = Object.getOwnPropertyNames(Object.getPrototypeOf(aObject)).concat(Object.keys(aObject));\n        } else {\n          throw Error(\"Unsupported interface type\");\n        }\n\n    const bObject = Array.isArray(aObject) ? [] : {};\n\n    for (k of keys) {\n      if ([\"hasOwnProperty\", \"constructor\"].includes(k)) continue;\n\n      if (k.startsWith(\"_\")) {\n        continue;\n      }\n\n      v = aObject[k];\n\n      if (typeof v === \"function\") {\n        bObject[k] = {\n          _rtype: \"interface\",\n          _rid: aObject[\"_rid\"],\n          _rvalue: k\n        };\n        encoded_interface[k] = v;\n      } else if (Object(v) !== v) {\n        bObject[k] = {\n          _rtype: \"argument\",\n          _rvalue: v\n        };\n        encoded_interface[k] = v;\n      } else if (typeof v === \"object\") {\n        bObject[k] = this._encodeInterface(v);\n      }\n    }\n\n    this._interface_store[aObject[\"_rid\"]] = encoded_interface; // remove interface when closed\n\n    if (aObject.on && typeof aObject.on === \"function\") {\n      aObject.on(\"close\", () => {\n        delete this._interface_store[aObject[\"_rid\"]];\n      });\n    }\n\n    return bObject;\n  }\n\n  _encode(aObject, as_interface) {\n    const transferables = [];\n\n    if (!aObject) {\n      return aObject;\n    }\n\n    const _transfer = aObject._transfer;\n    let bObject, v, k;\n    const isarray = Array.isArray(aObject); //skip if already encoded\n\n    if (typeof aObject === \"object\" && aObject._rtype && aObject._rvalue) {\n      return aObject;\n    } //encode interfaces\n\n\n    if (typeof aObject === \"object\" && !Array.isArray(aObject) && (aObject._rintf || as_interface)) {\n      return this._encodeInterface(aObject);\n    }\n\n    if (as_interface) {\n      aObject[\"_rid\"] = aObject[\"_rid\"] || Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"randId\"])();\n      this._interface_store[aObject[\"_rid\"]] = this._interface_store[aObject[\"_rid\"]] || (isarray ? [] : {});\n    }\n\n    bObject = isarray ? [] : {};\n\n    for (k in aObject) {\n      if ([\"hasOwnProperty\", \"constructor\"].includes(k)) continue;\n\n      if (isarray || aObject.hasOwnProperty(k)) {\n        v = aObject[k];\n\n        if (v && typeof this._local_api._rpc_encode === \"function\") {\n          const encoded_obj = this._local_api._rpc_encode(v);\n\n          if (encoded_obj && encoded_obj._ctype) {\n            bObject[k] = {\n              _rtype: \"custom\",\n              _rvalue: encoded_obj,\n              _rid: aObject[\"_rid\"]\n            };\n            continue;\n          } // if the returned object does not contain _rtype, assuming the object has been transformed\n          else if (encoded_obj !== undefined) {\n              v = encoded_obj;\n            }\n        }\n\n        if (typeof v === \"function\") {\n          if (as_interface) {\n            const encoded_interface = this._interface_store[aObject[\"_rid\"]];\n            bObject[k] = {\n              _rtype: \"interface\",\n              _rid: aObject[\"_rid\"],\n              _rvalue: k\n            };\n            encoded_interface[k] = v;\n            continue;\n          }\n\n          let interfaceFuncName = null;\n\n          for (var name in this._local_api) {\n            if (this._local_api.hasOwnProperty(name)) {\n              if (name.startsWith(\"_\")) continue;\n\n              if (this._local_api[name] === v) {\n                interfaceFuncName = name;\n                break;\n              }\n            }\n          } // search for prototypes\n\n\n          var functions = Object.getOwnPropertyNames(Object.getPrototypeOf(this._local_api));\n\n          for (var i = 0; i < functions.length; i++) {\n            var name_ = functions[i];\n            if (name_.startsWith(\"_\")) continue;\n\n            if (this._local_api[name_] === v) {\n              interfaceFuncName = name_;\n              break;\n            }\n          }\n\n          if (!interfaceFuncName) {\n            var id = this._store.put(v);\n\n            bObject[k] = {\n              _rtype: \"callback\",\n              _rvalue: v.constructor && v.constructor.name || id,\n              _rindex: id\n            };\n          } else {\n            bObject[k] = {\n              _rtype: \"interface\",\n              _rvalue: interfaceFuncName,\n              _rid: \"_rlocal\"\n            };\n          }\n        } else if (\n        /*global tf*/\n        typeof tf !== \"undefined\" && tf.Tensor && v instanceof tf.Tensor) {\n          const v_buffer = v.dataSync();\n\n          if (v._transfer || _transfer) {\n            transferables.push(v_buffer.buffer);\n            delete v._transfer;\n          }\n\n          bObject[k] = {\n            _rtype: \"ndarray\",\n            _rvalue: v_buffer,\n            _rshape: v.shape,\n            _rdtype: v.dtype\n          };\n        } else if (\n        /*global nj*/\n        typeof nj !== \"undefined\" && nj.NdArray && v instanceof nj.NdArray) {\n          var dtype = _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"typedArrayToDtype\"][v.selection.data.constructor.name];\n\n          if (v._transfer || _transfer) {\n            transferables.push(v.selection.data.buffer);\n            delete v._transfer;\n          }\n\n          bObject[k] = {\n            _rtype: \"ndarray\",\n            _rvalue: v.selection.data,\n            _rshape: v.shape,\n            _rdtype: dtype\n          };\n        } else if (v instanceof Error) {\n          console.error(v);\n          bObject[k] = {\n            _rtype: \"error\",\n            _rvalue: v.toString()\n          };\n        } else if (typeof File !== \"undefined\" && v instanceof File) {\n          bObject[k] = {\n            _rtype: \"file\",\n            _rvalue: v,\n            _rrelative_path: v.relativePath || v.webkitRelativePath\n          };\n        } // send objects supported by structure clone algorithm\n        // https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\n        else if (v !== Object(v) || v instanceof Boolean || v instanceof String || v instanceof Date || v instanceof RegExp || v instanceof Blob || v instanceof ImageData || typeof FileList !== \"undefined\" && v instanceof FileList) {\n            bObject[k] = {\n              _rtype: \"argument\",\n              _rvalue: v\n            };\n          } else if (v instanceof ArrayBuffer) {\n            if (v._transfer || _transfer) {\n              transferables.push(v);\n              delete v._transfer;\n            }\n\n            bObject[k] = {\n              _rtype: \"argument\",\n              _rvalue: v\n            };\n          } else if (v instanceof ArrayBufferView) {\n            if (v._transfer || _transfer) {\n              transferables.push(v.buffer);\n              delete v._transfer;\n            }\n\n            bObject[k] = {\n              _rtype: \"argument\",\n              _rvalue: v\n            };\n          } // TODO: support also Map and Set\n          // TODO: avoid object such as DynamicPlugin instance.\n          else if (v._rintf) {\n              bObject[k] = this._encode(v, true);\n            } else if (typeof v === \"object\") {\n              bObject[k] = this._encode(v, as_interface); // move transferables to the top level object\n\n              if (bObject[k].__transferables__) {\n                for (var t = 0; t < bObject[k].__transferables__.length; t++) {\n                  transferables.push(bObject[k].__transferables__[t]);\n                }\n\n                delete bObject[k].__transferables__;\n              }\n            } else {\n              throw \"imjoy-rpc: Unsupported data type \" + k + \",\" + v;\n            }\n      }\n    }\n\n    if (transferables.length > 0) {\n      bObject.__transferables__ = transferables;\n    }\n\n    return bObject;\n  }\n\n  _decode(aObject, callbackId, withPromise) {\n    if (!aObject) {\n      return aObject;\n    }\n\n    var bObject, v, k;\n\n    if (aObject.hasOwnProperty(\"_rtype\") && aObject.hasOwnProperty(\"_rvalue\")) {\n      if (aObject._rtype === \"custom\") {\n        if (aObject._rvalue && typeof this._local_api._rpc_decode === \"function\") {\n          bObject = this._local_api._rpc_decode(aObject._rvalue);\n\n          if (bObject === undefined) {\n            bObject = aObject;\n          }\n        } else {\n          bObject = aObject;\n        }\n      } else if (aObject._rtype === \"callback\") {\n        bObject = this._genRemoteCallback(callbackId, aObject._rindex, withPromise);\n      } else if (aObject._rtype === \"interface\") {\n        const intfid = aObject._rid === \"_rlocal\" ? \"_rrmote\" : aObject._rid;\n        bObject = this._interface_store[intfid] && this._interface_store[intfid][aObject._rvalue] || this._genRemoteMethod(aObject._rvalue, aObject._rid);\n      } else if (aObject._rtype === \"ndarray\") {\n        /*global nj tf*/\n        //create build array/tensor if used in the plugin\n        if (typeof nj !== \"undefined\" && nj.array) {\n          if (Array.isArray(aObject._rvalue)) {\n            aObject._rvalue = aObject._rvalue.reduce(_appendBuffer);\n          }\n\n          bObject = nj.array(aObject._rvalue, aObject._rdtype).reshape(aObject._rshape);\n        } else if (typeof tf !== \"undefined\" && tf.Tensor) {\n          if (Array.isArray(aObject._rvalue)) {\n            aObject._rvalue = aObject._rvalue.reduce(_appendBuffer);\n          }\n\n          bObject = tf.tensor(aObject._rvalue, aObject._rshape, aObject._rdtype);\n        } else {\n          //keep it as regular if transfered to the main app\n          bObject = aObject;\n        }\n      } else if (aObject._rtype === \"error\") {\n        bObject = new Error(aObject._rvalue);\n      } else if (aObject._rtype === \"file\") {\n        bObject = aObject._rvalue; //patch relativePath\n\n        bObject.relativePath = aObject._rrelative_path;\n      } else if (aObject._rtype === \"argument\") {\n        bObject = aObject._rvalue;\n      }\n\n      return bObject;\n    } else {\n      var isarray = Array.isArray(aObject);\n      bObject = isarray ? [] : {};\n\n      for (k in aObject) {\n        if (isarray || aObject.hasOwnProperty(k)) {\n          v = aObject[k];\n\n          if (typeof v === \"object\" || Array.isArray(v)) {\n            bObject[k] = this._decode(v, callbackId, withPromise);\n          }\n        }\n      }\n\n      return bObject;\n    }\n  }\n\n  _wrap(args, as_interface) {\n    var wrapped = this._encode(args, as_interface);\n\n    var result = {\n      args: wrapped\n    };\n    return result;\n  }\n  /**\n   * Unwraps the set of arguments delivered from the remote site,\n   * replaces all callback identifiers with a function which will\n   * initiate sending that callback identifier back to other site\n   *\n   * @param {Object} args to unwrap\n   *\n   * @param {Boolean} withPromise is true means this the callback should contain a promise\n   *\n   * @returns {Array} unwrapped args\n   */\n\n\n  _unwrap(args, withPromise) {\n    // var called = false;\n    // wraps each callback so that the only one could be called\n    // var once(cb) {\n    //     return function() {\n    //         if (!called) {\n    //             called = true;\n    //             return cb.apply(this, arguments);\n    //         } else {\n    //             var msg =\n    //               'A callback from this set has already been executed';\n    //             throw new Error(msg);\n    //         }\n    //     };\n    // }\n    var result = this._decode(args.args, args.callbackId, withPromise);\n\n    return result;\n  }\n  /**\n   * Generates the wrapped function corresponding to a single remote\n   * callback. When the generated function is called, it will send\n   * the corresponding message to the remote site asking it to\n   * execute the particular callback previously saved during a call\n   * by the remote site a method from the interface of this site\n   *\n   * @param {Number} id of the remote callback to execute\n   * @param {Number} argNum argument index of the callback\n   * @param {Boolean} withPromise is true means this the callback should contain a promise\n   *\n   * @returns {Function} wrapped remote callback\n   */\n\n\n  _genRemoteCallback(id, argNum, withPromise) {\n    var me = this;\n    var remoteCallback;\n\n    if (withPromise) {\n      remoteCallback = function () {\n        return new Promise((resolve, reject) => {\n          var args = me._wrap(Array.prototype.slice.call(arguments));\n\n          var transferables = args.args.__transferables__;\n          if (transferables) delete args.args.__transferables__;\n          resolve.__jailed_pairs__ = reject;\n          reject.__jailed_pairs__ = resolve;\n\n          try {\n            me._connection.emit({\n              type: \"callback\",\n              id: id,\n              _rindex: argNum,\n              args: args,\n              // pid :  me.id,\n              promise: me._wrap([resolve, reject])\n            }, transferables);\n          } catch (e) {\n            reject(`Failed to exectue remote callback (id: ${id}, argNum: ${argNum}).`);\n          }\n        });\n      };\n\n      return remoteCallback;\n    } else {\n      remoteCallback = function () {\n        var args = me._wrap(Array.prototype.slice.call(arguments));\n\n        var transferables = args.args.__transferables__;\n        if (transferables) delete args.args.__transferables__;\n        return me._connection.emit({\n          type: \"callback\",\n          id: id,\n          _rindex: argNum,\n          args: args // pid :  me.id\n\n        }, transferables);\n      };\n\n      return remoteCallback;\n    }\n  }\n  /**\n   * Sends the notification message and breaks the connection\n   */\n\n\n  disconnect() {\n    this._connection.emit({\n      type: \"disconnect\"\n    });\n\n    setTimeout(() => {\n      this._connection.disconnect();\n    }, 2000);\n  }\n\n}\n/**\n * ReferenceStore is a special object which stores other objects\n * and provides the references (number) instead. This reference\n * may then be sent over a json-based communication channel (IPC\n * to another Node.js process or a message to the Worker). Other\n * site may then provide the reference in the responce message\n * implying the given object should be activated.\n *\n * Primary usage for the ReferenceStore is a storage for the\n * callbacks, which therefore makes it possible to initiate a\n * callback execution by the opposite site (which normally cannot\n * directly execute functions over the communication channel).\n *\n * Each stored object can only be fetched once and is not\n * available for the second time. Each stored object must be\n * fetched, since otherwise it will remain stored forever and\n * consume memory.\n *\n * Stored object indeces are simply the numbers, which are however\n * released along with the objects, and are later reused again (in\n * order to postpone the overflow, which should not likely happen,\n * but anyway).\n */\n\nclass ReferenceStore {\n  constructor() {\n    this._store = {}; // stored object\n\n    this._indices = [0]; // smallest available indices\n\n    this._readyHandler = function () {};\n\n    this._busyHandler = function () {};\n\n    this._readyHandler();\n  }\n  /**\n   * call handler when the store is empty\n   *\n   * @param {FUNCTION} id of a handler\n   */\n\n\n  onReady(readyHandler) {\n    this._readyHandler = readyHandler || function () {};\n  }\n  /**\n   * call handler when the store is not empty\n   *\n   * @param {FUNCTION} id of a handler\n   */\n\n\n  onBusy(busyHandler) {\n    this._busyHandler = busyHandler || function () {};\n  }\n  /**\n   * get the length of the store\n   *\n   */\n\n\n  getStack() {\n    return Object.keys(this._store).length;\n  }\n  /**\n   * @function _genId() generates the new reference id\n   *\n   * @returns {Number} smallest available id and reserves it\n   */\n\n\n  _genId() {\n    var id;\n\n    if (this._indices.length === 1) {\n      id = this._indices[0]++;\n    } else {\n      id = this._indices.shift();\n    }\n\n    return id;\n  }\n  /**\n   * Releases the given reference id so that it will be available by\n   * another object stored\n   *\n   * @param {Number} id to release\n   */\n\n\n  _releaseId(id) {\n    for (var i = 0; i < this._indices.length; i++) {\n      if (id < this._indices[i]) {\n        this._indices.splice(i, 0, id);\n\n        break;\n      }\n    } // cleaning-up the sequence tail\n\n\n    for (i = this._indices.length - 1; i >= 0; i--) {\n      if (this._indices[i] - 1 === this._indices[i - 1]) {\n        this._indices.pop();\n      } else {\n        break;\n      }\n    }\n  }\n  /**\n   * Stores the given object and returns the refernce id instead\n   *\n   * @param {Object} obj to store\n   *\n   * @returns {Number} reference id of the stored object\n   */\n\n\n  put(obj) {\n    if (this._busyHandler && Object.keys(this._store).length === 0) {\n      this._busyHandler();\n    }\n\n    var id = this._genId();\n\n    this._store[id] = obj;\n    return id;\n  }\n  /**\n   * Retrieves previously stored object and releases its reference\n   *\n   * @param {Number} id of an object to retrieve\n   */\n\n\n  fetch(id) {\n    var obj = this._store[id];\n\n    if (obj && !obj.__remote_method) {\n      delete this._store[id];\n\n      this._releaseId(id);\n\n      if (this._readyHandler && Object.keys(this._store).length === 0) {\n        this._readyHandler();\n      }\n    }\n\n    if (obj && obj.__jailed_pairs__) {\n      const _id = getKeyByValue(this._store, obj.__jailed_pairs__);\n\n      this.fetch(_id);\n    }\n\n    return obj;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcnBjLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1qb3lSUEMvc3JjL3JwYy5qcz8yM2MyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udGFpbnMgdGhlIFJQQyBvYmplY3QgdXNlZCBib3RoIGJ5IHRoZSBhcHBsaWNhdGlvblxuICogc2l0ZSwgYW5kIGJ5IGVhY2ggcGx1Z2luXG4gKi9cbmltcG9ydCB7IHJhbmRJZCwgdHlwZWRBcnJheVRvRHR5cGUsIEV2ZW50TWFuYWdlciB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTiA9IFwiMC4yLjFcIjtcblxuY29uc3QgQXJyYXlCdWZmZXJWaWV3ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKFxuICBPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3IFVpbnQ4QXJyYXkoKSlcbikuY29uc3RydWN0b3I7XG5cbmZ1bmN0aW9uIF9hcHBlbmRCdWZmZXIoYnVmZmVyMSwgYnVmZmVyMikge1xuICBjb25zdCB0bXAgPSBuZXcgVWludDhBcnJheShidWZmZXIxLmJ5dGVMZW5ndGggKyBidWZmZXIyLmJ5dGVMZW5ndGgpO1xuICB0bXAuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlcjEpLCAwKTtcbiAgdG1wLnNldChuZXcgVWludDhBcnJheShidWZmZXIyKSwgYnVmZmVyMS5ieXRlTGVuZ3RoKTtcbiAgcmV0dXJuIHRtcC5idWZmZXI7XG59XG5cbmZ1bmN0aW9uIGdldEtleUJ5VmFsdWUob2JqZWN0LCB2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5maW5kKGtleSA9PiBvYmplY3Rba2V5XSA9PT0gdmFsdWUpO1xufVxuLyoqXG4gKiBSUEMgb2JqZWN0IHJlcHJlc2VudHMgYSBzaW5nbGUgc2l0ZSBpbiB0aGVcbiAqIGNvbW11bmljYXRpb24gcHJvdG9jb2wgYmV0d2VlbiB0aGUgYXBwbGljYXRpb24gYW5kIHRoZSBwbHVnaW5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29ubmVjdGlvbiBhIHNwZWNpYWwgb2JqZWN0IGFsbG93aW5nIHRvIHNlbmRcbiAqIGFuZCByZWNlaXZlIG1lc3NhZ2VzIGZyb20gdGhlIG9wcG9zaXRlIHNpdGUgKGJhc2ljYWxseSBpdFxuICogc2hvdWxkIG9ubHkgcHJvdmlkZSBzZW5kKCkgYW5kIG9uTWVzc2FnZSgpIG1ldGhvZHMpXG4gKi9cbmV4cG9ydCBjbGFzcyBSUEMgZXh0ZW5kcyBFdmVudE1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBjb25maWcpIHtcbiAgICBzdXBlcihjb25maWcgJiYgY29uZmlnLmRlYnVnKTtcbiAgICB0aGlzLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmUgPSB7fTtcbiAgICB0aGlzLl9sb2NhbF9hcGkgPSBudWxsO1xuICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSBpcyBhbiBleGVjdXRlIGZ1bmN0aW9uXG4gICAgY29uc3QgbmFtZSA9IHRoaXMuY29uZmlnLm5hbWU7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5leGVjdXRlID1cbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZXhlY3V0ZSB8fFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY29ubmVjdGlvbi5leGVjdXRlIG5vdCBpbXBsZW1lbnRlZCAoaW4gXCIke25hbWV9XCIpYCk7XG4gICAgICB9O1xuICAgIHRoaXMuX3N0b3JlID0gbmV3IFJlZmVyZW5jZVN0b3JlKCk7XG4gICAgdGhpcy5fbWV0aG9kX3JlZnMgPSBuZXcgUmVmZXJlbmNlU3RvcmUoKTtcbiAgICB0aGlzLl9tZXRob2RfcmVmcy5vblJlYWR5KCgpID0+IHtcbiAgICAgIHRoaXMuX2ZpcmUoXCJyZW1vdGVJZGxlXCIpO1xuICAgIH0pO1xuICAgIHRoaXMuX21ldGhvZF9yZWZzLm9uQnVzeSgoKSA9PiB7XG4gICAgICB0aGlzLl9maXJlKFwicmVtb3RlQnVzeVwiKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXR1cE1lc3NhZ2VIYW5sZGVycygpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xuICAgICAgdHlwZTogXCJpbml0aWFsaXplZFwiLFxuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZ1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aGVuIHJlY2VpdmVkIGEgcmVzcG9uY2UgZnJvbSB0aGVcbiAgICogcmVtb3RlIHNpdGUgcmVwb3J0aW5nIHRoYXQgdGhlIHByZXZpb3VzbHkgcHJvdmlkZWQgaW50ZXJmYWNlXG4gICAqIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBzZXQgYXMgcmVtb3RlIGZvciB0aGF0IHNpdGVcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgKi9cblxuICBnZXRSZW1vdGVDYWxsU3RhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuX21ldGhvZF9yZWZzLmdldFN0YWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge09iamVjdH0gc2V0IG9mIHJlbW90ZSBpbnRlcmZhY2UgbWV0aG9kc1xuICAgKi9cbiAgZ2V0UmVtb3RlKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbXCJfcnJlbW90ZVwiXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBpbnRlcmZhY2Ugb2YgdGhpcyBzaXRlIG1ha2luZyBpdCBhdmFpbGFibGUgdG8gdGhlXG4gICAqIHJlbW90ZSBzaXRlIGJ5IHNlbmRpbmcgYSBtZXNzYWdlIHdpdGggYSBzZXQgb2YgbWV0aG9kcyBuYW1lc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gX2ludGVyZmFjZSB0byBzZXRcbiAgICovXG4gIHNldEludGVyZmFjZShfaW50ZXJmYWNlKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmZvcndhcmRpbmdfZnVuY3Rpb25zKSB7XG4gICAgICBmb3IgKGxldCBmdW5jX25hbWUgb2YgdGhpcy5jb25maWcuZm9yd2FyZGluZ19mdW5jdGlvbnMpIHtcbiAgICAgICAgY29uc3QgX3JlbW90ZSA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVtcIl9ycmVtb3RlXCJdO1xuICAgICAgICBpZiAoX3JlbW90ZVtmdW5jX25hbWVdKSB7XG4gICAgICAgICAgaWYgKF9pbnRlcmZhY2UuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgaWYgKCFfaW50ZXJmYWNlW2Z1bmNfbmFtZV0pIHtcbiAgICAgICAgICAgICAgX2ludGVyZmFjZVtmdW5jX25hbWVdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBfcmVtb3RlW2Z1bmNfbmFtZV0oLi4uYXJncyk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChfaW50ZXJmYWNlLmNvbnN0cnVjdG9yLmNvbnN0cnVjdG9yID09PSBGdW5jdGlvbikge1xuICAgICAgICAgICAgaWYgKCFfaW50ZXJmYWNlLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jX25hbWVdKSB7XG4gICAgICAgICAgICAgIF9pbnRlcmZhY2UuY29uc3RydWN0b3IucHJvdG90eXBlW2Z1bmNfbmFtZV0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIF9yZW1vdGVbZnVuY19uYW1lXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbG9jYWxfYXBpID0gX2ludGVyZmFjZTtcbiAgICB0aGlzLl9maXJlKFwiaW50ZXJmYWNlQXZhaWxhYmxlXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIHRoZSBhY3R1YWwgaW50ZXJmYWNlIHRvIHRoZSByZW1vdGUgc2l0ZSB1cG9uIGl0IHdhc1xuICAgKiB1cGRhdGVkIG9yIGJ5IGEgc3BlY2lhbCByZXF1ZXN0IG9mIHRoZSByZW1vdGUgc2l0ZVxuICAgKi9cbiAgc2VuZEludGVyZmFjZSgpIHtcbiAgICBpZiAoIXRoaXMuX2xvY2FsX2FwaSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW50ZXJmYWNlIGlzIG5vdCBzZXQuXCIpO1xuICAgIH1cbiAgICB0aGlzLl9sb2NhbF9hcGkuX3JpZCA9IFwiX3Jsb2NhbFwiO1xuICAgIGNvbnN0IGFwaSA9IHRoaXMuX2VuY29kZSh0aGlzLl9sb2NhbF9hcGksIHRydWUpO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7IHR5cGU6IFwic2V0SW50ZXJmYWNlXCIsIGFwaTogYXBpIH0pO1xuICB9XG5cbiAgc2V0QXV0aGVudGljYXRvcihhdXRoZW50aWNhdG9yKSB7XG4gICAgdGhpcy5hdXRoZW50aWNhdG9yID0gYXV0aGVudGljYXRvcjtcbiAgfVxuXG4gIHNldEF1dGhvcml6ZXIoYXV0aG9yaXplcikge1xuICAgIHRoaXMuYXV0aG9yaXplciA9IGF1dGhvcml6ZXI7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhIG1lc3NhZ2UgZnJvbSB0aGUgcmVtb3RlIHNpdGVcbiAgICovXG4gIC8vIHZhciBjYWxsYmFja19yZWcgPSBuZXcgUmVnRXhwKFwib251cGRhdGV8cnVuJFwiKVxuICBfc2V0dXBNZXNzYWdlSGFubGRlcnMoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcImluaXRcIiwgdGhpcy5pbml0KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiYXV0aGVudGljYXRlXCIsIGNyZWRlbnRpYWwgPT4ge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuYXV0aGVudGljYXRvcihjcmVkZW50aWFsKSlcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xuICAgICAgICAgICAgICB0eXBlOiBcImF1dGhlbnRpY2F0ZWRcIixcbiAgICAgICAgICAgICAgdG9rZW46IHRva2VuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHtcbiAgICAgICAgICAgICAgdHlwZTogXCJhdXRoZW50aWNhdGVkXCIsXG4gICAgICAgICAgICAgIGVycm9yOiByZXN1bHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZW1pdCh7XG4gICAgICAgICAgICB0eXBlOiBcImF1dGhlbnRpY2F0ZWRcIixcbiAgICAgICAgICAgIGVycm9yOiBlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXCJleGVjdXRlXCIsIGRhdGEgPT4ge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2Nvbm5lY3Rpb24uZXhlY3V0ZShkYXRhLmNvZGUpKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJleGVjdXRlZFwiIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uLmVtaXQoe1xuICAgICAgICAgICAgdHlwZTogXCJleGVjdXRlZFwiLFxuICAgICAgICAgICAgZXJyb3I6IGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwibWV0aG9kXCIsIGRhdGEgPT4ge1xuICAgICAgbGV0IHJlc29sdmUsIHJlamVjdCwgbWV0aG9kLCBhcmdzLCByZXN1bHQ7XG4gICAgICBsZXQgX2ludGVyZmFjZSA9IHRoaXMuX2ludGVyZmFjZV9zdG9yZVtkYXRhLnBpZF07XG4gICAgICBjb25zdCBfbWV0aG9kX2NvbnRleHQgPSBfaW50ZXJmYWNlLl9fdGhpc19fIHx8IF9pbnRlcmZhY2U7XG4gICAgICBpZiAoIV9pbnRlcmZhY2UpIHtcbiAgICAgICAgaWYgKGRhdGEucHJvbWlzZSkge1xuICAgICAgICAgIFtyZXNvbHZlLCByZWplY3RdID0gdGhpcy5fdW53cmFwKGRhdGEucHJvbWlzZSwgZmFsc2UpO1xuICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgIGBwbHVnaW4gYXBpIGZ1bmN0aW9uIGlzIG5vdCBhdmFpYWxiZSBpbiBcIiR7ZGF0YS5waWR9XCIsIHRoZSBwbHVnaW4gbWF5YmUgdGVybWluYXRlZC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgYHBsdWdpbiBhcGkgZnVuY3Rpb24gaXMgbm90IGF2YWlhbGJlIGluICR7ZGF0YS5waWR9LCB0aGUgcGx1Z2luIG1heWJlIHRlcm1pbmF0ZWQuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtZXRob2QgPSBfaW50ZXJmYWNlW2RhdGEubmFtZV07XG4gICAgICBhcmdzID0gdGhpcy5fdW53cmFwKGRhdGEuYXJncywgdHJ1ZSk7XG4gICAgICBpZiAoZGF0YS5wcm9taXNlKSB7XG4gICAgICAgIFtyZXNvbHZlLCByZWplY3RdID0gdGhpcy5fdW53cmFwKGRhdGEucHJvbWlzZSwgZmFsc2UpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3VsdCA9IG1ldGhvZC5hcHBseShfbWV0aG9kX2NvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHxcbiAgICAgICAgICAgIChtZXRob2QuY29uc3RydWN0b3IgJiYgbWV0aG9kLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiQXN5bmNGdW5jdGlvblwiKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVzdWx0LnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5jb25maWcubmFtZSwgZSwgbWV0aG9kKTtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWV0aG9kLmFwcGx5KF9tZXRob2RfY29udGV4dCwgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uZmlnLm5hbWUsIGUsIG1ldGhvZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXCJjYWxsYmFja1wiLCBkYXRhID0+IHtcbiAgICAgIGxldCByZXNvbHZlLCByZWplY3QsIG1ldGhvZCwgYXJncywgcmVzdWx0O1xuICAgICAgaWYgKGRhdGEucHJvbWlzZSkge1xuICAgICAgICBbcmVzb2x2ZSwgcmVqZWN0XSA9IHRoaXMuX3Vud3JhcChkYXRhLnByb21pc2UsIGZhbHNlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtZXRob2QgPSB0aGlzLl9zdG9yZS5mZXRjaChkYXRhLl9yaW5kZXgpO1xuICAgICAgICAgIGFyZ3MgPSB0aGlzLl91bndyYXAoZGF0YS5hcmdzLCB0cnVlKTtcbiAgICAgICAgICBpZiAoIW1ldGhvZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIkNhbGxiYWNrIGZ1bmN0aW9uIGNhbiBvbmx5IGNhbGxlZCBvbmNlLCBpZiB5b3Ugd2FudCB0byBjYWxsIGEgZnVuY3Rpb24gZm9yIG11bHRpcGxlIHRpbWVzLCBwbGVhc2UgbWFrZSBpdCBhcyBhIHBsdWdpbiBhcGkgZnVuY3Rpb24uIFNlZSBodHRwczovL2ltam95LmlvL2RvY3MgZm9yIG1vcmUgZGV0YWlscy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0ID0gbWV0aG9kLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHxcbiAgICAgICAgICAgIChtZXRob2QuY29uc3RydWN0b3IgJiYgbWV0aG9kLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiQXN5bmNGdW5jdGlvblwiKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmVzdWx0LnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5jb25maWcubmFtZSwgZSwgbWV0aG9kKTtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWV0aG9kID0gdGhpcy5fc3RvcmUuZmV0Y2goZGF0YS5fcmluZGV4KTtcbiAgICAgICAgICBhcmdzID0gdGhpcy5fdW53cmFwKGRhdGEuYXJncywgdHJ1ZSk7XG4gICAgICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJQbGVhc2Ugbm90aWNlIHRoYXQgY2FsbGJhY2sgZnVuY3Rpb24gY2FuIG9ubHkgY2FsbGVkIG9uY2UsIGlmIHlvdSB3YW50IHRvIGNhbGwgYSBmdW5jdGlvbiBmb3IgbXVsdGlwbGUgdGltZXMsIHBsZWFzZSBtYWtlIGl0IGFzIGEgcGx1Z2luIGFwaSBmdW5jdGlvbi4gU2VlIGh0dHBzOi8vaW1qb3kuaW8vZG9jcyBmb3IgbW9yZSBkZXRhaWxzLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXRob2QuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uZmlnLm5hbWUsIGUsIG1ldGhvZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwic2V0SW50ZXJmYWNlXCIsIGRhdGEgPT4ge1xuICAgICAgdGhpcy5fc2V0UmVtb3RlSW50ZXJmYWNlKGRhdGEuYXBpKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiZ2V0SW50ZXJmYWNlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2ZpcmUoXCJnZXRJbnRlcmZhY2VcIik7XG4gICAgICBpZiAodGhpcy5fbG9jYWxfYXBpKSB0aGlzLnNlbmRJbnRlcmZhY2UoKTtcbiAgICAgIGVsc2UgdGhpcy5vbmNlKFwiaW50ZXJmYWNlQXZhaWxhYmxlXCIsIHRoaXMuc2VuZEludGVyZmFjZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5vbihcImludGVyZmFjZVNldEFzUmVtb3RlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2ZpcmUoXCJpbnRlcmZhY2VTZXRBc1JlbW90ZVwiKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiZGlzY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9maXJlKFwiYmVmb3JlRGlzY29ubmVjdFwiKTtcbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5fZmlyZShcImRpc2Nvbm5lY3RlZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGF1dGhlbnRpY2F0ZShjcmVkZW50aWFsKSB7XG4gICAgdGhpcy5vbmNlKFwiYXV0aGVudGljYXRlZFwiLCByZXN1bHQgPT4ge1xuICAgICAgaWYgKCFyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHJlc3VsdC5lcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJhdXRoZW50aWNhdGVcIiwgY3JlZGVudGlhbDogY3JlZGVudGlhbCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHJlcXVlc3RzIHRvIHRoZSByZW1vdGUgc2l0ZSBhc2tpbmcgaXQgdG8gcHJvdmlkZSBpdHNcbiAgICogY3VycmVudCBpbnRlcmZhY2VcbiAgICovXG4gIHJlcXVlc3RSZW1vdGUoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJnZXRJbnRlcmZhY2VcIiB9KTtcbiAgfVxuXG4gIF9uZGFycmF5KHR5cGVkQXJyYXksIHNoYXBlLCBkdHlwZSkge1xuICAgIHZhciBfZHR5cGUgPSB0eXBlZEFycmF5VG9EdHlwZVt0eXBlZEFycmF5LmNvbnN0cnVjdG9yLm5hbWVdO1xuICAgIGlmIChkdHlwZSAmJiBkdHlwZSAhPT0gX2R0eXBlKSB7XG4gICAgICB0aHJvdyBcImR0eXBlIGRvZXNuJ3QgbWF0Y2ggdGhlIHR5cGUgb2YgdGhlIGFycmF5OiBcIiArXG4gICAgICAgIF9kdHlwZSArXG4gICAgICAgIFwiICE9IFwiICtcbiAgICAgICAgZHR5cGU7XG4gICAgfVxuICAgIHNoYXBlID0gc2hhcGUgfHwgW3R5cGVkQXJyYXkubGVuZ3RoXTtcbiAgICByZXR1cm4ge1xuICAgICAgX3J0eXBlOiBcIm5kYXJyYXlcIixcbiAgICAgIF9ydmFsdWU6IHR5cGVkQXJyYXksXG4gICAgICBfcnNoYXBlOiBzaGFwZSxcbiAgICAgIF9yZHR5cGU6IF9kdHlwZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbmV3IHJlbW90ZSBpbnRlcmZhY2UgcHJvdmlkZWQgYnkgdGhlIG90aGVyIHNpdGVcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMgbGlzdCBvZiBmdW5jdGlvbiBuYW1lc1xuICAgKi9cbiAgX3NldFJlbW90ZUludGVyZmFjZShhcGkpIHtcbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbXCJfcnJlbW90ZVwiXSA9IHRoaXMuX2RlY29kZShhcGkpO1xuICAgIHRoaXMuX2ZpcmUoXCJyZW1vdGVSZWFkeVwiKTtcbiAgICB0aGlzLl9yZXBvcnRSZW1vdGVTZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHdyYXBwZWQgZnVuY3Rpb24gY29ycmVzcG9uZGluZyB0byBhIHNpbmdsZSByZW1vdGVcbiAgICogbWV0aG9kLiBXaGVuIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb24gaXMgY2FsbGVkLCBpdCB3aWxsIHNlbmQgdGhlXG4gICAqIGNvcnJlc3BvbmRpbmcgbWVzc2FnZSB0byB0aGUgcmVtb3RlIHNpdGUgYXNraW5nIGl0IHRvIGV4ZWN1dGVcbiAgICogdGhlIHBhcnRpY3VsYXIgbWV0aG9kIG9mIGl0cyBpbnRlcmZhY2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgb2YgdGhlIHJlbW90ZSBtZXRob2RcbiAgICpcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSB3cmFwcGVkIHJlbW90ZSBtZXRob2RcbiAgICovXG4gIF9nZW5SZW1vdGVNZXRob2QobmFtZSwgaW50ZXJmYWNlX2lkKSB7XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgcmVtb3RlTWV0aG9kID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgaWQgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlkID0gbWUuX21ldGhvZF9yZWZzLnB1dChcbiAgICAgICAgICAgIGludGVyZmFjZV9pZCA/IGludGVyZmFjZV9pZCArIFwiL1wiICsgbmFtZSA6IG5hbWVcbiAgICAgICAgICApO1xuICAgICAgICAgIHZhciB3cmFwcGVkX3Jlc29sdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gbnVsbCkgbWUuX21ldGhvZF9yZWZzLmZldGNoKGlkKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgd3JhcHBlZF9yZWplY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gbnVsbCkgbWUuX21ldGhvZF9yZWZzLmZldGNoKGlkKTtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgd3JhcHBlZF9yZXNvbHZlLl9famFpbGVkX3BhaXJzX18gPSB3cmFwcGVkX3JlamVjdDtcbiAgICAgICAgICB3cmFwcGVkX3JlamVjdC5fX2phaWxlZF9wYWlyc19fID0gd3JhcHBlZF9yZXNvbHZlO1xuXG4gICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICAgIGlmIChuYW1lID09PSBcInJlZ2lzdGVyXCIgfHwgbmFtZSA9PT0gXCJleHBvcnRcIiB8fCBuYW1lID09PSBcIm9uXCIpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBtZS5fd3JhcChhcmdzLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJncyA9IG1lLl93cmFwKGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICBpZiAodHJhbnNmZXJhYmxlcykgZGVsZXRlIGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICBtZS5fY29ubmVjdGlvbi5lbWl0KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcIm1ldGhvZFwiLFxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICBwaWQ6IGludGVyZmFjZV9pZCxcbiAgICAgICAgICAgICAgYXJnczogYXJncyxcbiAgICAgICAgICAgICAgcHJvbWlzZTogbWUuX3dyYXAoW3dyYXBwZWRfcmVzb2x2ZSwgd3JhcHBlZF9yZWplY3RdKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zZmVyYWJsZXNcbiAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKGlkKSBtZS5fbWV0aG9kX3JlZnMuZmV0Y2goaWQpO1xuICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gZXhlY3R1ZSByZW1vdGUgbWV0aG9kIChpbnRlcmZhY2U6ICR7aW50ZXJmYWNlX2lkIHx8XG4gICAgICAgICAgICAgIG1lLmlkfSwgbWV0aG9kOiAke25hbWV9KSwgZXJyb3I6ICR7ZX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgICByZW1vdGVNZXRob2QuX19yZW1vdGVfbWV0aG9kID0gdHJ1ZTtcbiAgICByZXR1cm4gcmVtb3RlTWV0aG9kO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgcmVzcG9uY2UgcmVwb3J0aW5nIHRoYXQgaW50ZXJmYWNlIGp1c3QgcHJvdmlkZWQgYnkgdGhlXG4gICAqIHJlbW90ZSBzaXRlIHdhcyBzdWNjZXNzZnVsbHkgc2V0IGJ5IHRoaXMgc2l0ZSBhcyByZW1vdGVcbiAgICovXG4gIF9yZXBvcnRSZW1vdGVTZXQoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJpbnRlcmZhY2VTZXRBc1JlbW90ZVwiIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmVzIHRoZSBwcm92aWRlZCBzZXQgb2YgcmVtb3RlIG1ldGhvZCBhcmd1bWVudHMgZm9yXG4gICAqIHNlbmRpbmcgdG8gdGhlIHJlbW90ZSBzaXRlLCByZXBsYWNlcyBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoXG4gICAqIGlkZW50aWZpZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgdG8gd3JhcFxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHdyYXBwZWQgYXJndW1lbnRzXG4gICAqL1xuXG4gIF9lbmNvZGVJbnRlcmZhY2UoYU9iamVjdCkge1xuICAgIGxldCB2LCBrLCBrZXlzO1xuICAgIGNvbnN0IGVuY29kZWRfaW50ZXJmYWNlID0ge307XG4gICAgYU9iamVjdFtcIl9yaWRcIl0gPSBhT2JqZWN0W1wiX3JpZFwiXSB8fCByYW5kSWQoKTtcbiAgICAvLyBhbiBvYmplY3QvYXJyYXlcbiAgICBpZiAoYU9iamVjdC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0IHx8IEFycmF5LmlzQXJyYXkoYU9iamVjdCkpIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhhT2JqZWN0KTtcbiAgICB9XG4gICAgLy8gYSBjbGFzc1xuICAgIGVsc2UgaWYgKGFPYmplY3QuY29uc3RydWN0b3IgPT09IEZ1bmN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgaW5zdGFudGlhdGUgdGhlIGNsYXNzIGJlZm9yZSBleHBvcnR0aW5nIGl0LlwiKTtcbiAgICB9XG4gICAgLy8gaW5zdGFuY2Ugb2YgYSBjbGFzc1xuICAgIGVsc2UgaWYgKGFPYmplY3QuY29uc3RydWN0b3IuY29uc3RydWN0b3IgPT09IEZ1bmN0aW9uKSB7XG4gICAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFPYmplY3QpKS5jb25jYXQoXG4gICAgICAgIE9iamVjdC5rZXlzKGFPYmplY3QpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIGludGVyZmFjZSB0eXBlXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJPYmplY3QgPSBBcnJheS5pc0FycmF5KGFPYmplY3QpID8gW10gOiB7fTtcblxuICAgIGZvciAoayBvZiBrZXlzKSB7XG4gICAgICBpZiAoW1wiaGFzT3duUHJvcGVydHlcIiwgXCJjb25zdHJ1Y3RvclwiXS5pbmNsdWRlcyhrKSkgY29udGludWU7XG5cbiAgICAgIGlmIChrLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdiA9IGFPYmplY3Rba107XG5cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGJPYmplY3Rba10gPSB7XG4gICAgICAgICAgX3J0eXBlOiBcImludGVyZmFjZVwiLFxuICAgICAgICAgIF9yaWQ6IGFPYmplY3RbXCJfcmlkXCJdLFxuICAgICAgICAgIF9ydmFsdWU6IGtcbiAgICAgICAgfTtcbiAgICAgICAgZW5jb2RlZF9pbnRlcmZhY2Vba10gPSB2O1xuICAgICAgfSBlbHNlIGlmIChPYmplY3QodikgIT09IHYpIHtcbiAgICAgICAgYk9iamVjdFtrXSA9IHsgX3J0eXBlOiBcImFyZ3VtZW50XCIsIF9ydmFsdWU6IHYgfTtcbiAgICAgICAgZW5jb2RlZF9pbnRlcmZhY2Vba10gPSB2O1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBiT2JqZWN0W2tdID0gdGhpcy5fZW5jb2RlSW50ZXJmYWNlKHYpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbYU9iamVjdFtcIl9yaWRcIl1dID0gZW5jb2RlZF9pbnRlcmZhY2U7XG5cbiAgICAvLyByZW1vdmUgaW50ZXJmYWNlIHdoZW4gY2xvc2VkXG4gICAgaWYgKGFPYmplY3Qub24gJiYgdHlwZW9mIGFPYmplY3Qub24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgYU9iamVjdC5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2ludGVyZmFjZV9zdG9yZVthT2JqZWN0W1wiX3JpZFwiXV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGJPYmplY3Q7XG4gIH1cblxuICBfZW5jb2RlKGFPYmplY3QsIGFzX2ludGVyZmFjZSkge1xuICAgIGNvbnN0IHRyYW5zZmVyYWJsZXMgPSBbXTtcbiAgICBpZiAoIWFPYmplY3QpIHtcbiAgICAgIHJldHVybiBhT2JqZWN0O1xuICAgIH1cbiAgICBjb25zdCBfdHJhbnNmZXIgPSBhT2JqZWN0Ll90cmFuc2ZlcjtcbiAgICBsZXQgYk9iamVjdCwgdiwgaztcbiAgICBjb25zdCBpc2FycmF5ID0gQXJyYXkuaXNBcnJheShhT2JqZWN0KTtcbiAgICAvL3NraXAgaWYgYWxyZWFkeSBlbmNvZGVkXG4gICAgaWYgKHR5cGVvZiBhT2JqZWN0ID09PSBcIm9iamVjdFwiICYmIGFPYmplY3QuX3J0eXBlICYmIGFPYmplY3QuX3J2YWx1ZSkge1xuICAgICAgcmV0dXJuIGFPYmplY3Q7XG4gICAgfVxuXG4gICAgLy9lbmNvZGUgaW50ZXJmYWNlc1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBhT2JqZWN0ID09PSBcIm9iamVjdFwiICYmXG4gICAgICAhQXJyYXkuaXNBcnJheShhT2JqZWN0KSAmJlxuICAgICAgKGFPYmplY3QuX3JpbnRmIHx8IGFzX2ludGVyZmFjZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVJbnRlcmZhY2UoYU9iamVjdCk7XG4gICAgfVxuXG4gICAgaWYgKGFzX2ludGVyZmFjZSkge1xuICAgICAgYU9iamVjdFtcIl9yaWRcIl0gPSBhT2JqZWN0W1wiX3JpZFwiXSB8fCByYW5kSWQoKTtcbiAgICAgIHRoaXMuX2ludGVyZmFjZV9zdG9yZVthT2JqZWN0W1wiX3JpZFwiXV0gPVxuICAgICAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbYU9iamVjdFtcIl9yaWRcIl1dIHx8IChpc2FycmF5ID8gW10gOiB7fSk7XG4gICAgfVxuXG4gICAgYk9iamVjdCA9IGlzYXJyYXkgPyBbXSA6IHt9O1xuICAgIGZvciAoayBpbiBhT2JqZWN0KSB7XG4gICAgICBpZiAoW1wiaGFzT3duUHJvcGVydHlcIiwgXCJjb25zdHJ1Y3RvclwiXS5pbmNsdWRlcyhrKSkgY29udGludWU7XG4gICAgICBpZiAoaXNhcnJheSB8fCBhT2JqZWN0Lmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgIHYgPSBhT2JqZWN0W2tdO1xuICAgICAgICBpZiAodiAmJiB0eXBlb2YgdGhpcy5fbG9jYWxfYXBpLl9ycGNfZW5jb2RlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBlbmNvZGVkX29iaiA9IHRoaXMuX2xvY2FsX2FwaS5fcnBjX2VuY29kZSh2KTtcbiAgICAgICAgICBpZiAoZW5jb2RlZF9vYmogJiYgZW5jb2RlZF9vYmouX2N0eXBlKSB7XG4gICAgICAgICAgICBiT2JqZWN0W2tdID0ge1xuICAgICAgICAgICAgICBfcnR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICAgIF9ydmFsdWU6IGVuY29kZWRfb2JqLFxuICAgICAgICAgICAgICBfcmlkOiBhT2JqZWN0W1wiX3JpZFwiXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBpZiB0aGUgcmV0dXJuZWQgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gX3J0eXBlLCBhc3N1bWluZyB0aGUgb2JqZWN0IGhhcyBiZWVuIHRyYW5zZm9ybWVkXG4gICAgICAgICAgZWxzZSBpZiAoZW5jb2RlZF9vYmogIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdiA9IGVuY29kZWRfb2JqO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGlmIChhc19pbnRlcmZhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRfaW50ZXJmYWNlID0gdGhpcy5faW50ZXJmYWNlX3N0b3JlW2FPYmplY3RbXCJfcmlkXCJdXTtcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB7XG4gICAgICAgICAgICAgIF9ydHlwZTogXCJpbnRlcmZhY2VcIixcbiAgICAgICAgICAgICAgX3JpZDogYU9iamVjdFtcIl9yaWRcIl0sXG4gICAgICAgICAgICAgIF9ydmFsdWU6IGtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbmNvZGVkX2ludGVyZmFjZVtrXSA9IHY7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGludGVyZmFjZUZ1bmNOYW1lID0gbnVsbDtcbiAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX2xvY2FsX2FwaSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKFwiX1wiKSkgY29udGludWU7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9sb2NhbF9hcGlbbmFtZV0gPT09IHYpIHtcbiAgICAgICAgICAgICAgICBpbnRlcmZhY2VGdW5jTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc2VhcmNoIGZvciBwcm90b3R5cGVzXG4gICAgICAgICAgdmFyIGZ1bmN0aW9ucyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFxuICAgICAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMuX2xvY2FsX2FwaSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbmFtZV8gPSBmdW5jdGlvbnNbaV07XG4gICAgICAgICAgICBpZiAobmFtZV8uc3RhcnRzV2l0aChcIl9cIikpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsX2FwaVtuYW1lX10gPT09IHYpIHtcbiAgICAgICAgICAgICAgaW50ZXJmYWNlRnVuY05hbWUgPSBuYW1lXztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaW50ZXJmYWNlRnVuY05hbWUpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuX3N0b3JlLnB1dCh2KTtcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB7XG4gICAgICAgICAgICAgIF9ydHlwZTogXCJjYWxsYmFja1wiLFxuICAgICAgICAgICAgICBfcnZhbHVlOiAodi5jb25zdHJ1Y3RvciAmJiB2LmNvbnN0cnVjdG9yLm5hbWUpIHx8IGlkLFxuICAgICAgICAgICAgICBfcmluZGV4OiBpZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYk9iamVjdFtrXSA9IHtcbiAgICAgICAgICAgICAgX3J0eXBlOiBcImludGVyZmFjZVwiLFxuICAgICAgICAgICAgICBfcnZhbHVlOiBpbnRlcmZhY2VGdW5jTmFtZSxcbiAgICAgICAgICAgICAgX3JpZDogXCJfcmxvY2FsXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIC8qZ2xvYmFsIHRmKi9cbiAgICAgICAgICB0eXBlb2YgdGYgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICB0Zi5UZW5zb3IgJiZcbiAgICAgICAgICB2IGluc3RhbmNlb2YgdGYuVGVuc29yXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHZfYnVmZmVyID0gdi5kYXRhU3luYygpO1xuICAgICAgICAgIGlmICh2Ll90cmFuc2ZlciB8fCBfdHJhbnNmZXIpIHtcbiAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaCh2X2J1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0ge1xuICAgICAgICAgICAgX3J0eXBlOiBcIm5kYXJyYXlcIixcbiAgICAgICAgICAgIF9ydmFsdWU6IHZfYnVmZmVyLFxuICAgICAgICAgICAgX3JzaGFwZTogdi5zaGFwZSxcbiAgICAgICAgICAgIF9yZHR5cGU6IHYuZHR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIC8qZ2xvYmFsIG5qKi9cbiAgICAgICAgICB0eXBlb2YgbmogIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICBuai5OZEFycmF5ICYmXG4gICAgICAgICAgdiBpbnN0YW5jZW9mIG5qLk5kQXJyYXlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdmFyIGR0eXBlID0gdHlwZWRBcnJheVRvRHR5cGVbdi5zZWxlY3Rpb24uZGF0YS5jb25zdHJ1Y3Rvci5uYW1lXTtcbiAgICAgICAgICBpZiAodi5fdHJhbnNmZXIgfHwgX3RyYW5zZmVyKSB7XG4gICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2godi5zZWxlY3Rpb24uZGF0YS5idWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0ge1xuICAgICAgICAgICAgX3J0eXBlOiBcIm5kYXJyYXlcIixcbiAgICAgICAgICAgIF9ydmFsdWU6IHYuc2VsZWN0aW9uLmRhdGEsXG4gICAgICAgICAgICBfcnNoYXBlOiB2LnNoYXBlLFxuICAgICAgICAgICAgX3JkdHlwZTogZHR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3Iodik7XG4gICAgICAgICAgYk9iamVjdFtrXSA9IHsgX3J0eXBlOiBcImVycm9yXCIsIF9ydmFsdWU6IHYudG9TdHJpbmcoKSB9O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmIHYgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgYk9iamVjdFtrXSA9IHtcbiAgICAgICAgICAgIF9ydHlwZTogXCJmaWxlXCIsXG4gICAgICAgICAgICBfcnZhbHVlOiB2LFxuICAgICAgICAgICAgX3JyZWxhdGl2ZV9wYXRoOiB2LnJlbGF0aXZlUGF0aCB8fCB2LndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VuZCBvYmplY3RzIHN1cHBvcnRlZCBieSBzdHJ1Y3R1cmUgY2xvbmUgYWxnb3JpdGhtXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJfV29ya2Vyc19BUEkvU3RydWN0dXJlZF9jbG9uZV9hbGdvcml0aG1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgdiAhPT0gT2JqZWN0KHYpIHx8XG4gICAgICAgICAgdiBpbnN0YW5jZW9mIEJvb2xlYW4gfHxcbiAgICAgICAgICB2IGluc3RhbmNlb2YgU3RyaW5nIHx8XG4gICAgICAgICAgdiBpbnN0YW5jZW9mIERhdGUgfHxcbiAgICAgICAgICB2IGluc3RhbmNlb2YgUmVnRXhwIHx8XG4gICAgICAgICAgdiBpbnN0YW5jZW9mIEJsb2IgfHxcbiAgICAgICAgICB2IGluc3RhbmNlb2YgSW1hZ2VEYXRhIHx8XG4gICAgICAgICAgKHR5cGVvZiBGaWxlTGlzdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB2IGluc3RhbmNlb2YgRmlsZUxpc3QpXG4gICAgICAgICkge1xuICAgICAgICAgIGJPYmplY3Rba10gPSB7IF9ydHlwZTogXCJhcmd1bWVudFwiLCBfcnZhbHVlOiB2IH07XG4gICAgICAgIH0gZWxzZSBpZiAodiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgaWYgKHYuX3RyYW5zZmVyIHx8IF90cmFuc2Zlcikge1xuICAgICAgICAgICAgdHJhbnNmZXJhYmxlcy5wdXNoKHYpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0geyBfcnR5cGU6IFwiYXJndW1lbnRcIiwgX3J2YWx1ZTogdiB9O1xuICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclZpZXcpIHtcbiAgICAgICAgICBpZiAodi5fdHJhbnNmZXIgfHwgX3RyYW5zZmVyKSB7XG4gICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2godi5idWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIHYuX3RyYW5zZmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBiT2JqZWN0W2tdID0geyBfcnR5cGU6IFwiYXJndW1lbnRcIiwgX3J2YWx1ZTogdiB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IHN1cHBvcnQgYWxzbyBNYXAgYW5kIFNldFxuICAgICAgICAvLyBUT0RPOiBhdm9pZCBvYmplY3Qgc3VjaCBhcyBEeW5hbWljUGx1Z2luIGluc3RhbmNlLlxuICAgICAgICBlbHNlIGlmICh2Ll9yaW50Zikge1xuICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9lbmNvZGUodiwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBiT2JqZWN0W2tdID0gdGhpcy5fZW5jb2RlKHYsIGFzX2ludGVyZmFjZSk7XG4gICAgICAgICAgLy8gbW92ZSB0cmFuc2ZlcmFibGVzIHRvIHRoZSB0b3AgbGV2ZWwgb2JqZWN0XG4gICAgICAgICAgaWYgKGJPYmplY3Rba10uX190cmFuc2ZlcmFibGVzX18pIHtcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfXy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2goYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfX1t0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgYk9iamVjdFtrXS5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgXCJpbWpveS1ycGM6IFVuc3VwcG9ydGVkIGRhdGEgdHlwZSBcIiArIGsgKyBcIixcIiArIHY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRyYW5zZmVyYWJsZXMubGVuZ3RoID4gMCkge1xuICAgICAgYk9iamVjdC5fX3RyYW5zZmVyYWJsZXNfXyA9IHRyYW5zZmVyYWJsZXM7XG4gICAgfVxuICAgIHJldHVybiBiT2JqZWN0O1xuICB9XG5cbiAgX2RlY29kZShhT2JqZWN0LCBjYWxsYmFja0lkLCB3aXRoUHJvbWlzZSkge1xuICAgIGlmICghYU9iamVjdCkge1xuICAgICAgcmV0dXJuIGFPYmplY3Q7XG4gICAgfVxuICAgIHZhciBiT2JqZWN0LCB2LCBrO1xuICAgIGlmIChhT2JqZWN0Lmhhc093blByb3BlcnR5KFwiX3J0eXBlXCIpICYmIGFPYmplY3QuaGFzT3duUHJvcGVydHkoXCJfcnZhbHVlXCIpKSB7XG4gICAgICBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFwiY3VzdG9tXCIpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGFPYmplY3QuX3J2YWx1ZSAmJlxuICAgICAgICAgIHR5cGVvZiB0aGlzLl9sb2NhbF9hcGkuX3JwY19kZWNvZGUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICApIHtcbiAgICAgICAgICBiT2JqZWN0ID0gdGhpcy5fbG9jYWxfYXBpLl9ycGNfZGVjb2RlKGFPYmplY3QuX3J2YWx1ZSk7XG4gICAgICAgICAgaWYgKGJPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYk9iamVjdCA9IGFPYmplY3Q7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJPYmplY3QgPSBhT2JqZWN0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcImNhbGxiYWNrXCIpIHtcbiAgICAgICAgYk9iamVjdCA9IHRoaXMuX2dlblJlbW90ZUNhbGxiYWNrKFxuICAgICAgICAgIGNhbGxiYWNrSWQsXG4gICAgICAgICAgYU9iamVjdC5fcmluZGV4LFxuICAgICAgICAgIHdpdGhQcm9taXNlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcImludGVyZmFjZVwiKSB7XG4gICAgICAgIGNvbnN0IGludGZpZCA9IGFPYmplY3QuX3JpZCA9PT0gXCJfcmxvY2FsXCIgPyBcIl9ycm1vdGVcIiA6IGFPYmplY3QuX3JpZDtcbiAgICAgICAgYk9iamVjdCA9XG4gICAgICAgICAgKHRoaXMuX2ludGVyZmFjZV9zdG9yZVtpbnRmaWRdICYmXG4gICAgICAgICAgICB0aGlzLl9pbnRlcmZhY2Vfc3RvcmVbaW50ZmlkXVthT2JqZWN0Ll9ydmFsdWVdKSB8fFxuICAgICAgICAgIHRoaXMuX2dlblJlbW90ZU1ldGhvZChhT2JqZWN0Ll9ydmFsdWUsIGFPYmplY3QuX3JpZCk7XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcIm5kYXJyYXlcIikge1xuICAgICAgICAvKmdsb2JhbCBuaiB0ZiovXG4gICAgICAgIC8vY3JlYXRlIGJ1aWxkIGFycmF5L3RlbnNvciBpZiB1c2VkIGluIHRoZSBwbHVnaW5cbiAgICAgICAgaWYgKHR5cGVvZiBuaiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuai5hcnJheSkge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFPYmplY3QuX3J2YWx1ZSkpIHtcbiAgICAgICAgICAgIGFPYmplY3QuX3J2YWx1ZSA9IGFPYmplY3QuX3J2YWx1ZS5yZWR1Y2UoX2FwcGVuZEJ1ZmZlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJPYmplY3QgPSBualxuICAgICAgICAgICAgLmFycmF5KGFPYmplY3QuX3J2YWx1ZSwgYU9iamVjdC5fcmR0eXBlKVxuICAgICAgICAgICAgLnJlc2hhcGUoYU9iamVjdC5fcnNoYXBlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGYgIT09IFwidW5kZWZpbmVkXCIgJiYgdGYuVGVuc29yKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYU9iamVjdC5fcnZhbHVlKSkge1xuICAgICAgICAgICAgYU9iamVjdC5fcnZhbHVlID0gYU9iamVjdC5fcnZhbHVlLnJlZHVjZShfYXBwZW5kQnVmZmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYk9iamVjdCA9IHRmLnRlbnNvcihcbiAgICAgICAgICAgIGFPYmplY3QuX3J2YWx1ZSxcbiAgICAgICAgICAgIGFPYmplY3QuX3JzaGFwZSxcbiAgICAgICAgICAgIGFPYmplY3QuX3JkdHlwZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9rZWVwIGl0IGFzIHJlZ3VsYXIgaWYgdHJhbnNmZXJlZCB0byB0aGUgbWFpbiBhcHBcbiAgICAgICAgICBiT2JqZWN0ID0gYU9iamVjdDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhT2JqZWN0Ll9ydHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIGJPYmplY3QgPSBuZXcgRXJyb3IoYU9iamVjdC5fcnZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYU9iamVjdC5fcnR5cGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIGJPYmplY3QgPSBhT2JqZWN0Ll9ydmFsdWU7XG4gICAgICAgIC8vcGF0Y2ggcmVsYXRpdmVQYXRoXG4gICAgICAgIGJPYmplY3QucmVsYXRpdmVQYXRoID0gYU9iamVjdC5fcnJlbGF0aXZlX3BhdGg7XG4gICAgICB9IGVsc2UgaWYgKGFPYmplY3QuX3J0eXBlID09PSBcImFyZ3VtZW50XCIpIHtcbiAgICAgICAgYk9iamVjdCA9IGFPYmplY3QuX3J2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiT2JqZWN0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXNhcnJheSA9IEFycmF5LmlzQXJyYXkoYU9iamVjdCk7XG4gICAgICBiT2JqZWN0ID0gaXNhcnJheSA/IFtdIDoge307XG4gICAgICBmb3IgKGsgaW4gYU9iamVjdCkge1xuICAgICAgICBpZiAoaXNhcnJheSB8fCBhT2JqZWN0Lmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgdiA9IGFPYmplY3Rba107XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgICAgIGJPYmplY3Rba10gPSB0aGlzLl9kZWNvZGUodiwgY2FsbGJhY2tJZCwgd2l0aFByb21pc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJPYmplY3Q7XG4gICAgfVxuICB9XG5cbiAgX3dyYXAoYXJncywgYXNfaW50ZXJmYWNlKSB7XG4gICAgdmFyIHdyYXBwZWQgPSB0aGlzLl9lbmNvZGUoYXJncywgYXNfaW50ZXJmYWNlKTtcbiAgICB2YXIgcmVzdWx0ID0geyBhcmdzOiB3cmFwcGVkIH07XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbndyYXBzIHRoZSBzZXQgb2YgYXJndW1lbnRzIGRlbGl2ZXJlZCBmcm9tIHRoZSByZW1vdGUgc2l0ZSxcbiAgICogcmVwbGFjZXMgYWxsIGNhbGxiYWNrIGlkZW50aWZpZXJzIHdpdGggYSBmdW5jdGlvbiB3aGljaCB3aWxsXG4gICAqIGluaXRpYXRlIHNlbmRpbmcgdGhhdCBjYWxsYmFjayBpZGVudGlmaWVyIGJhY2sgdG8gb3RoZXIgc2l0ZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYXJncyB0byB1bndyYXBcbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSB3aXRoUHJvbWlzZSBpcyB0cnVlIG1lYW5zIHRoaXMgdGhlIGNhbGxiYWNrIHNob3VsZCBjb250YWluIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHVud3JhcHBlZCBhcmdzXG4gICAqL1xuICBfdW53cmFwKGFyZ3MsIHdpdGhQcm9taXNlKSB7XG4gICAgLy8gdmFyIGNhbGxlZCA9IGZhbHNlO1xuXG4gICAgLy8gd3JhcHMgZWFjaCBjYWxsYmFjayBzbyB0aGF0IHRoZSBvbmx5IG9uZSBjb3VsZCBiZSBjYWxsZWRcbiAgICAvLyB2YXIgb25jZShjYikge1xuICAgIC8vICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgIC8vICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIGNiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgIHZhciBtc2cgPVxuICAgIC8vICAgICAgICAgICAgICAgJ0EgY2FsbGJhY2sgZnJvbSB0aGlzIHNldCBoYXMgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkJztcbiAgICAvLyAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfTtcbiAgICAvLyB9XG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuX2RlY29kZShhcmdzLmFyZ3MsIGFyZ3MuY2FsbGJhY2tJZCwgd2l0aFByb21pc2UpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIHRoZSB3cmFwcGVkIGZ1bmN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gYSBzaW5nbGUgcmVtb3RlXG4gICAqIGNhbGxiYWNrLiBXaGVuIHRoZSBnZW5lcmF0ZWQgZnVuY3Rpb24gaXMgY2FsbGVkLCBpdCB3aWxsIHNlbmRcbiAgICogdGhlIGNvcnJlc3BvbmRpbmcgbWVzc2FnZSB0byB0aGUgcmVtb3RlIHNpdGUgYXNraW5nIGl0IHRvXG4gICAqIGV4ZWN1dGUgdGhlIHBhcnRpY3VsYXIgY2FsbGJhY2sgcHJldmlvdXNseSBzYXZlZCBkdXJpbmcgYSBjYWxsXG4gICAqIGJ5IHRoZSByZW1vdGUgc2l0ZSBhIG1ldGhvZCBmcm9tIHRoZSBpbnRlcmZhY2Ugb2YgdGhpcyBzaXRlXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBvZiB0aGUgcmVtb3RlIGNhbGxiYWNrIHRvIGV4ZWN1dGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFyZ051bSBhcmd1bWVudCBpbmRleCBvZiB0aGUgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtCb29sZWFufSB3aXRoUHJvbWlzZSBpcyB0cnVlIG1lYW5zIHRoaXMgdGhlIGNhbGxiYWNrIHNob3VsZCBjb250YWluIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IHdyYXBwZWQgcmVtb3RlIGNhbGxiYWNrXG4gICAqL1xuICBfZ2VuUmVtb3RlQ2FsbGJhY2soaWQsIGFyZ051bSwgd2l0aFByb21pc2UpIHtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciByZW1vdGVDYWxsYmFjaztcbiAgICBpZiAod2l0aFByb21pc2UpIHtcbiAgICAgIHJlbW90ZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBtZS5fd3JhcChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICBpZiAodHJhbnNmZXJhYmxlcykgZGVsZXRlIGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgICByZXNvbHZlLl9famFpbGVkX3BhaXJzX18gPSByZWplY3Q7XG4gICAgICAgICAgcmVqZWN0Ll9famFpbGVkX3BhaXJzX18gPSByZXNvbHZlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtZS5fY29ubmVjdGlvbi5lbWl0KFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJjYWxsYmFja1wiLFxuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICBfcmluZGV4OiBhcmdOdW0sXG4gICAgICAgICAgICAgICAgYXJnczogYXJncyxcbiAgICAgICAgICAgICAgICAvLyBwaWQgOiAgbWUuaWQsXG4gICAgICAgICAgICAgICAgcHJvbWlzZTogbWUuX3dyYXAoW3Jlc29sdmUsIHJlamVjdF0pXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICBgRmFpbGVkIHRvIGV4ZWN0dWUgcmVtb3RlIGNhbGxiYWNrIChpZDogJHtpZH0sIGFyZ051bTogJHthcmdOdW19KS5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHJlbW90ZUNhbGxiYWNrO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdGVDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IG1lLl93cmFwKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICB2YXIgdHJhbnNmZXJhYmxlcyA9IGFyZ3MuYXJncy5fX3RyYW5zZmVyYWJsZXNfXztcbiAgICAgICAgaWYgKHRyYW5zZmVyYWJsZXMpIGRlbGV0ZSBhcmdzLmFyZ3MuX190cmFuc2ZlcmFibGVzX187XG4gICAgICAgIHJldHVybiBtZS5fY29ubmVjdGlvbi5lbWl0KFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwiY2FsbGJhY2tcIixcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIF9yaW5kZXg6IGFyZ051bSxcbiAgICAgICAgICAgIGFyZ3M6IGFyZ3NcbiAgICAgICAgICAgIC8vIHBpZCA6ICBtZS5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmZXJhYmxlc1xuICAgICAgICApO1xuICAgICAgfTtcbiAgICAgIHJldHVybiByZW1vdGVDYWxsYmFjaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlIGFuZCBicmVha3MgdGhlIGNvbm5lY3Rpb25cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5fY29ubmVjdGlvbi5lbWl0KHsgdHlwZTogXCJkaXNjb25uZWN0XCIgfSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9jb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlZmVyZW5jZVN0b3JlIGlzIGEgc3BlY2lhbCBvYmplY3Qgd2hpY2ggc3RvcmVzIG90aGVyIG9iamVjdHNcbiAqIGFuZCBwcm92aWRlcyB0aGUgcmVmZXJlbmNlcyAobnVtYmVyKSBpbnN0ZWFkLiBUaGlzIHJlZmVyZW5jZVxuICogbWF5IHRoZW4gYmUgc2VudCBvdmVyIGEganNvbi1iYXNlZCBjb21tdW5pY2F0aW9uIGNoYW5uZWwgKElQQ1xuICogdG8gYW5vdGhlciBOb2RlLmpzIHByb2Nlc3Mgb3IgYSBtZXNzYWdlIHRvIHRoZSBXb3JrZXIpLiBPdGhlclxuICogc2l0ZSBtYXkgdGhlbiBwcm92aWRlIHRoZSByZWZlcmVuY2UgaW4gdGhlIHJlc3BvbmNlIG1lc3NhZ2VcbiAqIGltcGx5aW5nIHRoZSBnaXZlbiBvYmplY3Qgc2hvdWxkIGJlIGFjdGl2YXRlZC5cbiAqXG4gKiBQcmltYXJ5IHVzYWdlIGZvciB0aGUgUmVmZXJlbmNlU3RvcmUgaXMgYSBzdG9yYWdlIGZvciB0aGVcbiAqIGNhbGxiYWNrcywgd2hpY2ggdGhlcmVmb3JlIG1ha2VzIGl0IHBvc3NpYmxlIHRvIGluaXRpYXRlIGFcbiAqIGNhbGxiYWNrIGV4ZWN1dGlvbiBieSB0aGUgb3Bwb3NpdGUgc2l0ZSAod2hpY2ggbm9ybWFsbHkgY2Fubm90XG4gKiBkaXJlY3RseSBleGVjdXRlIGZ1bmN0aW9ucyBvdmVyIHRoZSBjb21tdW5pY2F0aW9uIGNoYW5uZWwpLlxuICpcbiAqIEVhY2ggc3RvcmVkIG9iamVjdCBjYW4gb25seSBiZSBmZXRjaGVkIG9uY2UgYW5kIGlzIG5vdFxuICogYXZhaWxhYmxlIGZvciB0aGUgc2Vjb25kIHRpbWUuIEVhY2ggc3RvcmVkIG9iamVjdCBtdXN0IGJlXG4gKiBmZXRjaGVkLCBzaW5jZSBvdGhlcndpc2UgaXQgd2lsbCByZW1haW4gc3RvcmVkIGZvcmV2ZXIgYW5kXG4gKiBjb25zdW1lIG1lbW9yeS5cbiAqXG4gKiBTdG9yZWQgb2JqZWN0IGluZGVjZXMgYXJlIHNpbXBseSB0aGUgbnVtYmVycywgd2hpY2ggYXJlIGhvd2V2ZXJcbiAqIHJlbGVhc2VkIGFsb25nIHdpdGggdGhlIG9iamVjdHMsIGFuZCBhcmUgbGF0ZXIgcmV1c2VkIGFnYWluIChpblxuICogb3JkZXIgdG8gcG9zdHBvbmUgdGhlIG92ZXJmbG93LCB3aGljaCBzaG91bGQgbm90IGxpa2VseSBoYXBwZW4sXG4gKiBidXQgYW55d2F5KS5cbiAqL1xuY2xhc3MgUmVmZXJlbmNlU3RvcmUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdG9yZSA9IHt9OyAvLyBzdG9yZWQgb2JqZWN0XG4gICAgdGhpcy5faW5kaWNlcyA9IFswXTsgLy8gc21hbGxlc3QgYXZhaWxhYmxlIGluZGljZXNcbiAgICB0aGlzLl9yZWFkeUhhbmRsZXIgPSBmdW5jdGlvbigpIHt9O1xuICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gZnVuY3Rpb24oKSB7fTtcbiAgICB0aGlzLl9yZWFkeUhhbmRsZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBjYWxsIGhhbmRsZXIgd2hlbiB0aGUgc3RvcmUgaXMgZW1wdHlcbiAgICpcbiAgICogQHBhcmFtIHtGVU5DVElPTn0gaWQgb2YgYSBoYW5kbGVyXG4gICAqL1xuICBvblJlYWR5KHJlYWR5SGFuZGxlcikge1xuICAgIHRoaXMuX3JlYWR5SGFuZGxlciA9IHJlYWR5SGFuZGxlciB8fCBmdW5jdGlvbigpIHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIGNhbGwgaGFuZGxlciB3aGVuIHRoZSBzdG9yZSBpcyBub3QgZW1wdHlcbiAgICpcbiAgICogQHBhcmFtIHtGVU5DVElPTn0gaWQgb2YgYSBoYW5kbGVyXG4gICAqL1xuICBvbkJ1c3koYnVzeUhhbmRsZXIpIHtcbiAgICB0aGlzLl9idXN5SGFuZGxlciA9IGJ1c3lIYW5kbGVyIHx8IGZ1bmN0aW9uKCkge307XG4gIH1cblxuICAvKipcbiAgICogZ2V0IHRoZSBsZW5ndGggb2YgdGhlIHN0b3JlXG4gICAqXG4gICAqL1xuICBnZXRTdGFjaygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fc3RvcmUpLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gX2dlbklkKCkgZ2VuZXJhdGVzIHRoZSBuZXcgcmVmZXJlbmNlIGlkXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHNtYWxsZXN0IGF2YWlsYWJsZSBpZCBhbmQgcmVzZXJ2ZXMgaXRcbiAgICovXG4gIF9nZW5JZCgpIHtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKHRoaXMuX2luZGljZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZCA9IHRoaXMuX2luZGljZXNbMF0rKztcbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLl9pbmRpY2VzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIHRoZSBnaXZlbiByZWZlcmVuY2UgaWQgc28gdGhhdCBpdCB3aWxsIGJlIGF2YWlsYWJsZSBieVxuICAgKiBhbm90aGVyIG9iamVjdCBzdG9yZWRcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGlkIHRvIHJlbGVhc2VcbiAgICovXG4gIF9yZWxlYXNlSWQoaWQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2luZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZCA8IHRoaXMuX2luZGljZXNbaV0pIHtcbiAgICAgICAgdGhpcy5faW5kaWNlcy5zcGxpY2UoaSwgMCwgaWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhbmluZy11cCB0aGUgc2VxdWVuY2UgdGFpbFxuICAgIGZvciAoaSA9IHRoaXMuX2luZGljZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmICh0aGlzLl9pbmRpY2VzW2ldIC0gMSA9PT0gdGhpcy5faW5kaWNlc1tpIC0gMV0pIHtcbiAgICAgICAgdGhpcy5faW5kaWNlcy5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZXMgdGhlIGdpdmVuIG9iamVjdCBhbmQgcmV0dXJucyB0aGUgcmVmZXJuY2UgaWQgaW5zdGVhZFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIHRvIHN0b3JlXG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9IHJlZmVyZW5jZSBpZCBvZiB0aGUgc3RvcmVkIG9iamVjdFxuICAgKi9cbiAgcHV0KG9iaikge1xuICAgIGlmICh0aGlzLl9idXN5SGFuZGxlciAmJiBPYmplY3Qua2V5cyh0aGlzLl9zdG9yZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9idXN5SGFuZGxlcigpO1xuICAgIH1cbiAgICB2YXIgaWQgPSB0aGlzLl9nZW5JZCgpO1xuICAgIHRoaXMuX3N0b3JlW2lkXSA9IG9iajtcbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHByZXZpb3VzbHkgc3RvcmVkIG9iamVjdCBhbmQgcmVsZWFzZXMgaXRzIHJlZmVyZW5jZVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaWQgb2YgYW4gb2JqZWN0IHRvIHJldHJpZXZlXG4gICAqL1xuICBmZXRjaChpZCkge1xuICAgIHZhciBvYmogPSB0aGlzLl9zdG9yZVtpZF07XG4gICAgaWYgKG9iaiAmJiAhb2JqLl9fcmVtb3RlX21ldGhvZCkge1xuICAgICAgZGVsZXRlIHRoaXMuX3N0b3JlW2lkXTtcbiAgICAgIHRoaXMuX3JlbGVhc2VJZChpZCk7XG4gICAgICBpZiAodGhpcy5fcmVhZHlIYW5kbGVyICYmIE9iamVjdC5rZXlzKHRoaXMuX3N0b3JlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcmVhZHlIYW5kbGVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvYmogJiYgb2JqLl9famFpbGVkX3BhaXJzX18pIHtcbiAgICAgIGNvbnN0IF9pZCA9IGdldEtleUJ5VmFsdWUodGhpcy5fc3RvcmUsIG9iai5fX2phaWxlZF9wYWlyc19fKTtcbiAgICAgIHRoaXMuZmV0Y2goX2lkKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7O0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBUEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQVJBO0FBbUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFXQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBVUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZ5QkE7QUF5eUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBL0dBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/rpc.js\n");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: randId, dtypeToTypedArray, typedArrayToDtype, cacheRequirements, setupServiceWorker, urlJoin, EventManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"randId\", function() { return randId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dtypeToTypedArray\", function() { return dtypeToTypedArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"typedArrayToDtype\", function() { return typedArrayToDtype; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cacheRequirements\", function() { return cacheRequirements; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupServiceWorker\", function() { return setupServiceWorker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"urlJoin\", function() { return urlJoin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EventManager\", function() { return EventManager; });\nfunction randId() {\n  return Math.random().toString(36).substr(2, 10) + new Date().getTime();\n}\nconst dtypeToTypedArray = {\n  int8: \"Int8Array\",\n  int16: \"Int16Array\",\n  int32: \"Int32Array\",\n  uint8: \"Uint8Array\",\n  uint16: \"Uint16Array\",\n  uint32: \"Uint32Array\",\n  float32: \"Float32Array\",\n  float64: \"Float64Array\",\n  array: \"Array\"\n};\nconst typedArrayToDtype = {\n  Int8Array: \"int8\",\n  Int16Array: \"int16\",\n  Int32Array: \"int32\",\n  Uint8Array: \"uint8\",\n  Uint16Array: \"uint16\",\n  Uint32Array: \"uint32\",\n  Float32Array: \"float32\",\n  Float64Array: \"float64\",\n  Array: \"array\"\n};\n\nfunction cacheUrlInServiceWorker(url) {\n  return new Promise(function (resolve, reject) {\n    const message = {\n      command: \"add\",\n      url: url\n    };\n\n    if (!navigator.serviceWorker || !navigator.serviceWorker.register) {\n      reject(\"Service worker is not supported.\");\n      return;\n    }\n\n    const messageChannel = new MessageChannel();\n\n    messageChannel.port1.onmessage = function (event) {\n      if (event.data && event.data.error) {\n        reject(event.data.error);\n      } else {\n        resolve(event.data && event.data.result);\n      }\n    };\n\n    if (navigator.serviceWorker && navigator.serviceWorker.controller) {\n      navigator.serviceWorker.controller.postMessage(message, [messageChannel.port2]);\n    } else {\n      reject(\"Service worker controller is not available\");\n    }\n  });\n}\n\nasync function cacheRequirements(requirements) {\n  if (!Array.isArray(requirements)) {\n    requirementsm.code.requirements = [requirements];\n  }\n\n  if (requirements && requirements.length > 0) {\n    for (let req of requirements) {\n      //remove prefix\n      if (req.startsWith(\"js:\")) req = req.slice(3);\n      if (req.startsWith(\"css:\")) req = req.slice(4);\n      if (req.startsWith(\"cache:\")) req = req.slice(6);\n      if (!req.startsWith(\"http\")) continue;\n      await cacheUrlInServiceWorker(req).catch(e => {\n        console.error(e);\n      });\n    }\n  }\n}\nfunction setupServiceWorker(targetOrigin, cacheCallback) {\n  // register service worker for offline access\n  if (\"serviceWorker\" in navigator) {\n    window.addEventListener(\"load\", function () {\n      navigator.serviceWorker.register(\"/plugin-service-worker.js\").then(function (registration) {\n        // Registration was successful\n        console.log(\"ServiceWorker registration successful with scope: \", registration.scope);\n      }, function (err) {\n        // registration failed :(\n        console.log(\"ServiceWorker registration failed: \", err);\n      });\n      targetOrigin = targetOrigin || \"*\";\n      cacheCallback = cacheCallback || cacheRequirements;\n\n      if (cacheCallback && typeof cacheCallback !== \"function\") {\n        throw new Error(\"config.cache_requirements must be a function\");\n      }\n\n      window.addEventListener(\"message\", function (e) {\n        if (targetOrigin === \"*\" || e.origin === targetOrigin) {\n          const m = e.data;\n\n          if (m.type === \"cacheRequirements\") {\n            cacheCallback(m.requirements);\n          }\n        }\n      });\n    });\n  }\n} //#Source https://bit.ly/2neWfJ2\n\nfunction urlJoin(...args) {\n  return args.join(\"/\").replace(/[\\/]+/g, \"/\").replace(/^(.+):\\//, \"$1://\").replace(/^file:/, \"file:/\").replace(/\\/(\\?|&|#[^!])/g, \"$1\").replace(/\\?/g, \"&\").replace(\"&\", \"?\");\n}\nclass EventManager {\n  constructor(debug) {\n    this._event_handlers = {};\n    this._once_handlers = {};\n    this._debug = debug;\n  }\n\n  on(event, handler) {\n    if (!this._event_handlers[event]) {\n      this._event_handlers[event] = [];\n    }\n\n    this._event_handlers[event].push(handler);\n  }\n\n  once(event, handler) {\n    handler.___event_run_once = true;\n    this.on(event, handler);\n  }\n\n  off(event, handler) {\n    if (!event && !handler) {\n      // remove all events handlers\n      this._event_handlers = {};\n    } else if (event && !handler) {\n      // remove all hanlders for the event\n      if (this._event_handlers[event]) this._event_handlers[event] = [];\n    } else {\n      // remove a specific handler\n      if (this._event_handlers[event]) {\n        const idx = this._event_handlers[event].indexOf(handler);\n\n        if (idx >= 0) {\n          this._event_handlers[event].splice(idx, 1);\n        }\n      }\n    }\n  }\n\n  _fire(event, data) {\n    if (this._event_handlers[event]) {\n      var i = this._event_handlers[event].length;\n\n      while (i--) {\n        const handler = this._event_handlers[event][i];\n\n        try {\n          handler(data);\n        } catch (e) {\n          console.error(e);\n        } finally {\n          if (handler.___event_run_once) {\n            this._event_handlers[event].splice(i, 1);\n          }\n        }\n      }\n    } else {\n      if (this._debug) {\n        console.warn(\"unhandled event\", event, data);\n      }\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWpveVJQQy9zcmMvdXRpbHMuanM/YTMwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcmFuZElkKCkge1xuICByZXR1cm4gKFxuICAgIE1hdGgucmFuZG9tKClcbiAgICAgIC50b1N0cmluZygzNilcbiAgICAgIC5zdWJzdHIoMiwgMTApICsgbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IGR0eXBlVG9UeXBlZEFycmF5ID0ge1xuICBpbnQ4OiBcIkludDhBcnJheVwiLFxuICBpbnQxNjogXCJJbnQxNkFycmF5XCIsXG4gIGludDMyOiBcIkludDMyQXJyYXlcIixcbiAgdWludDg6IFwiVWludDhBcnJheVwiLFxuICB1aW50MTY6IFwiVWludDE2QXJyYXlcIixcbiAgdWludDMyOiBcIlVpbnQzMkFycmF5XCIsXG4gIGZsb2F0MzI6IFwiRmxvYXQzMkFycmF5XCIsXG4gIGZsb2F0NjQ6IFwiRmxvYXQ2NEFycmF5XCIsXG4gIGFycmF5OiBcIkFycmF5XCJcbn07XG5leHBvcnQgY29uc3QgdHlwZWRBcnJheVRvRHR5cGUgPSB7XG4gIEludDhBcnJheTogXCJpbnQ4XCIsXG4gIEludDE2QXJyYXk6IFwiaW50MTZcIixcbiAgSW50MzJBcnJheTogXCJpbnQzMlwiLFxuICBVaW50OEFycmF5OiBcInVpbnQ4XCIsXG4gIFVpbnQxNkFycmF5OiBcInVpbnQxNlwiLFxuICBVaW50MzJBcnJheTogXCJ1aW50MzJcIixcbiAgRmxvYXQzMkFycmF5OiBcImZsb2F0MzJcIixcbiAgRmxvYXQ2NEFycmF5OiBcImZsb2F0NjRcIixcbiAgQXJyYXk6IFwiYXJyYXlcIlxufTtcblxuZnVuY3Rpb24gY2FjaGVVcmxJblNlcnZpY2VXb3JrZXIodXJsKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgY29tbWFuZDogXCJhZGRcIixcbiAgICAgIHVybDogdXJsXG4gICAgfTtcbiAgICBpZiAoIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyIHx8ICFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcikge1xuICAgICAgcmVqZWN0KFwiU2VydmljZSB3b3JrZXIgaXMgbm90IHN1cHBvcnRlZC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2VDaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgbWVzc2FnZUNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGV2ZW50LmRhdGEuZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShldmVudC5kYXRhICYmIGV2ZW50LmRhdGEucmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyICYmIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIucG9zdE1lc3NhZ2UobWVzc2FnZSwgW1xuICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MlxuICAgICAgXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlamVjdChcIlNlcnZpY2Ugd29ya2VyIGNvbnRyb2xsZXIgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FjaGVSZXF1aXJlbWVudHMocmVxdWlyZW1lbnRzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShyZXF1aXJlbWVudHMpKSB7XG4gICAgcmVxdWlyZW1lbnRzbS5jb2RlLnJlcXVpcmVtZW50cyA9IFtyZXF1aXJlbWVudHNdO1xuICB9XG4gIGlmIChyZXF1aXJlbWVudHMgJiYgcmVxdWlyZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGxldCByZXEgb2YgcmVxdWlyZW1lbnRzKSB7XG4gICAgICAvL3JlbW92ZSBwcmVmaXhcbiAgICAgIGlmIChyZXEuc3RhcnRzV2l0aChcImpzOlwiKSkgcmVxID0gcmVxLnNsaWNlKDMpO1xuICAgICAgaWYgKHJlcS5zdGFydHNXaXRoKFwiY3NzOlwiKSkgcmVxID0gcmVxLnNsaWNlKDQpO1xuICAgICAgaWYgKHJlcS5zdGFydHNXaXRoKFwiY2FjaGU6XCIpKSByZXEgPSByZXEuc2xpY2UoNik7XG4gICAgICBpZiAoIXJlcS5zdGFydHNXaXRoKFwiaHR0cFwiKSkgY29udGludWU7XG5cbiAgICAgIGF3YWl0IGNhY2hlVXJsSW5TZXJ2aWNlV29ya2VyKHJlcSkuY2F0Y2goZSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2VydmljZVdvcmtlcih0YXJnZXRPcmlnaW4sIGNhY2hlQ2FsbGJhY2spIHtcbiAgLy8gcmVnaXN0ZXIgc2VydmljZSB3b3JrZXIgZm9yIG9mZmxpbmUgYWNjZXNzXG4gIGlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihcIi9wbHVnaW4tc2VydmljZS13b3JrZXIuanNcIikudGhlbihcbiAgICAgICAgZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBcIlNlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogXCIsXG4gICAgICAgICAgICByZWdpc3RyYXRpb24uc2NvcGVcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXG4gICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdGFyZ2V0T3JpZ2luID0gdGFyZ2V0T3JpZ2luIHx8IFwiKlwiO1xuICAgICAgY2FjaGVDYWxsYmFjayA9IGNhY2hlQ2FsbGJhY2sgfHwgY2FjaGVSZXF1aXJlbWVudHM7XG4gICAgICBpZiAoY2FjaGVDYWxsYmFjayAmJiB0eXBlb2YgY2FjaGVDYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNvbmZpZy5jYWNoZV9yZXF1aXJlbWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgfVxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRhcmdldE9yaWdpbiA9PT0gXCIqXCIgfHwgZS5vcmlnaW4gPT09IHRhcmdldE9yaWdpbikge1xuICAgICAgICAgIGNvbnN0IG0gPSBlLmRhdGE7XG4gICAgICAgICAgaWYgKG0udHlwZSA9PT0gXCJjYWNoZVJlcXVpcmVtZW50c1wiKSB7XG4gICAgICAgICAgICBjYWNoZUNhbGxiYWNrKG0ucmVxdWlyZW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbi8vI1NvdXJjZSBodHRwczovL2JpdC5seS8ybmVXZkoyXG5leHBvcnQgZnVuY3Rpb24gdXJsSm9pbiguLi5hcmdzKSB7XG4gIHJldHVybiBhcmdzXG4gICAgLmpvaW4oXCIvXCIpXG4gICAgLnJlcGxhY2UoL1tcXC9dKy9nLCBcIi9cIilcbiAgICAucmVwbGFjZSgvXiguKyk6XFwvLywgXCIkMTovL1wiKVxuICAgIC5yZXBsYWNlKC9eZmlsZTovLCBcImZpbGU6L1wiKVxuICAgIC5yZXBsYWNlKC9cXC8oXFw/fCZ8I1teIV0pL2csIFwiJDFcIilcbiAgICAucmVwbGFjZSgvXFw/L2csIFwiJlwiKVxuICAgIC5yZXBsYWNlKFwiJlwiLCBcIj9cIik7XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcihkZWJ1Zykge1xuICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzID0ge307XG4gICAgdGhpcy5fb25jZV9oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuX2RlYnVnID0gZGVidWc7XG4gIH1cbiAgb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XSkge1xuICAgICAgdGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdID0gW107XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuICB9XG4gIG9uY2UoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBoYW5kbGVyLl9fX2V2ZW50X3J1bl9vbmNlID0gdHJ1ZTtcbiAgICB0aGlzLm9uKGV2ZW50LCBoYW5kbGVyKTtcbiAgfVxuICBvZmYoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBpZiAoIWV2ZW50ICYmICFoYW5kbGVyKSB7XG4gICAgICAvLyByZW1vdmUgYWxsIGV2ZW50cyBoYW5kbGVyc1xuICAgICAgdGhpcy5fZXZlbnRfaGFuZGxlcnMgPSB7fTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ICYmICFoYW5kbGVyKSB7XG4gICAgICAvLyByZW1vdmUgYWxsIGhhbmxkZXJzIGZvciB0aGUgZXZlbnRcbiAgICAgIGlmICh0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0pIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XSA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZW1vdmUgYSBzcGVjaWZpYyBoYW5kbGVyXG4gICAgICBpZiAodGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2ZpcmUoZXZlbnQsIGRhdGEpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRfaGFuZGxlcnNbZXZlbnRdKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLl9ldmVudF9oYW5kbGVyc1tldmVudF1baV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaGFuZGxlcihkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKGhhbmRsZXIuX19fZXZlbnRfcnVuX29uY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50X2hhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLl9kZWJ1Zykge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJ1bmhhbmRsZWQgZXZlbnRcIiwgZXZlbnQsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdERBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils.js\n");

/***/ })

/******/ });