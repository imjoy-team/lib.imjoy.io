{"version":3,"file":"elFinderSupportBrowserFS.js","mappings":";sQACAA,EAAA,kBAAAC,CAAA,MAAAA,EAAA,GAAAC,EAAAC,OAAAC,UAAAC,EAAAH,EAAAI,eAAAC,EAAAJ,OAAAI,gBAAA,SAAAC,EAAAC,EAAAC,GAAAF,EAAAC,GAAAC,EAAAC,KAAA,EAAAC,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAZ,EAAAC,EAAAE,GAAA,OAAAR,OAAAI,eAAAC,EAAAC,EAAA,CAAAE,MAAAA,EAAAU,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAf,EAAAC,EAAA,KAAAW,EAAA,aAAAI,GAAAJ,EAAA,SAAAZ,EAAAC,EAAAE,GAAA,OAAAH,EAAAC,GAAAE,CAAA,WAAAc,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,GAAAA,EAAAvB,qBAAA2B,EAAAJ,EAAAI,EAAAC,EAAA7B,OAAA8B,OAAAH,EAAA1B,WAAA8B,EAAA,IAAAC,EAAAN,GAAA,WAAAtB,EAAAyB,EAAA,WAAArB,MAAAyB,EAAAV,EAAAE,EAAAM,KAAAF,CAAA,UAAAK,EAAAC,EAAA9B,EAAA+B,GAAA,WAAAC,KAAA,SAAAD,IAAAD,EAAAG,KAAAjC,EAAA+B,GAAA,OAAAf,GAAA,OAAAgB,KAAA,QAAAD,IAAAf,EAAA,EAAAvB,EAAAwB,KAAAA,EAAA,IAAAiB,EAAA,YAAAX,IAAA,UAAAY,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAAzB,EAAAyB,EAAA/B,GAAA,8BAAAgC,EAAA3C,OAAA4C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAA9C,GAAAG,EAAAoC,KAAAO,EAAAlC,KAAA+B,EAAAG,GAAA,IAAAE,EAAAN,EAAAxC,UAAA2B,EAAA3B,UAAAD,OAAA8B,OAAAY,GAAA,SAAAM,EAAA/C,GAAA,0BAAAgD,SAAA,SAAAC,GAAAjC,EAAAhB,EAAAiD,GAAA,SAAAd,GAAA,YAAAe,QAAAD,EAAAd,EAAA,gBAAAgB,EAAAvB,EAAAwB,GAAA,SAAAC,EAAAJ,EAAAd,EAAAmB,EAAAC,GAAA,IAAAC,EAAAvB,EAAAL,EAAAqB,GAAArB,EAAAO,GAAA,aAAAqB,EAAApB,KAAA,KAAAqB,EAAAD,EAAArB,IAAA5B,EAAAkD,EAAAlD,MAAA,OAAAA,GAAA,UAAAmD,EAAAnD,IAAAN,EAAAoC,KAAA9B,EAAA,WAAA6C,EAAAE,QAAA/C,EAAAoD,SAAAC,MAAA,SAAArD,GAAA8C,EAAA,OAAA9C,EAAA+C,EAAAC,EAAA,aAAAnC,GAAAiC,EAAA,QAAAjC,EAAAkC,EAAAC,EAAA,IAAAH,EAAAE,QAAA/C,GAAAqD,MAAA,SAAAC,GAAAJ,EAAAlD,MAAAsD,EAAAP,EAAAG,EAAA,aAAAK,GAAA,OAAAT,EAAA,QAAAS,EAAAR,EAAAC,EAAA,IAAAA,EAAAC,EAAArB,IAAA,KAAA4B,EAAA5D,EAAA,gBAAAI,MAAA,SAAA0C,EAAAd,GAAA,SAAA6B,IAAA,WAAAZ,GAAA,SAAAE,EAAAC,GAAAF,EAAAJ,EAAAd,EAAAmB,EAAAC,EAAA,WAAAQ,EAAAA,EAAAA,EAAAH,KAAAI,EAAAA,GAAAA,GAAA,aAAAhC,EAAAV,EAAAE,EAAAM,GAAA,IAAAmC,EAAA,iCAAAhB,EAAAd,GAAA,iBAAA8B,EAAA,UAAAC,MAAA,iDAAAD,EAAA,cAAAhB,EAAA,MAAAd,EAAA,OAAA5B,WAAA4D,EAAAC,MAAA,OAAAtC,EAAAmB,OAAAA,EAAAnB,EAAAK,IAAAA,IAAA,KAAAkC,EAAAvC,EAAAuC,SAAA,GAAAA,EAAA,KAAAC,EAAAC,EAAAF,EAAAvC,GAAA,GAAAwC,EAAA,IAAAA,IAAAhC,EAAA,gBAAAgC,CAAA,cAAAxC,EAAAmB,OAAAnB,EAAA0C,KAAA1C,EAAA2C,MAAA3C,EAAAK,SAAA,aAAAL,EAAAmB,OAAA,uBAAAgB,EAAA,MAAAA,EAAA,YAAAnC,EAAAK,IAAAL,EAAA4C,kBAAA5C,EAAAK,IAAA,gBAAAL,EAAAmB,QAAAnB,EAAA6C,OAAA,SAAA7C,EAAAK,KAAA8B,EAAA,gBAAAT,EAAAvB,EAAAX,EAAAE,EAAAM,GAAA,cAAA0B,EAAApB,KAAA,IAAA6B,EAAAnC,EAAAsC,KAAA,6BAAAZ,EAAArB,MAAAG,EAAA,gBAAA/B,MAAAiD,EAAArB,IAAAiC,KAAAtC,EAAAsC,KAAA,WAAAZ,EAAApB,OAAA6B,EAAA,YAAAnC,EAAAmB,OAAA,QAAAnB,EAAAK,IAAAqB,EAAArB,IAAA,YAAAoC,EAAAF,EAAAvC,GAAA,IAAA8C,EAAA9C,EAAAmB,OAAAA,EAAAoB,EAAA1D,SAAAiE,GAAA,QAAAT,IAAAlB,EAAA,OAAAnB,EAAAuC,SAAA,eAAAO,GAAAP,EAAA1D,SAAA,SAAAmB,EAAAmB,OAAA,SAAAnB,EAAAK,SAAAgC,EAAAI,EAAAF,EAAAvC,GAAA,UAAAA,EAAAmB,SAAA,WAAA2B,IAAA9C,EAAAmB,OAAA,QAAAnB,EAAAK,IAAA,IAAA0C,UAAA,oCAAAD,EAAA,aAAAtC,EAAA,IAAAkB,EAAAvB,EAAAgB,EAAAoB,EAAA1D,SAAAmB,EAAAK,KAAA,aAAAqB,EAAApB,KAAA,OAAAN,EAAAmB,OAAA,QAAAnB,EAAAK,IAAAqB,EAAArB,IAAAL,EAAAuC,SAAA,KAAA/B,EAAA,IAAAwC,EAAAtB,EAAArB,IAAA,OAAA2C,EAAAA,EAAAV,MAAAtC,EAAAuC,EAAAU,YAAAD,EAAAvE,MAAAuB,EAAAkD,KAAAX,EAAAY,QAAA,WAAAnD,EAAAmB,SAAAnB,EAAAmB,OAAA,OAAAnB,EAAAK,SAAAgC,GAAArC,EAAAuC,SAAA,KAAA/B,GAAAwC,GAAAhD,EAAAmB,OAAA,QAAAnB,EAAAK,IAAA,IAAA0C,UAAA,oCAAA/C,EAAAuC,SAAA,KAAA/B,EAAA,UAAA4C,EAAAC,GAAA,IAAAC,EAAA,CAAAC,OAAAF,EAAA,SAAAA,IAAAC,EAAAE,SAAAH,EAAA,SAAAA,IAAAC,EAAAG,WAAAJ,EAAA,GAAAC,EAAAI,SAAAL,EAAA,SAAAM,WAAAC,KAAAN,EAAA,UAAAO,EAAAP,GAAA,IAAA5B,EAAA4B,EAAAQ,YAAA,GAAApC,EAAApB,KAAA,gBAAAoB,EAAArB,IAAAiD,EAAAQ,WAAApC,CAAA,UAAAzB,EAAAN,GAAA,KAAAgE,WAAA,EAAAJ,OAAA,SAAA5D,EAAAuB,QAAAkC,EAAA,WAAAW,OAAA,YAAAhD,EAAAiD,GAAA,GAAAA,EAAA,KAAAC,EAAAD,EAAApF,GAAA,GAAAqF,EAAA,OAAAA,EAAA1D,KAAAyD,GAAA,sBAAAA,EAAAd,KAAA,OAAAc,EAAA,IAAAE,MAAAF,EAAAG,QAAA,KAAAC,GAAA,EAAAlB,EAAA,SAAAA,IAAA,OAAAkB,EAAAJ,EAAAG,QAAA,GAAAhG,EAAAoC,KAAAyD,EAAAI,GAAA,OAAAlB,EAAAzE,MAAAuF,EAAAI,GAAAlB,EAAAZ,MAAA,EAAAY,EAAA,OAAAA,EAAAzE,WAAA4D,EAAAa,EAAAZ,MAAA,EAAAY,CAAA,SAAAA,EAAAA,KAAAA,CAAA,SAAAA,KAAAmB,EAAA,UAAAA,IAAA,OAAA5F,WAAA4D,EAAAC,MAAA,UAAA7B,EAAAvC,UAAAwC,EAAArC,EAAA2C,EAAA,eAAAvC,MAAAiC,EAAAtB,cAAA,IAAAf,EAAAqC,EAAA,eAAAjC,MAAAgC,EAAArB,cAAA,IAAAqB,EAAA6D,YAAApF,EAAAwB,EAAA1B,EAAA,qBAAAjB,EAAAwG,oBAAA,SAAAC,GAAA,IAAAC,EAAA,mBAAAD,GAAAA,EAAAE,YAAA,QAAAD,IAAAA,IAAAhE,GAAA,uBAAAgE,EAAAH,aAAAG,EAAAE,MAAA,EAAA5G,EAAA6G,KAAA,SAAAJ,GAAA,OAAAvG,OAAA4G,eAAA5G,OAAA4G,eAAAL,EAAA9D,IAAA8D,EAAAM,UAAApE,EAAAxB,EAAAsF,EAAAxF,EAAA,sBAAAwF,EAAAtG,UAAAD,OAAA8B,OAAAiB,GAAAwD,CAAA,EAAAzG,EAAAgH,MAAA,SAAA1E,GAAA,OAAAwB,QAAAxB,EAAA,EAAAY,EAAAI,EAAAnD,WAAAgB,EAAAmC,EAAAnD,UAAAY,GAAA,0BAAAf,EAAAsD,cAAAA,EAAAtD,EAAAiH,MAAA,SAAAxF,EAAAC,EAAAC,EAAAC,EAAA2B,QAAA,IAAAA,IAAAA,EAAA2D,SAAA,IAAAC,EAAA,IAAA7D,EAAA9B,EAAAC,EAAAC,EAAAC,EAAAC,GAAA2B,GAAA,OAAAvD,EAAAwG,oBAAA9E,GAAAyF,EAAAA,EAAAhC,OAAApB,MAAA,SAAAH,GAAA,OAAAA,EAAAW,KAAAX,EAAAlD,MAAAyG,EAAAhC,MAAA,KAAAjC,EAAAD,GAAA9B,EAAA8B,EAAAhC,EAAA,aAAAE,EAAA8B,EAAApC,GAAA,0BAAAM,EAAA8B,EAAA,qDAAAjD,EAAAoH,KAAA,SAAAC,GAAA,IAAAC,EAAApH,OAAAmH,GAAAD,EAAA,WAAA5G,KAAA8G,EAAAF,EAAAvB,KAAArF,GAAA,OAAA4G,EAAAG,UAAA,SAAApC,IAAA,KAAAiC,EAAAhB,QAAA,KAAA5F,EAAA4G,EAAAI,MAAA,GAAAhH,KAAA8G,EAAA,OAAAnC,EAAAzE,MAAAF,EAAA2E,EAAAZ,MAAA,EAAAY,CAAA,QAAAA,EAAAZ,MAAA,EAAAY,CAAA,GAAAnF,EAAAgD,OAAAA,EAAAd,EAAA/B,UAAA,CAAAwG,YAAAzE,EAAA8D,MAAA,SAAAyB,GAAA,QAAAC,KAAA,OAAAvC,KAAA,OAAAR,KAAA,KAAAC,WAAAN,EAAA,KAAAC,MAAA,OAAAC,SAAA,UAAApB,OAAA,YAAAd,SAAAgC,EAAA,KAAAsB,WAAAzC,QAAA2C,IAAA2B,EAAA,QAAAb,KAAA,WAAAA,EAAAe,OAAA,IAAAvH,EAAAoC,KAAA,KAAAoE,KAAAT,OAAAS,EAAAgB,MAAA,WAAAhB,QAAAtC,EAAA,EAAAuD,KAAA,gBAAAtD,MAAA,MAAAuD,EAAA,KAAAlC,WAAA,GAAAG,WAAA,aAAA+B,EAAAvF,KAAA,MAAAuF,EAAAxF,IAAA,YAAAyF,IAAA,EAAAlD,kBAAA,SAAAmD,GAAA,QAAAzD,KAAA,MAAAyD,EAAA,IAAA/F,EAAA,cAAAgG,EAAAC,EAAAC,GAAA,OAAAxE,EAAApB,KAAA,QAAAoB,EAAArB,IAAA0F,EAAA/F,EAAAkD,KAAA+C,EAAAC,IAAAlG,EAAAmB,OAAA,OAAAnB,EAAAK,SAAAgC,KAAA6D,CAAA,SAAA9B,EAAA,KAAAT,WAAAQ,OAAA,EAAAC,GAAA,IAAAA,EAAA,KAAAd,EAAA,KAAAK,WAAAS,GAAA1C,EAAA4B,EAAAQ,WAAA,YAAAR,EAAAC,OAAA,OAAAyC,EAAA,UAAA1C,EAAAC,QAAA,KAAAkC,KAAA,KAAAU,EAAAhI,EAAAoC,KAAA+C,EAAA,YAAA8C,EAAAjI,EAAAoC,KAAA+C,EAAA,iBAAA6C,GAAAC,EAAA,SAAAX,KAAAnC,EAAAE,SAAA,OAAAwC,EAAA1C,EAAAE,UAAA,WAAAiC,KAAAnC,EAAAG,WAAA,OAAAuC,EAAA1C,EAAAG,WAAA,SAAA0C,GAAA,QAAAV,KAAAnC,EAAAE,SAAA,OAAAwC,EAAA1C,EAAAE,UAAA,YAAA4C,EAAA,UAAAhE,MAAA,kDAAAqD,KAAAnC,EAAAG,WAAA,OAAAuC,EAAA1C,EAAAG,WAAA,KAAAZ,OAAA,SAAAvC,EAAAD,GAAA,QAAA+D,EAAA,KAAAT,WAAAQ,OAAA,EAAAC,GAAA,IAAAA,EAAA,KAAAd,EAAA,KAAAK,WAAAS,GAAA,GAAAd,EAAAC,QAAA,KAAAkC,MAAAtH,EAAAoC,KAAA+C,EAAA,oBAAAmC,KAAAnC,EAAAG,WAAA,KAAA4C,EAAA/C,EAAA,OAAA+C,IAAA,UAAA/F,GAAA,aAAAA,IAAA+F,EAAA9C,QAAAlD,GAAAA,GAAAgG,EAAA5C,aAAA4C,EAAA,UAAA3E,EAAA2E,EAAAA,EAAAvC,WAAA,UAAApC,EAAApB,KAAAA,EAAAoB,EAAArB,IAAAA,EAAAgG,GAAA,KAAAlF,OAAA,YAAA+B,KAAAmD,EAAA5C,WAAAjD,GAAA,KAAA8F,SAAA5E,EAAA,EAAA4E,SAAA,SAAA5E,EAAAgC,GAAA,aAAAhC,EAAApB,KAAA,MAAAoB,EAAArB,IAAA,gBAAAqB,EAAApB,MAAA,aAAAoB,EAAApB,KAAA,KAAA4C,KAAAxB,EAAArB,IAAA,WAAAqB,EAAApB,MAAA,KAAAwF,KAAA,KAAAzF,IAAAqB,EAAArB,IAAA,KAAAc,OAAA,cAAA+B,KAAA,kBAAAxB,EAAApB,MAAAoD,IAAA,KAAAR,KAAAQ,GAAAlD,CAAA,EAAA+F,OAAA,SAAA9C,GAAA,QAAAW,EAAA,KAAAT,WAAAQ,OAAA,EAAAC,GAAA,IAAAA,EAAA,KAAAd,EAAA,KAAAK,WAAAS,GAAA,GAAAd,EAAAG,aAAAA,EAAA,YAAA6C,SAAAhD,EAAAQ,WAAAR,EAAAI,UAAAG,EAAAP,GAAA9C,CAAA,kBAAA+C,GAAA,QAAAa,EAAA,KAAAT,WAAAQ,OAAA,EAAAC,GAAA,IAAAA,EAAA,KAAAd,EAAA,KAAAK,WAAAS,GAAA,GAAAd,EAAAC,SAAAA,EAAA,KAAA7B,EAAA4B,EAAAQ,WAAA,aAAApC,EAAApB,KAAA,KAAAkG,EAAA9E,EAAArB,IAAAwD,EAAAP,EAAA,QAAAkD,CAAA,YAAApE,MAAA,0BAAAqE,cAAA,SAAAzC,EAAAf,EAAAE,GAAA,YAAAZ,SAAA,CAAA1D,SAAAkC,EAAAiD,GAAAf,WAAAA,EAAAE,QAAAA,GAAA,cAAAhC,SAAA,KAAAd,SAAAgC,GAAA7B,CAAA,GAAAzC,CAAA,UAAA2I,EAAAC,EAAAnF,EAAAC,EAAAmF,EAAAC,EAAAtI,EAAA8B,GAAA,QAAA2C,EAAA2D,EAAApI,GAAA8B,GAAA5B,EAAAuE,EAAAvE,KAAA,OAAAuD,GAAA,YAAAP,EAAAO,EAAA,CAAAgB,EAAAV,KAAAd,EAAA/C,GAAAwG,QAAAzD,QAAA/C,GAAAqD,KAAA8E,EAAAC,EAAA,UAAAC,EAAA1G,GAAA,sBAAAV,EAAA,KAAAqH,EAAAC,UAAA,WAAA/B,SAAA,SAAAzD,EAAAC,GAAA,IAAAkF,EAAAvG,EAAA6G,MAAAvH,EAAAqH,GAAA,SAAAH,EAAAnI,GAAAiI,EAAAC,EAAAnF,EAAAC,EAAAmF,EAAAC,EAAA,OAAApI,EAAA,UAAAoI,EAAAvH,GAAAoH,EAAAC,EAAAnF,EAAAC,EAAAmF,EAAAC,EAAA,QAAAvH,EAAA,CAAAsH,OAAAvE,EAAA,KAkBA,IAAI6E,EAAUC,SAASC,SACvB,GAAGF,EAAQG,SAAS,SAAS,CAC5B,IAAMC,EAAMJ,EAAQK,MAAM,KAC1BL,EAAUI,EAAI3B,MAAM,EAAG2B,EAAInD,OAAO,GAAGqD,KAAK,KAAO,GAClD,CAEA,SAASC,EAAQC,GACb,OAAO,IAAIzC,SAAQ,SAAAzD,GAAO,OAAImG,WAAWnG,EAASkG,EAAG,GACzD,CAEAE,OAAOC,wBAAuBf,EAAAhJ,IAAA8G,MAAG,SAAAkD,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAnK,IAAAyB,MAAA,SAAA2I,GAAA,cAAAA,EAAAzC,KAAAyC,EAAAhF,MAAA,YAC5B,kBAAmBiF,WAAS,CAAAD,EAAAhF,KAAA,SAE/B,IADM6E,EAAaI,UAAUC,cAAcL,aAEvBA,EAAWM,UAAUhB,SAAS,sBAAqB,CAAAa,EAAAhF,KAAA,SAOpE,OANFiF,UAAUC,cAAcE,mBAAqB,WAC5CC,KAAKR,WAAWS,cAAgB,WACZ,cAAfD,KAAKpG,OACRsG,QAAQC,IAAI,yCAEd,CACD,EAAER,EAAAhF,KAAA,EACyBiF,UAAUC,cAAcO,SAAS,sBAAqB,OAEjF,OAFMX,EAAYE,EAAAxF,KAClB+F,QAAQC,IAAI,oDAAqDV,EAAaY,OAC9EV,EAAAhF,KAAA,GACMiF,UAAUC,cAAcH,MAAK,WAE9BE,UAAUC,cAAcL,WAAY,CAAFG,EAAAhF,KAAA,SAEZ,MAAzB0E,OAAOT,SAAS0B,SACV,IAAIzG,MAAM,sEAAqE,QAEnF6F,GAAQ,EAAK,WACTA,EAAK,CAAAC,EAAAhF,KAAA,gBAAAgF,EAAAhF,KAAA,GACW4F,MAAM,iBAAgB,QAA/B,GACS,MADTZ,EAAAxF,KACFqG,OAAc,CAAAb,EAAAhF,KAAA,SACZ,OAAb+E,GAAQ,EAAKC,EAAArF,OAAA,2BAAAqF,EAAAhF,KAAA,GAGRuE,EAAQ,KAAI,QAAAS,EAAAhF,KAAA,iBAAAgF,EAAAhF,KAAA,iBAInBuF,QAAQC,IAAI,iCAAgC,QAAAR,EAAAhF,KAAA,iBAG7CuF,QAAQC,IAAI,sCAAsC,yBAAAR,EAAAtC,OAAA,GAAAkC,EAAA,KAyBpDF,OAAOoB,cAAgB,WAItB,IAAMC,EAAUrB,OAAO1I,OACvB0I,OAAO1I,YAASmD,EAChB6G,kBAAkB,CACjBC,QAAS,UACTC,mBAAmB,EACnBC,mBAAmB,EACnBC,mBAAmB,EACnBC,mBAAmB,EAEnBC,WAAY,CAAEC,SAAU,WAAYC,MAAO,EAAGC,IAAK,OACnDC,aAAc,CAACC,MAAO,OAAQC,OAAQ,QAEtCC,UAAW,CAAE,IACXjI,KAAI,eAAAkI,EAAAlD,EAAAhJ,IAAA8G,MAAC,SAAAqF,EAAMC,GAAG,IAAAC,EAgBPC,EAAW,OAAAtM,IAAAyB,MAAC,SAAD8K,GAAA,cAAAA,EAAA5E,KAAA4E,EAAAnH,MAAA,OAFpB,OAESkH,EAAW,SAACE,GACpB,OAAO,IAAIrF,QAAO,eAAAsF,EAAAzD,EAAAhJ,IAAA8G,MAAC,SAAA4F,EAAOhJ,EAASC,GAAM,IAAAgJ,EAAAC,EAAAC,EAAA,OAAA7M,IAAAyB,MAAA,SAAAqL,GAAA,cAAAA,EAAAnF,KAAAmF,EAAA1H,MAAA,cAAA0H,EAAA1H,KAAA,EACjB4F,MAAMwB,GAAI,OAAnB,OAARG,EAAQG,EAAAlI,KAAAkI,EAAA1H,KAAG,EACEuH,EAASC,OAAM,OAA5BA,EAAIE,EAAAlI,MACJiI,EAAS,IAAIE,YACZC,OAAS,WAAYtJ,EAAQ+G,KAAK5G,OAAQ,EACjDgJ,EAAOI,QAAUtJ,EACjBkJ,EAAOK,cAAcN,GAAO,yBAAAE,EAAAhF,OAAA,GAAA4E,EAAA,KAC5B,gBAAAS,EAAAC,GAAA,OAAAX,EAAAtD,MAAA,KAAAD,UAAA,EAPiB,GAQnB,EAxBMmD,EAAMD,EAAIiB,MAAMhB,IAatBE,EAAAnH,KAAA,EAYMiH,EAAIiB,gBAAgB,CACzB9K,KAAM,eACNqE,KAAM,iBACA0G,MAAK,SAACC,GAAQ,OAAAxE,EAAAhJ,IAAA8G,MAAA,SAAA2G,IAAA,OAAAzN,IAAAyB,MAAA,SAAAiM,GAAA,cAAAA,EAAA/F,KAAA+F,EAAAtI,MAAA,WAChBoI,EAAQG,KAAKC,WAAW,cAAa,CAAAF,EAAAtI,KAAA,eAAAsI,EAAA3I,OAAA,UAChC,GAAI,wBAAA2I,EAAA5F,OAAA,GAAA2F,EAAA,IAFOzE,EAIpB,EACM6E,KAAI,SAAAC,GAAkB,OAAA9E,EAAAhJ,IAAA8G,MAAA,SAAAiH,IAAA,IAAAvB,EAAAwB,EAAA,OAAAhO,IAAAyB,MAAA,SAAAwM,GAAA,cAAAA,EAAAtG,KAAAsG,EAAA7I,MAAA,OACiD,OADjEoH,EAAGsB,EAAHtB,IAAKwB,EAASF,EAATE,UAChBrD,QAAQC,IAAI,4DAA4D4B,GAAIyB,EAAA7I,KAAA,EACtEiH,EAAI6B,aAAa,CAACC,IAAK,4DAA4D3B,EAAKwB,UAAAA,IAAW,wBAAAC,EAAAnG,OAAA,GAAAiG,EAAA,IAF9E/E,EAG5B,IACC,cAAAuD,EAAAnH,KAAA,EACIiH,EAAIiB,gBAAgB,CACzB9K,KAAM,eACNqE,KAAM,QACNuH,KAAM,8CACAb,MAAK,SAACC,GAAQ,OAAAxE,EAAAhJ,IAAA8G,MAAA,SAAAuH,IAAA,OAAArO,IAAAyB,MAAA,SAAA6M,GAAA,cAAAA,EAAA3G,KAAA2G,EAAAlJ,MAAA,WAChBoI,EAAQG,KAAKC,WAAW,WAA8B,cAAjBJ,EAAQG,KAAoB,CAAAW,EAAAlJ,KAAA,eAAAkJ,EAAAvJ,OAAA,UAC5D,GAAI,wBAAAuJ,EAAAxG,OAAA,GAAAuG,EAAA,IAFOrF,EAIpB,EACM6E,KAAI,SAAAU,GAA2B,OAAAvF,EAAAhJ,IAAA8G,MAAA,SAAA0H,IAAA,IAAAC,EAAAjM,EAAAwL,EAAAU,EAAAC,EAAAC,EAAAC,EAAA,OAAA7O,IAAAyB,MAAA,SAAAqN,GAAA,cAAAA,EAAAnH,KAAAmH,EAAA1J,MAAA,OAAF,GAAvBqJ,EAAMF,EAANE,OAAQjM,EAAI+L,EAAJ/L,KAAMwL,EAASO,EAATP,UACb,SAATxL,EAAe,CAAAsM,EAAA1J,KAAA,gBAAA0J,EAAA1J,KAAA,EACIkH,EAAYmC,EAAOjC,KAAI,OAAhC,OAANkC,EAAMI,EAAAlK,KAAAkK,EAAA1J,KAAG,EACMiH,EAAI6B,aAAa,CAACC,IAAK,qBAAsBH,UAAAA,EAAWe,EAAG,GAAIC,EAAG,KAAI,OAA/E,OAANL,EAAMG,EAAAlK,KAAAkK,EAAA1J,KAAG,GACTuJ,EAAOM,WAAWP,EAAQ,CAAC7H,KAAM4H,EAAO5H,OAAM,eAAAiI,EAAA1J,KAAA,GAC9CuJ,EAAOO,WAAW,GAAI,CAACrI,KAAM,eAAc,QAAAiI,EAAA1J,KAAA,oBAEjC,cAAT5C,EAAoB,CAAAsM,EAAA1J,KAAA,gBAAA0J,EAAA1J,KAAA,GACNiH,EAAI6B,aAAa,CAACC,IAAK,qBAAsBH,UAAAA,EAAWe,EAAG,GAAIC,EAAG,KAAI,QAEE,OAFvFL,EAAMG,EAAAlK,KACZ6J,EAASA,EAAOU,QAAO,SAAAC,GAAI,OAAIA,EAAKzB,KAAKC,WAAW,SAAS,IACvDiB,EAAQJ,EAAOY,KAAI,SAAAD,GAAS,MAAO,CAAC,MAASA,EAAKvI,KAAM,KAAQuI,EAAM,QAAU,EAAK,IAAEN,EAAA1J,KAAA,GACvFuJ,EAAOW,WAAW,CACvB,QAAU,EACV,KAAQ,OACR,KAAQ,QACR,sBAAyB,WAAF,IAAAC,EAAAvG,EAAAhJ,IAAA8G,MAAE,SAAA0I,EAAOC,GAAI,IAAAL,EAAAV,EAAA,OAAA1O,IAAAyB,MAAA,SAAAiO,GAAA,cAAAA,EAAA/H,KAAA+H,EAAAtK,MAAA,cAAAsK,EAAAtK,KAAA,EAC7BuJ,EAAOgB,eAAc,OACL,OAAhBP,EAAOK,EAAKG,KAAIF,EAAAtK,KAAA,EACDkH,EAAY8C,EAAK5C,KAAI,OAA9B,OAANkC,EAAMgB,EAAA9K,KAAA8K,EAAAtK,KAAG,EACTuJ,EAAOM,WAAWP,EAAQ,CAAC7H,KAAMuI,EAAKvI,OAAM,wBAAA6I,EAAA5H,OAAA,GAAA0H,EAAA,KAClD,gBAAAK,GAAA,OAAAN,EAAApG,MAAA,KAAAD,UAAA,EALwB,GAMzB,MAAS2F,IACR,eAAAC,EAAA1J,KAAA,GACIuJ,EAAOO,WAAW,GAAI,CAACrI,KAAM,eAAc,yBAAAiI,EAAAhH,OAAA,GAAA0G,EAAA,IAvBdxF,EA0BrC,IACC,cAAAuD,EAAAnH,KAAA,EAIIiH,EAAIiB,gBAAgB,CACzB9K,KAAM,oBACNqE,KAAM,SACNiJ,IAAG,SAACC,GACH,MAAO,CACNlJ,KAAM,YACNkJ,KAAM,QACNvN,KAAM,YACNwN,QAAS,2BACTC,cAAe,2BACfC,SAAU,KACVC,OAAQ,OACRC,QAAS,CACR,CACCvJ,KAAM,eACNkJ,KAAM,WACNvN,KAAM,YACNwN,QAAS,2BACTC,cAAe,2BACfC,SAAU,OAId,EACAG,KAAI,SAACC,EAAOP,GAEZ,EACAQ,YAAW,SAACR,GAEZ,EACAS,YAAW,SAACC,EAAUC,GAEtB,EACAC,YAAW,SAACZ,GAEZ,EACAa,WAAU,SAACb,GAEX,EACAc,UAAS,SAACd,GAEV,IACC,OACFjG,OAAOuD,MAAQjB,EAAIiB,MAAM,wBAAAd,EAAAzE,OAAA,GAAAqE,EAAA,KACzB,gBAAA2E,GAAA,OAAA5E,EAAA/C,MAAA,KAAAD,UAAA,EA3HM,IA2HL,SAAS,WAEVY,OAAO1I,OAAS+J,CACjB,GACD,EAKArB,OAAOiH,yBAA2B,SAASC,GAC1C,aACAvG,KAAKwG,WAAa,SAASC,EAAIC,EAAQC,GACtC,IAAMC,EAAOC,EAAEC,WA4Df,OA3DAH,EAAM5M,MAAK,SAASX,GAGnB,GAFYA,EAAO,GAAGwC,OAEb,CACR,GAAIxC,EAAO,IAAMA,EAAO,GAAGwC,OA2C1B,YAzCA6K,EAAGM,QAAQ,CACV5B,KAAS,CAAC6B,IAAM,QAASN,OAASA,EAAQO,KAAO7N,EAAO,IACxD8N,OAAS,CAACnP,KAAO,QAASoP,IAAM/N,EAAO,GAAGwC,QAC1CwL,aAAa,IAEbC,MAAK,SAAS5N,GAEG,kBADjBA,EAAQA,GAAS,CAAC,eACR,IAITmN,EAAK1N,OAAOO,EAEd,IACCM,MAAK,SAASoL,GACd,IAAImC,GAAK,EACJnC,EAAKoC,SACTpC,EAAKoC,OAAS,CAAC,GAEhBnO,EAAO,GAAKyN,EAAEjC,IAAIxL,EAAO,IAAI,SAASoO,EAAG3L,GAGxC,OAFAzC,EAAO,GAAGyC,GAAG4L,cAAgBD,EAAEE,QAAQ,MAAO,IAEpC,MADVF,EAAIA,EAAEE,QAAQ,YAAa,KAEnBhB,EAEHvB,EAAKoC,OAAOC,GACRrC,EAAKoC,OAAOC,IAEnBF,GAAK,EACLlO,EAAO,GAAGyC,GAAG8L,SAAU,EAChB,KAGV,IACIL,IACHlO,EAAO,GAAKyN,EAAEe,KAAKxO,EAAO,IAAI,SAASuL,GAAQ,OAAOA,EAAKgD,OAAuB,IAEpF,IACCE,QAAO,SAAS1C,GAChByB,EAAK3N,QAAQG,EACd,IAGAA,EAAO,GAAKyN,EAAEjC,IAAIxL,EAAO,IAAI,WAAa,OAAOsN,CAAQ,IAG1DE,EAAK3N,QAAQG,EACd,MACCwN,EAAK1N,OAAO,CAAC,oBAEf,IAAGmO,MAAK,WACPT,EAAK1N,QACN,IACO0N,CACR,EACA5G,KAAKuG,OAAS,SAASpB,GACtB,IAAMhO,EAAO6I,KAAKyG,GACZG,EAAOC,EAAEC,WAGTJ,EAASvB,EAAKuB,QAAUvP,EAAK2Q,MAAMC,KACnCpB,EAAcxB,EAAK6C,MAAQ7C,EAAK6C,MAAMrB,MAAQxP,EAAK8Q,QAAQC,UAAU/C,EAAMhO,EAAMuP,GAIvF,SAASyB,EAAUC,GAClBC,aAAa9B,OAAO6B,GAAM7O,MAAK,SAAC4L,GAC/BhO,EAAK8Q,QAAQK,cAAe,EACxBnD,IACHhO,EAAKoR,cAAgB,SACrBpD,EAAKqD,SAAWtI,QAAQuI,KAAKtD,EAAKqD,SAClCrR,EAAKuR,YAAYvD,GACjBA,EAAKwD,SAAWxD,EAAKwD,QAAQ/M,QAAUzE,EAAKyR,OAAOzD,GACnDA,EAAK0D,OAAW1D,EAAK0D,MAAMjN,QAAYzE,EAAK2R,IAAI3D,GAChDA,EAAK4D,SAAW5D,EAAK4D,QAAQnN,QAAUzE,EAAK6R,OAAO7D,GACnDhO,EAAK8R,QAAQ,SAAU9D,GAAM,GAC7BhO,EAAK8R,QAAQ,cACT9D,EAAK+D,QAAUC,MAAMC,QAAQjE,EAAK+D,SACrCrC,EAAEwC,KAAKlE,EAAK+D,QAAQ,WACnBlJ,KAAKsJ,KAAOnS,EAAKoS,MAAMvJ,KACxB,IAEDmF,EAAKqE,MAAQrS,EAAKqS,OACdrE,EAAKsE,QACRtS,EAAKuS,cAAcvE,GACnBsB,GAAGgD,MAAM,gBAAiBtE,KAG5ByB,EAAK3N,QAAQkM,EACd,IAAE,OAAO,SAAC1L,GACTyG,QAAQzG,MAAMA,GACdmN,EAAK1N,OAAOO,EACb,GACD,CAUA,OAzCA0L,EAAKwE,SAAW,SAACA,GAChBxS,EAAK+P,OAAO,CAACnP,KAAO,SAAUoP,IAAM,EAAGwC,SAAAA,EAAUC,KAAO,GACzD,EA+BGjD,EAAM5M,KACRiG,KAAKwG,WAAWrP,EAAMuP,EAAQC,GAAO5M,MAAK,SAACX,GAC1C+O,EAAU,CAACxB,MAAOvN,EAAO,GAAIyQ,QAASzQ,EAAO,GAAI0Q,QAAS1Q,EAAO,GAAImO,OAAQnO,EAAO,IACrF,IAGA+O,EAAU,CAAC0B,QAASlD,EAAM/B,KAAI,kBAAI8B,CAAM,IAAGC,MAAOA,IAE5CC,CACR,EAEA5G,KAAK+J,KAAO,SAAStD,GACpBzG,KAAKyG,GAAKA,EACVzG,KAAKyG,GAAGuD,QAAQjI,IAAM,GAAHkI,OAAMtL,GAAOsL,OAxHZ,gBAyHrB,EAGAjK,KAAKkK,KAAO,SAAS9B,GACpB,IAAMxB,EAAOC,EAAEC,WACfF,EAAKuD,MAAQ,WAAY,EAEzB,IAAMC,EAxSR,SAAqBC,GACpBA,EAAQ,IAAIC,gBAAgBD,GAE5B,IADA,IAAMjC,EAAO,CAAC,EACdmC,EAAA,EAAAC,EAAarB,MAAMsB,KAAKJ,EAAMK,WAAUH,EAAAC,EAAA5O,OAAA2O,IAAC,CAArC,IAAI/C,EAACgD,EAAAD,GACLnC,EAAKZ,EAAE,IACL2B,MAAMC,QAAQhB,EAAKZ,EAAE,KAGxBY,EAAKZ,EAAE,IAAInM,KAAKmM,EAAE,IAFlBY,EAAKZ,EAAE,IAAM,CAACY,EAAKZ,EAAE,IAAKA,EAAE,IAM1BA,EAAE,GAAG1I,SAAS,MAChBsJ,EAAKZ,EAAE,IAAM,CAACA,EAAE,IAEhBY,EAAKZ,EAAE,IAAMA,EAAE,EAElB,CACA,OAAOY,CACR,CAqRgBuC,CAAYvC,EAAKrG,IAAI/C,MAAM,KAAK,IAC3CoL,GAAO1U,OAAOkV,OAAOxC,EAAKjD,KAAMiF,GACnC,IAAMS,EAAMhE,EAAEiE,KAAK1C,GAClBf,MAAK,SAAS5N,GACdmN,EAAK1N,OAAOO,EACb,IACCM,MAAK,SAASgR,GACdnE,EAAK3N,QAAQ8R,EACd,IAQA,OAPAnE,EAAKuD,MAAQ,WACRU,GAAsB,WAAfA,EAAIjR,UACdiR,EAAIG,OAAQ,EACZH,EAAIV,QAEN,EAEOvD,CACR,CACD","sources":["webpack://elFinder/./src/index.js"],"sourcesContent":["/**\n * elFinder transport to support old protocol.\n *\n * @example\n * $('selector').elfinder({\n *   .... \n *   transport : new elFinderSupportBrowserFs()\n * })\n *\n * @author Wei Ouyang\n **/\n\nfunction guidGenerator() {\n    var S4 = function() {\n       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n    };\n    return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nlet baseURL = location.pathname;\nif(baseURL.endsWith('.html')){\n\tconst tmp = baseURL.split('/')\n\tbaseURL = tmp.slice(0, tmp.length-1).join('/') + '/'\n}\n\nfunction timeout(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nwindow.initializeServiceWorker = async function(){\n\tif ('serviceWorker' in navigator) {\n\t\tconst controller = navigator.serviceWorker.controller;\n\t\t// Register the worker and show the list of quotations.\n\t\tif (!controller || !controller.scriptURL.endsWith('/service-worker.js') ) {\n\t\t\tnavigator.serviceWorker.oncontrollerchange = function() {\n\t\t\t\tthis.controller.onstatechange = function() {\n\t\t\t\t\tif (this.state === 'activated') {\n\t\t\t\t\t\tconsole.log('Service worker successfully activated.')\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst registration = await navigator.serviceWorker.register('/service-worker.js')\n\t\t\tconsole.log('Service worker successfully registered, scope is:', registration.scope);\n\t\t\t// Wait for the service worker to become active\n\t\t\tawait navigator.serviceWorker.ready;\n\t\t\t// Reload the page to allow the service worker to intercept requests\n\t\t\tif (!navigator.serviceWorker.controller) {\n\t\t\t  // Service worker has just been installed, reload the page\n\t\t\t  window.location.reload();\n\t\t\t  throw new Error('Reload the page to allow the service worker to intercept requests.')\n\t\t\t}\n\t\t\tlet ready = false;\n\t\t\twhile (!ready){\n\t\t\t\tconst response = await fetch('/fs/connector')\n\t\t\t\tif(response.status === 200){\n\t\t\t\t\tready = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tawait timeout(500);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tconsole.log('Service worker was activated.')\n\t\t}\n\t} else {\n\t\tconsole.log('Service workers are not supported.');\n\t}\n}\n\nfunction decodeQuery(param){\n\tparam = new URLSearchParams(param)\n\tconst opts = {}\n\tfor(let p of Array.from(param.entries())){\n\t\tif(opts[p[0]]){\n\t\t\tif(!Array.isArray(opts[p[0]]))\n\t\t\t\topts[p[0]] = [opts[p[0]], p[1]]\n\t\t\telse{\n\t\t\t\topts[p[0]].push(p[1])\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(p[0].endsWith('[]'))\n\t\t\t\topts[p[0]] = [p[1]]\n\t\t\telse\n\t\t\t\topts[p[0]] = p[1]\n\t\t}\n\t}\n\treturn opts\n}\n\nwindow.setupImJoyApp = function(){\n\t// const mainContainer = document.createElement('div');\n\t// document.getElementById('window-manager').appendChild(mainContainer)\n\t// we need a hack here for some umd modules in the imjoy loader to load\n\tconst _define = window.define;\n\twindow.define = undefined\n\tloadImJoyBasicApp({\n\t\tversion: '0.13.70',\n\t\tprocess_url_query: true,\n\t\tshow_window_title: false,\n\t\tshow_progress_bar: true,\n\t\tshow_empty_window: true,\n\t\t// window_manager_container: 'window-manager',\n\t\tmenu_style: { position: \"absolute\", right: 0, top: \"2px\" },\n\t\twindow_style: {width: '100%', height: '100%'},\n\t\t// main_container: mainContainer,\n\t\timjoy_api: { } // override some imjoy API functions here\n\t}).then(async app => {\n\t\tconst api = app.imjoy.api\n\t\t// const w = {\n\t\t// \tid: 'elfinder-window',\n\t\t// \twindow_id: 'elfinder-window-container',\n\t\t// \tname: 'elFinder',\n\t\t// \tfullscreen: true\n\t\t// }\n\t\t// app.allWindows.push(w);\n\t\t// app.addWindow(w);\n\t\t// app.$forceUpdate();\n\t\t// setTimeout(()=>{\n\t\t// \tconst elfinderContainer = document.getElementById(w.window_id)\n\t\t// \telfinderContainer.appendChild(document.getElementById('elfinder'))\n\t\t// }, 0)\n\n\t\tfunction urlToBase64(url){\n\t\t\treturn new Promise(async (resolve, reject)=>{\n\t\t\t\tconst response = await fetch(url)\n\t\t\t\tconst blob = await response.blob()\n\t\t\t\tconst reader = new FileReader() ;\n\t\t\t\treader.onload = function(){ resolve(this.result) } ;\n\t\t\t\treader.onerror = reject\n\t\t\t\treader.readAsDataURL(blob) ;\n\t\t\t})\n\t\t}\n\t\tawait api.registerService({\n\t\t\ttype: '#file-loader',\n\t\t\tname: 'ITK/VTK Viewer',\n\t\t\tasync check(fileObj){\n\t\t\t\tif(fileObj.mime.startsWith('image/tiff')){\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync load({url, window_id}){\n\t\t\t\tconsole.log('https://kitware.github.io/itk-vtk-viewer/app/?fileToLoad='+url)\n\t\t\t\tawait api.createWindow({src: 'https://kitware.github.io/itk-vtk-viewer/app/?fileToLoad='+url, window_id})\n\t\t\t}\n\t\t})\n\t\tawait api.registerService({\n\t\t\ttype: '#file-loader',\n\t\t\tname: 'Kaibu',\n\t\t\ticon: 'https://kaibu.org/static/img/kaibu-icon.svg',\n\t\t\tasync check(fileObj){\n\t\t\t\tif(fileObj.mime.startsWith('image/') || fileObj.mime === 'directory'){\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync load({source, type, window_id}){\n\t\t\t\tif(type === 'file'){\n\t\t\t\t\tconst base64 = await urlToBase64(source.url)\n\t\t\t\t\tconst viewer = await api.createWindow({src: 'https://kaibu.org/', window_id, w: 10, h: 10})\n\t\t\t\t\tawait viewer.view_image(base64, {name: source.name});\n\t\t\t\t\tawait viewer.add_shapes([], {name: 'annotation'})\n\t\t\t\t}\n\t\t\t\telse if(type === 'directory'){\n\t\t\t\t\tconst viewer = await api.createWindow({src: 'https://kaibu.org/', window_id, w: 10, h: 10})\n\t\t\t\t\tsource = source.filter(file => file.mime.startsWith('image/'))\n\t\t\t\t\tconst nodes = source.map(file => {return {\"title\": file.name, \"data\": file, \"isLeaf\": true}})\n\t\t\t\t\tawait viewer.add_widget({\n\t\t\t\t\t\t\"_rintf\": true,\n\t\t\t\t\t\t\"type\": \"tree\",\n\t\t\t\t\t\t\"name\": \"Files\",\n\t\t\t\t\t\t\"node_dbclick_callback\": async (node)=>{\n\t\t\t\t\t\t\tawait viewer.clear_layers()\n\t\t\t\t\t\t\tconst file = node.data\n\t\t\t\t\t\t\tconst base64 = await urlToBase64(file.url)\n\t\t\t\t\t\t\tawait viewer.view_image(base64, {name: file.name})\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"nodes\": nodes,\n\t\t\t\t\t})\n\t\t\t\t\tawait viewer.add_shapes([], {name: 'annotation'})\n\t\t\t\t}\n\n\t\t\t}\n\t\t})\n\t\t\n\t\t// a demo content provider following the Jupyter Content Manager standard\n\t\t// https://jupyter-notebook.readthedocs.io/en/stable/extending/contents.html#required-methods\n\t\tawait api.registerService({\n\t\t\ttype: '#content-provider',\n\t\t\tname: 'MyData',\n\t\t\tget(path){\n\t\t\t\treturn {\n\t\t\t\t\tname: 'My Folder',\n\t\t\t\t\tpath: '/user',\n\t\t\t\t\ttype: 'directory',\n\t\t\t\t\tcreated: '2021-01-23T18:25:43.511Z',\n\t\t\t\t\tlast_modified: '2021-01-23T18:25:43.511Z',\n\t\t\t\t\tmimetype: null,\n\t\t\t\t\tformat: 'json',\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'My SubFolder',\n\t\t\t\t\t\t\tpath: '/user/me',\n\t\t\t\t\t\t\ttype: 'directory',\n\t\t\t\t\t\t\tcreated: '2021-01-23T18:25:43.511Z',\n\t\t\t\t\t\t\tlast_modified: '2021-01-23T18:25:43.511Z',\n\t\t\t\t\t\t\tmimetype: null,\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\tsave(model, path){\n\n\t\t\t},\n\t\t\tdelete_file(path){\n\n\t\t\t},\n\t\t\trename_file(old_path, new_path){\n\n\t\t\t},\n\t\t\tfile_exists(path){\n\n\t\t\t},\n\t\t\tdir_exists(path){\n\n\t\t\t},\n\t\t\tis_hidden(path){\n\n\t\t\t}\n\t\t})\n\t\twindow.imjoy = app.imjoy;\n\t}).finally(()=>{\n\t\t// restore define\n\t\twindow.define = _define;\n\t})\n}\n\n\nconst CONNECTOR_URL = '/fs/connector';\n\nwindow.elFinderSupportBrowserFs = function(upload) {\n\t\"use strict\";\n\tthis.parseFiles = function(fm, target, files){\n\t\tconst dfrd = $.Deferred();\n\t\tfiles.done(function(result) { // result: [files, paths, renames, hashes, mkdirs]\n\t\t\tconst cnt = result[0].length;\n\t\t\tlet multiMax=-1;\n\t\t\tif (cnt) {\n\t\t\t\tif (result[4] && result[4].length) {\n\t\t\t\t\t// ensure directories\n\t\t\t\t\tfm.request({\n\t\t\t\t\t\tdata   : {cmd : 'mkdir', target : target, dirs : result[4]},\n\t\t\t\t\t\tnotify : {type : 'mkdir', cnt : result[4].length},\n\t\t\t\t\t\tpreventFail: true\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\terror = error || ['errUnknown'];\n\t\t\t\t\t\tif (error[0] === 'errCmdParams') {\n\t\t\t\t\t\t\tmultiMax = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmultiMax = 0;\n\t\t\t\t\t\t\tdfrd.reject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tvar rm = false;\n\t\t\t\t\t\tif (!data.hashes) {\n\t\t\t\t\t\t\tdata.hashes = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult[1] = $.map(result[1], function(p, i) {\n\t\t\t\t\t\t\tresult[0][i]._relativePath = p.replace(/^\\//, '');\n\t\t\t\t\t\t\tp = p.replace(/\\/[^\\/]*$/, '');\n\t\t\t\t\t\t\tif (p === '') {\n\t\t\t\t\t\t\t\treturn target;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (data.hashes[p]) {\n\t\t\t\t\t\t\t\t\treturn data.hashes[p];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trm = true;\n\t\t\t\t\t\t\t\t\tresult[0][i]._remove = true;\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (rm) {\n\t\t\t\t\t\t\tresult[0] = $.grep(result[0], function(file) { return file._remove? false : true; });\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.always(function(data) {\n\t\t\t\t\t\tdfrd.resolve(result);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tresult[1] = $.map(result[1], function() { return target; });\n\t\t\t\t}\n\n\t\t\t\tdfrd.resolve(result);\n\t\t\t} else {\n\t\t\t\tdfrd.reject(['errUploadNoFiles']);\n\t\t\t}\n\t\t}).fail(function(){\n\t\t\tdfrd.reject();\n\t\t});\n\t\treturn dfrd;\n\t}\n\tthis.upload = function(data){\n\t\tconst self = this.fm;\n\t\tconst dfrd = $.Deferred();\n\n\t\t\n\t\tconst target = data.target || self.cwd().hash;\n\t\tconst files       = data.input ? data.input.files : self.uploads.checkFile(data, self, target)\n\t\tdata.progress = (progress)=>{\n\t\t\tself.notify({type : 'upload', cnt : 0, progress, size : 0});\n\t\t}\n\t\tfunction saveFiles(opts){\n\t\t\telfinder_api.upload(opts).then((data)=>{\n\t\t\t\tself.uploads.xhrUploading = false;\n\t\t\t\tif (data) {\n\t\t\t\t\tself.currentReqCmd = 'upload';\n\t\t\t\t\tdata.warning && console.warn(data.warning);\n\t\t\t\t\tself.updateCache(data);\n\t\t\t\t\tdata.removed && data.removed.length && self.remove(data);\n\t\t\t\t\tdata.added   && data.added.length   && self.add(data);\n\t\t\t\t\tdata.changed && data.changed.length && self.change(data);\n\t\t\t\t\tself.trigger('upload', data, false);\n\t\t\t\t\tself.trigger('uploaddone');\n\t\t\t\t\tif (data.toasts && Array.isArray(data.toasts)) {\n\t\t\t\t\t\t$.each(data.toasts, function() {\n\t\t\t\t\t\t\tthis.msg && self.toast(this);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tdata.sync && self.sync();\n\t\t\t\t\tif (data.debug) {\n\t\t\t\t\t\tself.responseDebug(data);\n\t\t\t\t\t\tfm.debug('backend-debug', data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdfrd.resolve(data);\n\t\t\t}).catch((error)=>{\n\t\t\t\tconsole.error(error)\n\t\t\t\tdfrd.reject(error);\n\t\t\t})\n\t\t}\n\n\t\tif(files.done){\n\t\t\tthis.parseFiles(self, target, files).done((result)=>{\n\t\t\t\tsaveFiles({files: result[0], targets: result[1], renames: result[2], hashes: result[3]})\n\t\t\t})\n\t\t}\n\t\telse{\n\t\t\tsaveFiles({targets: files.map(()=>target), files: files})\n\t\t}\n\t\treturn dfrd\n\t};\n\t\n\tthis.init = function(fm) {\n\t\tthis.fm = fm;\n\t\tthis.fm.options.url = `${baseURL}${CONNECTOR_URL}`;\n\t};\n\n\t\n\tthis.send = function(opts) {\n\t\tconst dfrd = $.Deferred();\n\t\tdfrd.abort = function() {};\n\t\t\n\t\tconst query = decodeQuery(opts.url.split('?')[1])\n\t\tif(query) Object.assign(opts.data, query)\n\t\tconst xhr = $.ajax(opts)\n\t\t.fail(function(error) {\n\t\t\tdfrd.reject(error);\n\t\t})\n\t\t.done(function(raw) {\n\t\t\tdfrd.resolve(raw);\n\t\t});\n\t\tdfrd.abort = function() {\n\t\t\tif (xhr && xhr.state() == 'pending') {\n\t\t\t\txhr.quiet = true;\n\t\t\t\txhr.abort();\n\t\t\t}\n\t\t};\n\n\t\treturn dfrd;\n\t};\n};\n"],"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","baseURL","location","pathname","endsWith","tmp","split","join","timeout","ms","setTimeout","window","initializeServiceWorker","_callee","controller","registration","ready","_context","navigator","serviceWorker","scriptURL","oncontrollerchange","this","onstatechange","console","log","register","scope","reload","fetch","status","setupImJoyApp","_define","loadImJoyBasicApp","version","process_url_query","show_window_title","show_progress_bar","show_empty_window","menu_style","position","right","top","window_style","width","height","imjoy_api","_ref2","_callee8","app","api","urlToBase64","_context8","url","_ref3","_callee2","response","blob","reader","_context2","FileReader","onload","onerror","readAsDataURL","_x2","_x3","imjoy","registerService","check","fileObj","_callee3","_context3","mime","startsWith","load","_ref4","_callee4","window_id","_context4","createWindow","src","icon","_callee5","_context5","_ref5","_callee7","source","base64","viewer","_viewer","nodes","_context7","w","h","view_image","add_shapes","filter","file","map","add_widget","_node_dbclick_callback","_callee6","node","_context6","clear_layers","data","_x4","get","path","created","last_modified","mimetype","format","content","save","model","delete_file","rename_file","old_path","new_path","file_exists","dir_exists","is_hidden","_x","elFinderSupportBrowserFs","upload","parseFiles","fm","target","files","dfrd","$","Deferred","request","cmd","dirs","notify","cnt","preventFail","fail","rm","hashes","p","_relativePath","replace","_remove","grep","always","cwd","hash","input","uploads","checkFile","saveFiles","opts","elfinder_api","xhrUploading","currentReqCmd","warning","warn","updateCache","removed","remove","added","add","changed","change","trigger","toasts","Array","isArray","each","msg","toast","sync","debug","responseDebug","progress","size","targets","renames","init","options","concat","send","abort","query","param","URLSearchParams","_i","_Array$from","from","entries","decodeQuery","assign","xhr","ajax","raw","quiet"],"sourceRoot":""}