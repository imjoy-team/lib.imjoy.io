{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./src/imjoyBasicApp.js","webpack://[name]/(webpack)/buildin/amd-options.js","webpack://[name]/./src/imjoyLoader.js","webpack://[name]/./src/imjoyBasicApp.template.css","webpack://[name]/./src/imjoyBasicApp.template.html","webpack://[name]/./src/imjoyBasicAppMenu.template.html","webpack://[name]/./src/imjoyBasicAppWindows.template.html"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","injectScript","src","Promise","resolve","reject","script","document","createElement","addEventListener","head","removeChild","appendChild","getUrlParameter","replace","results","RegExp","exec","location","search","decodeURIComponent","async","loadImJoyBasicApp","config","app","imjoy_api","showDialog","plugin","cfg","extra_cfg","dialog","imjoy","pm","createWindow","window_manager_container","showSnackbar","msg","duration","showMessage","showStatus","showProgress","progress","$forceUpdate","k","keys","loadImJoyCore","ImJoy","elem","windowManager","menuManager","start","console","log","Vue","use","default","main_container","getElementById","body","style","visibility","innerHTML","APP_TEMPLATE","insertAdjacentHTML","CSS_STYLE","windowsElem","WINDOWS_TEMPLATE","el","data","windowStyle","window_style","showEmpty","show_empty_window","showWindowTitle","show_window_title","windows","activeWindow","menu_container","menuElem","MENU_TEMPLATE","minHeight","menuPos","menu_pos","menuStyle","menu_style","closeWindow","showAboutImJoy","extraMenuItems","loadedPlugins","allWindows","mounted","this","float","dialogWindows","selectedDialogWindow","selectedWindowsStack","selectedRegularWindow","fullscreen","loading","snackBarContent","showProgressBar","show_progress_bar","showLoader","show_loader","showWindows","show_windows","$el","event_bus","on","w","push","addWindow","process_url_query","processURLQuery","hide_about_imjoy","api","passive","computed","regularWindows","filter","includes","inline","watch","newVal","methods","token","engine","setupPluginEngine","loadPlugin","then","tmp","JSON","parse","runPlugin","ui","indexOf","run","reloadPluginRecursively","uri","em","getFactory","addEngine","url","e","error","alert","addMenuItem","removeMenuItem","label","item","it","idx","splice","setTimeout","windowElm","window_id","assign","show","scrollIntoView","standalone","$modal","wm","selectWindow","emit","hide","showWindow","pop","length","minimizeWindow","maximizeWindow","__webpack_amd_options__","_getParams","params","parser","href","vars","substring","split","pair","baseUrl","base_url","version","imjoyCore","debug","eval","_rpc_registry","latest_rpc_version","dependencies","_rpc_api_versions","from","to","skips","findRPCVersionByAPIVersion","apiVersion","latestOnly","cached","f","v","map","a","sort","reverse","API_VERSION","loadImJoyRPC","api_version","Error","info","rpc_url","checkAndCacheLib","imjoyRPC","VERSION","catch","loadImJoyRPCByQueryString","urlParams"],"mappings":"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","file":"imjoy-loader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"imjoyLoader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imjoyLoader\"] = factory();\n\telse\n\t\troot[\"imjoyLoader\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","import CSS_STYLE from \"./imjoyBasicApp.template.css\";\nimport APP_TEMPLATE from \"./imjoyBasicApp.template.html\";\nimport MENU_TEMPLATE from \"./imjoyBasicAppMenu.template.html\";\nimport WINDOWS_TEMPLATE from \"./imjoyBasicAppWindows.template.html\";\n\nexport function injectScript(src) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n    script.addEventListener(\"load\", resolve);\n    script.addEventListener(\"error\", () => {\n      document.head.removeChild(script);\n      reject(\"Error loading script: \" + src);\n    });\n    script.addEventListener(\"abort\", () => reject(\"Script loading aborted.\"));\n    document.head.appendChild(script);\n  });\n}\n\nfunction getUrlParameter(name) {\n  name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n  var results = regex.exec(location.search);\n  return results === null\n    ? \"\"\n    : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\nexport async function loadImJoyBasicApp(config) {\n  await injectScript(\"https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js\");\n  await injectScript(\"https://imjoy-team.github.io/vue-js-modal/index.js\");\n  await injectScript(\"https://imjoy-team.github.io/vue-js-modal/styles.css\");\n  config = config || {};\n  let app;\n  const imjoy_api = {\n    showDialog(plugin, cfg, extra_cfg) {\n      extra_cfg = extra_cfg || {};\n      extra_cfg.dialog = true;\n      return imjoy.pm.createWindow(plugin, cfg, extra_cfg);\n    },\n    createWindow(plugin, cfg, extra_cfg) {\n      extra_cfg = extra_cfg || {};\n      if (!config.window_manager_container) extra_cfg.dialog = true;\n      return imjoy.pm.createWindow(plugin, cfg, extra_cfg);\n    },\n    showSnackbar(plugin, msg, duration) {\n      app.showSnackbar(msg, duration);\n    },\n    showMessage(plugin, msg) {\n      app.showSnackbar(msg, 5);\n    },\n    showStatus(plugin, msg) {\n      app.showSnackbar(msg, 5);\n    },\n    showProgress(plugin, progress) {\n      progress = progress || 0;\n      if (progress < 1) progress = progress * 100;\n      app.progress = progress;\n      app.$forceUpdate();\n    },\n  };\n  if (config.imjoy_api) {\n    for (let k of Object.keys(config.imjoy_api)) {\n      imjoy_api[k] = config.imjoy_api[k];\n    }\n  }\n  const imjoyCore = await loadImJoyCore(config);\n  const imjoy = new imjoyCore.ImJoy({\n    imjoy_api,\n  });\n  await imjoy.start(config);\n  console.log(\"ImJoy Core started successfully!\");\n  Vue.use(window[\"vue-js-modal\"].default);\n  let elem;\n  if (config.main_container) {\n    if (typeof config.main_container === \"string\")\n      elem = document.getElementById(config.main_container);\n    else elem = config.main_container;\n  } else {\n    elem = document.createElement(\"div\");\n    document.body.appendChild(elem);\n  }\n  elem.style.visibility = \"hidden\";\n  elem.innerHTML = APP_TEMPLATE;\n  document.head.insertAdjacentHTML(\"beforeend\", `<style>${CSS_STYLE}</style>`);\n\n  let windowManager;\n  if (config.window_manager_container) {\n    let windowsElem;\n    if (typeof config.window_manager_container === \"string\")\n      windowsElem = document.getElementById(config.window_manager_container);\n    else windowsElem = config.window_manager_container;\n    windowsElem.innerHTML = WINDOWS_TEMPLATE;\n    windowManager = new Vue({\n      el: windowsElem,\n      data: {\n        windowStyle: config.window_style || {},\n        showEmpty: config.show_empty_window || false,\n        showWindowTitle: config.show_window_title || false,\n        windows: [],\n        activeWindow: null,\n      },\n    });\n  }\n\n  let menuManager;\n  if (config.menu_container) {\n    let menuElem;\n    if (typeof config.menu_container === \"string\")\n      menuElem = document.getElementById(config.menu_container);\n    else menuElem = config.menu_container;\n    menuElem.innerHTML = MENU_TEMPLATE;\n    menuElem.style.minHeight = \"30px\";\n    menuManager = new Vue({\n      el: menuElem,\n      data: {\n        menuPos: config.menu_pos || \"right\",\n        menuStyle: config.menu_style || {},\n        activeWindow: null,\n        closeWindow: null,\n        showAboutImJoy: null,\n        extraMenuItems: [],\n        loadedPlugins: [],\n        allWindows: [],\n      },\n      mounted() {\n        this.menuStyle = this.menuStyle || {};\n        this.menuStyle.float = this.menuPos === \"left\" ? \"left\" : \"right\";\n      },\n    });\n  }\n\n  app = new Vue({\n    el: elem,\n    data: {\n      dialogWindows: [],\n      selectedDialogWindow: null,\n      selectedWindowsStack: [],\n      selectedRegularWindow: null,\n      fullscreen: false,\n      loading: false,\n      snackBarContent: false,\n      progress: 0,\n      loadedPlugins: [],\n      allWindows: [],\n      extraMenuItems: [],\n      showProgressBar: config.show_progress_bar,\n      showLoader: config.show_loader,\n      showWindows: config.show_windows,\n    },\n    mounted() {\n      this.$el.style.visibility = \"visible\";\n      imjoy.event_bus.on(\"close_window\", w => {\n        this.closeWindow(w);\n        this.$forceUpdate();\n      });\n      imjoy.event_bus.on(\"add_window\", w => {\n        this.allWindows.push(w);\n        this.addWindow(w);\n      });\n      this.imjoy = imjoy;\n      if (config.process_url_query) {\n        this.processURLQuery();\n      }\n      if (menuManager) {\n        menuManager.closeWindow = w => {\n          this.closeWindow(w);\n        };\n        if (!config.hide_about_imjoy) {\n          menuManager.showAboutImJoy = () => {\n            imjoy.api.showDialog({\n              src: \"https://imjoy.io/docs/\",\n              passive: true,\n            });\n          };\n        }\n      }\n    },\n    computed: {\n      regularWindows: function() {\n        return this.allWindows.filter(\n          w => !this.dialogWindows.includes(w) && !w.inline\n        );\n      },\n    },\n    watch: {\n      regularWindows: function(newVal) {\n        if (windowManager) {\n          windowManager.windows = newVal;\n          windowManager.$forceUpdate();\n        }\n      },\n      selectedRegularWindow: function(newVal) {\n        if (windowManager) {\n          windowManager.activeWindow = newVal;\n          windowManager.$forceUpdate();\n        }\n        if (menuManager) {\n          menuManager.activeWindow = newVal;\n          menuManager.$forceUpdate();\n        }\n      },\n      extraMenuItems: function(newVal) {\n        if (menuManager) {\n          menuManager.extraMenuItems = newVal;\n          menuManager.$forceUpdate();\n        }\n      },\n      allWindows: function(newVal) {\n        if (menuManager) {\n          menuManager.allWindows = newVal;\n          menuManager.$forceUpdate();\n        }\n      },\n      loadedPlugins: function(newVal) {\n        if (menuManager) {\n          menuManager.loadedPlugins = newVal;\n          menuManager.$forceUpdate();\n        }\n      },\n    },\n    methods: {\n      processURLQuery() {\n        const token = getUrlParameter(\"token\") || getUrlParameter(\"t\");\n        const engine = getUrlParameter(\"engine\") || getUrlParameter(\"e\");\n        const p = getUrlParameter(\"plugin\") || getUrlParameter(\"p\");\n        if (engine) {\n          this.setupPluginEngine(engine, token);\n        }\n        if (p) {\n          this.loadPlugin(p).then(plugin => {\n            let config = {},\n              data = {},\n              tmp;\n            tmp = getUrlParameter(\"data\");\n            if (tmp) data = JSON.parse(tmp);\n            tmp = getUrlParameter(\"config\");\n            if (tmp) config = JSON.parse(tmp);\n            this.runPlugin(plugin, config, data);\n          });\n        }\n      },\n      async runPlugin(plugin, config, data) {\n        if (!config && plugin.config.ui && plugin.config.ui.indexOf(\"{\") > -1) {\n          config = await imjoy.pm.imjoy_api.showDialog(plugin, plugin.config);\n        }\n        data = data || {};\n        return await plugin.api.run({\n          config: config,\n          data: data,\n        });\n      },\n      async setupPluginEngine(engine, token) {\n        try {\n          console.log(\"Loading Jupyter-Engine-Manager from Gist...\");\n          await imjoy.pm.reloadPluginRecursively({\n            uri:\n              \"https://imjoy-team.github.io/jupyter-engine-manager/Jupyter-Engine-Manager.imjoy.html\",\n          });\n          console.log(\"Jupyter-Engine-Manager loaded.\");\n          const factory = imjoy.em.getFactory(\"Jupyter-Engine\");\n          await factory.addEngine({\n            url: engine,\n            token: token,\n          });\n          console.log(\"plugin engine added:\", engine);\n        } catch (e) {\n          console.error(e);\n          alert(`Failed to connect to the engine: ${e}`);\n        }\n      },\n      async loadPlugin(uri) {\n        try {\n          this.loading = true;\n          const p = await imjoy.pm.reloadPluginRecursively({\n            uri,\n          });\n          this.loadedPlugins.push(p);\n          this.showSnackbar(`Plugin ${p.name} successfully loaded.`);\n          return p;\n        } finally {\n          this.loading = false;\n        }\n      },\n      addMenuItem(config) {\n        this.extraMenuItems.push(config);\n        this.$forceUpdate();\n      },\n      removeMenuItem(label) {\n        const item = this.extraMenuItems.filter(it => it.label === label)[0];\n        const idx = this.extraMenuItems.indexOf(item);\n        if (idx >= 0) this.extraMenuItems.splice(idx, 1);\n      },\n      showSnackbar(msg, duration) {\n        duration = duration || 3;\n        this.snackBarContent = msg;\n        this.$forceUpdate();\n        setTimeout(() => {\n          this.snackBarContent = null;\n          this.$forceUpdate();\n        }, duration * 1000);\n      },\n      addWindow(w) {\n        const windowElm = document.getElementById(w.window_id);\n        if (windowElm) {\n          if (w.window_style) Object.assign(windowElm.style, w.window_style);\n          w.inline = true;\n          w.api.show = w.show = () => {\n            windowElm.scrollIntoView();\n          };\n          return;\n        }\n        if (!w.dialog) {\n          this.selectedRegularWindow = w;\n          w.api.show = w.show = () => {\n            this.selectedRegularWindow = w;\n            this.$forceUpdate();\n            imjoy.wm.selectWindow(w);\n            w.api.emit(\"show\");\n          };\n          return;\n        }\n        this.dialogWindows.push(w);\n        if (this.selectedDialogWindow) {\n          this.selectedWindowsStack.push(this.selectedDialogWindow);\n        }\n        this.selectedDialogWindow = w;\n        if (w.fullscreen || w.standalone) this.fullscreen = true;\n        else this.fullscreen = false;\n        this.$modal.show(\"window-modal-dialog\");\n        this.$forceUpdate();\n        w.api.show = w.show = () => {\n          this.selectedDialogWindow = w;\n          this.$modal.show(\"window-modal-dialog\");\n          imjoy.wm.selectWindow(w);\n          w.api.emit(\"show\");\n        };\n\n        w.api.hide = w.hide = () => {\n          if (this.selectedDialogWindow === w) {\n            this.$modal.hide(\"window-modal-dialog\");\n          }\n          w.api.emit(\"hide\");\n        };\n\n        setTimeout(() => {\n          try {\n            w.show();\n          } catch (e) {\n            console.error(e);\n          }\n        }, 500);\n      },\n      showWindow(w) {\n        if (w.fullscreen || w.standalone) this.fullscreen = true;\n        else this.fullscreen = false;\n        if (w) this.selectedDialogWindow = w;\n        this.$modal.show(\"window-modal-dialog\");\n      },\n      closeWindow(w) {\n        let idx = this.dialogWindows.indexOf(w);\n        if (idx >= 0) this.dialogWindows.splice(idx, 1);\n        idx = this.allWindows.indexOf(w);\n        if (idx >= 0) this.allWindows.splice(idx, 1);\n        if (w === this.selectedDialogWindow) {\n          this.selectedDialogWindow = this.selectedWindowsStack.pop();\n        }\n        if (!this.selectedDialogWindow) this.$modal.hide(\"window-modal-dialog\");\n        if (w === this.selectedRegularWindow) {\n          if (this.regularWindows.length > 0)\n            this.selectedRegularWindow =\n              this.regularWindows[this.regularWindows.length - 1] || null;\n          else this.selectedRegularWindow = null;\n        }\n        this.$forceUpdate();\n      },\n      minimizeWindow() {\n        this.$modal.hide(\"window-modal-dialog\");\n      },\n      maximizeWindow() {\n        this.fullscreen = !this.fullscreen;\n      },\n    },\n  });\n  return app;\n}\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","import { dependencies } from \"../package.json\";\nimport { injectScript, loadImJoyBasicApp } from \"./imjoyBasicApp.js\";\n\n/**\n * Get the URL parameters\n * source: https://css-tricks.com/snippets/javascript/get-url-variables/\n * @param  {String} url The URL\n * @return {Object}     The URL parameters\n */\nvar _getParams = function(url) {\n  var params = {};\n  var parser = document.createElement(\"a\");\n  parser.href = url;\n  var query = parser.search.substring(1);\n  var vars = query.split(\"&\");\n  for (var i = 0; i < vars.length; i++) {\n    var pair = vars[i].split(\"=\");\n    params[pair[0]] = decodeURIComponent(pair[1]);\n  }\n  return params;\n};\n\n// Load the imjoy core script\n// it support the following options:\n// 1) version, you can specify a specific version of the core,\n// for example `version: \"0.11.13\"` or `version: \"latest\"`\n// 2) debug, by default, the minified version will be used,\n// if debug==true, the full version will be served\n// 3) base_url, the url for loading the core library\nexport function loadImJoyCore(config) {\n  config = config || {};\n  // eslint-disable-next-line no-async-promise-executor\n  return new Promise(async (resolve, reject) => {\n    try {\n      var baseUrl = config.base_url;\n      if (!baseUrl) {\n        const version = config.version || \"latest\";\n        baseUrl = `https://cdn.jsdelivr.net/npm/imjoy-core@${version}/dist/`;\n      }\n      delete window.imjoyCore;\n      if (config.debug) {\n        await injectScript(baseUrl + \"imjoy-core.js\");\n      } else {\n        await injectScript(baseUrl + \"imjoy-core.min.js\");\n      }\n      if (window.imjoyCore) {\n        const imjoyCore = window.imjoyCore;\n        delete window.imjoyCore;\n        resolve(imjoyCore);\n      } else if (\n        typeof define === \"function\" &&\n        // eslint-disable-next-line no-undef\n        define.amd\n      )\n        eval(\"require\")([\"imjoyCore\"], resolve);\n      else reject(\"Failed to import imjoy-core.\");\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\nconst _rpc_registry = {};\n// get version number from package.json\nexport const latest_rpc_version = dependencies[\"imjoy-rpc\"].replace(\n  /[^\\d.-]/g,\n  \"\"\n);\n\nconst _rpc_api_versions = {\n  \"0.2.0\": { from: \"0.1.10\", to: \"0.1.17\", skips: [] },\n  \"0.2.1\": { from: \"0.1.18\", to: \"0.2.5\", skips: [] },\n  \"0.2.2\": { from: \"0.2.6\", to: \"0.2.6\", skips: [] },\n  \"0.2.3\": {\n    from: \"0.2.7\",\n    to: latest_rpc_version,\n    skips: [\n      \"0.2.9\",\n      \"0.2.15\",\n      \"0.2.16\",\n      \"0.2.18\",\n      \"0.2.23\",\n      \"0.2.24\",\n      \"0.2.25\",\n    ],\n  },\n};\n\n// specify an api version and this function will return the actual imjoy-rpc version\n// if you set latestOnly to true, then it returns always the latest for the api version\n// otherwise, it will try to find a compatible version in the cached version.\nfunction findRPCVersionByAPIVersion(apiVersion, latestOnly) {\n  if (!apiVersion || !apiVersion.includes(\".\")) return;\n  let cached = Object.keys(_rpc_registry);\n  if (_rpc_api_versions[apiVersion]) {\n    if (cached.length <= 0 || latestOnly) {\n      return _rpc_api_versions[apiVersion].to;\n    }\n    // see if we can find a compatible version in the cache\n    // sort the cached version\n    cached = (f => f(f(cached, 1).sort(), -1))((cached, v) =>\n      cached.map(a => a.replace(/\\d+/g, n => +n + v * 100000))\n    );\n    for (let c of cached.reverse()) {\n      if (_rpc_registry[c].API_VERSION === apiVersion) return c;\n    }\n    return _rpc_api_versions[apiVersion].to;\n  } else {\n    return null;\n  }\n}\n// Load the script for a plugin to communicate with imjoy-rpc\n// This should only be called when the window is inside the iframe\n// it support the following options:\n// 1) version, you can specify a specific version of the imjoy-rpc,\n// for example `version: \"0.11.13\"` or `version: \"latest\"`\n// 2) api_version, specify the api version of the imjoy-rpc\n// 3) debug, by default, the minified version will be used,\n// if debug==true, the full version will be served\n// 4) base_url, the url for loading the rpc library\nexport function loadImJoyRPC(config) {\n  config = config || {};\n  return new Promise((resolve, reject) => {\n    var baseUrl = config.base_url;\n    let version = config.version;\n    if (!baseUrl) {\n      if (config.version) {\n        baseUrl = `https://cdn.jsdelivr.net/npm/imjoy-rpc@${\n          config.version\n        }/dist/`;\n      } else {\n        if (config.api_version) {\n          // find the latest version for this api_version\n          version = findRPCVersionByAPIVersion(config.api_version, true);\n          if (version) {\n            baseUrl = `https://cdn.jsdelivr.net/npm/imjoy-rpc@${version}/dist/`;\n          } else {\n            reject(\n              Error(\n                `Cannot find a version of imjoy-rpc that supports api v${\n                  config.api_version\n                }`\n              )\n            );\n            return;\n          }\n        } else {\n          baseUrl = `https://cdn.jsdelivr.net/npm/imjoy-rpc@latest/dist/`;\n          version = \"latest\";\n          console.info(`Using imjoy-rpc library from ${baseUrl}.`);\n        }\n      }\n    }\n\n    if (version && _rpc_registry[version]) {\n      console.info(`Using cached imjoy-rpc library v${version}.`);\n      resolve(_rpc_registry[version]);\n      return;\n    }\n\n    let rpc_url = baseUrl + \"imjoy-rpc.min.js\";\n    if (config.debug) {\n      rpc_url = baseUrl + \"imjoy-rpc.js\";\n    }\n    function checkAndCacheLib(imjoyRPC) {\n      if (version && version !== \"latest\" && version !== imjoyRPC.VERSION) {\n        throw new Error(\n          `imjoy-rpc version mismatch ${version} != ${imjoyRPC.VERSION}`\n        );\n      }\n      if (config.api_version && config.api_version !== imjoyRPC.API_VERSION) {\n        throw new Error(\n          `imjoy-rpc api version mismatch ${config.api_version} != ${\n            imjoyRPC.API_VERSION\n          }`\n        );\n      }\n      _rpc_registry[imjoyRPC.VERSION] = imjoyRPC;\n    }\n    delete window.imjoyRPC;\n    injectScript(rpc_url)\n      .then(() => {\n        if (window.imjoyRPC) {\n          const imjoyRPC = window.imjoyRPC;\n          delete window.imjoyRPC;\n          try {\n            checkAndCacheLib(imjoyRPC);\n            resolve(imjoyRPC);\n          } catch (e) {\n            reject(e);\n          }\n        } else if (\n          typeof define === \"function\" &&\n          // eslint-disable-next-line no-undef\n          define.amd\n        )\n          eval(\"require\")([\"imjoyRPC\"], imjoyRPC => {\n            try {\n              checkAndCacheLib(imjoyRPC);\n              resolve(imjoyRPC);\n            } catch (e) {\n              reject(e);\n            }\n          });\n        else {\n          reject(\"Failed to import imjoy-rpc.\");\n          return;\n        }\n      })\n      .catch(reject);\n  });\n}\n\nasync function loadImJoyRPCByQueryString() {\n  const urlParams = _getParams(window.location);\n  return await loadImJoyRPC(urlParams);\n}\n\nwindow.loadImJoyRPCByQueryString = loadImJoyRPCByQueryString;\nwindow.loadImJoyRPC = loadImJoyRPC;\nwindow.loadImJoyCore = loadImJoyCore;\nwindow.loadImJoyBasicApp = loadImJoyBasicApp;\n","module.exports = \".vm--modal {\\n  max-height: 100% !important;\\n  max-width: 100% !important;\\n}\\n\\n.imjoy-inline-window {\\n  width: 100%;\\n  height: 600px;\\n}\\n\\n.imjoy-progress-border > div {\\n  background-color: #448aff;\\n  height: 3px;\\n}\\n\\n.imjoy-progress-border {\\n  top: 0;\\n  left: 0;\\n  position: absolute;\\n  width: 100%;\\n  height: 3px;\\n}\\n\\n.imjoy-noselect {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -khtml-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\nbody {\\n  margin: 0px;\\n}\\n.imjoy-dialog-control {\\n  height: 23px;\\n  border: 0px;\\n  font-size: 1rem;\\n  position: absolute;\\n  color: white;\\n  top: 1px;\\n}\\n\\n.imjoy-dialog-control:focus {\\n  outline: none;\\n}\\n\\n.imjoy-loader {\\n  position: fixed;\\n  top: 40%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  transform: -webkit-translate(-50%, -50%);\\n  transform: -moz-translate(-50%, -50%);\\n  transform: -ms-translate(-50%, -50%);\\n  border: 10px solid #f3f3f3;\\n  /* Light grey */\\n  border-top: 10px solid #448aff;\\n  /* Blue */\\n  border-radius: 50%;\\n  width: 40px;\\n  height: 40px;\\n  animation: spin 2s linear infinite;\\n}\\n\\n@keyframes spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n/* The snackbar - position it at the bottom and in the middle of the screen */\\n.imjoy-snackbar {\\n  font-family: Arial, Helvetica, sans-serif;\\n  visibility: hidden;\\n  /* Hidden by default. Visible on click */\\n  min-width: 250px;\\n  /* Set a default minimum width */\\n  background-color: #333333c2;\\n  /* Black background color */\\n  color: #fff;\\n  /* White text color */\\n  text-align: center;\\n  /* Centered text */\\n  border-radius: 5px;\\n  /* Rounded borders */\\n  padding: 16px;\\n  /* Padding */\\n  position: fixed;\\n  /* Sit on top of the screen */\\n  z-index: 9999;\\n  /* Add a z-index if needed */\\n  left: 50%;\\n  /* Center the snackbar */\\n  transform: translate(-50%, 0);\\n  bottom: 20px;\\n  /* 20px from the bottom */\\n}\\n\\n.imjoy-window-title-bar {\\n  cursor: move;\\n  background-color: #448aff;\\n  color: white;\\n  text-align: center;\\n  height: 24px;\\n}\\n\\n.imjoy-window-title {\\n  text-align: center;\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-size: 16px;\\n  line-height: 20px;\\n  margin: 0px;\\n}\\n\\n/* Show the snackbar when clicking on a button (class added with JavaScript) */\\n.imjoy-snackbar.show-snackbar {\\n  visibility: visible;\\n  /* Show the snackbar */\\n  /* Add animation: Take 0.5 seconds to fade in and out the snackbar.\\n  However, delay the fade out process for 2.5 seconds */\\n  -webkit-animation: imjoy-fadein 0.5s;\\n  animation: imjoy-fadein 0.5s;\\n}\\n\\n/* Animations to fade the snackbar in and out */\\n@-webkit-keyframes imjoy-fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes imjoy-fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n\\n.dropdown-btn {\\n  padding: 4px;\\n  font-size: 16px;\\n  border: none;\\n  cursor: pointer;\\n}\\n\\n.dropdown {\\n  position: relative;\\n  display: inline-block;\\n}\\n\\n.dropdown-content {\\n  display: none;\\n  position: absolute;\\n  right: 0;\\n  background-color: #f9f9f9;\\n  min-width: 200px;\\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\\n  z-index: 1;\\n}\\n\\n.dropdown-content a {\\n  font-family: Arial, Helvetica, sans-serif;\\n  color: black;\\n  padding: 6px 10px;\\n  text-decoration: none;\\n  display: block;\\n}\\n\\n.dropdown-content a:hover {\\n  background-color: #f1f1f1;\\n}\\n\\n.dropdown:hover .dropdown-content {\\n  display: block;\\n}\\n\\n.dropdown:hover .dropbtn {\\n  background-color: #3e8e41;\\n}\\n\\n.imjoy-window-container {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.imjoy-windows {\\n  position: relative;\\n  min-height: 100px;\\n  height: calc(100% - 30px);\\n}\\n\"","module.exports = \"<div v-if=\\\"showLoader\\\" class=\\\"imjoy-loader\\\" v-show=\\\"loading\\\"></div>\\n<div v-if=\\\"showProgressBar\\\" class=\\\"imjoy-progress-border\\\" v-show=\\\"progress\\\">\\n  <div :style=\\\"{width: progress+'%'}\\\"></div>\\n</div>\\n<div\\n  v-show=\\\"snackBarContent\\\"\\n  :class=\\\"{'show-snackbar': snackBarContent}\\\"\\n  class=\\\"imjoy-snackbar\\\"\\n>\\n  {{snackBarContent}}\\n</div>\\n<modal\\n  name=\\\"window-modal-dialog\\\"\\n  height=\\\"500px\\\"\\n  style=\\\"max-height: 100%; max-width: 100%\\\"\\n  :fullscreen=\\\"fullscreen\\\"\\n  :resizable=\\\"true\\\"\\n  draggable=\\\".imjoy-drag-handle\\\"\\n  :scrollable=\\\"true\\\"\\n>\\n  <div\\n    v-if=\\\"selectedDialogWindow\\\"\\n    @dblclick=\\\"maximizeWindow()\\\"\\n    class=\\\"imjoy-drag-handle imjoy-window-title-bar\\\"\\n  >\\n    <span class=\\\"imjoy-noselect imjoy-window-title\\\"\\n      >{{ selectedDialogWindow.name}}</span\\n    >\\n    <button\\n      @click=\\\"closeWindow(selectedDialogWindow)\\\"\\n      class=\\\"imjoy-noselect imjoy-dialog-control\\\"\\n      style=\\\"background:#ff0000c4;left:1px;\\\"\\n    >\\n      x\\n    </button>\\n    <button\\n      @click=\\\"minimizeWindow()\\\"\\n      class=\\\"imjoy-noselect imjoy-dialog-control\\\"\\n      style=\\\"background:#00cdff61;left:25px;\\\"\\n    >\\n      -\\n    </button>\\n    <button\\n      @click=\\\"maximizeWindow()\\\"\\n      class=\\\"imjoy-noselect imjoy-dialog-control\\\"\\n      style=\\\"background:#00cdff61;left:45px;\\\"\\n    >\\n      {{fullscreen?'=': '+'}}\\n    </button>\\n  </div>\\n  <template v-for=\\\"wdialog in dialogWindows\\\">\\n    <div\\n      :key=\\\"wdialog.window_id\\\"\\n      v-show=\\\"wdialog === selectedDialogWindow\\\"\\n      style=\\\"height: calc(100% - 18px);\\\"\\n    >\\n      <div :id=\\\"wdialog.window_id\\\" style=\\\"width: 100%;height: 100%;\\\"></div>\\n    </div>\\n  </template>\\n</modal>\\n\"","module.exports = \"<div class=\\\"dropdown\\\" :style=\\\"menuStyle\\\">\\n  <a class=\\\"dropdown-btn\\\"\\n    ><img\\n      style=\\\"width:24px;\\\"\\n      src=\\\"https://imjoy.io/static/img/imjoy-icon.svg\\\"\\n    />\\n  </a>\\n  <div class=\\\"dropdown-content\\\" :style=\\\"{left: menuPos==='left'? 0: null}\\\">\\n    <a\\n      href=\\\"#\\\"\\n      v-for=\\\"item in extraMenuItems\\\"\\n      :key=\\\"item.label\\\"\\n      @click.prevent=\\\"item.callback()\\\"\\n      >{{item.label}}</a\\n    >\\n    <hr\\n      style=\\\"margin: 0;border-style: solid;color: rgb(157 205 255 / 45%);\\\"\\n      v-show=\\\"extraMenuItems.length>0 && loadedPlugins.length>0\\\"\\n    />\\n    <a\\n      href=\\\"#\\\"\\n      v-for=\\\"p in loadedPlugins\\\"\\n      :key=\\\"p.id\\\"\\n      @click.prevent=\\\"p.api.run()\\\"\\n      >🧩 {{p.name}}</a\\n    >\\n    <hr\\n      style=\\\"margin: 0;border-style: solid;color: rgb(157 205 255 / 45%);\\\"\\n      v-show=\\\"allWindows.length>0 && loadedPlugins.length>0\\\"\\n    />\\n    <a href=\\\"#\\\" v-if=\\\"showAboutImJoy\\\" @click.prevent=\\\"showAboutImJoy()\\\"\\n      >ℹ️ About ImJoy</a\\n    >\\n    <hr\\n      style=\\\"margin: 0;border-style: solid;color: rgb(157 205 255 / 45%);\\\"\\n      v-show=\\\"allWindows.length>0 && loadedPlugins.length>0\\\"\\n    />\\n    <a\\n      href=\\\"#\\\"\\n      v-for=\\\"w in allWindows\\\"\\n      :style=\\\"{'background-color': activeWindow===w?'#adcafb78':'', 'font-weight': activeWindow===w? 600:300}\\\"\\n      :key=\\\"w.id\\\"\\n      @click.prevent=\\\"w.api.show()\\\"\\n      >🔳 {{w.name}}</a\\n    >\\n    <a\\n      href=\\\"#\\\"\\n      v-if=\\\"activeWindow && closeWindow\\\"\\n      @click.prevent=\\\"closeWindow(activeWindow)\\\"\\n      >❌ Close Window</a\\n    >\\n  </div>\\n</div>\\n\"","module.exports = \"<div\\n  v-for=\\\"w in windows\\\"\\n  v-show=\\\"w === activeWindow\\\"\\n  :key=\\\"w.id\\\"\\n  class=\\\"imjoy-windows\\\"\\n  :style=\\\"windowStyle\\\"\\n>\\n  <div\\n    v-if=\\\"showWindowTitle\\\"\\n    style=\\\"text-align: center;height:24px; background: #cacaca66;\\\"\\n  >\\n    <span\\n      style=\\\"font-size:1rem;font-family: Arial, Helvetica, sans-serif;line-height: 24px;\\\"\\n      >{{ w.name }}</span\\n    >\\n  </div>\\n  <div\\n    :id=\\\"w.window_id\\\"\\n    class=\\\"imjoy-window-container\\\"\\n    :style=\\\"{height: showWindowTitle?'calc(100% - 24px)': '100%'}\\\"\\n  ></div>\\n</div>\\n<div\\n  v-if=\\\"showEmpty && (!activeWindow || windows.length <= 0)\\\"\\n  class=\\\"imjoy-windows\\\"\\n  :style=\\\"windowStyle\\\"\\n>\\n  <img\\n    style=\\\"width:80px; position:absolute; left:50%; top: 50%; transform: translate(-50%, -50%);\\\"\\n    src=\\\"https://imjoy.io/static/img/imjoy-icon.svg\\\"\\n  />\\n</div>\\n\""],"sourceRoot":""}